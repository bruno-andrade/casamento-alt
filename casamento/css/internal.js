(() => {
  var Af = Object.create;
  var Xs = Object.defineProperty;
  var xf = Object.getOwnPropertyDescriptor;
  var Tf = Object.getOwnPropertyNames,
    Qc = Object.getOwnPropertySymbols,
    Sf = Object.getPrototypeOf,
    Zc = Object.prototype.hasOwnProperty,
    Cf = Object.prototype.propertyIsEnumerable;
  var Ta = (r, t, n) =>
      t in r
        ? Xs(r, t, { enumerable: !0, configurable: !0, writable: !0, value: n })
        : (r[t] = n),
    Sa = (r, t) => {
      for (var n in t || (t = {})) Zc.call(t, n) && Ta(r, n, t[n]);
      if (Qc) for (var n of Qc(t)) Cf.call(t, n) && Ta(r, n, t[n]);
      return r;
    };
  var an = ((r) =>
    typeof require != "undefined"
      ? require
      : typeof Proxy != "undefined"
      ? new Proxy(r, {
          get: (t, n) => (typeof require != "undefined" ? require : t)[n],
        })
      : r)(function (r) {
    if (typeof require != "undefined") return require.apply(this, arguments);
    throw new Error('Dynamic require of "' + r + '" is not supported');
  });
  var hr = (r, t) => () => (r && (t = r((r = 0))), t);
  var Lr = (r, t) => () => (
      t || r((t = { exports: {} }).exports, t), t.exports
    ),
    tu = (r, t) => {
      for (var n in t) Xs(r, n, { get: t[n], enumerable: !0 });
    },
    kf = (r, t, n, s) => {
      if ((t && typeof t == "object") || typeof t == "function")
        for (let l of Tf(t))
          !Zc.call(r, l) &&
            l !== n &&
            Xs(r, l, {
              get: () => t[l],
              enumerable: !(s = xf(t, l)) || s.enumerable,
            });
      return r;
    };
  var Qt = (r, t, n) => (
    (n = r != null ? Af(Sf(r)) : {}),
    kf(
      t || !r || !r.__esModule
        ? Xs(n, "default", { value: r, enumerable: !0 })
        : n,
      r,
    )
  );
  var W = (r, t, n) => (Ta(r, typeof t != "symbol" ? t + "" : t, n), n);
  var Ot = (r, t, n) =>
    new Promise((s, l) => {
      var h = (I) => {
          try {
            L(n.next(I));
          } catch (B) {
            l(B);
          }
        },
        w = (I) => {
          try {
            L(n.throw(I));
          } catch (B) {
            l(B);
          }
        },
        L = (I) => (I.done ? s(I.value) : Promise.resolve(I.value).then(h, w));
      L((n = n.apply(r, t)).next());
    });
  var Oe = Lr((Ks, Gs) => {
    (function (r, t) {
      typeof Ks == "object" && typeof Gs != "undefined"
        ? (Gs.exports = t())
        : typeof define == "function" && define.amd
        ? define(t)
        : ((r = typeof globalThis != "undefined" ? globalThis : r || self),
          (r.Rails = t()));
    })(Ks, function () {
      "use strict";
      let r =
          "a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",
        t = {
          selector:
            "button[data-remote]:not([form]), button[data-confirm]:not([form])",
          exclude: "form button",
        },
        n = "select[data-remote], input[data-remote], textarea[data-remote]",
        s = "form:not([data-turbo=true])",
        l =
          "form:not([data-turbo=true]) input[type=submit], form:not([data-turbo=true]) input[type=image], form:not([data-turbo=true]) button[type=submit], form:not([data-turbo=true]) button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",
        h =
          "input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",
        w =
          "input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",
        L = "input[name][type=file]:not([disabled])",
        I = "a[data-disable-with], a[data-disable]",
        B =
          "button[data-remote][data-disable-with], button[data-remote][data-disable]",
        Z = null,
        Tt = () => {
          let P = document.querySelector("meta[name=csp-nonce]");
          return (Z = P && P.content);
        },
        ft = () => Z || Tt(),
        vt =
          Element.prototype.matches ||
          Element.prototype.matchesSelector ||
          Element.prototype.mozMatchesSelector ||
          Element.prototype.msMatchesSelector ||
          Element.prototype.oMatchesSelector ||
          Element.prototype.webkitMatchesSelector,
        ht = function (P, q) {
          return q.exclude
            ? vt.call(P, q.selector) && !vt.call(P, q.exclude)
            : vt.call(P, q);
        },
        Pt = "_ujsData",
        Ct = (P, q) => (P[Pt] ? P[Pt][q] : void 0),
        bt = function (P, q, Et) {
          return P[Pt] || (P[Pt] = {}), (P[Pt][q] = Et);
        },
        H = (P) => Array.prototype.slice.call(document.querySelectorAll(P)),
        tt = function (P) {
          var q = !1;
          do {
            if (P.isContentEditable) {
              q = !0;
              break;
            }
            P = P.parentElement;
          } while (P);
          return q;
        },
        Mt = () => {
          let P = document.querySelector("meta[name=csrf-token]");
          return P && P.content;
        },
        zt = () => {
          let P = document.querySelector("meta[name=csrf-param]");
          return P && P.content;
        },
        $t = (P) => {
          let q = Mt();
          if (q) return P.setRequestHeader("X-CSRF-Token", q);
        },
        Vt = () => {
          let P = Mt(),
            q = zt();
          if (P && q)
            return H('form input[name="' + q + '"]').forEach(
              (Et) => (Et.value = P),
            );
        },
        ae = {
          "*": "*/*",
          text: "text/plain",
          html: "text/html",
          xml: "application/xml, text/xml",
          json: "application/json, text/javascript",
          script:
            "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
        },
        St = (P) => {
          P = Ne(P);
          var q = ve(P, function () {
            let Et = je(
              q.response != null ? q.response : q.responseText,
              q.getResponseHeader("Content-Type"),
            );
            return (
              Math.floor(q.status / 100) === 2
                ? typeof P.success == "function" &&
                  P.success(Et, q.statusText, q)
                : typeof P.error == "function" && P.error(Et, q.statusText, q),
              typeof P.complete == "function"
                ? P.complete(q, q.statusText)
                : void 0
            );
          });
          if (P.beforeSend && !P.beforeSend(q, P)) return !1;
          if (q.readyState === XMLHttpRequest.OPENED) return q.send(P.data);
        };
      var Ne = function (P) {
          return (
            (P.url = P.url || location.href),
            (P.type = P.type.toUpperCase()),
            P.type === "GET" &&
              P.data &&
              (P.url.indexOf("?") < 0
                ? (P.url += "?" + P.data)
                : (P.url += "&" + P.data)),
            P.dataType in ae || (P.dataType = "*"),
            (P.accept = ae[P.dataType]),
            P.dataType !== "*" && (P.accept += ", */*; q=0.01"),
            P
          );
        },
        ve = function (P, q) {
          let Et = new XMLHttpRequest();
          return (
            Et.open(P.type, P.url, !0),
            Et.setRequestHeader("Accept", P.accept),
            typeof P.data == "string" &&
              Et.setRequestHeader(
                "Content-Type",
                "application/x-www-form-urlencoded; charset=UTF-8",
              ),
            P.crossDomain ||
              (Et.setRequestHeader("X-Requested-With", "XMLHttpRequest"),
              $t(Et)),
            (Et.withCredentials = !!P.withCredentials),
            (Et.onreadystatechange = function () {
              if (Et.readyState === XMLHttpRequest.DONE) return q(Et);
            }),
            Et
          );
        },
        je = function (P, q) {
          if (typeof P == "string" && typeof q == "string") {
            if (q.match(/\bjson\b/))
              try {
                P = JSON.parse(P);
              } catch (Et) {}
            else if (q.match(/\b(?:java|ecma)script\b/)) {
              let Et = document.createElement("script");
              Et.setAttribute("nonce", ft()),
                (Et.text = P),
                document.head.appendChild(Et).parentNode.removeChild(Et);
            } else if (q.match(/\b(xml|html|svg)\b/)) {
              let Et = new DOMParser();
              q = q.replace(/;.+/, "");
              try {
                P = Et.parseFromString(P, q);
              } catch (re) {}
            }
          }
          return P;
        };
      let Te = (P) => P.href,
        U = function (P) {
          let q = document.createElement("a");
          q.href = location.href;
          let Et = document.createElement("a");
          try {
            return (
              (Et.href = P),
              !(
                ((!Et.protocol || Et.protocol === ":") && !Et.host) ||
                q.protocol + "//" + q.host == Et.protocol + "//" + Et.host
              )
            );
          } catch (re) {
            return !0;
          }
        },
        S,
        { CustomEvent: F } = window;
      typeof F != "function" &&
        ((F = function (P, q) {
          let Et = document.createEvent("CustomEvent");
          return Et.initCustomEvent(P, q.bubbles, q.cancelable, q.detail), Et;
        }),
        (F.prototype = window.Event.prototype),
        ({ preventDefault: S } = F.prototype),
        (F.prototype.preventDefault = function () {
          let P = S.call(this);
          return (
            this.cancelable &&
              !this.defaultPrevented &&
              Object.defineProperty(this, "defaultPrevented", {
                get() {
                  return !0;
                },
              }),
            P
          );
        }));
      let st = (P, q, Et) => {
          let re = new F(q, { bubbles: !0, cancelable: !0, detail: Et });
          return P.dispatchEvent(re), !re.defaultPrevented;
        },
        V = (P) => {
          st(P.target, "ujs:everythingStopped"),
            P.preventDefault(),
            P.stopPropagation(),
            P.stopImmediatePropagation();
        },
        Rt = (P, q, Et, re) =>
          P.addEventListener(Et, function (Wt) {
            let { target: xt } = Wt;
            for (; xt instanceof Element && !ht(xt, q); ) xt = xt.parentNode;
            xt instanceof Element &&
              re.call(xt, Wt) === !1 &&
              (Wt.preventDefault(), Wt.stopPropagation());
          }),
        pt = (P) => Array.prototype.slice.call(P),
        mt = (P, q) => {
          let Et = [P];
          ht(P, "form") && (Et = pt(P.elements));
          let re = [];
          return (
            Et.forEach(function (Wt) {
              !Wt.name ||
                Wt.disabled ||
                ht(Wt, "fieldset[disabled] *") ||
                (ht(Wt, "select")
                  ? pt(Wt.options).forEach(function (xt) {
                      xt.selected &&
                        re.push({ name: Wt.name, value: xt.value });
                    })
                  : (Wt.checked ||
                      ["radio", "checkbox", "submit"].indexOf(Wt.type) ===
                        -1) &&
                    re.push({ name: Wt.name, value: Wt.value }));
            }),
            q && re.push(q),
            re
              .map(function (Wt) {
                return Wt.name
                  ? `${encodeURIComponent(Wt.name)}=${encodeURIComponent(
                      Wt.value,
                    )}`
                  : Wt;
              })
              .join("&")
          );
        },
        wt = (P, q) =>
          ht(P, "form")
            ? pt(P.elements).filter((Et) => ht(Et, q))
            : pt(P.querySelectorAll(q)),
        It = (P) =>
          function (q) {
            Nt(this, P) || V(q);
          },
        _t = (P, q) => window.confirm(P);
      var Nt = function (P, q) {
        let Et,
          re = P.getAttribute("data-confirm");
        if (!re) return !0;
        let Wt = !1;
        if (st(P, "confirm")) {
          try {
            Wt = q.confirm(re, P);
          } catch (xt) {}
          Et = st(P, "confirm:complete", [Wt]);
        }
        return Wt && Et;
      };
      let pe = function (P) {
          this.disabled && V(P);
        },
        Re = (P) => {
          let q;
          if (P instanceof Event) {
            if (y(P)) return;
            q = P.target;
          } else q = P;
          if (!tt(q)) {
            if (ht(q, I)) return Dt(q);
            if (ht(q, B) || ht(q, w)) return d(q);
            if (ht(q, s)) return f(q);
          }
        },
        qe = (P) => {
          let q = P instanceof Event ? P.target : P;
          if (!tt(q)) {
            if (ht(q, I)) return we(q);
            if (ht(q, B) || ht(q, h)) return A(q);
            if (ht(q, s)) return R(q);
          }
        };
      var we = function (P) {
          if (Ct(P, "ujs:disabled")) return;
          let q = P.getAttribute("data-disable-with");
          return (
            q != null &&
              (bt(P, "ujs:enable-with", P.innerHTML), (P.innerHTML = q)),
            P.addEventListener("click", V),
            bt(P, "ujs:disabled", !0)
          );
        },
        Dt = function (P) {
          let q = Ct(P, "ujs:enable-with");
          return (
            q != null && ((P.innerHTML = q), bt(P, "ujs:enable-with", null)),
            P.removeEventListener("click", V),
            bt(P, "ujs:disabled", null)
          );
        },
        R = (P) => wt(P, h).forEach(A),
        A = function (P) {
          if (Ct(P, "ujs:disabled")) return;
          let q = P.getAttribute("data-disable-with");
          return (
            q != null &&
              (ht(P, "button")
                ? (bt(P, "ujs:enable-with", P.innerHTML), (P.innerHTML = q))
                : (bt(P, "ujs:enable-with", P.value), (P.value = q))),
            (P.disabled = !0),
            bt(P, "ujs:disabled", !0)
          );
        },
        f = (P) => wt(P, w).forEach((q) => d(q)),
        d = function (P) {
          let q = Ct(P, "ujs:enable-with");
          return (
            q != null &&
              (ht(P, "button") ? (P.innerHTML = q) : (P.value = q),
              bt(P, "ujs:enable-with", null)),
            (P.disabled = !1),
            bt(P, "ujs:disabled", null)
          );
        },
        y = function (P) {
          let q = P.detail ? P.detail[0] : void 0;
          return q && q.getResponseHeader("X-Xhr-Redirect");
        };
      let b = (P) =>
          function (q) {
            let Et = this,
              re = Et.getAttribute("data-method");
            if (!re || tt(this)) return;
            let Wt = P.href(Et),
              xt = Mt(),
              Tr = zt(),
              qt = document.createElement("form"),
              Se = `<input name='_method' value='${re}' type='hidden' />`;
            Tr &&
              xt &&
              !U(Wt) &&
              (Se += `<input name='${Tr}' value='${xt}' type='hidden' />`),
              (Se += '<input type="submit" />'),
              (qt.method = "post"),
              (qt.action = Wt),
              (qt.target = Et.target),
              (qt.innerHTML = Se),
              (qt.style.display = "none"),
              document.body.appendChild(qt),
              qt.querySelector('[type="submit"]').click(),
              V(q);
          },
        Kt = function (P) {
          let q = P.getAttribute("data-remote");
          return q != null && q !== "false";
        },
        oe = (P) =>
          function (q) {
            let Et,
              re,
              Wt,
              xt = this;
            if (!Kt(xt)) return !0;
            if (!st(xt, "ajax:before") || tt(xt))
              return st(xt, "ajax:stopped"), !1;
            let Tr = xt.getAttribute("data-with-credentials"),
              qt = xt.getAttribute("data-type") || "script";
            if (ht(xt, s)) {
              let Se = Ct(xt, "ujs:submit-button");
              (re =
                Ct(xt, "ujs:submit-button-formmethod") ||
                xt.getAttribute("method") ||
                "get"),
                (Wt =
                  Ct(xt, "ujs:submit-button-formaction") ||
                  xt.getAttribute("action") ||
                  location.href),
                re.toUpperCase() === "GET" && (Wt = Wt.replace(/\?.*$/, "")),
                xt.enctype === "multipart/form-data"
                  ? ((Et = new FormData(xt)),
                    Se != null && Et.append(Se.name, Se.value))
                  : (Et = mt(xt, Se)),
                bt(xt, "ujs:submit-button", null),
                bt(xt, "ujs:submit-button-formmethod", null),
                bt(xt, "ujs:submit-button-formaction", null);
            } else
              ht(xt, t) || ht(xt, n)
                ? ((re = xt.getAttribute("data-method")),
                  (Wt = xt.getAttribute("data-url")),
                  (Et = mt(xt, xt.getAttribute("data-params"))))
                : ((re = xt.getAttribute("data-method")),
                  (Wt = P.href(xt)),
                  (Et = xt.getAttribute("data-params")));
            St({
              type: re || "GET",
              url: Wt,
              data: Et,
              dataType: qt,
              beforeSend(Se, Dr) {
                return st(xt, "ajax:beforeSend", [Se, Dr])
                  ? st(xt, "ajax:send", [Se])
                  : (st(xt, "ajax:stopped"), !1);
              },
              success(...Se) {
                return st(xt, "ajax:success", Se);
              },
              error(...Se) {
                return st(xt, "ajax:error", Se);
              },
              complete(...Se) {
                return st(xt, "ajax:complete", Se);
              },
              crossDomain: U(Wt),
              withCredentials: Tr != null && Tr !== "false",
            }),
              V(q);
          },
        ye = function (P) {
          let q = this,
            { form: Et } = q;
          if (!!Et)
            return (
              q.name &&
                bt(Et, "ujs:submit-button", { name: q.name, value: q.value }),
              bt(Et, "ujs:formnovalidate-button", q.formNoValidate),
              bt(
                Et,
                "ujs:submit-button-formaction",
                q.getAttribute("formaction"),
              ),
              bt(
                Et,
                "ujs:submit-button-formmethod",
                q.getAttribute("formmethod"),
              )
            );
        },
        Me = function (P) {
          let q = this,
            Et = (q.getAttribute("data-method") || "GET").toUpperCase(),
            re = q.getAttribute("data-params"),
            xt = (P.metaKey || P.ctrlKey) && Et === "GET" && !re;
          ((P.button != null && P.button !== 0) || xt) &&
            P.stopImmediatePropagation();
        },
        _e = {
          $: H,
          ajax: St,
          buttonClickSelector: t,
          buttonDisableSelector: B,
          confirm: _t,
          cspNonce: ft,
          csrfToken: Mt,
          csrfParam: zt,
          CSRFProtection: $t,
          delegate: Rt,
          disableElement: qe,
          enableElement: Re,
          fileInputSelector: L,
          fire: st,
          formElements: wt,
          formEnableSelector: w,
          formDisableSelector: h,
          formInputClickSelector: l,
          formSubmitButtonClick: ye,
          formSubmitSelector: s,
          getData: Ct,
          handleDisabledElement: pe,
          href: Te,
          inputChangeSelector: n,
          isCrossDomain: U,
          linkClickSelector: r,
          linkDisableSelector: I,
          loadCSPNonce: Tt,
          matches: ht,
          preventInsignificantClick: Me,
          refreshCSRFTokens: Vt,
          serializeElement: mt,
          setData: bt,
          stopEverything: V,
        },
        Ze = It(_e);
      _e.handleConfirm = Ze;
      let dr = b(_e);
      _e.handleMethod = dr;
      let fr = oe(_e);
      _e.handleRemote = fr;
      let yi = function () {
        if (window._rails_loaded)
          throw new Error("rails-ujs has already been loaded!");
        return (
          window.addEventListener("pageshow", function () {
            H(w).forEach(function (P) {
              Ct(P, "ujs:disabled") && Re(P);
            }),
              H(I).forEach(function (P) {
                Ct(P, "ujs:disabled") && Re(P);
              });
          }),
          Rt(document, I, "ajax:complete", Re),
          Rt(document, I, "ajax:stopped", Re),
          Rt(document, B, "ajax:complete", Re),
          Rt(document, B, "ajax:stopped", Re),
          Rt(document, r, "click", Me),
          Rt(document, r, "click", pe),
          Rt(document, r, "click", Ze),
          Rt(document, r, "click", qe),
          Rt(document, r, "click", fr),
          Rt(document, r, "click", dr),
          Rt(document, t, "click", Me),
          Rt(document, t, "click", pe),
          Rt(document, t, "click", Ze),
          Rt(document, t, "click", qe),
          Rt(document, t, "click", fr),
          Rt(document, n, "change", pe),
          Rt(document, n, "change", Ze),
          Rt(document, n, "change", fr),
          Rt(document, s, "submit", pe),
          Rt(document, s, "submit", Ze),
          Rt(document, s, "submit", fr),
          Rt(document, s, "submit", (P) => setTimeout(() => qe(P), 13)),
          Rt(document, s, "ajax:send", qe),
          Rt(document, s, "ajax:complete", Re),
          Rt(document, l, "click", Me),
          Rt(document, l, "click", pe),
          Rt(document, l, "click", Ze),
          Rt(document, l, "click", ye),
          document.addEventListener("DOMContentLoaded", Vt),
          document.addEventListener("DOMContentLoaded", Tt),
          (window._rails_loaded = !0)
        );
      };
      if (
        ((_e.start = yi), typeof jQuery != "undefined" && jQuery && jQuery.ajax)
      ) {
        if (jQuery.rails)
          throw new Error(
            "If you load both jquery_ujs and rails-ujs, use rails-ujs only.",
          );
        (jQuery.rails = _e),
          jQuery.ajaxPrefilter(function (P, q, Et) {
            if (!P.crossDomain) return $t(Et);
          });
      }
      return (
        typeof Ks != "object" &&
          typeof Gs == "undefined" &&
          ((window.Rails = _e), st(document, "rails:attachBindings") && yi()),
        _e
      );
    });
  });
  var Ca = Lr((Ys, eu) => {
    (function (r, t) {
      typeof Ys == "object" && typeof eu != "undefined"
        ? t(Ys)
        : typeof define == "function" && define.amd
        ? define(["exports"], t)
        : ((r = typeof globalThis != "undefined" ? globalThis : r || self),
          t((r.ActiveStorage = {})));
    })(Ys, function (r) {
      "use strict";
      var t = { exports: {} };
      (function (U, S) {
        (function (F) {
          U.exports = F();
        })(function (F) {
          var st = [
            "0",
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "a",
            "b",
            "c",
            "d",
            "e",
            "f",
          ];
          function V(R, A) {
            var f = R[0],
              d = R[1],
              y = R[2],
              b = R[3];
            (f += (((d & y) | (~d & b)) + A[0] - 680876936) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[1] - 389564586) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[2] + 606105819) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[3] - 1044525330) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & y) | (~d & b)) + A[4] - 176418897) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[5] + 1200080426) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[6] - 1473231341) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[7] - 45705983) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & y) | (~d & b)) + A[8] + 1770035416) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[9] - 1958414417) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[10] - 42063) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[11] - 1990404162) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & y) | (~d & b)) + A[12] + 1804603682) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[13] - 40341101) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[14] - 1502002290) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[15] + 1236535329) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[1] - 165796510) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[6] - 1069501632) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[11] + 643717713) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[0] - 373897302) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[5] - 701558691) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[10] + 38016083) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[15] - 660478335) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[4] - 405537848) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[9] + 568446438) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[14] - 1019803690) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[3] - 187363961) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[8] + 1163531501) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[13] - 1444681467) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[2] - 51403784) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[7] + 1735328473) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[12] - 1926607734) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += ((d ^ y ^ b) + A[5] - 378558) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[8] - 2022574463) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[11] + 1839030562) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[14] - 35309556) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((d ^ y ^ b) + A[1] - 1530992060) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[4] + 1272893353) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[7] - 155497632) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[10] - 1094730640) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((d ^ y ^ b) + A[13] + 681279174) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[0] - 358537222) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[3] - 722521979) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[6] + 76029189) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((d ^ y ^ b) + A[9] - 640364487) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[12] - 421815835) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[15] + 530742520) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[2] - 995338651) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[0] - 198630844) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[7] + 1126891415) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[14] - 1416354905) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[5] - 57434055) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[12] + 1700485571) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[3] - 1894986606) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[10] - 1051523) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[1] - 2054922799) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[8] + 1873313359) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[15] - 30611744) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[6] - 1560198380) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[13] + 1309151649) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[4] - 145523070) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[11] - 1120210379) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[2] + 718787259) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[9] - 343485551) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (R[0] = (f + R[0]) | 0),
              (R[1] = (d + R[1]) | 0),
              (R[2] = (y + R[2]) | 0),
              (R[3] = (b + R[3]) | 0);
          }
          function Rt(R) {
            var A = [],
              f;
            for (f = 0; f < 64; f += 4)
              A[f >> 2] =
                R.charCodeAt(f) +
                (R.charCodeAt(f + 1) << 8) +
                (R.charCodeAt(f + 2) << 16) +
                (R.charCodeAt(f + 3) << 24);
            return A;
          }
          function pt(R) {
            var A = [],
              f;
            for (f = 0; f < 64; f += 4)
              A[f >> 2] =
                R[f] + (R[f + 1] << 8) + (R[f + 2] << 16) + (R[f + 3] << 24);
            return A;
          }
          function mt(R) {
            var A = R.length,
              f = [1732584193, -271733879, -1732584194, 271733878],
              d,
              y,
              b,
              Kt,
              oe,
              ye;
            for (d = 64; d <= A; d += 64) V(f, Rt(R.substring(d - 64, d)));
            for (
              R = R.substring(d - 64),
                y = R.length,
                b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                d = 0;
              d < y;
              d += 1
            )
              b[d >> 2] |= R.charCodeAt(d) << (d % 4 << 3);
            if (((b[d >> 2] |= 128 << (d % 4 << 3)), d > 55))
              for (V(f, b), d = 0; d < 16; d += 1) b[d] = 0;
            return (
              (Kt = A * 8),
              (Kt = Kt.toString(16).match(/(.*?)(.{0,8})$/)),
              (oe = parseInt(Kt[2], 16)),
              (ye = parseInt(Kt[1], 16) || 0),
              (b[14] = oe),
              (b[15] = ye),
              V(f, b),
              f
            );
          }
          function wt(R) {
            var A = R.length,
              f = [1732584193, -271733879, -1732584194, 271733878],
              d,
              y,
              b,
              Kt,
              oe,
              ye;
            for (d = 64; d <= A; d += 64) V(f, pt(R.subarray(d - 64, d)));
            for (
              R = d - 64 < A ? R.subarray(d - 64) : new Uint8Array(0),
                y = R.length,
                b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                d = 0;
              d < y;
              d += 1
            )
              b[d >> 2] |= R[d] << (d % 4 << 3);
            if (((b[d >> 2] |= 128 << (d % 4 << 3)), d > 55))
              for (V(f, b), d = 0; d < 16; d += 1) b[d] = 0;
            return (
              (Kt = A * 8),
              (Kt = Kt.toString(16).match(/(.*?)(.{0,8})$/)),
              (oe = parseInt(Kt[2], 16)),
              (ye = parseInt(Kt[1], 16) || 0),
              (b[14] = oe),
              (b[15] = ye),
              V(f, b),
              f
            );
          }
          function It(R) {
            var A = "",
              f;
            for (f = 0; f < 4; f += 1)
              A += st[(R >> (f * 8 + 4)) & 15] + st[(R >> (f * 8)) & 15];
            return A;
          }
          function _t(R) {
            var A;
            for (A = 0; A < R.length; A += 1) R[A] = It(R[A]);
            return R.join("");
          }
          _t(mt("hello")),
            typeof ArrayBuffer != "undefined" &&
              !ArrayBuffer.prototype.slice &&
              (function () {
                function R(A, f) {
                  return (
                    (A = A | 0 || 0),
                    A < 0 ? Math.max(A + f, 0) : Math.min(A, f)
                  );
                }
                ArrayBuffer.prototype.slice = function (A, f) {
                  var d = this.byteLength,
                    y = R(A, d),
                    b = d,
                    Kt,
                    oe,
                    ye,
                    Me;
                  return (
                    f !== F && (b = R(f, d)),
                    y > b
                      ? new ArrayBuffer(0)
                      : ((Kt = b - y),
                        (oe = new ArrayBuffer(Kt)),
                        (ye = new Uint8Array(oe)),
                        (Me = new Uint8Array(this, y, Kt)),
                        ye.set(Me),
                        oe)
                  );
                };
              })();
          function Nt(R) {
            return (
              /[\u0080-\uFFFF]/.test(R) &&
                (R = unescape(encodeURIComponent(R))),
              R
            );
          }
          function pe(R, A) {
            var f = R.length,
              d = new ArrayBuffer(f),
              y = new Uint8Array(d),
              b;
            for (b = 0; b < f; b += 1) y[b] = R.charCodeAt(b);
            return A ? y : d;
          }
          function Re(R) {
            return String.fromCharCode.apply(null, new Uint8Array(R));
          }
          function qe(R, A, f) {
            var d = new Uint8Array(R.byteLength + A.byteLength);
            return (
              d.set(new Uint8Array(R)),
              d.set(new Uint8Array(A), R.byteLength),
              f ? d : d.buffer
            );
          }
          function we(R) {
            var A = [],
              f = R.length,
              d;
            for (d = 0; d < f - 1; d += 2) A.push(parseInt(R.substr(d, 2), 16));
            return String.fromCharCode.apply(String, A);
          }
          function Dt() {
            this.reset();
          }
          return (
            (Dt.prototype.append = function (R) {
              return this.appendBinary(Nt(R)), this;
            }),
            (Dt.prototype.appendBinary = function (R) {
              (this._buff += R), (this._length += R.length);
              var A = this._buff.length,
                f;
              for (f = 64; f <= A; f += 64)
                V(this._hash, Rt(this._buff.substring(f - 64, f)));
              return (this._buff = this._buff.substring(f - 64)), this;
            }),
            (Dt.prototype.end = function (R) {
              var A = this._buff,
                f = A.length,
                d,
                y = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                b;
              for (d = 0; d < f; d += 1)
                y[d >> 2] |= A.charCodeAt(d) << (d % 4 << 3);
              return (
                this._finish(y, f),
                (b = _t(this._hash)),
                R && (b = we(b)),
                this.reset(),
                b
              );
            }),
            (Dt.prototype.reset = function () {
              return (
                (this._buff = ""),
                (this._length = 0),
                (this._hash = [1732584193, -271733879, -1732584194, 271733878]),
                this
              );
            }),
            (Dt.prototype.getState = function () {
              return {
                buff: this._buff,
                length: this._length,
                hash: this._hash.slice(),
              };
            }),
            (Dt.prototype.setState = function (R) {
              return (
                (this._buff = R.buff),
                (this._length = R.length),
                (this._hash = R.hash),
                this
              );
            }),
            (Dt.prototype.destroy = function () {
              delete this._hash, delete this._buff, delete this._length;
            }),
            (Dt.prototype._finish = function (R, A) {
              var f = A,
                d,
                y,
                b;
              if (((R[f >> 2] |= 128 << (f % 4 << 3)), f > 55))
                for (V(this._hash, R), f = 0; f < 16; f += 1) R[f] = 0;
              (d = this._length * 8),
                (d = d.toString(16).match(/(.*?)(.{0,8})$/)),
                (y = parseInt(d[2], 16)),
                (b = parseInt(d[1], 16) || 0),
                (R[14] = y),
                (R[15] = b),
                V(this._hash, R);
            }),
            (Dt.hash = function (R, A) {
              return Dt.hashBinary(Nt(R), A);
            }),
            (Dt.hashBinary = function (R, A) {
              var f = mt(R),
                d = _t(f);
              return A ? we(d) : d;
            }),
            (Dt.ArrayBuffer = function () {
              this.reset();
            }),
            (Dt.ArrayBuffer.prototype.append = function (R) {
              var A = qe(this._buff.buffer, R, !0),
                f = A.length,
                d;
              for (this._length += R.byteLength, d = 64; d <= f; d += 64)
                V(this._hash, pt(A.subarray(d - 64, d)));
              return (
                (this._buff =
                  d - 64 < f
                    ? new Uint8Array(A.buffer.slice(d - 64))
                    : new Uint8Array(0)),
                this
              );
            }),
            (Dt.ArrayBuffer.prototype.end = function (R) {
              var A = this._buff,
                f = A.length,
                d = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                y,
                b;
              for (y = 0; y < f; y += 1) d[y >> 2] |= A[y] << (y % 4 << 3);
              return (
                this._finish(d, f),
                (b = _t(this._hash)),
                R && (b = we(b)),
                this.reset(),
                b
              );
            }),
            (Dt.ArrayBuffer.prototype.reset = function () {
              return (
                (this._buff = new Uint8Array(0)),
                (this._length = 0),
                (this._hash = [1732584193, -271733879, -1732584194, 271733878]),
                this
              );
            }),
            (Dt.ArrayBuffer.prototype.getState = function () {
              var R = Dt.prototype.getState.call(this);
              return (R.buff = Re(R.buff)), R;
            }),
            (Dt.ArrayBuffer.prototype.setState = function (R) {
              return (
                (R.buff = pe(R.buff, !0)), Dt.prototype.setState.call(this, R)
              );
            }),
            (Dt.ArrayBuffer.prototype.destroy = Dt.prototype.destroy),
            (Dt.ArrayBuffer.prototype._finish = Dt.prototype._finish),
            (Dt.ArrayBuffer.hash = function (R, A) {
              var f = wt(new Uint8Array(R)),
                d = _t(f);
              return A ? we(d) : d;
            }),
            Dt
          );
        });
      })(t);
      var n = t.exports;
      let s =
        File.prototype.slice ||
        File.prototype.mozSlice ||
        File.prototype.webkitSlice;
      class l {
        static create(S, F) {
          new l(S).create(F);
        }
        constructor(S) {
          (this.file = S),
            (this.chunkSize = 2097152),
            (this.chunkCount = Math.ceil(this.file.size / this.chunkSize)),
            (this.chunkIndex = 0);
        }
        create(S) {
          (this.callback = S),
            (this.md5Buffer = new n.ArrayBuffer()),
            (this.fileReader = new FileReader()),
            this.fileReader.addEventListener("load", (F) =>
              this.fileReaderDidLoad(F),
            ),
            this.fileReader.addEventListener("error", (F) =>
              this.fileReaderDidError(F),
            ),
            this.readNextChunk();
        }
        fileReaderDidLoad(S) {
          if ((this.md5Buffer.append(S.target.result), !this.readNextChunk())) {
            let F = this.md5Buffer.end(!0),
              st = btoa(F);
            this.callback(null, st);
          }
        }
        fileReaderDidError(S) {
          this.callback(`Error reading ${this.file.name}`);
        }
        readNextChunk() {
          if (
            this.chunkIndex < this.chunkCount ||
            (this.chunkIndex == 0 && this.chunkCount == 0)
          ) {
            let S = this.chunkIndex * this.chunkSize,
              F = Math.min(S + this.chunkSize, this.file.size),
              st = s.call(this.file, S, F);
            return this.fileReader.readAsArrayBuffer(st), this.chunkIndex++, !0;
          } else return !1;
        }
      }
      function h(U) {
        let S = L(document.head, `meta[name="${U}"]`);
        if (S) return S.getAttribute("content");
      }
      function w(U, S) {
        typeof U == "string" && ((S = U), (U = document));
        let F = U.querySelectorAll(S);
        return B(F);
      }
      function L(U, S) {
        return (
          typeof U == "string" && ((S = U), (U = document)), U.querySelector(S)
        );
      }
      function I(U, S, F = {}) {
        let { disabled: st } = U,
          { bubbles: V, cancelable: Rt, detail: pt } = F,
          mt = document.createEvent("Event");
        mt.initEvent(S, V || !0, Rt || !0), (mt.detail = pt || {});
        try {
          (U.disabled = !1), U.dispatchEvent(mt);
        } finally {
          U.disabled = st;
        }
        return mt;
      }
      function B(U) {
        return Array.isArray(U)
          ? U
          : Array.from
          ? Array.from(U)
          : [].slice.call(U);
      }
      class Z {
        constructor(S, F, st, V = {}) {
          (this.file = S),
            (this.attributes = {
              filename: S.name,
              content_type: S.type || "application/octet-stream",
              byte_size: S.size,
              checksum: F,
            }),
            (this.xhr = new XMLHttpRequest()),
            this.xhr.open("POST", st, !0),
            (this.xhr.responseType = "json"),
            this.xhr.setRequestHeader("Content-Type", "application/json"),
            this.xhr.setRequestHeader("Accept", "application/json"),
            this.xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"),
            Object.keys(V).forEach((pt) => {
              this.xhr.setRequestHeader(pt, V[pt]);
            });
          let Rt = h("csrf-token");
          Rt != null && this.xhr.setRequestHeader("X-CSRF-Token", Rt),
            this.xhr.addEventListener("load", (pt) => this.requestDidLoad(pt)),
            this.xhr.addEventListener("error", (pt) =>
              this.requestDidError(pt),
            );
        }
        get status() {
          return this.xhr.status;
        }
        get response() {
          let { responseType: S, response: F } = this.xhr;
          return S == "json" ? F : JSON.parse(F);
        }
        create(S) {
          (this.callback = S),
            this.xhr.send(JSON.stringify({ blob: this.attributes }));
        }
        requestDidLoad(S) {
          if (this.status >= 200 && this.status < 300) {
            let { response: F } = this,
              { direct_upload: st } = F;
            delete F.direct_upload,
              (this.attributes = F),
              (this.directUploadData = st),
              this.callback(null, this.toJSON());
          } else this.requestDidError(S);
        }
        requestDidError(S) {
          this.callback(
            `Error creating Blob for "${this.file.name}". Status: ${this.status}`,
          );
        }
        toJSON() {
          let S = {};
          for (let F in this.attributes) S[F] = this.attributes[F];
          return S;
        }
      }
      class Tt {
        constructor(S) {
          (this.blob = S), (this.file = S.file);
          let { url: F, headers: st } = S.directUploadData;
          (this.xhr = new XMLHttpRequest()),
            this.xhr.open("PUT", F, !0),
            (this.xhr.responseType = "text");
          for (let V in st) this.xhr.setRequestHeader(V, st[V]);
          this.xhr.addEventListener("load", (V) => this.requestDidLoad(V)),
            this.xhr.addEventListener("error", (V) => this.requestDidError(V));
        }
        create(S) {
          (this.callback = S), this.xhr.send(this.file.slice());
        }
        requestDidLoad(S) {
          let { status: F, response: st } = this.xhr;
          F >= 200 && F < 300
            ? this.callback(null, st)
            : this.requestDidError(S);
        }
        requestDidError(S) {
          this.callback(
            `Error storing "${this.file.name}". Status: ${this.xhr.status}`,
          );
        }
      }
      let ft = 0;
      class vt {
        constructor(S, F, st, V = {}) {
          (this.id = ++ft),
            (this.file = S),
            (this.url = F),
            (this.delegate = st),
            (this.customHeaders = V);
        }
        create(S) {
          l.create(this.file, (F, st) => {
            if (F) {
              S(F);
              return;
            }
            let V = new Z(this.file, st, this.url, this.customHeaders);
            ht(this.delegate, "directUploadWillCreateBlobWithXHR", V.xhr),
              V.create((Rt) => {
                if (Rt) S(Rt);
                else {
                  let pt = new Tt(V);
                  ht(this.delegate, "directUploadWillStoreFileWithXHR", pt.xhr),
                    pt.create((mt) => {
                      mt ? S(mt) : S(null, V.toJSON());
                    });
                }
              });
          });
        }
      }
      function ht(U, S, ...F) {
        if (U && typeof U[S] == "function") return U[S](...F);
      }
      class Pt {
        constructor(S, F) {
          (this.input = S),
            (this.file = F),
            (this.directUpload = new vt(this.file, this.url, this)),
            this.dispatch("initialize");
        }
        start(S) {
          let F = document.createElement("input");
          (F.type = "hidden"),
            (F.name = this.input.name),
            this.input.insertAdjacentElement("beforebegin", F),
            this.dispatch("start"),
            this.directUpload.create((st, V) => {
              st
                ? (F.parentNode.removeChild(F), this.dispatchError(st))
                : (F.value = V.signed_id),
                this.dispatch("end"),
                S(st);
            });
        }
        uploadRequestDidProgress(S) {
          let F = (S.loaded / S.total) * 100;
          F && this.dispatch("progress", { progress: F });
        }
        get url() {
          return this.input.getAttribute("data-direct-upload-url");
        }
        dispatch(S, F = {}) {
          return (
            (F.file = this.file),
            (F.id = this.directUpload.id),
            I(this.input, `direct-upload:${S}`, { detail: F })
          );
        }
        dispatchError(S) {
          this.dispatch("error", { error: S }).defaultPrevented || alert(S);
        }
        directUploadWillCreateBlobWithXHR(S) {
          this.dispatch("before-blob-request", { xhr: S });
        }
        directUploadWillStoreFileWithXHR(S) {
          this.dispatch("before-storage-request", { xhr: S }),
            S.upload.addEventListener("progress", (F) =>
              this.uploadRequestDidProgress(F),
            );
        }
      }
      let Ct = "input[type=file][data-direct-upload-url]:not([disabled])";
      class bt {
        constructor(S) {
          (this.form = S),
            (this.inputs = w(S, Ct).filter((F) => F.files.length));
        }
        start(S) {
          let F = this.createDirectUploadControllers(),
            st = () => {
              let V = F.shift();
              V
                ? V.start((Rt) => {
                    Rt ? (S(Rt), this.dispatch("end")) : st();
                  })
                : (S(), this.dispatch("end"));
            };
          this.dispatch("start"), st();
        }
        createDirectUploadControllers() {
          let S = [];
          return (
            this.inputs.forEach((F) => {
              B(F.files).forEach((st) => {
                let V = new Pt(F, st);
                S.push(V);
              });
            }),
            S
          );
        }
        dispatch(S, F = {}) {
          return I(this.form, `direct-uploads:${S}`, { detail: F });
        }
      }
      let H = "data-direct-uploads-processing",
        tt = new WeakMap(),
        Mt = !1;
      function zt() {
        Mt ||
          ((Mt = !0),
          document.addEventListener("click", $t, !0),
          document.addEventListener("submit", Vt, !0),
          document.addEventListener("ajax:before", ae));
      }
      function $t(U) {
        let S = U.target.closest("button, input");
        S && S.type === "submit" && S.form && tt.set(S.form, S);
      }
      function Vt(U) {
        St(U);
      }
      function ae(U) {
        U.target.tagName == "FORM" && St(U);
      }
      function St(U) {
        let S = U.target;
        if (S.hasAttribute(H)) {
          U.preventDefault();
          return;
        }
        let F = new bt(S),
          { inputs: st } = F;
        st.length &&
          (U.preventDefault(),
          S.setAttribute(H, ""),
          st.forEach(ve),
          F.start((V) => {
            S.removeAttribute(H), V ? st.forEach(je) : Ne(S);
          }));
      }
      function Ne(U) {
        let S = tt.get(U) || L(U, "input[type=submit], button[type=submit]");
        if (S) {
          let { disabled: F } = S;
          (S.disabled = !1), S.focus(), S.click(), (S.disabled = F);
        } else (S = document.createElement("input")), (S.type = "submit"), (S.style.display = "none"), U.appendChild(S), S.click(), U.removeChild(S);
        tt.delete(U);
      }
      function ve(U) {
        U.disabled = !0;
      }
      function je(U) {
        U.disabled = !1;
      }
      function Te() {
        window.ActiveStorage && zt();
      }
      setTimeout(Te, 1),
        (r.DirectUpload = vt),
        (r.DirectUploadController = Pt),
        (r.DirectUploadsController = bt),
        (r.start = zt),
        Object.defineProperty(r, "__esModule", { value: !0 });
    });
  });
  var Jr,
    ho = hr(() => {
      Jr = {
        logger: typeof console != "undefined" ? console : void 0,
        WebSocket: typeof WebSocket != "undefined" ? WebSocket : void 0,
      };
    });
  var he,
    Hi = hr(() => {
      ho();
      he = {
        log(...r) {
          this.enabled &&
            (r.push(Date.now()), Jr.logger.log("[ActionCable]", ...r));
        },
      };
    });
  var pn,
    fo,
    bn,
    mo,
    Qa = hr(() => {
      Hi();
      (pn = () => new Date().getTime()),
        (fo = (r) => (pn() - r) / 1e3),
        (bn = class {
          constructor(t) {
            (this.visibilityDidChange = this.visibilityDidChange.bind(this)),
              (this.connection = t),
              (this.reconnectAttempts = 0);
          }
          start() {
            this.isRunning() ||
              ((this.startedAt = pn()),
              delete this.stoppedAt,
              this.startPolling(),
              addEventListener("visibilitychange", this.visibilityDidChange),
              he.log(
                `ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`,
              ));
          }
          stop() {
            this.isRunning() &&
              ((this.stoppedAt = pn()),
              this.stopPolling(),
              removeEventListener("visibilitychange", this.visibilityDidChange),
              he.log("ConnectionMonitor stopped"));
          }
          isRunning() {
            return this.startedAt && !this.stoppedAt;
          }
          recordPing() {
            this.pingedAt = pn();
          }
          recordConnect() {
            (this.reconnectAttempts = 0),
              this.recordPing(),
              delete this.disconnectedAt,
              he.log("ConnectionMonitor recorded connect");
          }
          recordDisconnect() {
            (this.disconnectedAt = pn()),
              he.log("ConnectionMonitor recorded disconnect");
          }
          startPolling() {
            this.stopPolling(), this.poll();
          }
          stopPolling() {
            clearTimeout(this.pollTimeout);
          }
          poll() {
            this.pollTimeout = setTimeout(() => {
              this.reconnectIfStale(), this.poll();
            }, this.getPollInterval());
          }
          getPollInterval() {
            let { staleThreshold: t, reconnectionBackoffRate: n } =
                this.constructor,
              s = Math.pow(1 + n, Math.min(this.reconnectAttempts, 10)),
              h = (this.reconnectAttempts === 0 ? 1 : n) * Math.random();
            return t * 1e3 * s * (1 + h);
          }
          reconnectIfStale() {
            this.connectionIsStale() &&
              (he.log(
                `ConnectionMonitor detected stale connection. reconnectAttempts = ${
                  this.reconnectAttempts
                }, time stale = ${fo(this.refreshedAt)} s, stale threshold = ${
                  this.constructor.staleThreshold
                } s`,
              ),
              this.reconnectAttempts++,
              this.disconnectedRecently()
                ? he.log(
                    `ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${fo(
                      this.disconnectedAt,
                    )} s`,
                  )
                : (he.log("ConnectionMonitor reopening"),
                  this.connection.reopen()));
          }
          get refreshedAt() {
            return this.pingedAt ? this.pingedAt : this.startedAt;
          }
          connectionIsStale() {
            return fo(this.refreshedAt) > this.constructor.staleThreshold;
          }
          disconnectedRecently() {
            return (
              this.disconnectedAt &&
              fo(this.disconnectedAt) < this.constructor.staleThreshold
            );
          }
          visibilityDidChange() {
            document.visibilityState === "visible" &&
              setTimeout(() => {
                (this.connectionIsStale() || !this.connection.isOpen()) &&
                  (he.log(
                    `ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`,
                  ),
                  this.connection.reopen());
              }, 200);
          }
        });
      bn.staleThreshold = 6;
      bn.reconnectionBackoffRate = 0.15;
      mo = bn;
    });
  var vn,
    Za = hr(() => {
      vn = {
        message_types: {
          welcome: "welcome",
          disconnect: "disconnect",
          ping: "ping",
          confirmation: "confirm_subscription",
          rejection: "reject_subscription",
        },
        disconnect_reasons: {
          unauthorized: "unauthorized",
          invalid_request: "invalid_request",
          server_restart: "server_restart",
          remote: "remote",
        },
        default_mount_path: "/cable",
        protocols: ["actioncable-v1-json", "actioncable-unsupported"],
      };
    });
  var yn,
    tl,
    Dm,
    gu,
    wn,
    go,
    el = hr(() => {
      ho();
      Qa();
      Za();
      Hi();
      ({ message_types: yn, protocols: tl } = vn),
        (Dm = tl.slice(0, tl.length - 1)),
        (gu = [].indexOf),
        (wn = class {
          constructor(t) {
            (this.open = this.open.bind(this)),
              (this.consumer = t),
              (this.subscriptions = this.consumer.subscriptions),
              (this.monitor = new mo(this)),
              (this.disconnected = !0);
          }
          send(t) {
            return this.isOpen()
              ? (this.webSocket.send(JSON.stringify(t)), !0)
              : !1;
          }
          open() {
            if (this.isActive())
              return (
                he.log(
                  `Attempted to open WebSocket, but existing socket is ${this.getState()}`,
                ),
                !1
              );
            {
              let t = [...tl, ...(this.consumer.subprotocols || [])];
              return (
                he.log(
                  `Opening WebSocket, current state is ${this.getState()}, subprotocols: ${t}`,
                ),
                this.webSocket && this.uninstallEventHandlers(),
                (this.webSocket = new Jr.WebSocket(this.consumer.url, t)),
                this.installEventHandlers(),
                this.monitor.start(),
                !0
              );
            }
          }
          close({ allowReconnect: t } = { allowReconnect: !0 }) {
            if ((t || this.monitor.stop(), this.isOpen()))
              return this.webSocket.close();
          }
          reopen() {
            if (
              (he.log(
                `Reopening WebSocket, current state is ${this.getState()}`,
              ),
              this.isActive())
            )
              try {
                return this.close();
              } catch (t) {
                he.log("Failed to reopen WebSocket", t);
              } finally {
                he.log(
                  `Reopening WebSocket in ${this.constructor.reopenDelay}ms`,
                ),
                  setTimeout(this.open, this.constructor.reopenDelay);
              }
            else return this.open();
          }
          getProtocol() {
            if (this.webSocket) return this.webSocket.protocol;
          }
          isOpen() {
            return this.isState("open");
          }
          isActive() {
            return this.isState("open", "connecting");
          }
          triedToReconnect() {
            return this.monitor.reconnectAttempts > 0;
          }
          isProtocolSupported() {
            return gu.call(Dm, this.getProtocol()) >= 0;
          }
          isState(...t) {
            return gu.call(t, this.getState()) >= 0;
          }
          getState() {
            if (this.webSocket) {
              for (let t in Jr.WebSocket)
                if (Jr.WebSocket[t] === this.webSocket.readyState)
                  return t.toLowerCase();
            }
            return null;
          }
          installEventHandlers() {
            for (let t in this.events) {
              let n = this.events[t].bind(this);
              this.webSocket[`on${t}`] = n;
            }
          }
          uninstallEventHandlers() {
            for (let t in this.events)
              this.webSocket[`on${t}`] = function () {};
          }
        });
      wn.reopenDelay = 500;
      wn.prototype.events = {
        message(r) {
          if (!this.isProtocolSupported()) return;
          let {
            identifier: t,
            message: n,
            reason: s,
            reconnect: l,
            type: h,
          } = JSON.parse(r.data);
          switch (h) {
            case yn.welcome:
              return (
                this.triedToReconnect() && (this.reconnectAttempted = !0),
                this.monitor.recordConnect(),
                this.subscriptions.reload()
              );
            case yn.disconnect:
              return (
                he.log(`Disconnecting. Reason: ${s}`),
                this.close({ allowReconnect: l })
              );
            case yn.ping:
              return this.monitor.recordPing();
            case yn.confirmation:
              return (
                this.subscriptions.confirmSubscription(t),
                this.reconnectAttempted
                  ? ((this.reconnectAttempted = !1),
                    this.subscriptions.notify(t, "connected", {
                      reconnected: !0,
                    }))
                  : this.subscriptions.notify(t, "connected", {
                      reconnected: !1,
                    })
              );
            case yn.rejection:
              return this.subscriptions.reject(t);
            default:
              return this.subscriptions.notify(t, "received", n);
          }
        },
        open() {
          if (
            (he.log(
              `WebSocket onopen event, using '${this.getProtocol()}' subprotocol`,
            ),
            (this.disconnected = !1),
            !this.isProtocolSupported())
          )
            return (
              he.log(
                "Protocol is unsupported. Stopping monitor and disconnecting.",
              ),
              this.close({ allowReconnect: !1 })
            );
        },
        close(r) {
          if ((he.log("WebSocket onclose event"), !this.disconnected))
            return (
              (this.disconnected = !0),
              this.monitor.recordDisconnect(),
              this.subscriptions.notifyAll("disconnected", {
                willAttemptReconnect: this.monitor.isRunning(),
              })
            );
        },
        error() {
          he.log("WebSocket onerror event");
        },
      };
      go = wn;
    });
  var Pm,
    hi,
    rl = hr(() => {
      (Pm = function (r, t) {
        if (t != null)
          for (let n in t) {
            let s = t[n];
            r[n] = s;
          }
        return r;
      }),
        (hi = class {
          constructor(t, n = {}, s) {
            (this.consumer = t),
              (this.identifier = JSON.stringify(n)),
              Pm(this, s);
          }
          perform(t, n = {}) {
            return (n.action = t), this.send(n);
          }
          send(t) {
            return this.consumer.send({
              command: "message",
              identifier: this.identifier,
              data: JSON.stringify(t),
            });
          }
          unsubscribe() {
            return this.consumer.subscriptions.remove(this);
          }
        });
    });
  var il,
    po,
    nl = hr(() => {
      Hi();
      (il = class {
        constructor(t) {
          (this.subscriptions = t), (this.pendingSubscriptions = []);
        }
        guarantee(t) {
          this.pendingSubscriptions.indexOf(t) == -1
            ? (he.log(`SubscriptionGuarantor guaranteeing ${t.identifier}`),
              this.pendingSubscriptions.push(t))
            : he.log(
                `SubscriptionGuarantor already guaranteeing ${t.identifier}`,
              ),
            this.startGuaranteeing();
        }
        forget(t) {
          he.log(`SubscriptionGuarantor forgetting ${t.identifier}`),
            (this.pendingSubscriptions = this.pendingSubscriptions.filter(
              (n) => n !== t,
            ));
        }
        startGuaranteeing() {
          this.stopGuaranteeing(), this.retrySubscribing();
        }
        stopGuaranteeing() {
          clearTimeout(this.retryTimeout);
        }
        retrySubscribing() {
          this.retryTimeout = setTimeout(() => {
            this.subscriptions &&
              typeof this.subscriptions.subscribe == "function" &&
              this.pendingSubscriptions.map((t) => {
                he.log(`SubscriptionGuarantor resubscribing ${t.identifier}`),
                  this.subscriptions.subscribe(t);
              });
          }, 500);
        }
      }),
        (po = il);
    });
  var di,
    sl = hr(() => {
      rl();
      nl();
      Hi();
      di = class {
        constructor(t) {
          (this.consumer = t),
            (this.guarantor = new po(this)),
            (this.subscriptions = []);
        }
        create(t, n) {
          let s = t,
            l = typeof s == "object" ? s : { channel: s },
            h = new hi(this.consumer, l, n);
          return this.add(h);
        }
        add(t) {
          return (
            this.subscriptions.push(t),
            this.consumer.ensureActiveConnection(),
            this.notify(t, "initialized"),
            this.subscribe(t),
            t
          );
        }
        remove(t) {
          return (
            this.forget(t),
            this.findAll(t.identifier).length ||
              this.sendCommand(t, "unsubscribe"),
            t
          );
        }
        reject(t) {
          return this.findAll(t).map(
            (n) => (this.forget(n), this.notify(n, "rejected"), n),
          );
        }
        forget(t) {
          return (
            this.guarantor.forget(t),
            (this.subscriptions = this.subscriptions.filter((n) => n !== t)),
            t
          );
        }
        findAll(t) {
          return this.subscriptions.filter((n) => n.identifier === t);
        }
        reload() {
          return this.subscriptions.map((t) => this.subscribe(t));
        }
        notifyAll(t, ...n) {
          return this.subscriptions.map((s) => this.notify(s, t, ...n));
        }
        notify(t, n, ...s) {
          let l;
          return (
            typeof t == "string" ? (l = this.findAll(t)) : (l = [t]),
            l.map((h) => (typeof h[n] == "function" ? h[n](...s) : void 0))
          );
        }
        subscribe(t) {
          this.sendCommand(t, "subscribe") && this.guarantor.guarantee(t);
        }
        confirmSubscription(t) {
          he.log(`Subscription confirmed ${t}`),
            this.findAll(t).map((n) => this.guarantor.forget(n));
        }
        sendCommand(t, n) {
          let { identifier: s } = t;
          return this.consumer.send({ command: n, identifier: s });
        }
      };
    });
  function ol(r) {
    if ((typeof r == "function" && (r = r()), r && !/^wss?:/i.test(r))) {
      let t = document.createElement("a");
      return (
        (t.href = r),
        (t.href = t.href),
        (t.protocol = t.protocol.replace("http", "ws")),
        t.href
      );
    } else return r;
  }
  var Wi,
    pu = hr(() => {
      el();
      sl();
      Wi = class {
        constructor(t) {
          (this._url = t),
            (this.subscriptions = new di(this)),
            (this.connection = new go(this)),
            (this.subprotocols = []);
        }
        get url() {
          return ol(this._url);
        }
        send(t) {
          return this.connection.send(t);
        }
        connect() {
          return this.connection.open();
        }
        disconnect() {
          return this.connection.close({ allowReconnect: !1 });
        }
        ensureActiveConnection() {
          if (!this.connection.isActive()) return this.connection.open();
        }
        addSubProtocol(t) {
          this.subprotocols = [...this.subprotocols, t];
        }
      };
    });
  var vu = {};
  tu(vu, {
    Connection: () => go,
    ConnectionMonitor: () => mo,
    Consumer: () => Wi,
    INTERNAL: () => vn,
    Subscription: () => hi,
    SubscriptionGuarantor: () => po,
    Subscriptions: () => di,
    adapters: () => Jr,
    createConsumer: () => Om,
    createWebSocketURL: () => ol,
    getConfig: () => bu,
    logger: () => he,
  });
  function Om(r = bu("url") || vn.default_mount_path) {
    return new Wi(r);
  }
  function bu(r) {
    let t = document.head.querySelector(`meta[name='action-cable-${r}']`);
    if (t) return t.getAttribute("content");
  }
  var yu = hr(() => {
    el();
    Qa();
    pu();
    Za();
    rl();
    sl();
    nl();
    ho();
    Hi();
  });
  var Pn = Lr((qu, Mo) => {
    (function (r) {
      "use strict";
      var t = r.URL || r.webkitURL;
      function n(I) {
        return t ? t.createObjectURL(I) : !1;
      }
      function s(I) {
        return t ? t.revokeObjectURL(I) : !1;
      }
      function l(I, B) {
        I && I.slice(0, 5) === "blob:" && !(B && B.noRevoke) && s(I);
      }
      function h(I, B, Z, Tt) {
        if (!r.FileReader) return !1;
        var ft = new FileReader();
        (ft.onload = function () {
          B.call(ft, this.result);
        }),
          Z &&
            (ft.onabort = ft.onerror =
              function () {
                Z.call(ft, this.error);
              });
        var vt = ft[Tt || "readAsDataURL"];
        if (vt) return vt.call(ft, I), ft;
      }
      function w(I, B) {
        return Object.prototype.toString.call(B) === "[object " + I + "]";
      }
      function L(I, B, Z) {
        function Tt(ft, vt) {
          var ht = document.createElement("img"),
            Pt;
          function Ct(H, tt) {
            if (ft === vt) {
              ft && ft(H, tt);
              return;
            } else if (H instanceof Error) {
              vt(H);
              return;
            }
            (tt = tt || {}), (tt.image = H), ft(tt);
          }
          function bt(H, tt) {
            tt && r.console && console.log(tt),
              H && w("Blob", H)
                ? ((I = H), (Pt = n(I)))
                : ((Pt = I),
                  Z && Z.crossOrigin && (ht.crossOrigin = Z.crossOrigin)),
              (ht.src = Pt);
          }
          if (
            ((ht.onerror = function (H) {
              l(Pt, Z), vt && vt.call(ht, H);
            }),
            (ht.onload = function () {
              l(Pt, Z);
              var H = {
                originalWidth: ht.naturalWidth || ht.width,
                originalHeight: ht.naturalHeight || ht.height,
              };
              try {
                L.transform(ht, Z, Ct, I, H);
              } catch (tt) {
                vt && vt(tt);
              }
            }),
            typeof I == "string")
          )
            return L.requiresMetaData(Z) ? L.fetchBlob(I, bt, Z) : bt(), ht;
          if (w("Blob", I) || w("File", I))
            return (
              (Pt = n(I)),
              Pt
                ? ((ht.src = Pt), ht)
                : h(
                    I,
                    function (H) {
                      ht.src = H;
                    },
                    vt,
                  )
            );
        }
        return r.Promise && typeof B != "function"
          ? ((Z = B), new Promise(Tt))
          : Tt(B, B);
      }
      (L.requiresMetaData = function (I) {
        return I && I.meta;
      }),
        (L.fetchBlob = function (I, B) {
          B();
        }),
        (L.transform = function (I, B, Z, Tt, ft) {
          Z(I, ft);
        }),
        (L.global = r),
        (L.readFile = h),
        (L.isInstanceOf = w),
        (L.createObjectURL = n),
        (L.revokeObjectURL = s),
        typeof define == "function" && define.amd
          ? define(function () {
              return L;
            })
          : typeof Mo == "object" && Mo.exports
          ? (Mo.exports = L)
          : (r.loadImage = L);
    })((typeof window != "undefined" && window) || qu);
  });
  var Fo = Lr((Pl, Ol) => {
    (function (r, t) {
      typeof Pl == "object" && typeof Ol != "undefined"
        ? (Ol.exports = t())
        : typeof define == "function" && define.amd
        ? define(t)
        : ((r = typeof globalThis != "undefined" ? globalThis : r || self),
          (r.Cropper = t()));
    })(Pl, function () {
      "use strict";
      function r(T, m) {
        var v = Object.keys(T);
        if (Object.getOwnPropertySymbols) {
          var p = Object.getOwnPropertySymbols(T);
          m &&
            (p = p.filter(function (D) {
              return Object.getOwnPropertyDescriptor(T, D).enumerable;
            })),
            v.push.apply(v, p);
        }
        return v;
      }
      function t(T) {
        for (var m = 1; m < arguments.length; m++) {
          var v = arguments[m] != null ? arguments[m] : {};
          m % 2
            ? r(Object(v), !0).forEach(function (p) {
                I(T, p, v[p]);
              })
            : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(T, Object.getOwnPropertyDescriptors(v))
            : r(Object(v)).forEach(function (p) {
                Object.defineProperty(
                  T,
                  p,
                  Object.getOwnPropertyDescriptor(v, p),
                );
              });
        }
        return T;
      }
      function n(T, m) {
        if (typeof T != "object" || !T) return T;
        var v = T[Symbol.toPrimitive];
        if (v !== void 0) {
          var p = v.call(T, m || "default");
          if (typeof p != "object") return p;
          throw new TypeError("@@toPrimitive must return a primitive value.");
        }
        return (m === "string" ? String : Number)(T);
      }
      function s(T) {
        var m = n(T, "string");
        return typeof m == "symbol" ? m : m + "";
      }
      function l(T) {
        return (
          (l =
            typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
              ? function (m) {
                  return typeof m;
                }
              : function (m) {
                  return m &&
                    typeof Symbol == "function" &&
                    m.constructor === Symbol &&
                    m !== Symbol.prototype
                    ? "symbol"
                    : typeof m;
                }),
          l(T)
        );
      }
      function h(T, m) {
        if (!(T instanceof m))
          throw new TypeError("Cannot call a class as a function");
      }
      function w(T, m) {
        for (var v = 0; v < m.length; v++) {
          var p = m[v];
          (p.enumerable = p.enumerable || !1),
            (p.configurable = !0),
            "value" in p && (p.writable = !0),
            Object.defineProperty(T, s(p.key), p);
        }
      }
      function L(T, m, v) {
        return (
          m && w(T.prototype, m),
          v && w(T, v),
          Object.defineProperty(T, "prototype", { writable: !1 }),
          T
        );
      }
      function I(T, m, v) {
        return (
          (m = s(m)),
          m in T
            ? Object.defineProperty(T, m, {
                value: v,
                enumerable: !0,
                configurable: !0,
                writable: !0,
              })
            : (T[m] = v),
          T
        );
      }
      function B(T) {
        return Z(T) || Tt(T) || ft(T) || ht();
      }
      function Z(T) {
        if (Array.isArray(T)) return vt(T);
      }
      function Tt(T) {
        if (
          (typeof Symbol != "undefined" && T[Symbol.iterator] != null) ||
          T["@@iterator"] != null
        )
          return Array.from(T);
      }
      function ft(T, m) {
        if (!!T) {
          if (typeof T == "string") return vt(T, m);
          var v = Object.prototype.toString.call(T).slice(8, -1);
          if (
            (v === "Object" && T.constructor && (v = T.constructor.name),
            v === "Map" || v === "Set")
          )
            return Array.from(T);
          if (
            v === "Arguments" ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)
          )
            return vt(T, m);
        }
      }
      function vt(T, m) {
        (m == null || m > T.length) && (m = T.length);
        for (var v = 0, p = new Array(m); v < m; v++) p[v] = T[v];
        return p;
      }
      function ht() {
        throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
      }
      var Pt =
          typeof window != "undefined" && typeof window.document != "undefined",
        Ct = Pt ? window : {},
        bt =
          Pt && Ct.document.documentElement
            ? "ontouchstart" in Ct.document.documentElement
            : !1,
        H = Pt ? "PointerEvent" in Ct : !1,
        tt = "cropper",
        Mt = "all",
        zt = "crop",
        $t = "move",
        Vt = "zoom",
        ae = "e",
        St = "w",
        Ne = "s",
        ve = "n",
        je = "ne",
        Te = "nw",
        U = "se",
        S = "sw",
        F = "".concat(tt, "-crop"),
        st = "".concat(tt, "-disabled"),
        V = "".concat(tt, "-hidden"),
        Rt = "".concat(tt, "-hide"),
        pt = "".concat(tt, "-invisible"),
        mt = "".concat(tt, "-modal"),
        wt = "".concat(tt, "-move"),
        It = "".concat(tt, "Action"),
        _t = "".concat(tt, "Preview"),
        Nt = "crop",
        pe = "move",
        Re = "none",
        qe = "crop",
        we = "cropend",
        Dt = "cropmove",
        R = "cropstart",
        A = "dblclick",
        f = bt ? "touchstart" : "mousedown",
        d = bt ? "touchmove" : "mousemove",
        y = bt ? "touchend touchcancel" : "mouseup",
        b = H ? "pointerdown" : f,
        Kt = H ? "pointermove" : d,
        oe = H ? "pointerup pointercancel" : y,
        ye = "ready",
        Me = "resize",
        _e = "wheel",
        Ze = "zoom",
        dr = "image/jpeg",
        fr = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,
        yi = /^data:/,
        P = /^data:image\/jpeg;base64,/,
        q = /^img|canvas$/i,
        Et = 200,
        re = 100,
        Wt = {
          viewMode: 0,
          dragMode: Nt,
          initialAspectRatio: NaN,
          aspectRatio: NaN,
          data: null,
          preview: "",
          responsive: !0,
          restore: !0,
          checkCrossOrigin: !0,
          checkOrientation: !0,
          modal: !0,
          guides: !0,
          center: !0,
          highlight: !0,
          background: !0,
          autoCrop: !0,
          autoCropArea: 0.8,
          movable: !0,
          rotatable: !0,
          scalable: !0,
          zoomable: !0,
          zoomOnTouch: !0,
          zoomOnWheel: !0,
          wheelZoomRatio: 0.1,
          cropBoxMovable: !0,
          cropBoxResizable: !0,
          toggleDragModeOnDblclick: !0,
          minCanvasWidth: 0,
          minCanvasHeight: 0,
          minCropBoxWidth: 0,
          minCropBoxHeight: 0,
          minContainerWidth: Et,
          minContainerHeight: re,
          ready: null,
          cropstart: null,
          cropmove: null,
          cropend: null,
          crop: null,
          zoom: null,
        },
        xt =
          '<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',
        Tr = Number.isNaN || Ct.isNaN;
      function qt(T) {
        return typeof T == "number" && !Tr(T);
      }
      var Se = function (m) {
        return m > 0 && m < 1 / 0;
      };
      function Dr(T) {
        return typeof T == "undefined";
      }
      function mr(T) {
        return l(T) === "object" && T !== null;
      }
      var Ts = Object.prototype.hasOwnProperty;
      function Sr(T) {
        if (!mr(T)) return !1;
        try {
          var m = T.constructor,
            v = m.prototype;
          return m && v && Ts.call(v, "isPrototypeOf");
        } catch (p) {
          return !1;
        }
      }
      function Fe(T) {
        return typeof T == "function";
      }
      var Yo = Array.prototype.slice;
      function Ss(T) {
        return Array.from ? Array.from(T) : Yo.call(T);
      }
      function Ce(T, m) {
        return (
          T &&
            Fe(m) &&
            (Array.isArray(T) || qt(T.length)
              ? Ss(T).forEach(function (v, p) {
                  m.call(T, v, p, T);
                })
              : mr(T) &&
                Object.keys(T).forEach(function (v) {
                  m.call(T, T[v], v, T);
                })),
          T
        );
      }
      var ce =
          Object.assign ||
          function (m) {
            for (
              var v = arguments.length, p = new Array(v > 1 ? v - 1 : 0), D = 1;
              D < v;
              D++
            )
              p[D - 1] = arguments[D];
            return (
              mr(m) &&
                p.length > 0 &&
                p.forEach(function (k) {
                  mr(k) &&
                    Object.keys(k).forEach(function (M) {
                      m[M] = k[M];
                    });
                }),
              m
            );
          },
        wi = /\.\d*(?:0|9){12}\d*$/;
      function qr(T) {
        var m =
          arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e11;
        return wi.test(T) ? Math.round(T * m) / m : T;
      }
      var Pr = /^width|height|left|top|marginLeft|marginTop$/;
      function We(T, m) {
        var v = T.style;
        Ce(m, function (p, D) {
          Pr.test(D) && qt(p) && (p = "".concat(p, "px")), (v[D] = p);
        });
      }
      function Jo(T, m) {
        return T.classList
          ? T.classList.contains(m)
          : T.className.indexOf(m) > -1;
      }
      function ke(T, m) {
        if (!!m) {
          if (qt(T.length)) {
            Ce(T, function (p) {
              ke(p, m);
            });
            return;
          }
          if (T.classList) {
            T.classList.add(m);
            return;
          }
          var v = T.className.trim();
          v
            ? v.indexOf(m) < 0 && (T.className = "".concat(v, " ").concat(m))
            : (T.className = m);
        }
      }
      function ar(T, m) {
        if (!!m) {
          if (qt(T.length)) {
            Ce(T, function (v) {
              ar(v, m);
            });
            return;
          }
          if (T.classList) {
            T.classList.remove(m);
            return;
          }
          T.className.indexOf(m) >= 0 &&
            (T.className = T.className.replace(m, ""));
        }
      }
      function zr(T, m, v) {
        if (!!m) {
          if (qt(T.length)) {
            Ce(T, function (p) {
              zr(p, m, v);
            });
            return;
          }
          v ? ke(T, m) : ar(T, m);
        }
      }
      var Qo = /([a-z\d])([A-Z])/g;
      function Qr(T) {
        return T.replace(Qo, "$1-$2").toLowerCase();
      }
      function Zr(T, m) {
        return mr(T[m])
          ? T[m]
          : T.dataset
          ? T.dataset[m]
          : T.getAttribute("data-".concat(Qr(m)));
      }
      function Or(T, m, v) {
        mr(v)
          ? (T[m] = v)
          : T.dataset
          ? (T.dataset[m] = v)
          : T.setAttribute("data-".concat(Qr(m)), v);
      }
      function Ei(T, m) {
        if (mr(T[m]))
          try {
            delete T[m];
          } catch (v) {
            T[m] = void 0;
          }
        else if (T.dataset)
          try {
            delete T.dataset[m];
          } catch (v) {
            T.dataset[m] = void 0;
          }
        else T.removeAttribute("data-".concat(Qr(m)));
      }
      var Ai = /\s\s*/,
        Ee = (function () {
          var T = !1;
          if (Pt) {
            var m = !1,
              v = function () {},
              p = Object.defineProperty({}, "once", {
                get: function () {
                  return (T = !0), m;
                },
                set: function (k) {
                  m = k;
                },
              });
            Ct.addEventListener("test", v, p),
              Ct.removeEventListener("test", v, p);
          }
          return T;
        })();
      function tr(T, m, v) {
        var p =
            arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {},
          D = v;
        m.trim()
          .split(Ai)
          .forEach(function (k) {
            if (!Ee) {
              var M = T.listeners;
              M &&
                M[k] &&
                M[k][v] &&
                ((D = M[k][v]),
                delete M[k][v],
                Object.keys(M[k]).length === 0 && delete M[k],
                Object.keys(M).length === 0 && delete T.listeners);
            }
            T.removeEventListener(k, D, p);
          });
      }
      function Ue(T, m, v) {
        var p =
            arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {},
          D = v;
        m.trim()
          .split(Ai)
          .forEach(function (k) {
            if (p.once && !Ee) {
              var M = T.listeners,
                z = M === void 0 ? {} : M;
              (D = function () {
                delete z[k][v], T.removeEventListener(k, D, p);
                for (
                  var nt = arguments.length, $ = new Array(nt), K = 0;
                  K < nt;
                  K++
                )
                  $[K] = arguments[K];
                v.apply(T, $);
              }),
                z[k] || (z[k] = {}),
                z[k][v] && T.removeEventListener(k, z[k][v], p),
                (z[k][v] = D),
                (T.listeners = z);
            }
            T.addEventListener(k, D, p);
          });
      }
      function Hr(T, m, v) {
        var p;
        return (
          Fe(Event) && Fe(CustomEvent)
            ? (p = new CustomEvent(m, {
                detail: v,
                bubbles: !0,
                cancelable: !0,
              }))
            : ((p = document.createEvent("CustomEvent")),
              p.initCustomEvent(m, !0, !0, v)),
          T.dispatchEvent(p)
        );
      }
      function Cs(T) {
        var m = T.getBoundingClientRect();
        return {
          left:
            m.left + (window.pageXOffset - document.documentElement.clientLeft),
          top:
            m.top + (window.pageYOffset - document.documentElement.clientTop),
        };
      }
      var xi = Ct.location,
        Zo = /^(\w+:)\/\/([^:/?#]*):?(\d*)/i;
      function ks(T) {
        var m = T.match(Zo);
        return (
          m !== null &&
          (m[1] !== xi.protocol || m[2] !== xi.hostname || m[3] !== xi.port)
        );
      }
      function Ji(T) {
        var m = "timestamp=".concat(new Date().getTime());
        return T + (T.indexOf("?") === -1 ? "?" : "&") + m;
      }
      function Wr(T) {
        var m = T.rotate,
          v = T.scaleX,
          p = T.scaleY,
          D = T.translateX,
          k = T.translateY,
          M = [];
        qt(D) && D !== 0 && M.push("translateX(".concat(D, "px)")),
          qt(k) && k !== 0 && M.push("translateY(".concat(k, "px)")),
          qt(m) && m !== 0 && M.push("rotate(".concat(m, "deg)")),
          qt(v) && v !== 1 && M.push("scaleX(".concat(v, ")")),
          qt(p) && p !== 1 && M.push("scaleY(".concat(p, ")"));
        var z = M.length ? M.join(" ") : "none";
        return { WebkitTransform: z, msTransform: z, transform: z };
      }
      function Ls(T) {
        var m = t({}, T),
          v = 0;
        return (
          Ce(T, function (p, D) {
            delete m[D],
              Ce(m, function (k) {
                var M = Math.abs(p.startX - k.startX),
                  z = Math.abs(p.startY - k.startY),
                  lt = Math.abs(p.endX - k.endX),
                  nt = Math.abs(p.endY - k.endY),
                  $ = Math.sqrt(M * M + z * z),
                  K = Math.sqrt(lt * lt + nt * nt),
                  ct = (K - $) / $;
                Math.abs(ct) > Math.abs(v) && (v = ct);
              });
          }),
          v
        );
      }
      function Ti(T, m) {
        var v = T.pageX,
          p = T.pageY,
          D = { endX: v, endY: p };
        return m ? D : t({ startX: v, startY: p }, D);
      }
      function Rs(T) {
        var m = 0,
          v = 0,
          p = 0;
        return (
          Ce(T, function (D) {
            var k = D.startX,
              M = D.startY;
            (m += k), (v += M), (p += 1);
          }),
          (m /= p),
          (v /= p),
          { pageX: m, pageY: v }
        );
      }
      function lr(T) {
        var m = T.aspectRatio,
          v = T.height,
          p = T.width,
          D =
            arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : "contain",
          k = Se(p),
          M = Se(v);
        if (k && M) {
          var z = v * m;
          (D === "contain" && z > p) || (D === "cover" && z < p)
            ? (v = p / m)
            : (p = v * m);
        } else k ? (v = p / m) : M && (p = v * m);
        return { width: p, height: v };
      }
      function _s(T) {
        var m = T.width,
          v = T.height,
          p = T.degree;
        if (((p = Math.abs(p) % 180), p === 90)) return { width: v, height: m };
        var D = ((p % 90) * Math.PI) / 180,
          k = Math.sin(D),
          M = Math.cos(D),
          z = m * M + v * k,
          lt = m * k + v * M;
        return p > 90 ? { width: lt, height: z } : { width: z, height: lt };
      }
      function ti(T, m, v, p) {
        var D = m.aspectRatio,
          k = m.naturalWidth,
          M = m.naturalHeight,
          z = m.rotate,
          lt = z === void 0 ? 0 : z,
          nt = m.scaleX,
          $ = nt === void 0 ? 1 : nt,
          K = m.scaleY,
          ct = K === void 0 ? 1 : K,
          Yt = v.aspectRatio,
          Xt = v.naturalWidth,
          ne = v.naturalHeight,
          se = p.fillColor,
          fe = se === void 0 ? "transparent" : se,
          Le = p.imageSmoothingEnabled,
          Ae = Le === void 0 ? !0 : Le,
          pr = p.imageSmoothingQuality,
          Ve = pr === void 0 ? "low" : pr,
          gt = p.maxWidth,
          ee = gt === void 0 ? 1 / 0 : gt,
          De = p.maxHeight,
          Ke = De === void 0 ? 1 / 0 : De,
          cr = p.minWidth,
          ur = cr === void 0 ? 0 : cr,
          Cr = p.minHeight,
          kr = Cr === void 0 ? 0 : Cr,
          er = document.createElement("canvas"),
          Ie = er.getContext("2d"),
          br = lr({ aspectRatio: Yt, width: ee, height: Ke }),
          ii = lr({ aspectRatio: Yt, width: ur, height: kr }, "cover"),
          ki = Math.min(br.width, Math.max(ii.width, Xt)),
          Li = Math.min(br.height, Math.max(ii.height, ne)),
          Zi = lr({ aspectRatio: D, width: ee, height: Ke }),
          Ri = lr({ aspectRatio: D, width: ur, height: kr }, "cover"),
          tn = Math.min(Zi.width, Math.max(Ri.width, k)),
          Ur = Math.min(Zi.height, Math.max(Ri.height, M)),
          en = [-tn / 2, -Ur / 2, tn, Ur];
        return (
          (er.width = qr(ki)),
          (er.height = qr(Li)),
          (Ie.fillStyle = fe),
          Ie.fillRect(0, 0, ki, Li),
          Ie.save(),
          Ie.translate(ki / 2, Li / 2),
          Ie.rotate((lt * Math.PI) / 180),
          Ie.scale($, ct),
          (Ie.imageSmoothingEnabled = Ae),
          (Ie.imageSmoothingQuality = Ve),
          Ie.drawImage.apply(
            Ie,
            [T].concat(
              B(
                en.map(function (Is) {
                  return Math.floor(qr(Is));
                }),
              ),
            ),
          ),
          Ie.restore(),
          er
        );
      }
      var ie = String.fromCharCode;
      function gr(T, m, v) {
        var p = "";
        v += m;
        for (var D = m; D < v; D += 1) p += ie(T.getUint8(D));
        return p;
      }
      var Si = /^data:.*,/;
      function Ds(T) {
        var m = T.replace(Si, ""),
          v = atob(m),
          p = new ArrayBuffer(v.length),
          D = new Uint8Array(p);
        return (
          Ce(D, function (k, M) {
            D[M] = v.charCodeAt(M);
          }),
          p
        );
      }
      function Qi(T, m) {
        for (var v = [], p = 8192, D = new Uint8Array(T); D.length > 0; )
          v.push(ie.apply(null, Ss(D.subarray(0, p)))), (D = D.subarray(p));
        return "data:".concat(m, ";base64,").concat(btoa(v.join("")));
      }
      function Ps(T) {
        var m = new DataView(T),
          v;
        try {
          var p, D, k;
          if (m.getUint8(0) === 255 && m.getUint8(1) === 216)
            for (var M = m.byteLength, z = 2; z + 1 < M; ) {
              if (m.getUint8(z) === 255 && m.getUint8(z + 1) === 225) {
                D = z;
                break;
              }
              z += 1;
            }
          if (D) {
            var lt = D + 4,
              nt = D + 10;
            if (gr(m, lt, 4) === "Exif") {
              var $ = m.getUint16(nt);
              if (
                ((p = $ === 18761),
                (p || $ === 19789) && m.getUint16(nt + 2, p) === 42)
              ) {
                var K = m.getUint32(nt + 4, p);
                K >= 8 && (k = nt + K);
              }
            }
          }
          if (k) {
            var ct = m.getUint16(k, p),
              Yt,
              Xt;
            for (Xt = 0; Xt < ct; Xt += 1)
              if (((Yt = k + Xt * 12 + 2), m.getUint16(Yt, p) === 274)) {
                (Yt += 8), (v = m.getUint16(Yt, p)), m.setUint16(Yt, 1, p);
                break;
              }
          }
        } catch (ne) {
          v = 1;
        }
        return v;
      }
      function Mr(T) {
        var m = 0,
          v = 1,
          p = 1;
        switch (T) {
          case 2:
            v = -1;
            break;
          case 3:
            m = -180;
            break;
          case 4:
            p = -1;
            break;
          case 5:
            (m = 90), (p = -1);
            break;
          case 6:
            m = 90;
            break;
          case 7:
            (m = 90), (v = -1);
            break;
          case 8:
            m = -90;
            break;
        }
        return { rotate: m, scaleX: v, scaleY: p };
      }
      var Os = {
          render: function () {
            this.initContainer(),
              this.initCanvas(),
              this.initCropBox(),
              this.renderCanvas(),
              this.cropped && this.renderCropBox();
          },
          initContainer: function () {
            var m = this.element,
              v = this.options,
              p = this.container,
              D = this.cropper,
              k = Number(v.minContainerWidth),
              M = Number(v.minContainerHeight);
            ke(D, V), ar(m, V);
            var z = {
              width: Math.max(p.offsetWidth, k >= 0 ? k : Et),
              height: Math.max(p.offsetHeight, M >= 0 ? M : re),
            };
            (this.containerData = z),
              We(D, { width: z.width, height: z.height }),
              ke(m, V),
              ar(D, V);
          },
          initCanvas: function () {
            var m = this.containerData,
              v = this.imageData,
              p = this.options.viewMode,
              D = Math.abs(v.rotate) % 180 === 90,
              k = D ? v.naturalHeight : v.naturalWidth,
              M = D ? v.naturalWidth : v.naturalHeight,
              z = k / M,
              lt = m.width,
              nt = m.height;
            m.height * z > m.width
              ? p === 3
                ? (lt = m.height * z)
                : (nt = m.width / z)
              : p === 3
              ? (nt = m.width / z)
              : (lt = m.height * z);
            var $ = {
              aspectRatio: z,
              naturalWidth: k,
              naturalHeight: M,
              width: lt,
              height: nt,
            };
            (this.canvasData = $),
              (this.limited = p === 1 || p === 2),
              this.limitCanvas(!0, !0),
              ($.width = Math.min(Math.max($.width, $.minWidth), $.maxWidth)),
              ($.height = Math.min(
                Math.max($.height, $.minHeight),
                $.maxHeight,
              )),
              ($.left = (m.width - $.width) / 2),
              ($.top = (m.height - $.height) / 2),
              ($.oldLeft = $.left),
              ($.oldTop = $.top),
              (this.initialCanvasData = ce({}, $));
          },
          limitCanvas: function (m, v) {
            var p = this.options,
              D = this.containerData,
              k = this.canvasData,
              M = this.cropBoxData,
              z = p.viewMode,
              lt = k.aspectRatio,
              nt = this.cropped && M;
            if (m) {
              var $ = Number(p.minCanvasWidth) || 0,
                K = Number(p.minCanvasHeight) || 0;
              z > 1
                ? (($ = Math.max($, D.width)),
                  (K = Math.max(K, D.height)),
                  z === 3 && (K * lt > $ ? ($ = K * lt) : (K = $ / lt)))
                : z > 0 &&
                  ($
                    ? ($ = Math.max($, nt ? M.width : 0))
                    : K
                    ? (K = Math.max(K, nt ? M.height : 0))
                    : nt &&
                      (($ = M.width),
                      (K = M.height),
                      K * lt > $ ? ($ = K * lt) : (K = $ / lt)));
              var ct = lr({ aspectRatio: lt, width: $, height: K });
              ($ = ct.width),
                (K = ct.height),
                (k.minWidth = $),
                (k.minHeight = K),
                (k.maxWidth = 1 / 0),
                (k.maxHeight = 1 / 0);
            }
            if (v)
              if (z > (nt ? 0 : 1)) {
                var Yt = D.width - k.width,
                  Xt = D.height - k.height;
                (k.minLeft = Math.min(0, Yt)),
                  (k.minTop = Math.min(0, Xt)),
                  (k.maxLeft = Math.max(0, Yt)),
                  (k.maxTop = Math.max(0, Xt)),
                  nt &&
                    this.limited &&
                    ((k.minLeft = Math.min(
                      M.left,
                      M.left + (M.width - k.width),
                    )),
                    (k.minTop = Math.min(M.top, M.top + (M.height - k.height))),
                    (k.maxLeft = M.left),
                    (k.maxTop = M.top),
                    z === 2 &&
                      (k.width >= D.width &&
                        ((k.minLeft = Math.min(0, Yt)),
                        (k.maxLeft = Math.max(0, Yt))),
                      k.height >= D.height &&
                        ((k.minTop = Math.min(0, Xt)),
                        (k.maxTop = Math.max(0, Xt)))));
              } else
                (k.minLeft = -k.width),
                  (k.minTop = -k.height),
                  (k.maxLeft = D.width),
                  (k.maxTop = D.height);
          },
          renderCanvas: function (m, v) {
            var p = this.canvasData,
              D = this.imageData;
            if (v) {
              var k = _s({
                  width: D.naturalWidth * Math.abs(D.scaleX || 1),
                  height: D.naturalHeight * Math.abs(D.scaleY || 1),
                  degree: D.rotate || 0,
                }),
                M = k.width,
                z = k.height,
                lt = p.width * (M / p.naturalWidth),
                nt = p.height * (z / p.naturalHeight);
              (p.left -= (lt - p.width) / 2),
                (p.top -= (nt - p.height) / 2),
                (p.width = lt),
                (p.height = nt),
                (p.aspectRatio = M / z),
                (p.naturalWidth = M),
                (p.naturalHeight = z),
                this.limitCanvas(!0, !1);
            }
            (p.width > p.maxWidth || p.width < p.minWidth) &&
              (p.left = p.oldLeft),
              (p.height > p.maxHeight || p.height < p.minHeight) &&
                (p.top = p.oldTop),
              (p.width = Math.min(Math.max(p.width, p.minWidth), p.maxWidth)),
              (p.height = Math.min(
                Math.max(p.height, p.minHeight),
                p.maxHeight,
              )),
              this.limitCanvas(!1, !0),
              (p.left = Math.min(Math.max(p.left, p.minLeft), p.maxLeft)),
              (p.top = Math.min(Math.max(p.top, p.minTop), p.maxTop)),
              (p.oldLeft = p.left),
              (p.oldTop = p.top),
              We(
                this.canvas,
                ce(
                  { width: p.width, height: p.height },
                  Wr({ translateX: p.left, translateY: p.top }),
                ),
              ),
              this.renderImage(m),
              this.cropped && this.limited && this.limitCropBox(!0, !0);
          },
          renderImage: function (m) {
            var v = this.canvasData,
              p = this.imageData,
              D = p.naturalWidth * (v.width / v.naturalWidth),
              k = p.naturalHeight * (v.height / v.naturalHeight);
            ce(p, {
              width: D,
              height: k,
              left: (v.width - D) / 2,
              top: (v.height - k) / 2,
            }),
              We(
                this.image,
                ce(
                  { width: p.width, height: p.height },
                  Wr(ce({ translateX: p.left, translateY: p.top }, p)),
                ),
              ),
              m && this.output();
          },
          initCropBox: function () {
            var m = this.options,
              v = this.canvasData,
              p = m.aspectRatio || m.initialAspectRatio,
              D = Number(m.autoCropArea) || 0.8,
              k = { width: v.width, height: v.height };
            p &&
              (v.height * p > v.width
                ? (k.height = k.width / p)
                : (k.width = k.height * p)),
              (this.cropBoxData = k),
              this.limitCropBox(!0, !0),
              (k.width = Math.min(Math.max(k.width, k.minWidth), k.maxWidth)),
              (k.height = Math.min(
                Math.max(k.height, k.minHeight),
                k.maxHeight,
              )),
              (k.width = Math.max(k.minWidth, k.width * D)),
              (k.height = Math.max(k.minHeight, k.height * D)),
              (k.left = v.left + (v.width - k.width) / 2),
              (k.top = v.top + (v.height - k.height) / 2),
              (k.oldLeft = k.left),
              (k.oldTop = k.top),
              (this.initialCropBoxData = ce({}, k));
          },
          limitCropBox: function (m, v) {
            var p = this.options,
              D = this.containerData,
              k = this.canvasData,
              M = this.cropBoxData,
              z = this.limited,
              lt = p.aspectRatio;
            if (m) {
              var nt = Number(p.minCropBoxWidth) || 0,
                $ = Number(p.minCropBoxHeight) || 0,
                K = z
                  ? Math.min(
                      D.width,
                      k.width,
                      k.width + k.left,
                      D.width - k.left,
                    )
                  : D.width,
                ct = z
                  ? Math.min(
                      D.height,
                      k.height,
                      k.height + k.top,
                      D.height - k.top,
                    )
                  : D.height;
              (nt = Math.min(nt, D.width)),
                ($ = Math.min($, D.height)),
                lt &&
                  (nt && $
                    ? $ * lt > nt
                      ? ($ = nt / lt)
                      : (nt = $ * lt)
                    : nt
                    ? ($ = nt / lt)
                    : $ && (nt = $ * lt),
                  ct * lt > K ? (ct = K / lt) : (K = ct * lt)),
                (M.minWidth = Math.min(nt, K)),
                (M.minHeight = Math.min($, ct)),
                (M.maxWidth = K),
                (M.maxHeight = ct);
            }
            v &&
              (z
                ? ((M.minLeft = Math.max(0, k.left)),
                  (M.minTop = Math.max(0, k.top)),
                  (M.maxLeft = Math.min(D.width, k.left + k.width) - M.width),
                  (M.maxTop = Math.min(D.height, k.top + k.height) - M.height))
                : ((M.minLeft = 0),
                  (M.minTop = 0),
                  (M.maxLeft = D.width - M.width),
                  (M.maxTop = D.height - M.height)));
          },
          renderCropBox: function () {
            var m = this.options,
              v = this.containerData,
              p = this.cropBoxData;
            (p.width > p.maxWidth || p.width < p.minWidth) &&
              (p.left = p.oldLeft),
              (p.height > p.maxHeight || p.height < p.minHeight) &&
                (p.top = p.oldTop),
              (p.width = Math.min(Math.max(p.width, p.minWidth), p.maxWidth)),
              (p.height = Math.min(
                Math.max(p.height, p.minHeight),
                p.maxHeight,
              )),
              this.limitCropBox(!1, !0),
              (p.left = Math.min(Math.max(p.left, p.minLeft), p.maxLeft)),
              (p.top = Math.min(Math.max(p.top, p.minTop), p.maxTop)),
              (p.oldLeft = p.left),
              (p.oldTop = p.top),
              m.movable &&
                m.cropBoxMovable &&
                Or(
                  this.face,
                  It,
                  p.width >= v.width && p.height >= v.height ? $t : Mt,
                ),
              We(
                this.cropBox,
                ce(
                  { width: p.width, height: p.height },
                  Wr({ translateX: p.left, translateY: p.top }),
                ),
              ),
              this.cropped && this.limited && this.limitCanvas(!0, !0),
              this.disabled || this.output();
          },
          output: function () {
            this.preview(), Hr(this.element, qe, this.getData());
          },
        },
        ei = {
          initPreview: function () {
            var m = this.element,
              v = this.crossOrigin,
              p = this.options.preview,
              D = v ? this.crossOriginUrl : this.url,
              k = m.alt || "The image to preview",
              M = document.createElement("img");
            if (
              (v && (M.crossOrigin = v),
              (M.src = D),
              (M.alt = k),
              this.viewBox.appendChild(M),
              (this.viewBoxImage = M),
              !!p)
            ) {
              var z = p;
              typeof p == "string"
                ? (z = m.ownerDocument.querySelectorAll(p))
                : p.querySelector && (z = [p]),
                (this.previews = z),
                Ce(z, function (lt) {
                  var nt = document.createElement("img");
                  Or(lt, _t, {
                    width: lt.offsetWidth,
                    height: lt.offsetHeight,
                    html: lt.innerHTML,
                  }),
                    v && (nt.crossOrigin = v),
                    (nt.src = D),
                    (nt.alt = k),
                    (nt.style.cssText =
                      'display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"'),
                    (lt.innerHTML = ""),
                    lt.appendChild(nt);
                });
            }
          },
          resetPreview: function () {
            Ce(this.previews, function (m) {
              var v = Zr(m, _t);
              We(m, { width: v.width, height: v.height }),
                (m.innerHTML = v.html),
                Ei(m, _t);
            });
          },
          preview: function () {
            var m = this.imageData,
              v = this.canvasData,
              p = this.cropBoxData,
              D = p.width,
              k = p.height,
              M = m.width,
              z = m.height,
              lt = p.left - v.left - m.left,
              nt = p.top - v.top - m.top;
            !this.cropped ||
              this.disabled ||
              (We(
                this.viewBoxImage,
                ce(
                  { width: M, height: z },
                  Wr(ce({ translateX: -lt, translateY: -nt }, m)),
                ),
              ),
              Ce(this.previews, function ($) {
                var K = Zr($, _t),
                  ct = K.width,
                  Yt = K.height,
                  Xt = ct,
                  ne = Yt,
                  se = 1;
                D && ((se = ct / D), (ne = k * se)),
                  k && ne > Yt && ((se = Yt / k), (Xt = D * se), (ne = Yt)),
                  We($, { width: Xt, height: ne }),
                  We(
                    $.getElementsByTagName("img")[0],
                    ce(
                      { width: M * se, height: z * se },
                      Wr(ce({ translateX: -lt * se, translateY: -nt * se }, m)),
                    ),
                  );
              }));
          },
        },
        Ms = {
          bind: function () {
            var m = this.element,
              v = this.options,
              p = this.cropper;
            Fe(v.cropstart) && Ue(m, R, v.cropstart),
              Fe(v.cropmove) && Ue(m, Dt, v.cropmove),
              Fe(v.cropend) && Ue(m, we, v.cropend),
              Fe(v.crop) && Ue(m, qe, v.crop),
              Fe(v.zoom) && Ue(m, Ze, v.zoom),
              Ue(p, b, (this.onCropStart = this.cropStart.bind(this))),
              v.zoomable &&
                v.zoomOnWheel &&
                Ue(p, _e, (this.onWheel = this.wheel.bind(this)), {
                  passive: !1,
                  capture: !0,
                }),
              v.toggleDragModeOnDblclick &&
                Ue(p, A, (this.onDblclick = this.dblclick.bind(this))),
              Ue(
                m.ownerDocument,
                Kt,
                (this.onCropMove = this.cropMove.bind(this)),
              ),
              Ue(
                m.ownerDocument,
                oe,
                (this.onCropEnd = this.cropEnd.bind(this)),
              ),
              v.responsive &&
                Ue(window, Me, (this.onResize = this.resize.bind(this)));
          },
          unbind: function () {
            var m = this.element,
              v = this.options,
              p = this.cropper;
            Fe(v.cropstart) && tr(m, R, v.cropstart),
              Fe(v.cropmove) && tr(m, Dt, v.cropmove),
              Fe(v.cropend) && tr(m, we, v.cropend),
              Fe(v.crop) && tr(m, qe, v.crop),
              Fe(v.zoom) && tr(m, Ze, v.zoom),
              tr(p, b, this.onCropStart),
              v.zoomable &&
                v.zoomOnWheel &&
                tr(p, _e, this.onWheel, { passive: !1, capture: !0 }),
              v.toggleDragModeOnDblclick && tr(p, A, this.onDblclick),
              tr(m.ownerDocument, Kt, this.onCropMove),
              tr(m.ownerDocument, oe, this.onCropEnd),
              v.responsive && tr(window, Me, this.onResize);
          },
        },
        ta = {
          resize: function () {
            if (!this.disabled) {
              var m = this.options,
                v = this.container,
                p = this.containerData,
                D = v.offsetWidth / p.width,
                k = v.offsetHeight / p.height,
                M = Math.abs(D - 1) > Math.abs(k - 1) ? D : k;
              if (M !== 1) {
                var z, lt;
                m.restore &&
                  ((z = this.getCanvasData()), (lt = this.getCropBoxData())),
                  this.render(),
                  m.restore &&
                    (this.setCanvasData(
                      Ce(z, function (nt, $) {
                        z[$] = nt * M;
                      }),
                    ),
                    this.setCropBoxData(
                      Ce(lt, function (nt, $) {
                        lt[$] = nt * M;
                      }),
                    ));
              }
            }
          },
          dblclick: function () {
            this.disabled ||
              this.options.dragMode === Re ||
              this.setDragMode(Jo(this.dragBox, F) ? pe : Nt);
          },
          wheel: function (m) {
            var v = this,
              p = Number(this.options.wheelZoomRatio) || 0.1,
              D = 1;
            this.disabled ||
              (m.preventDefault(),
              !this.wheeling &&
                ((this.wheeling = !0),
                setTimeout(function () {
                  v.wheeling = !1;
                }, 50),
                m.deltaY
                  ? (D = m.deltaY > 0 ? 1 : -1)
                  : m.wheelDelta
                  ? (D = -m.wheelDelta / 120)
                  : m.detail && (D = m.detail > 0 ? 1 : -1),
                this.zoom(-D * p, m)));
          },
          cropStart: function (m) {
            var v = m.buttons,
              p = m.button;
            if (
              !(
                this.disabled ||
                ((m.type === "mousedown" ||
                  (m.type === "pointerdown" && m.pointerType === "mouse")) &&
                  ((qt(v) && v !== 1) || (qt(p) && p !== 0) || m.ctrlKey))
              )
            ) {
              var D = this.options,
                k = this.pointers,
                M;
              m.changedTouches
                ? Ce(m.changedTouches, function (z) {
                    k[z.identifier] = Ti(z);
                  })
                : (k[m.pointerId || 0] = Ti(m)),
                Object.keys(k).length > 1 && D.zoomable && D.zoomOnTouch
                  ? (M = Vt)
                  : (M = Zr(m.target, It)),
                !!fr.test(M) &&
                  Hr(this.element, R, { originalEvent: m, action: M }) !== !1 &&
                  (m.preventDefault(),
                  (this.action = M),
                  (this.cropping = !1),
                  M === zt && ((this.cropping = !0), ke(this.dragBox, mt)));
            }
          },
          cropMove: function (m) {
            var v = this.action;
            if (!(this.disabled || !v)) {
              var p = this.pointers;
              m.preventDefault(),
                Hr(this.element, Dt, { originalEvent: m, action: v }) !== !1 &&
                  (m.changedTouches
                    ? Ce(m.changedTouches, function (D) {
                        ce(p[D.identifier] || {}, Ti(D, !0));
                      })
                    : ce(p[m.pointerId || 0] || {}, Ti(m, !0)),
                  this.change(m));
            }
          },
          cropEnd: function (m) {
            if (!this.disabled) {
              var v = this.action,
                p = this.pointers;
              m.changedTouches
                ? Ce(m.changedTouches, function (D) {
                    delete p[D.identifier];
                  })
                : delete p[m.pointerId || 0],
                v &&
                  (m.preventDefault(),
                  Object.keys(p).length || (this.action = ""),
                  this.cropping &&
                    ((this.cropping = !1),
                    zr(this.dragBox, mt, this.cropped && this.options.modal)),
                  Hr(this.element, we, { originalEvent: m, action: v }));
            }
          },
        },
        Fs = {
          change: function (m) {
            var v = this.options,
              p = this.canvasData,
              D = this.containerData,
              k = this.cropBoxData,
              M = this.pointers,
              z = this.action,
              lt = v.aspectRatio,
              nt = k.left,
              $ = k.top,
              K = k.width,
              ct = k.height,
              Yt = nt + K,
              Xt = $ + ct,
              ne = 0,
              se = 0,
              fe = D.width,
              Le = D.height,
              Ae = !0,
              pr;
            !lt && m.shiftKey && (lt = K && ct ? K / ct : 1),
              this.limited &&
                ((ne = k.minLeft),
                (se = k.minTop),
                (fe = ne + Math.min(D.width, p.width, p.left + p.width)),
                (Le = se + Math.min(D.height, p.height, p.top + p.height)));
            var Ve = M[Object.keys(M)[0]],
              gt = { x: Ve.endX - Ve.startX, y: Ve.endY - Ve.startY },
              ee = function (Ke) {
                switch (Ke) {
                  case ae:
                    Yt + gt.x > fe && (gt.x = fe - Yt);
                    break;
                  case St:
                    nt + gt.x < ne && (gt.x = ne - nt);
                    break;
                  case ve:
                    $ + gt.y < se && (gt.y = se - $);
                    break;
                  case Ne:
                    Xt + gt.y > Le && (gt.y = Le - Xt);
                    break;
                }
              };
            switch (z) {
              case Mt:
                (nt += gt.x), ($ += gt.y);
                break;
              case ae:
                if (gt.x >= 0 && (Yt >= fe || (lt && ($ <= se || Xt >= Le)))) {
                  Ae = !1;
                  break;
                }
                ee(ae),
                  (K += gt.x),
                  K < 0 && ((z = St), (K = -K), (nt -= K)),
                  lt && ((ct = K / lt), ($ += (k.height - ct) / 2));
                break;
              case ve:
                if (gt.y <= 0 && ($ <= se || (lt && (nt <= ne || Yt >= fe)))) {
                  Ae = !1;
                  break;
                }
                ee(ve),
                  (ct -= gt.y),
                  ($ += gt.y),
                  ct < 0 && ((z = Ne), (ct = -ct), ($ -= ct)),
                  lt && ((K = ct * lt), (nt += (k.width - K) / 2));
                break;
              case St:
                if (gt.x <= 0 && (nt <= ne || (lt && ($ <= se || Xt >= Le)))) {
                  Ae = !1;
                  break;
                }
                ee(St),
                  (K -= gt.x),
                  (nt += gt.x),
                  K < 0 && ((z = ae), (K = -K), (nt -= K)),
                  lt && ((ct = K / lt), ($ += (k.height - ct) / 2));
                break;
              case Ne:
                if (gt.y >= 0 && (Xt >= Le || (lt && (nt <= ne || Yt >= fe)))) {
                  Ae = !1;
                  break;
                }
                ee(Ne),
                  (ct += gt.y),
                  ct < 0 && ((z = ve), (ct = -ct), ($ -= ct)),
                  lt && ((K = ct * lt), (nt += (k.width - K) / 2));
                break;
              case je:
                if (lt) {
                  if (gt.y <= 0 && ($ <= se || Yt >= fe)) {
                    Ae = !1;
                    break;
                  }
                  ee(ve), (ct -= gt.y), ($ += gt.y), (K = ct * lt);
                } else
                  ee(ve),
                    ee(ae),
                    gt.x >= 0
                      ? Yt < fe
                        ? (K += gt.x)
                        : gt.y <= 0 && $ <= se && (Ae = !1)
                      : (K += gt.x),
                    gt.y <= 0
                      ? $ > se && ((ct -= gt.y), ($ += gt.y))
                      : ((ct -= gt.y), ($ += gt.y));
                K < 0 && ct < 0
                  ? ((z = S), (ct = -ct), (K = -K), ($ -= ct), (nt -= K))
                  : K < 0
                  ? ((z = Te), (K = -K), (nt -= K))
                  : ct < 0 && ((z = U), (ct = -ct), ($ -= ct));
                break;
              case Te:
                if (lt) {
                  if (gt.y <= 0 && ($ <= se || nt <= ne)) {
                    Ae = !1;
                    break;
                  }
                  ee(ve),
                    (ct -= gt.y),
                    ($ += gt.y),
                    (K = ct * lt),
                    (nt += k.width - K);
                } else
                  ee(ve),
                    ee(St),
                    gt.x <= 0
                      ? nt > ne
                        ? ((K -= gt.x), (nt += gt.x))
                        : gt.y <= 0 && $ <= se && (Ae = !1)
                      : ((K -= gt.x), (nt += gt.x)),
                    gt.y <= 0
                      ? $ > se && ((ct -= gt.y), ($ += gt.y))
                      : ((ct -= gt.y), ($ += gt.y));
                K < 0 && ct < 0
                  ? ((z = U), (ct = -ct), (K = -K), ($ -= ct), (nt -= K))
                  : K < 0
                  ? ((z = je), (K = -K), (nt -= K))
                  : ct < 0 && ((z = S), (ct = -ct), ($ -= ct));
                break;
              case S:
                if (lt) {
                  if (gt.x <= 0 && (nt <= ne || Xt >= Le)) {
                    Ae = !1;
                    break;
                  }
                  ee(St), (K -= gt.x), (nt += gt.x), (ct = K / lt);
                } else
                  ee(Ne),
                    ee(St),
                    gt.x <= 0
                      ? nt > ne
                        ? ((K -= gt.x), (nt += gt.x))
                        : gt.y >= 0 && Xt >= Le && (Ae = !1)
                      : ((K -= gt.x), (nt += gt.x)),
                    gt.y >= 0 ? Xt < Le && (ct += gt.y) : (ct += gt.y);
                K < 0 && ct < 0
                  ? ((z = je), (ct = -ct), (K = -K), ($ -= ct), (nt -= K))
                  : K < 0
                  ? ((z = U), (K = -K), (nt -= K))
                  : ct < 0 && ((z = Te), (ct = -ct), ($ -= ct));
                break;
              case U:
                if (lt) {
                  if (gt.x >= 0 && (Yt >= fe || Xt >= Le)) {
                    Ae = !1;
                    break;
                  }
                  ee(ae), (K += gt.x), (ct = K / lt);
                } else
                  ee(Ne),
                    ee(ae),
                    gt.x >= 0
                      ? Yt < fe
                        ? (K += gt.x)
                        : gt.y >= 0 && Xt >= Le && (Ae = !1)
                      : (K += gt.x),
                    gt.y >= 0 ? Xt < Le && (ct += gt.y) : (ct += gt.y);
                K < 0 && ct < 0
                  ? ((z = Te), (ct = -ct), (K = -K), ($ -= ct), (nt -= K))
                  : K < 0
                  ? ((z = S), (K = -K), (nt -= K))
                  : ct < 0 && ((z = je), (ct = -ct), ($ -= ct));
                break;
              case $t:
                this.move(gt.x, gt.y), (Ae = !1);
                break;
              case Vt:
                this.zoom(Ls(M), m), (Ae = !1);
                break;
              case zt:
                if (!gt.x || !gt.y) {
                  Ae = !1;
                  break;
                }
                (pr = Cs(this.cropper)),
                  (nt = Ve.startX - pr.left),
                  ($ = Ve.startY - pr.top),
                  (K = k.minWidth),
                  (ct = k.minHeight),
                  gt.x > 0
                    ? (z = gt.y > 0 ? U : je)
                    : gt.x < 0 && ((nt -= K), (z = gt.y > 0 ? S : Te)),
                  gt.y < 0 && ($ -= ct),
                  this.cropped ||
                    (ar(this.cropBox, V),
                    (this.cropped = !0),
                    this.limited && this.limitCropBox(!0, !0));
                break;
            }
            Ae &&
              ((k.width = K),
              (k.height = ct),
              (k.left = nt),
              (k.top = $),
              (this.action = z),
              this.renderCropBox()),
              Ce(M, function (De) {
                (De.startX = De.endX), (De.startY = De.endY);
              });
          },
        },
        ri = {
          crop: function () {
            return (
              this.ready &&
                !this.cropped &&
                !this.disabled &&
                ((this.cropped = !0),
                this.limitCropBox(!0, !0),
                this.options.modal && ke(this.dragBox, mt),
                ar(this.cropBox, V),
                this.setCropBoxData(this.initialCropBoxData)),
              this
            );
          },
          reset: function () {
            return (
              this.ready &&
                !this.disabled &&
                ((this.imageData = ce({}, this.initialImageData)),
                (this.canvasData = ce({}, this.initialCanvasData)),
                (this.cropBoxData = ce({}, this.initialCropBoxData)),
                this.renderCanvas(),
                this.cropped && this.renderCropBox()),
              this
            );
          },
          clear: function () {
            return (
              this.cropped &&
                !this.disabled &&
                (ce(this.cropBoxData, { left: 0, top: 0, width: 0, height: 0 }),
                (this.cropped = !1),
                this.renderCropBox(),
                this.limitCanvas(!0, !0),
                this.renderCanvas(),
                ar(this.dragBox, mt),
                ke(this.cropBox, V)),
              this
            );
          },
          replace: function (m) {
            var v =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : !1;
            return (
              !this.disabled &&
                m &&
                (this.isImg && (this.element.src = m),
                v
                  ? ((this.url = m),
                    (this.image.src = m),
                    this.ready &&
                      ((this.viewBoxImage.src = m),
                      Ce(this.previews, function (p) {
                        p.getElementsByTagName("img")[0].src = m;
                      })))
                  : (this.isImg && (this.replaced = !0),
                    (this.options.data = null),
                    this.uncreate(),
                    this.load(m))),
              this
            );
          },
          enable: function () {
            return (
              this.ready &&
                this.disabled &&
                ((this.disabled = !1), ar(this.cropper, st)),
              this
            );
          },
          disable: function () {
            return (
              this.ready &&
                !this.disabled &&
                ((this.disabled = !0), ke(this.cropper, st)),
              this
            );
          },
          destroy: function () {
            var m = this.element;
            return m[tt]
              ? ((m[tt] = void 0),
                this.isImg && this.replaced && (m.src = this.originalUrl),
                this.uncreate(),
                this)
              : this;
          },
          move: function (m) {
            var v =
                arguments.length > 1 && arguments[1] !== void 0
                  ? arguments[1]
                  : m,
              p = this.canvasData,
              D = p.left,
              k = p.top;
            return this.moveTo(
              Dr(m) ? m : D + Number(m),
              Dr(v) ? v : k + Number(v),
            );
          },
          moveTo: function (m) {
            var v =
                arguments.length > 1 && arguments[1] !== void 0
                  ? arguments[1]
                  : m,
              p = this.canvasData,
              D = !1;
            return (
              (m = Number(m)),
              (v = Number(v)),
              this.ready &&
                !this.disabled &&
                this.options.movable &&
                (qt(m) && ((p.left = m), (D = !0)),
                qt(v) && ((p.top = v), (D = !0)),
                D && this.renderCanvas(!0)),
              this
            );
          },
          zoom: function (m, v) {
            var p = this.canvasData;
            return (
              (m = Number(m)),
              m < 0 ? (m = 1 / (1 - m)) : (m = 1 + m),
              this.zoomTo((p.width * m) / p.naturalWidth, null, v)
            );
          },
          zoomTo: function (m, v, p) {
            var D = this.options,
              k = this.canvasData,
              M = k.width,
              z = k.height,
              lt = k.naturalWidth,
              nt = k.naturalHeight;
            if (
              ((m = Number(m)),
              m >= 0 && this.ready && !this.disabled && D.zoomable)
            ) {
              var $ = lt * m,
                K = nt * m;
              if (
                Hr(this.element, Ze, {
                  ratio: m,
                  oldRatio: M / lt,
                  originalEvent: p,
                }) === !1
              )
                return this;
              if (p) {
                var ct = this.pointers,
                  Yt = Cs(this.cropper),
                  Xt =
                    ct && Object.keys(ct).length
                      ? Rs(ct)
                      : { pageX: p.pageX, pageY: p.pageY };
                (k.left -= ($ - M) * ((Xt.pageX - Yt.left - k.left) / M)),
                  (k.top -= (K - z) * ((Xt.pageY - Yt.top - k.top) / z));
              } else
                Sr(v) && qt(v.x) && qt(v.y)
                  ? ((k.left -= ($ - M) * ((v.x - k.left) / M)),
                    (k.top -= (K - z) * ((v.y - k.top) / z)))
                  : ((k.left -= ($ - M) / 2), (k.top -= (K - z) / 2));
              (k.width = $), (k.height = K), this.renderCanvas(!0);
            }
            return this;
          },
          rotate: function (m) {
            return this.rotateTo((this.imageData.rotate || 0) + Number(m));
          },
          rotateTo: function (m) {
            return (
              (m = Number(m)),
              qt(m) &&
                this.ready &&
                !this.disabled &&
                this.options.rotatable &&
                ((this.imageData.rotate = m % 360), this.renderCanvas(!0, !0)),
              this
            );
          },
          scaleX: function (m) {
            var v = this.imageData.scaleY;
            return this.scale(m, qt(v) ? v : 1);
          },
          scaleY: function (m) {
            var v = this.imageData.scaleX;
            return this.scale(qt(v) ? v : 1, m);
          },
          scale: function (m) {
            var v =
                arguments.length > 1 && arguments[1] !== void 0
                  ? arguments[1]
                  : m,
              p = this.imageData,
              D = !1;
            return (
              (m = Number(m)),
              (v = Number(v)),
              this.ready &&
                !this.disabled &&
                this.options.scalable &&
                (qt(m) && ((p.scaleX = m), (D = !0)),
                qt(v) && ((p.scaleY = v), (D = !0)),
                D && this.renderCanvas(!0, !0)),
              this
            );
          },
          getData: function () {
            var m =
                arguments.length > 0 && arguments[0] !== void 0
                  ? arguments[0]
                  : !1,
              v = this.options,
              p = this.imageData,
              D = this.canvasData,
              k = this.cropBoxData,
              M;
            if (this.ready && this.cropped) {
              M = {
                x: k.left - D.left,
                y: k.top - D.top,
                width: k.width,
                height: k.height,
              };
              var z = p.width / p.naturalWidth;
              if (
                (Ce(M, function ($, K) {
                  M[K] = $ / z;
                }),
                m)
              ) {
                var lt = Math.round(M.y + M.height),
                  nt = Math.round(M.x + M.width);
                (M.x = Math.round(M.x)),
                  (M.y = Math.round(M.y)),
                  (M.width = nt - M.x),
                  (M.height = lt - M.y);
              }
            } else M = { x: 0, y: 0, width: 0, height: 0 };
            return (
              v.rotatable && (M.rotate = p.rotate || 0),
              v.scalable &&
                ((M.scaleX = p.scaleX || 1), (M.scaleY = p.scaleY || 1)),
              M
            );
          },
          setData: function (m) {
            var v = this.options,
              p = this.imageData,
              D = this.canvasData,
              k = {};
            if (this.ready && !this.disabled && Sr(m)) {
              var M = !1;
              v.rotatable &&
                qt(m.rotate) &&
                m.rotate !== p.rotate &&
                ((p.rotate = m.rotate), (M = !0)),
                v.scalable &&
                  (qt(m.scaleX) &&
                    m.scaleX !== p.scaleX &&
                    ((p.scaleX = m.scaleX), (M = !0)),
                  qt(m.scaleY) &&
                    m.scaleY !== p.scaleY &&
                    ((p.scaleY = m.scaleY), (M = !0))),
                M && this.renderCanvas(!0, !0);
              var z = p.width / p.naturalWidth;
              qt(m.x) && (k.left = m.x * z + D.left),
                qt(m.y) && (k.top = m.y * z + D.top),
                qt(m.width) && (k.width = m.width * z),
                qt(m.height) && (k.height = m.height * z),
                this.setCropBoxData(k);
            }
            return this;
          },
          getContainerData: function () {
            return this.ready ? ce({}, this.containerData) : {};
          },
          getImageData: function () {
            return this.sized ? ce({}, this.imageData) : {};
          },
          getCanvasData: function () {
            var m = this.canvasData,
              v = {};
            return (
              this.ready &&
                Ce(
                  [
                    "left",
                    "top",
                    "width",
                    "height",
                    "naturalWidth",
                    "naturalHeight",
                  ],
                  function (p) {
                    v[p] = m[p];
                  },
                ),
              v
            );
          },
          setCanvasData: function (m) {
            var v = this.canvasData,
              p = v.aspectRatio;
            return (
              this.ready &&
                !this.disabled &&
                Sr(m) &&
                (qt(m.left) && (v.left = m.left),
                qt(m.top) && (v.top = m.top),
                qt(m.width)
                  ? ((v.width = m.width), (v.height = m.width / p))
                  : qt(m.height) &&
                    ((v.height = m.height), (v.width = m.height * p)),
                this.renderCanvas(!0)),
              this
            );
          },
          getCropBoxData: function () {
            var m = this.cropBoxData,
              v;
            return (
              this.ready &&
                this.cropped &&
                (v = {
                  left: m.left,
                  top: m.top,
                  width: m.width,
                  height: m.height,
                }),
              v || {}
            );
          },
          setCropBoxData: function (m) {
            var v = this.cropBoxData,
              p = this.options.aspectRatio,
              D,
              k;
            return (
              this.ready &&
                this.cropped &&
                !this.disabled &&
                Sr(m) &&
                (qt(m.left) && (v.left = m.left),
                qt(m.top) && (v.top = m.top),
                qt(m.width) &&
                  m.width !== v.width &&
                  ((D = !0), (v.width = m.width)),
                qt(m.height) &&
                  m.height !== v.height &&
                  ((k = !0), (v.height = m.height)),
                p &&
                  (D
                    ? (v.height = v.width / p)
                    : k && (v.width = v.height * p)),
                this.renderCropBox()),
              this
            );
          },
          getCroppedCanvas: function () {
            var m =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : {};
            if (!this.ready || !window.HTMLCanvasElement) return null;
            var v = this.canvasData,
              p = ti(this.image, this.imageData, v, m);
            if (!this.cropped) return p;
            var D = this.getData(m.rounded),
              k = D.x,
              M = D.y,
              z = D.width,
              lt = D.height,
              nt = p.width / Math.floor(v.naturalWidth);
            nt !== 1 && ((k *= nt), (M *= nt), (z *= nt), (lt *= nt));
            var $ = z / lt,
              K = lr({
                aspectRatio: $,
                width: m.maxWidth || 1 / 0,
                height: m.maxHeight || 1 / 0,
              }),
              ct = lr(
                {
                  aspectRatio: $,
                  width: m.minWidth || 0,
                  height: m.minHeight || 0,
                },
                "cover",
              ),
              Yt = lr({
                aspectRatio: $,
                width: m.width || (nt !== 1 ? p.width : z),
                height: m.height || (nt !== 1 ? p.height : lt),
              }),
              Xt = Yt.width,
              ne = Yt.height;
            (Xt = Math.min(K.width, Math.max(ct.width, Xt))),
              (ne = Math.min(K.height, Math.max(ct.height, ne)));
            var se = document.createElement("canvas"),
              fe = se.getContext("2d");
            (se.width = qr(Xt)),
              (se.height = qr(ne)),
              (fe.fillStyle = m.fillColor || "transparent"),
              fe.fillRect(0, 0, Xt, ne);
            var Le = m.imageSmoothingEnabled,
              Ae = Le === void 0 ? !0 : Le,
              pr = m.imageSmoothingQuality;
            (fe.imageSmoothingEnabled = Ae),
              pr && (fe.imageSmoothingQuality = pr);
            var Ve = p.width,
              gt = p.height,
              ee = k,
              De = M,
              Ke,
              cr,
              ur,
              Cr,
              kr,
              er;
            ee <= -z || ee > Ve
              ? ((ee = 0), (Ke = 0), (ur = 0), (kr = 0))
              : ee <= 0
              ? ((ur = -ee), (ee = 0), (Ke = Math.min(Ve, z + ee)), (kr = Ke))
              : ee <= Ve && ((ur = 0), (Ke = Math.min(z, Ve - ee)), (kr = Ke)),
              Ke <= 0 || De <= -lt || De > gt
                ? ((De = 0), (cr = 0), (Cr = 0), (er = 0))
                : De <= 0
                ? ((Cr = -De),
                  (De = 0),
                  (cr = Math.min(gt, lt + De)),
                  (er = cr))
                : De <= gt &&
                  ((Cr = 0), (cr = Math.min(lt, gt - De)), (er = cr));
            var Ie = [ee, De, Ke, cr];
            if (kr > 0 && er > 0) {
              var br = Xt / z;
              Ie.push(ur * br, Cr * br, kr * br, er * br);
            }
            return (
              fe.drawImage.apply(
                fe,
                [p].concat(
                  B(
                    Ie.map(function (ii) {
                      return Math.floor(qr(ii));
                    }),
                  ),
                ),
              ),
              se
            );
          },
          setAspectRatio: function (m) {
            var v = this.options;
            return (
              !this.disabled &&
                !Dr(m) &&
                ((v.aspectRatio = Math.max(0, m) || NaN),
                this.ready &&
                  (this.initCropBox(), this.cropped && this.renderCropBox())),
              this
            );
          },
          setDragMode: function (m) {
            var v = this.options,
              p = this.dragBox,
              D = this.face;
            if (this.ready && !this.disabled) {
              var k = m === Nt,
                M = v.movable && m === pe;
              (m = k || M ? m : Re),
                (v.dragMode = m),
                Or(p, It, m),
                zr(p, F, k),
                zr(p, wt, M),
                v.cropBoxMovable || (Or(D, It, m), zr(D, F, k), zr(D, wt, M));
            }
            return this;
          },
        },
        ea = Ct.Cropper,
        Ci = (function () {
          function T(m) {
            var v =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {};
            if ((h(this, T), !m || !q.test(m.tagName)))
              throw new Error(
                "The first argument is required and must be an <img> or <canvas> element.",
              );
            (this.element = m),
              (this.options = ce({}, Wt, Sr(v) && v)),
              (this.cropped = !1),
              (this.disabled = !1),
              (this.pointers = {}),
              (this.ready = !1),
              (this.reloading = !1),
              (this.replaced = !1),
              (this.sized = !1),
              (this.sizing = !1),
              this.init();
          }
          return L(
            T,
            [
              {
                key: "init",
                value: function () {
                  var v = this.element,
                    p = v.tagName.toLowerCase(),
                    D;
                  if (!v[tt]) {
                    if (((v[tt] = this), p === "img")) {
                      if (
                        ((this.isImg = !0),
                        (D = v.getAttribute("src") || ""),
                        (this.originalUrl = D),
                        !D)
                      )
                        return;
                      D = v.src;
                    } else
                      p === "canvas" &&
                        window.HTMLCanvasElement &&
                        (D = v.toDataURL());
                    this.load(D);
                  }
                },
              },
              {
                key: "load",
                value: function (v) {
                  var p = this;
                  if (!!v) {
                    (this.url = v), (this.imageData = {});
                    var D = this.element,
                      k = this.options;
                    if (
                      (!k.rotatable && !k.scalable && (k.checkOrientation = !1),
                      !k.checkOrientation || !window.ArrayBuffer)
                    ) {
                      this.clone();
                      return;
                    }
                    if (yi.test(v)) {
                      P.test(v) ? this.read(Ds(v)) : this.clone();
                      return;
                    }
                    var M = new XMLHttpRequest(),
                      z = this.clone.bind(this);
                    (this.reloading = !0),
                      (this.xhr = M),
                      (M.onabort = z),
                      (M.onerror = z),
                      (M.ontimeout = z),
                      (M.onprogress = function () {
                        M.getResponseHeader("content-type") !== dr && M.abort();
                      }),
                      (M.onload = function () {
                        p.read(M.response);
                      }),
                      (M.onloadend = function () {
                        (p.reloading = !1), (p.xhr = null);
                      }),
                      k.checkCrossOrigin &&
                        ks(v) &&
                        D.crossOrigin &&
                        (v = Ji(v)),
                      M.open("GET", v, !0),
                      (M.responseType = "arraybuffer"),
                      (M.withCredentials = D.crossOrigin === "use-credentials"),
                      M.send();
                  }
                },
              },
              {
                key: "read",
                value: function (v) {
                  var p = this.options,
                    D = this.imageData,
                    k = Ps(v),
                    M = 0,
                    z = 1,
                    lt = 1;
                  if (k > 1) {
                    this.url = Qi(v, dr);
                    var nt = Mr(k);
                    (M = nt.rotate), (z = nt.scaleX), (lt = nt.scaleY);
                  }
                  p.rotatable && (D.rotate = M),
                    p.scalable && ((D.scaleX = z), (D.scaleY = lt)),
                    this.clone();
                },
              },
              {
                key: "clone",
                value: function () {
                  var v = this.element,
                    p = this.url,
                    D = v.crossOrigin,
                    k = p;
                  this.options.checkCrossOrigin &&
                    ks(p) &&
                    (D || (D = "anonymous"), (k = Ji(p))),
                    (this.crossOrigin = D),
                    (this.crossOriginUrl = k);
                  var M = document.createElement("img");
                  D && (M.crossOrigin = D),
                    (M.src = k || p),
                    (M.alt = v.alt || "The image to crop"),
                    (this.image = M),
                    (M.onload = this.start.bind(this)),
                    (M.onerror = this.stop.bind(this)),
                    ke(M, Rt),
                    v.parentNode.insertBefore(M, v.nextSibling);
                },
              },
              {
                key: "start",
                value: function () {
                  var v = this,
                    p = this.image;
                  (p.onload = null), (p.onerror = null), (this.sizing = !0);
                  var D =
                      Ct.navigator &&
                      /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(
                        Ct.navigator.userAgent,
                      ),
                    k = function (nt, $) {
                      ce(v.imageData, {
                        naturalWidth: nt,
                        naturalHeight: $,
                        aspectRatio: nt / $,
                      }),
                        (v.initialImageData = ce({}, v.imageData)),
                        (v.sizing = !1),
                        (v.sized = !0),
                        v.build();
                    };
                  if (p.naturalWidth && !D) {
                    k(p.naturalWidth, p.naturalHeight);
                    return;
                  }
                  var M = document.createElement("img"),
                    z = document.body || document.documentElement;
                  (this.sizingImage = M),
                    (M.onload = function () {
                      k(M.width, M.height), D || z.removeChild(M);
                    }),
                    (M.src = p.src),
                    D ||
                      ((M.style.cssText =
                        "left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;"),
                      z.appendChild(M));
                },
              },
              {
                key: "stop",
                value: function () {
                  var v = this.image;
                  (v.onload = null),
                    (v.onerror = null),
                    v.parentNode.removeChild(v),
                    (this.image = null);
                },
              },
              {
                key: "build",
                value: function () {
                  if (!(!this.sized || this.ready)) {
                    var v = this.element,
                      p = this.options,
                      D = this.image,
                      k = v.parentNode,
                      M = document.createElement("div");
                    M.innerHTML = xt;
                    var z = M.querySelector(".".concat(tt, "-container")),
                      lt = z.querySelector(".".concat(tt, "-canvas")),
                      nt = z.querySelector(".".concat(tt, "-drag-box")),
                      $ = z.querySelector(".".concat(tt, "-crop-box")),
                      K = $.querySelector(".".concat(tt, "-face"));
                    (this.container = k),
                      (this.cropper = z),
                      (this.canvas = lt),
                      (this.dragBox = nt),
                      (this.cropBox = $),
                      (this.viewBox = z.querySelector(
                        ".".concat(tt, "-view-box"),
                      )),
                      (this.face = K),
                      lt.appendChild(D),
                      ke(v, V),
                      k.insertBefore(z, v.nextSibling),
                      ar(D, Rt),
                      this.initPreview(),
                      this.bind(),
                      (p.initialAspectRatio =
                        Math.max(0, p.initialAspectRatio) || NaN),
                      (p.aspectRatio = Math.max(0, p.aspectRatio) || NaN),
                      (p.viewMode =
                        Math.max(0, Math.min(3, Math.round(p.viewMode))) || 0),
                      ke($, V),
                      p.guides ||
                        ke(
                          $.getElementsByClassName("".concat(tt, "-dashed")),
                          V,
                        ),
                      p.center ||
                        ke(
                          $.getElementsByClassName("".concat(tt, "-center")),
                          V,
                        ),
                      p.background && ke(z, "".concat(tt, "-bg")),
                      p.highlight || ke(K, pt),
                      p.cropBoxMovable && (ke(K, wt), Or(K, It, Mt)),
                      p.cropBoxResizable ||
                        (ke(
                          $.getElementsByClassName("".concat(tt, "-line")),
                          V,
                        ),
                        ke(
                          $.getElementsByClassName("".concat(tt, "-point")),
                          V,
                        )),
                      this.render(),
                      (this.ready = !0),
                      this.setDragMode(p.dragMode),
                      p.autoCrop && this.crop(),
                      this.setData(p.data),
                      Fe(p.ready) && Ue(v, ye, p.ready, { once: !0 }),
                      Hr(v, ye);
                  }
                },
              },
              {
                key: "unbuild",
                value: function () {
                  if (!!this.ready) {
                    (this.ready = !1), this.unbind(), this.resetPreview();
                    var v = this.cropper.parentNode;
                    v && v.removeChild(this.cropper), ar(this.element, V);
                  }
                },
              },
              {
                key: "uncreate",
                value: function () {
                  this.ready
                    ? (this.unbuild(), (this.ready = !1), (this.cropped = !1))
                    : this.sizing
                    ? ((this.sizingImage.onload = null),
                      (this.sizing = !1),
                      (this.sized = !1))
                    : this.reloading
                    ? ((this.xhr.onabort = null), this.xhr.abort())
                    : this.image && this.stop();
                },
              },
            ],
            [
              {
                key: "noConflict",
                value: function () {
                  return (window.Cropper = ea), T;
                },
              },
              {
                key: "setDefaults",
                value: function (v) {
                  ce(Wt, Sr(v) && v);
                },
              },
            ],
          );
        })();
      return ce(Ci.prototype, Os, ei, Ms, ta, Fs, ri), Ci;
    });
  });
  var Uu = Lr((Hu, Wu) => {
    (function (r) {
      typeof define == "function" && define.amd
        ? define(r)
        : typeof Hu == "object"
        ? (Wu.exports = r())
        : r();
    })(function () {
      "use strict";
      var r = typeof window != "undefined" ? window : this,
        t = (r.Glider = function (s, l) {
          var h = this;
          if (s._glider) return s._glider;
          if (
            ((h.ele = s),
            h.ele.classList.add("glider"),
            (h.ele._glider = h),
            (h.opt = Object.assign(
              {},
              {
                slidesToScroll: 1,
                slidesToShow: 1,
                resizeLock: !0,
                duration: 0.5,
                passiveListeners: !1,
                easing: function (w, L, I, B, Z) {
                  return B * (L /= Z) * L + I;
                },
              },
              l,
            )),
            (h.animate_id = h.page = h.slide = 0),
            (h.arrows = {}),
            (h._opt = h.opt),
            h.opt.skipTrack)
          )
            h.track = h.ele.children[0];
          else
            for (
              h.track = document.createElement("div"),
                h.ele.appendChild(h.track);
              h.ele.children.length !== 1;

            )
              h.track.appendChild(h.ele.children[0]);
          h.track.classList.add("glider-track"),
            h.init(),
            (h.resize = h.init.bind(h, !0)),
            h.event(
              h.ele,
              "add",
              { scroll: h.updateControls.bind(h) },
              { passive: h.opt.passiveListeners },
            ),
            h.event(r, "add", { resize: h.resize });
        }),
        n = t.prototype;
      return (
        (n.init = function (s, l) {
          var h = this,
            w = 0,
            L = 0;
          (h.slides = h.track.children),
            [].forEach.call(h.slides, function (Z, Tt) {
              Z.classList.add("glider-slide"),
                Z.setAttribute("data-gslide", Tt);
            }),
            (h.containerWidth = h.ele.clientWidth);
          var I = h.settingsBreakpoint();
          if (
            (l || (l = I),
            h.opt.slidesToShow === "auto" ||
              typeof h.opt._autoSlide != "undefined")
          ) {
            var B = h.containerWidth / h.opt.itemWidth;
            h.opt._autoSlide = h.opt.slidesToShow = h.opt.exactWidth
              ? B
              : Math.max(1, Math.floor(B));
          }
          h.opt.slidesToScroll === "auto" &&
            (h.opt.slidesToScroll = Math.floor(h.opt.slidesToShow)),
            (h.itemWidth = h.opt.exactWidth
              ? h.opt.itemWidth
              : h.containerWidth / h.opt.slidesToShow),
            [].forEach.call(h.slides, function (Z) {
              (Z.style.height = "auto"),
                (Z.style.width = h.itemWidth + "px"),
                (w += h.itemWidth),
                (L = Math.max(Z.offsetHeight, L));
            }),
            (h.track.style.width = w + "px"),
            (h.trackWidth = w),
            (h.isDrag = !1),
            (h.preventClick = !1),
            (h.move = !1),
            h.opt.resizeLock && h.scrollTo(h.slide * h.itemWidth, 0),
            (I || l) && (h.bindArrows(), h.buildDots(), h.bindDrag()),
            h.updateControls(),
            h.emit(s ? "refresh" : "loaded");
        }),
        (n.bindDrag = function () {
          var s = this;
          s.mouse = s.mouse || s.handleMouse.bind(s);
          var l = function () {
            (s.mouseDown = void 0),
              s.ele.classList.remove("drag"),
              s.isDrag && (s.preventClick = !0),
              (s.isDrag = !1);
          };
          let h = function () {
            s.move = !0;
          };
          var w = {
            mouseup: l,
            mouseleave: l,
            mousedown: function (L) {
              L.preventDefault(),
                L.stopPropagation(),
                (s.mouseDown = L.clientX),
                s.ele.classList.add("drag"),
                (s.move = !1),
                setTimeout(h, 300);
            },
            touchstart: function (L) {
              s.ele.classList.add("drag"), (s.move = !1), setTimeout(h, 300);
            },
            mousemove: s.mouse,
            click: function (L) {
              s.preventClick &&
                s.move &&
                (L.preventDefault(), L.stopPropagation()),
                (s.preventClick = !1),
                (s.move = !1);
            },
          };
          s.ele.classList.toggle("draggable", s.opt.draggable === !0),
            s.event(s.ele, "remove", w),
            s.opt.draggable &&
              s.event(s.ele, "add", w, { passive: s.opt.passiveListeners });
        }),
        (n.buildDots = function () {
          var s = this;
          if (!s.opt.dots) {
            s.dots && (s.dots.innerHTML = "");
            return;
          }
          if (
            (typeof s.opt.dots == "string"
              ? (s.dots = document.querySelector(s.opt.dots))
              : (s.dots = s.opt.dots),
            !!s.dots)
          ) {
            (s.dots.innerHTML = ""),
              s.dots.setAttribute("role", "tablist"),
              s.dots.classList.add("glider-dots");
            for (
              var l = 0;
              l < Math.ceil(s.slides.length / s.opt.slidesToShow);
              ++l
            ) {
              var h = document.createElement("button");
              (h.dataset.index = l),
                h.setAttribute("aria-label", "Page " + (l + 1)),
                h.setAttribute("role", "tab"),
                (h.className = "glider-dot " + (l ? "" : "active")),
                s.event(h, "add", { click: s.scrollItem.bind(s, l, !0) }),
                s.dots.appendChild(h);
            }
          }
        }),
        (n.bindArrows = function () {
          var s = this;
          if (!s.opt.arrows) {
            Object.keys(s.arrows).forEach(function (l) {
              var h = s.arrows[l];
              s.event(h, "remove", { click: h._func });
            });
            return;
          }
          ["prev", "next"].forEach(function (l) {
            var h = s.opt.arrows[l];
            h &&
              (typeof h == "string" && (h = document.querySelector(h)),
              h &&
                ((h._func = h._func || s.scrollItem.bind(s, l)),
                s.event(h, "remove", { click: h._func }),
                s.event(h, "add", { click: h._func }),
                (s.arrows[l] = h)));
          });
        }),
        (n.updateControls = function (s) {
          var l = this;
          s && !l.opt.scrollPropagate && s.stopPropagation();
          var h = l.containerWidth >= l.trackWidth;
          l.opt.rewind ||
            (l.arrows.prev &&
              (l.arrows.prev.classList.toggle(
                "disabled",
                l.ele.scrollLeft <= 0 || h,
              ),
              l.arrows.prev.setAttribute(
                "aria-disabled",
                l.arrows.prev.classList.contains("disabled"),
              )),
            l.arrows.next &&
              (l.arrows.next.classList.toggle(
                "disabled",
                Math.ceil(l.ele.scrollLeft + l.containerWidth) >=
                  Math.floor(l.trackWidth) || h,
              ),
              l.arrows.next.setAttribute(
                "aria-disabled",
                l.arrows.next.classList.contains("disabled"),
              ))),
            (l.slide = Math.round(l.ele.scrollLeft / l.itemWidth)),
            (l.page = Math.round(l.ele.scrollLeft / l.containerWidth));
          var w = l.slide + Math.floor(Math.floor(l.opt.slidesToShow) / 2),
            L = Math.floor(l.opt.slidesToShow) % 2 ? 0 : w + 1;
          Math.floor(l.opt.slidesToShow) === 1 && (L = 0),
            l.ele.scrollLeft + l.containerWidth >= Math.floor(l.trackWidth) &&
              (l.page = l.dots ? l.dots.children.length - 1 : 0),
            [].forEach.call(l.slides, function (I, B) {
              var Z = I.classList,
                Tt = Z.contains("visible"),
                ft = l.ele.scrollLeft,
                vt = l.ele.scrollLeft + l.containerWidth,
                ht = l.itemWidth * B,
                Pt = ht + l.itemWidth;
              [].forEach.call(Z, function (bt) {
                /^left|right/.test(bt) && Z.remove(bt);
              }),
                Z.toggle("active", l.slide === B),
                w === B || (L && L === B)
                  ? Z.add("center")
                  : (Z.remove("center"),
                    Z.add(
                      [
                        B < w ? "left" : "right",
                        Math.abs(B - (B < w ? w : L || w)),
                      ].join("-"),
                    ));
              var Ct =
                Math.ceil(ht) >= Math.floor(ft) &&
                Math.floor(Pt) <= Math.ceil(vt);
              Z.toggle("visible", Ct),
                Ct !== Tt &&
                  l.emit("slide-" + (Ct ? "visible" : "hidden"), { slide: B });
            }),
            l.dots &&
              [].forEach.call(l.dots.children, function (I, B) {
                I.classList.toggle("active", l.page === B);
              }),
            s &&
              l.opt.scrollLock &&
              (clearTimeout(l.scrollLock),
              (l.scrollLock = setTimeout(function () {
                clearTimeout(l.scrollLock),
                  Math.abs(l.ele.scrollLeft / l.itemWidth - l.slide) > 0.02 &&
                    (l.mouseDown ||
                      (l.trackWidth > l.containerWidth + l.ele.scrollLeft &&
                        l.scrollItem(l.getCurrentSlide())));
              }, l.opt.scrollLockDelay || 250)));
        }),
        (n.getCurrentSlide = function () {
          var s = this;
          return s.round(s.ele.scrollLeft / s.itemWidth);
        }),
        (n.scrollItem = function (s, l, h) {
          h && h.preventDefault();
          var w = this,
            L = s;
          ++w.animate_id;
          var I = w.slide,
            B;
          if (l === !0)
            (s = Math.round((s * w.containerWidth) / w.itemWidth)),
              (B = s * w.itemWidth);
          else {
            if (typeof s == "string") {
              var Z = s === "prev";
              if (
                (w.opt.slidesToScroll % 1 || w.opt.slidesToShow % 1
                  ? (s = w.getCurrentSlide())
                  : (s = w.slide),
                Z ? (s -= w.opt.slidesToScroll) : (s += w.opt.slidesToScroll),
                w.opt.rewind)
              ) {
                var Tt = w.ele.scrollLeft;
                s =
                  Z && !Tt
                    ? w.slides.length
                    : !Z && Tt + w.containerWidth >= Math.floor(w.trackWidth)
                    ? 0
                    : s;
              }
            }
            (s = Math.max(Math.min(s, w.slides.length), 0)),
              (w.slide = s),
              (B = w.itemWidth * s);
          }
          return (
            w.emit("scroll-item", { prevSlide: I, slide: s }),
            w.scrollTo(
              B,
              w.opt.duration * Math.abs(w.ele.scrollLeft - B),
              function () {
                w.updateControls(),
                  w.emit("animated", {
                    value: L,
                    type: typeof L == "string" ? "arrow" : l ? "dot" : "slide",
                  });
              },
            ),
            !1
          );
        }),
        (n.settingsBreakpoint = function () {
          var s = this,
            l = s._opt.responsive;
          if (l) {
            l.sort(function (I, B) {
              return B.breakpoint - I.breakpoint;
            });
            for (var h = 0; h < l.length; ++h) {
              var w = l[h];
              if (r.innerWidth >= w.breakpoint)
                return s.breakpoint !== w.breakpoint
                  ? ((s.opt = Object.assign({}, s._opt, w.settings)),
                    (s.breakpoint = w.breakpoint),
                    !0)
                  : !1;
            }
          }
          var L = s.breakpoint !== 0;
          return (s.opt = Object.assign({}, s._opt)), (s.breakpoint = 0), L;
        }),
        (n.scrollTo = function (s, l, h) {
          var w = this,
            L = new Date().getTime(),
            I = w.animate_id,
            B = function () {
              var Z = new Date().getTime() - L;
              (w.ele.scrollLeft =
                w.ele.scrollLeft +
                (s - w.ele.scrollLeft) * w.opt.easing(0, Z, 0, 1, l)),
                Z < l && I === w.animate_id
                  ? r.requestAnimationFrame(B)
                  : ((w.ele.scrollLeft = s), h && h.call(w));
            };
          r.requestAnimationFrame(B);
        }),
        (n.removeItem = function (s) {
          var l = this;
          l.slides.length &&
            (l.track.removeChild(l.slides[s]), l.refresh(!0), l.emit("remove"));
        }),
        (n.addItem = function (s) {
          var l = this;
          l.track.appendChild(s), l.refresh(!0), l.emit("add");
        }),
        (n.handleMouse = function (s) {
          var l = this;
          l.mouseDown &&
            ((l.isDrag = !0),
            (l.ele.scrollLeft +=
              (l.mouseDown - s.clientX) * (l.opt.dragVelocity || 3.3)),
            (l.mouseDown = s.clientX));
        }),
        (n.round = function (s) {
          var l = this,
            h = l.opt.slidesToScroll % 1 || 1,
            w = 1 / h;
          return Math.round(s * w) / w;
        }),
        (n.refresh = function (s) {
          var l = this;
          l.init(!0, s);
        }),
        (n.setOption = function (s, l) {
          var h = this;
          h.breakpoint && !l
            ? h._opt.responsive.forEach(function (w) {
                w.breakpoint === h.breakpoint &&
                  (w.settings = Object.assign({}, w.settings, s));
              })
            : (h._opt = Object.assign({}, h._opt, s)),
            (h.breakpoint = 0),
            h.settingsBreakpoint();
        }),
        (n.destroy = function () {
          var s = this,
            l = s.ele.cloneNode(!0),
            h = function (w) {
              w.removeAttribute("style"),
                [].forEach.call(w.classList, function (L) {
                  /^glider/.test(L) && w.classList.remove(L);
                });
            };
          s.opt.skipTrack ||
            (l.children[0].outerHTML = l.children[0].innerHTML),
            h(l),
            [].forEach.call(l.getElementsByTagName("*"), h),
            s.ele.parentNode.replaceChild(l, s.ele),
            s.event(r, "remove", { resize: s.resize }),
            s.emit("destroy");
        }),
        (n.emit = function (s, l) {
          var h = this,
            w = new r.CustomEvent("glider-" + s, {
              bubbles: !h.opt.eventPropagate,
              detail: l,
            });
          h.ele.dispatchEvent(w);
        }),
        (n.event = function (s, l, h) {
          var w = s[l + "EventListener"].bind(s);
          Object.keys(h).forEach(function (L) {
            w(L, h[L]);
          });
        }),
        t
      );
    });
  });
  var $u = Lr((Bn, Fl) => {
    (function (t, n) {
      typeof Bn == "object" && typeof Fl == "object"
        ? (Fl.exports = n())
        : typeof define == "function" && define.amd
        ? define([], n)
        : typeof Bn == "object"
        ? (Bn.ClipboardJS = n())
        : (t.ClipboardJS = n());
    })(Bn, function () {
      return (function () {
        var r = {
            686: function (s, l, h) {
              "use strict";
              h.d(l, {
                default: function () {
                  return Rt;
                },
              });
              var w = h(279),
                L = h.n(w),
                I = h(370),
                B = h.n(I),
                Z = h(817),
                Tt = h.n(Z);
              function ft(pt) {
                try {
                  return document.execCommand(pt);
                } catch (mt) {
                  return !1;
                }
              }
              var vt = function (mt) {
                  var wt = Tt()(mt);
                  return ft("cut"), wt;
                },
                ht = vt;
              function Pt(pt) {
                var mt = document.documentElement.getAttribute("dir") === "rtl",
                  wt = document.createElement("textarea");
                (wt.style.fontSize = "12pt"),
                  (wt.style.border = "0"),
                  (wt.style.padding = "0"),
                  (wt.style.margin = "0"),
                  (wt.style.position = "absolute"),
                  (wt.style[mt ? "right" : "left"] = "-9999px");
                var It =
                  window.pageYOffset || document.documentElement.scrollTop;
                return (
                  (wt.style.top = "".concat(It, "px")),
                  wt.setAttribute("readonly", ""),
                  (wt.value = pt),
                  wt
                );
              }
              var Ct = function (mt, wt) {
                  var It = Pt(mt);
                  wt.container.appendChild(It);
                  var _t = Tt()(It);
                  return ft("copy"), It.remove(), _t;
                },
                bt = function (mt) {
                  var wt =
                      arguments.length > 1 && arguments[1] !== void 0
                        ? arguments[1]
                        : { container: document.body },
                    It = "";
                  return (
                    typeof mt == "string"
                      ? (It = Ct(mt, wt))
                      : mt instanceof HTMLInputElement &&
                        !["text", "search", "url", "tel", "password"].includes(
                          mt == null ? void 0 : mt.type,
                        )
                      ? (It = Ct(mt.value, wt))
                      : ((It = Tt()(mt)), ft("copy")),
                    It
                  );
                },
                H = bt;
              function tt(pt) {
                return (
                  typeof Symbol == "function" &&
                  typeof Symbol.iterator == "symbol"
                    ? (tt = function (wt) {
                        return typeof wt;
                      })
                    : (tt = function (wt) {
                        return wt &&
                          typeof Symbol == "function" &&
                          wt.constructor === Symbol &&
                          wt !== Symbol.prototype
                          ? "symbol"
                          : typeof wt;
                      }),
                  tt(pt)
                );
              }
              var Mt = function () {
                  var mt =
                      arguments.length > 0 && arguments[0] !== void 0
                        ? arguments[0]
                        : {},
                    wt = mt.action,
                    It = wt === void 0 ? "copy" : wt,
                    _t = mt.container,
                    Nt = mt.target,
                    pe = mt.text;
                  if (It !== "copy" && It !== "cut")
                    throw new Error(
                      'Invalid "action" value, use either "copy" or "cut"',
                    );
                  if (Nt !== void 0)
                    if (Nt && tt(Nt) === "object" && Nt.nodeType === 1) {
                      if (It === "copy" && Nt.hasAttribute("disabled"))
                        throw new Error(
                          'Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute',
                        );
                      if (
                        It === "cut" &&
                        (Nt.hasAttribute("readonly") ||
                          Nt.hasAttribute("disabled"))
                      )
                        throw new Error(
                          `Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`,
                        );
                    } else
                      throw new Error(
                        'Invalid "target" value, use a valid Element',
                      );
                  if (pe) return H(pe, { container: _t });
                  if (Nt)
                    return It === "cut" ? ht(Nt) : H(Nt, { container: _t });
                },
                zt = Mt;
              function $t(pt) {
                return (
                  typeof Symbol == "function" &&
                  typeof Symbol.iterator == "symbol"
                    ? ($t = function (wt) {
                        return typeof wt;
                      })
                    : ($t = function (wt) {
                        return wt &&
                          typeof Symbol == "function" &&
                          wt.constructor === Symbol &&
                          wt !== Symbol.prototype
                          ? "symbol"
                          : typeof wt;
                      }),
                  $t(pt)
                );
              }
              function Vt(pt, mt) {
                if (!(pt instanceof mt))
                  throw new TypeError("Cannot call a class as a function");
              }
              function ae(pt, mt) {
                for (var wt = 0; wt < mt.length; wt++) {
                  var It = mt[wt];
                  (It.enumerable = It.enumerable || !1),
                    (It.configurable = !0),
                    "value" in It && (It.writable = !0),
                    Object.defineProperty(pt, It.key, It);
                }
              }
              function St(pt, mt, wt) {
                return mt && ae(pt.prototype, mt), wt && ae(pt, wt), pt;
              }
              function Ne(pt, mt) {
                if (typeof mt != "function" && mt !== null)
                  throw new TypeError(
                    "Super expression must either be null or a function",
                  );
                (pt.prototype = Object.create(mt && mt.prototype, {
                  constructor: { value: pt, writable: !0, configurable: !0 },
                })),
                  mt && ve(pt, mt);
              }
              function ve(pt, mt) {
                return (
                  (ve =
                    Object.setPrototypeOf ||
                    function (It, _t) {
                      return (It.__proto__ = _t), It;
                    }),
                  ve(pt, mt)
                );
              }
              function je(pt) {
                var mt = S();
                return function () {
                  var It = F(pt),
                    _t;
                  if (mt) {
                    var Nt = F(this).constructor;
                    _t = Reflect.construct(It, arguments, Nt);
                  } else _t = It.apply(this, arguments);
                  return Te(this, _t);
                };
              }
              function Te(pt, mt) {
                return mt && ($t(mt) === "object" || typeof mt == "function")
                  ? mt
                  : U(pt);
              }
              function U(pt) {
                if (pt === void 0)
                  throw new ReferenceError(
                    "this hasn't been initialised - super() hasn't been called",
                  );
                return pt;
              }
              function S() {
                if (
                  typeof Reflect == "undefined" ||
                  !Reflect.construct ||
                  Reflect.construct.sham
                )
                  return !1;
                if (typeof Proxy == "function") return !0;
                try {
                  return (
                    Date.prototype.toString.call(
                      Reflect.construct(Date, [], function () {}),
                    ),
                    !0
                  );
                } catch (pt) {
                  return !1;
                }
              }
              function F(pt) {
                return (
                  (F = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (wt) {
                        return wt.__proto__ || Object.getPrototypeOf(wt);
                      }),
                  F(pt)
                );
              }
              function st(pt, mt) {
                var wt = "data-clipboard-".concat(pt);
                if (!!mt.hasAttribute(wt)) return mt.getAttribute(wt);
              }
              var V = (function (pt) {
                  Ne(wt, pt);
                  var mt = je(wt);
                  function wt(It, _t) {
                    var Nt;
                    return (
                      Vt(this, wt),
                      (Nt = mt.call(this)),
                      Nt.resolveOptions(_t),
                      Nt.listenClick(It),
                      Nt
                    );
                  }
                  return (
                    St(
                      wt,
                      [
                        {
                          key: "resolveOptions",
                          value: function () {
                            var _t =
                              arguments.length > 0 && arguments[0] !== void 0
                                ? arguments[0]
                                : {};
                            (this.action =
                              typeof _t.action == "function"
                                ? _t.action
                                : this.defaultAction),
                              (this.target =
                                typeof _t.target == "function"
                                  ? _t.target
                                  : this.defaultTarget),
                              (this.text =
                                typeof _t.text == "function"
                                  ? _t.text
                                  : this.defaultText),
                              (this.container =
                                $t(_t.container) === "object"
                                  ? _t.container
                                  : document.body);
                          },
                        },
                        {
                          key: "listenClick",
                          value: function (_t) {
                            var Nt = this;
                            this.listener = B()(_t, "click", function (pe) {
                              return Nt.onClick(pe);
                            });
                          },
                        },
                        {
                          key: "onClick",
                          value: function (_t) {
                            var Nt = _t.delegateTarget || _t.currentTarget,
                              pe = this.action(Nt) || "copy",
                              Re = zt({
                                action: pe,
                                container: this.container,
                                target: this.target(Nt),
                                text: this.text(Nt),
                              });
                            this.emit(Re ? "success" : "error", {
                              action: pe,
                              text: Re,
                              trigger: Nt,
                              clearSelection: function () {
                                Nt && Nt.focus(),
                                  window.getSelection().removeAllRanges();
                              },
                            });
                          },
                        },
                        {
                          key: "defaultAction",
                          value: function (_t) {
                            return st("action", _t);
                          },
                        },
                        {
                          key: "defaultTarget",
                          value: function (_t) {
                            var Nt = st("target", _t);
                            if (Nt) return document.querySelector(Nt);
                          },
                        },
                        {
                          key: "defaultText",
                          value: function (_t) {
                            return st("text", _t);
                          },
                        },
                        {
                          key: "destroy",
                          value: function () {
                            this.listener.destroy();
                          },
                        },
                      ],
                      [
                        {
                          key: "copy",
                          value: function (_t) {
                            var Nt =
                              arguments.length > 1 && arguments[1] !== void 0
                                ? arguments[1]
                                : { container: document.body };
                            return H(_t, Nt);
                          },
                        },
                        {
                          key: "cut",
                          value: function (_t) {
                            return ht(_t);
                          },
                        },
                        {
                          key: "isSupported",
                          value: function () {
                            var _t =
                                arguments.length > 0 && arguments[0] !== void 0
                                  ? arguments[0]
                                  : ["copy", "cut"],
                              Nt = typeof _t == "string" ? [_t] : _t,
                              pe = !!document.queryCommandSupported;
                            return (
                              Nt.forEach(function (Re) {
                                pe = pe && !!document.queryCommandSupported(Re);
                              }),
                              pe
                            );
                          },
                        },
                      ],
                    ),
                    wt
                  );
                })(L()),
                Rt = V;
            },
            828: function (s) {
              var l = 9;
              if (typeof Element != "undefined" && !Element.prototype.matches) {
                var h = Element.prototype;
                h.matches =
                  h.matchesSelector ||
                  h.mozMatchesSelector ||
                  h.msMatchesSelector ||
                  h.oMatchesSelector ||
                  h.webkitMatchesSelector;
              }
              function w(L, I) {
                for (; L && L.nodeType !== l; ) {
                  if (typeof L.matches == "function" && L.matches(I)) return L;
                  L = L.parentNode;
                }
              }
              s.exports = w;
            },
            438: function (s, l, h) {
              var w = h(828);
              function L(Z, Tt, ft, vt, ht) {
                var Pt = B.apply(this, arguments);
                return (
                  Z.addEventListener(ft, Pt, ht),
                  {
                    destroy: function () {
                      Z.removeEventListener(ft, Pt, ht);
                    },
                  }
                );
              }
              function I(Z, Tt, ft, vt, ht) {
                return typeof Z.addEventListener == "function"
                  ? L.apply(null, arguments)
                  : typeof ft == "function"
                  ? L.bind(null, document).apply(null, arguments)
                  : (typeof Z == "string" && (Z = document.querySelectorAll(Z)),
                    Array.prototype.map.call(Z, function (Pt) {
                      return L(Pt, Tt, ft, vt, ht);
                    }));
              }
              function B(Z, Tt, ft, vt) {
                return function (ht) {
                  (ht.delegateTarget = w(ht.target, Tt)),
                    ht.delegateTarget && vt.call(Z, ht);
                };
              }
              s.exports = I;
            },
            879: function (s, l) {
              (l.node = function (h) {
                return (
                  h !== void 0 && h instanceof HTMLElement && h.nodeType === 1
                );
              }),
                (l.nodeList = function (h) {
                  var w = Object.prototype.toString.call(h);
                  return (
                    h !== void 0 &&
                    (w === "[object NodeList]" ||
                      w === "[object HTMLCollection]") &&
                    "length" in h &&
                    (h.length === 0 || l.node(h[0]))
                  );
                }),
                (l.string = function (h) {
                  return typeof h == "string" || h instanceof String;
                }),
                (l.fn = function (h) {
                  var w = Object.prototype.toString.call(h);
                  return w === "[object Function]";
                });
            },
            370: function (s, l, h) {
              var w = h(879),
                L = h(438);
              function I(ft, vt, ht) {
                if (!ft && !vt && !ht)
                  throw new Error("Missing required arguments");
                if (!w.string(vt))
                  throw new TypeError("Second argument must be a String");
                if (!w.fn(ht))
                  throw new TypeError("Third argument must be a Function");
                if (w.node(ft)) return B(ft, vt, ht);
                if (w.nodeList(ft)) return Z(ft, vt, ht);
                if (w.string(ft)) return Tt(ft, vt, ht);
                throw new TypeError(
                  "First argument must be a String, HTMLElement, HTMLCollection, or NodeList",
                );
              }
              function B(ft, vt, ht) {
                return (
                  ft.addEventListener(vt, ht),
                  {
                    destroy: function () {
                      ft.removeEventListener(vt, ht);
                    },
                  }
                );
              }
              function Z(ft, vt, ht) {
                return (
                  Array.prototype.forEach.call(ft, function (Pt) {
                    Pt.addEventListener(vt, ht);
                  }),
                  {
                    destroy: function () {
                      Array.prototype.forEach.call(ft, function (Pt) {
                        Pt.removeEventListener(vt, ht);
                      });
                    },
                  }
                );
              }
              function Tt(ft, vt, ht) {
                return L(document.body, ft, vt, ht);
              }
              s.exports = I;
            },
            817: function (s) {
              function l(h) {
                var w;
                if (h.nodeName === "SELECT") h.focus(), (w = h.value);
                else if (h.nodeName === "INPUT" || h.nodeName === "TEXTAREA") {
                  var L = h.hasAttribute("readonly");
                  L || h.setAttribute("readonly", ""),
                    h.select(),
                    h.setSelectionRange(0, h.value.length),
                    L || h.removeAttribute("readonly"),
                    (w = h.value);
                } else {
                  h.hasAttribute("contenteditable") && h.focus();
                  var I = window.getSelection(),
                    B = document.createRange();
                  B.selectNodeContents(h),
                    I.removeAllRanges(),
                    I.addRange(B),
                    (w = I.toString());
                }
                return w;
              }
              s.exports = l;
            },
            279: function (s) {
              function l() {}
              (l.prototype = {
                on: function (h, w, L) {
                  var I = this.e || (this.e = {});
                  return (I[h] || (I[h] = [])).push({ fn: w, ctx: L }), this;
                },
                once: function (h, w, L) {
                  var I = this;
                  function B() {
                    I.off(h, B), w.apply(L, arguments);
                  }
                  return (B._ = w), this.on(h, B, L);
                },
                emit: function (h) {
                  var w = [].slice.call(arguments, 1),
                    L = ((this.e || (this.e = {}))[h] || []).slice(),
                    I = 0,
                    B = L.length;
                  for (I; I < B; I++) L[I].fn.apply(L[I].ctx, w);
                  return this;
                },
                off: function (h, w) {
                  var L = this.e || (this.e = {}),
                    I = L[h],
                    B = [];
                  if (I && w)
                    for (var Z = 0, Tt = I.length; Z < Tt; Z++)
                      I[Z].fn !== w && I[Z].fn._ !== w && B.push(I[Z]);
                  return B.length ? (L[h] = B) : delete L[h], this;
                },
              }),
                (s.exports = l),
                (s.exports.TinyEmitter = l);
            },
          },
          t = {};
        function n(s) {
          if (t[s]) return t[s].exports;
          var l = (t[s] = { exports: {} });
          return r[s](l, l.exports, n), l.exports;
        }
        return (
          (function () {
            n.n = function (s) {
              var l =
                s && s.__esModule
                  ? function () {
                      return s.default;
                    }
                  : function () {
                      return s;
                    };
              return n.d(l, { a: l }), l;
            };
          })(),
          (function () {
            n.d = function (s, l) {
              for (var h in l)
                n.o(l, h) &&
                  !n.o(s, h) &&
                  Object.defineProperty(s, h, { enumerable: !0, get: l[h] });
            };
          })(),
          (function () {
            n.o = function (s, l) {
              return Object.prototype.hasOwnProperty.call(s, l);
            };
          })(),
          n(686)
        );
      })().default;
    });
  });
  var hh = Lr((Nl, jl) => {
    (function (r, t) {
      typeof Nl == "object" && typeof jl != "undefined"
        ? (jl.exports = t())
        : typeof define == "function" && define.amd
        ? define(t)
        : ((r = typeof globalThis != "undefined" ? globalThis : r || self),
          (r.Trix = t()));
    })(Nl, function () {
      "use strict";
      var r = "trix",
        t = "2.0.7",
        n = "A rich text editor for everyday writing",
        s = "dist/trix.umd.min.js",
        l = "dist/trix.esm.min.js",
        h = "dist/trix.css",
        w = ["dist/*.css", "dist/*.js", "src/{inspector,trix}/*.js"],
        L = { type: "git", url: "git+https://github.com/basecamp/trix.git" },
        I = ["rich text", "wysiwyg", "editor"],
        B = "37signals, LLC",
        Z = "MIT",
        Tt = { url: "https://github.com/basecamp/trix/issues" },
        ft = "https://trix-editor.org/",
        vt = {
          "@babel/core": "^7.16.0",
          "@babel/preset-env": "^7.16.4",
          "@rollup/plugin-babel": "^5.3.0",
          "@rollup/plugin-commonjs": "^22.0.2",
          "@rollup/plugin-json": "^4.1.0",
          "@rollup/plugin-node-resolve": "^13.3.0",
          "@web/dev-server": "^0.1.34",
          "babel-eslint": "^10.1.0",
          concurrently: "^7.4.0",
          eslint: "^7.32.0",
          esm: "^3.2.25",
          karma: "6.4.1",
          "karma-chrome-launcher": "3.2.0",
          "karma-qunit": "^4.1.2",
          "karma-sauce-launcher": "^4.3.6",
          "node-sass": "^7.0.1",
          qunit: "2.19.1",
          rangy: "^1.3.0",
          rollup: "^2.56.3",
          "rollup-plugin-includepaths": "^0.2.4",
          "rollup-plugin-terser": "^7.0.2",
          svgo: "^2.8.0",
          webdriverio: "^7.19.5",
        },
        ht = { webdriverio: "^7.19.5" },
        Pt = {
          "build-css":
            "node-sass --functions=./assets/trix/stylesheets/functions assets/trix.scss dist/trix.css",
          "build-js": "rollup -c",
          "build-assets": "cp -f assets/*.html dist/",
          build:
            "yarn run build-js && yarn run build-css && yarn run build-assets",
          watch: "rollup -c -w",
          lint: "eslint .",
          pretest: "yarn run lint && yarn run build",
          test: "karma start",
          prerelease: "yarn version && yarn test",
          release: "npm adduser && npm publish",
          postrelease: "git push && git push --tags",
          dev: "web-dev-server --app-index index.html  --root-dir dist --node-resolve --open",
          start:
            "yarn build-assets && concurrently --kill-others --names js,css,dev-server 'yarn watch' 'yarn build-css --watch' 'yarn dev'",
        },
        Ct = {
          name: r,
          version: t,
          description: n,
          main: s,
          module: l,
          style: h,
          files: w,
          repository: L,
          keywords: I,
          author: B,
          license: Z,
          bugs: Tt,
          homepage: ft,
          devDependencies: vt,
          resolutions: ht,
          scripts: Pt,
        };
      let bt = "[data-trix-attachment]",
        H = {
          preview: { presentation: "gallery", caption: { name: !0, size: !0 } },
          file: { caption: { size: !0 } },
        },
        tt = {
          default: { tagName: "div", parse: !1 },
          quote: { tagName: "blockquote", nestable: !0 },
          heading1: {
            tagName: "h1",
            terminal: !0,
            breakOnReturn: !0,
            group: !1,
          },
          code: { tagName: "pre", terminal: !0, text: { plaintext: !0 } },
          bulletList: { tagName: "ul", parse: !1 },
          bullet: {
            tagName: "li",
            listAttribute: "bulletList",
            group: !1,
            nestable: !0,
            test(o) {
              return Mt(o.parentNode) === tt[this.listAttribute].tagName;
            },
          },
          numberList: { tagName: "ol", parse: !1 },
          number: {
            tagName: "li",
            listAttribute: "numberList",
            group: !1,
            nestable: !0,
            test(o) {
              return Mt(o.parentNode) === tt[this.listAttribute].tagName;
            },
          },
          attachmentGallery: {
            tagName: "div",
            exclusive: !0,
            terminal: !0,
            parse: !1,
            group: !1,
          },
        },
        Mt = (o) => {
          var e;
          return o == null || (e = o.tagName) === null || e === void 0
            ? void 0
            : e.toLowerCase();
        },
        zt = navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),
        $t = zt && parseInt(zt[1]);
      var Vt = {
          composesExistingText: /Android.*Chrome/.test(navigator.userAgent),
          recentAndroid: $t && $t > 12,
          samsungAndroid: $t && navigator.userAgent.match(/Android.*SM-/),
          forcesObjectResizing: /Trident.*rv:11/.test(navigator.userAgent),
          supportsInputEvents:
            typeof InputEvent != "undefined" &&
            ["data", "getTargetRanges", "inputType"].every(
              (o) => o in InputEvent.prototype,
            ),
        },
        ae = {
          attachment: "attachment",
          attachmentCaption: "attachment__caption",
          attachmentCaptionEditor: "attachment__caption-editor",
          attachmentMetadata: "attachment__metadata",
          attachmentMetadataContainer: "attachment__metadata-container",
          attachmentName: "attachment__name",
          attachmentProgress: "attachment__progress",
          attachmentSize: "attachment__size",
          attachmentToolbar: "attachment__toolbar",
          attachmentGallery: "attachment-gallery",
        },
        St = {
          attachFiles: "Attach Files",
          bold: "Bold",
          bullets: "Bullets",
          byte: "Byte",
          bytes: "Bytes",
          captionPlaceholder: "Add a caption\u2026",
          code: "Code",
          heading1: "Heading",
          indent: "Increase Level",
          italic: "Italic",
          link: "Link",
          numbers: "Numbers",
          outdent: "Decrease Level",
          quote: "Quote",
          redo: "Redo",
          remove: "Remove",
          strike: "Strikethrough",
          undo: "Undo",
          unlink: "Unlink",
          url: "URL",
          urlPlaceholder: "Enter a URL\u2026",
          GB: "GB",
          KB: "KB",
          MB: "MB",
          PB: "PB",
          TB: "TB",
        };
      let Ne = [St.bytes, St.KB, St.MB, St.GB, St.TB, St.PB];
      var ve = {
        prefix: "IEC",
        precision: 2,
        formatter(o) {
          switch (o) {
            case 0:
              return "0 ".concat(St.bytes);
            case 1:
              return "1 ".concat(St.byte);
            default:
              let e;
              this.prefix === "SI"
                ? (e = 1e3)
                : this.prefix === "IEC" && (e = 1024);
              let i = Math.floor(Math.log(o) / Math.log(e)),
                u = (o / Math.pow(e, i))
                  .toFixed(this.precision)
                  .replace(/0*$/, "")
                  .replace(/\.$/, "");
              return "".concat(u, " ").concat(Ne[i]);
          }
        },
      };
      let je = "\uFEFF",
        Te = "\xA0",
        U = "\uFFFC",
        S = function (o) {
          for (let e in o) {
            let i = o[e];
            this[e] = i;
          }
          return this;
        },
        F = document.documentElement,
        st = F.matches,
        V = function (o) {
          let {
              onElement: e,
              matchingSelector: i,
              withCallback: a,
              inPhase: c,
              preventDefault: u,
              times: g,
            } = arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : {},
            E = e || F,
            C = i,
            x = c === "capturing",
            _ = function (O) {
              g != null && --g === 0 && _.destroy();
              let G = wt(O.target, { matchingSelector: C });
              G != null &&
                (a == null || a.call(G, O, G), u && O.preventDefault());
            };
          return (
            (_.destroy = () => E.removeEventListener(o, _, x)),
            E.addEventListener(o, _, x),
            _
          );
        },
        Rt = function (o) {
          let e =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          return (e.times = 1), V(o, e);
        },
        pt = function (o) {
          let {
              onElement: e,
              bubbles: i,
              cancelable: a,
              attributes: c,
            } = arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : {},
            u = e != null ? e : F;
          (i = i !== !1), (a = a !== !1);
          let g = document.createEvent("Events");
          return (
            g.initEvent(o, i, a), c != null && S.call(g, c), u.dispatchEvent(g)
          );
        },
        mt = function (o, e) {
          if ((o == null ? void 0 : o.nodeType) === 1) return st.call(o, e);
        },
        wt = function (o) {
          let { matchingSelector: e, untilNode: i } =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          for (; o && o.nodeType !== Node.ELEMENT_NODE; ) o = o.parentNode;
          if (o != null)
            if (e != null) {
              if (o.closest && i == null) return o.closest(e);
              for (; o && o !== i; ) {
                if (mt(o, e)) return o;
                o = o.parentNode;
              }
            } else return o;
        },
        It = function (o) {
          for (; (e = o) !== null && e !== void 0 && e.firstElementChild; ) {
            var e;
            o = o.firstElementChild;
          }
          return o;
        },
        _t = (o) =>
          document.activeElement !== o && Nt(o, document.activeElement),
        Nt = function (o, e) {
          if (!(!o || !e))
            for (; e; ) {
              if (e === o) return !0;
              e = e.parentNode;
            }
        },
        pe = function (o, e) {
          if (!!o)
            return o.nodeType === Node.TEXT_NODE
              ? o
              : e === 0
              ? o.firstChild != null
                ? o.firstChild
                : o
              : o.childNodes.item(e - 1);
        },
        Re = function (o, e) {
          let i = pe(o, e);
          return wt(i);
        },
        qe = function (o) {
          var e;
          if (!((e = o) !== null && e !== void 0 && e.parentNode)) return;
          let i = 0;
          for (o = o.previousSibling; o; ) i++, (o = o.previousSibling);
          return i;
        },
        we = (o) => {
          var e;
          return o == null || (e = o.parentNode) === null || e === void 0
            ? void 0
            : e.removeChild(o);
        },
        Dt = function (o) {
          let {
              onlyNodesOfType: e,
              usingFilter: i,
              expandEntityReferences: a,
            } = arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : {},
            c = (() => {
              switch (e) {
                case "element":
                  return NodeFilter.SHOW_ELEMENT;
                case "text":
                  return NodeFilter.SHOW_TEXT;
                case "comment":
                  return NodeFilter.SHOW_COMMENT;
                default:
                  return NodeFilter.SHOW_ALL;
              }
            })();
          return document.createTreeWalker(
            o,
            c,
            i != null ? i : null,
            a === !0,
          );
        },
        R = (o) => {
          var e;
          return o == null || (e = o.tagName) === null || e === void 0
            ? void 0
            : e.toLowerCase();
        },
        A = function (o) {
          let e =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            i,
            a;
          typeof o == "object"
            ? ((e = o), (o = e.tagName))
            : (e = { attributes: e });
          let c = document.createElement(o);
          if (
            (e.editable != null &&
              (e.attributes == null && (e.attributes = {}),
              (e.attributes.contenteditable = e.editable)),
            e.attributes)
          )
            for (i in e.attributes) (a = e.attributes[i]), c.setAttribute(i, a);
          if (e.style) for (i in e.style) (a = e.style[i]), (c.style[i] = a);
          if (e.data) for (i in e.data) (a = e.data[i]), (c.dataset[i] = a);
          return (
            e.className &&
              e.className.split(" ").forEach((u) => {
                c.classList.add(u);
              }),
            e.textContent && (c.textContent = e.textContent),
            e.childNodes &&
              [].concat(e.childNodes).forEach((u) => {
                c.appendChild(u);
              }),
            c
          );
        },
        f,
        d = function () {
          if (f != null) return f;
          f = [];
          for (let o in tt) {
            let e = tt[o];
            e.tagName && f.push(e.tagName);
          }
          return f;
        },
        y = (o) => oe(o == null ? void 0 : o.firstChild),
        b = function (o) {
          return d().includes(R(o)) && !d().includes(R(o.firstChild));
        },
        Kt = function (o) {
          let { strict: e } =
            arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : { strict: !0 };
          return e ? oe(o) : oe(o) || (!oe(o.firstChild) && b(o));
        },
        oe = (o) => ye(o) && (o == null ? void 0 : o.data) === "block",
        ye = (o) => (o == null ? void 0 : o.nodeType) === Node.COMMENT_NODE,
        Me = function (o) {
          let { name: e } =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          if (!!o)
            if (dr(o)) {
              if (o.data === je)
                return e ? o.parentNode.dataset.trixCursorTarget === e : !0;
            } else return Me(o.firstChild);
        },
        _e = (o) => mt(o, bt),
        Ze = (o) => dr(o) && (o == null ? void 0 : o.data) === "",
        dr = (o) => (o == null ? void 0 : o.nodeType) === Node.TEXT_NODE,
        fr = {
          level2Enabled: !0,
          getLevel() {
            return this.level2Enabled && Vt.supportsInputEvents ? 2 : 0;
          },
          pickFiles(o) {
            let e = A("input", {
              type: "file",
              multiple: !0,
              hidden: !0,
              id: this.fileInputId,
            });
            e.addEventListener("change", () => {
              o(e.files), we(e);
            }),
              we(document.getElementById(this.fileInputId)),
              document.body.appendChild(e),
              e.click();
          },
        };
      var yi = {
          8: "backspace",
          9: "tab",
          13: "return",
          27: "escape",
          37: "left",
          39: "right",
          46: "delete",
          68: "d",
          72: "h",
          79: "o",
        },
        P = {
          removeBlankTableCells: !1,
          tableCellSeparator: " | ",
          tableRowSeparator: `
`,
        },
        q = {
          bold: {
            tagName: "strong",
            inheritable: !0,
            parser(o) {
              let e = window.getComputedStyle(o);
              return e.fontWeight === "bold" || e.fontWeight >= 600;
            },
          },
          italic: {
            tagName: "em",
            inheritable: !0,
            parser(o) {
              return window.getComputedStyle(o).fontStyle === "italic";
            },
          },
          href: {
            groupTagName: "a",
            parser(o) {
              let e = "a:not(".concat(bt, ")"),
                i = o.closest(e);
              if (i) return i.getAttribute("href");
            },
          },
          strike: { tagName: "del", inheritable: !0 },
          frozen: { style: { backgroundColor: "highlight" } },
        },
        Et = {
          getDefaultHTML() {
            return `<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`
              .concat(St.bold, '" tabindex="-1">')
              .concat(
                St.bold,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`,
              )
              .concat(St.italic, '" tabindex="-1">')
              .concat(
                St.italic,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`,
              )
              .concat(St.strike, '" tabindex="-1">')
              .concat(
                St.strike,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`,
              )
              .concat(St.link, '" tabindex="-1">')
              .concat(
                St.link,
                `</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`,
              )
              .concat(St.heading1, '" tabindex="-1">')
              .concat(
                St.heading1,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`,
              )
              .concat(St.quote, '" tabindex="-1">')
              .concat(
                St.quote,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`,
              )
              .concat(St.code, '" tabindex="-1">')
              .concat(
                St.code,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`,
              )
              .concat(St.bullets, '" tabindex="-1">')
              .concat(
                St.bullets,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`,
              )
              .concat(St.numbers, '" tabindex="-1">')
              .concat(
                St.numbers,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`,
              )
              .concat(St.outdent, '" tabindex="-1">')
              .concat(
                St.outdent,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`,
              )
              .concat(St.indent, '" tabindex="-1">')
              .concat(
                St.indent,
                `</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`,
              )
              .concat(St.attachFiles, '" tabindex="-1">')
              .concat(
                St.attachFiles,
                `</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`,
              )
              .concat(St.undo, '" tabindex="-1">')
              .concat(
                St.undo,
                `</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`,
              )
              .concat(St.redo, '" tabindex="-1">')
              .concat(
                St.redo,
                `</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`,
              )
              .concat(St.urlPlaceholder, '" aria-label="')
              .concat(
                St.url,
                `" required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`,
              )
              .concat(
                St.link,
                `" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`,
              )
              .concat(
                St.unlink,
                `" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`,
              );
          },
        };
      let re = { interval: 5e3 };
      var Wt = Object.freeze({
        __proto__: null,
        attachments: H,
        blockAttributes: tt,
        browser: Vt,
        css: ae,
        fileSize: ve,
        input: fr,
        keyNames: yi,
        lang: St,
        parser: P,
        textAttributes: q,
        toolbar: Et,
        undo: re,
      });
      class xt {
        static proxyMethod(e) {
          let { name: i, toMethod: a, toProperty: c, optional: u } = Tr(e);
          this.prototype[i] = function () {
            let g, E;
            if (a)
              if (u) {
                var C;
                E =
                  (C = this[a]) === null || C === void 0
                    ? void 0
                    : C.call(this);
              } else E = this[a]();
            else c && (E = this[c]);
            if (u) {
              var x;
              if (((g = (x = E) === null || x === void 0 ? void 0 : x[i]), g))
                return qt.call(g, E, arguments);
            } else return (g = E[i]), qt.call(g, E, arguments);
          };
        }
      }
      let Tr = function (o) {
          let e = o.match(Se);
          if (!e)
            throw new Error("can't parse @proxyMethod expression: ".concat(o));
          let i = { name: e[4] };
          return (
            e[2] != null ? (i.toMethod = e[1]) : (i.toProperty = e[1]),
            e[3] != null && (i.optional = !0),
            i
          );
        },
        { apply: qt } = Function.prototype,
        Se = new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$");
      var Dr, mr, Ts, Sr;
      class Fe extends xt {
        static box() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          return e instanceof this
            ? e
            : this.fromUCS2String(e == null ? void 0 : e.toString());
        }
        static fromUCS2String(e) {
          return new this(e, ce(e));
        }
        static fromCodepoints(e) {
          return new this(wi(e), e);
        }
        constructor(e, i) {
          super(...arguments),
            (this.ucs2String = e),
            (this.codepoints = i),
            (this.length = this.codepoints.length),
            (this.ucs2Length = this.ucs2String.length);
        }
        offsetToUCS2Offset(e) {
          return wi(this.codepoints.slice(0, Math.max(0, e))).length;
        }
        offsetFromUCS2Offset(e) {
          return ce(this.ucs2String.slice(0, Math.max(0, e))).length;
        }
        slice() {
          return this.constructor.fromCodepoints(
            this.codepoints.slice(...arguments),
          );
        }
        charAt(e) {
          return this.slice(e, e + 1);
        }
        isEqualTo(e) {
          return this.constructor.box(e).ucs2String === this.ucs2String;
        }
        toJSON() {
          return this.ucs2String;
        }
        getCacheKey() {
          return this.ucs2String;
        }
        toString() {
          return this.ucs2String;
        }
      }
      let Yo =
          ((Dr = Array.from) === null || Dr === void 0
            ? void 0
            : Dr.call(Array, "\u{1F47C}").length) === 1,
        Ss =
          ((mr = (Ts = " ").codePointAt) === null || mr === void 0
            ? void 0
            : mr.call(Ts, 0)) != null,
        Ce =
          ((Sr = String.fromCodePoint) === null || Sr === void 0
            ? void 0
            : Sr.call(String, 32, 128124)) === " \u{1F47C}",
        ce,
        wi;
      Yo && Ss
        ? (ce = (o) => Array.from(o).map((e) => e.codePointAt(0)))
        : (ce = function (o) {
            let e = [],
              i = 0,
              { length: a } = o;
            for (; i < a; ) {
              let c = o.charCodeAt(i++);
              if (55296 <= c && c <= 56319 && i < a) {
                let u = o.charCodeAt(i++);
                (u & 64512) === 56320
                  ? (c = ((c & 1023) << 10) + (u & 1023) + 65536)
                  : i--;
              }
              e.push(c);
            }
            return e;
          }),
        Ce
          ? (wi = (o) => String.fromCodePoint(...Array.from(o || [])))
          : (wi = function (o) {
              return (() => {
                let i = [];
                return (
                  Array.from(o).forEach((a) => {
                    let c = "";
                    a > 65535 &&
                      ((a -= 65536),
                      (c += String.fromCharCode(((a >>> 10) & 1023) | 55296)),
                      (a = 56320 | (a & 1023))),
                      i.push(c + String.fromCharCode(a));
                  }),
                  i
                );
              })().join("");
            });
      let qr = 0;
      class Pr extends xt {
        static fromJSONString(e) {
          return this.fromJSON(JSON.parse(e));
        }
        constructor() {
          super(...arguments), (this.id = ++qr);
        }
        hasSameConstructorAs(e) {
          return this.constructor === (e == null ? void 0 : e.constructor);
        }
        isEqualTo(e) {
          return this === e;
        }
        inspect() {
          let e = [],
            i = this.contentsForInspection() || {};
          for (let a in i) {
            let c = i[a];
            e.push("".concat(a, "=").concat(c));
          }
          return "#<"
            .concat(this.constructor.name, ":")
            .concat(this.id)
            .concat(e.length ? " ".concat(e.join(", ")) : "", ">");
        }
        contentsForInspection() {}
        toJSONString() {
          return JSON.stringify(this);
        }
        toUTF16String() {
          return Fe.box(this);
        }
        getCacheKey() {
          return this.id.toString();
        }
      }
      let We = function () {
          let o =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : [],
            e =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : [];
          if (o.length !== e.length) return !1;
          for (let i = 0; i < o.length; i++) if (o[i] !== e[i]) return !1;
          return !0;
        },
        Jo = function () {
          let o =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : [],
            e =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : [];
          return We(o.slice(0, e.length), e);
        },
        ke = function (o) {
          let e = o.slice(0);
          for (
            var i = arguments.length, a = new Array(i > 1 ? i - 1 : 0), c = 1;
            c < i;
            c++
          )
            a[c - 1] = arguments[c];
          return e.splice(...a), e;
        },
        ar = function () {
          let o =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : [],
            e =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : [],
            i = [],
            a = [],
            c = new Set();
          o.forEach((g) => {
            c.add(g);
          });
          let u = new Set();
          return (
            e.forEach((g) => {
              u.add(g), c.has(g) || i.push(g);
            }),
            o.forEach((g) => {
              u.has(g) || a.push(g);
            }),
            { added: i, removed: a }
          );
        },
        zr =
          /[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,
        Qo = (function () {
          let o = A("input", { dir: "auto", name: "x", dirName: "x.dir" }),
            e = A("textarea", { dir: "auto", name: "y", dirName: "y.dir" }),
            i = A("form");
          i.appendChild(o), i.appendChild(e);
          let a = (function () {
              try {
                return new FormData(i).has(e.dirName);
              } catch (u) {
                return !1;
              }
            })(),
            c = (function () {
              try {
                return o.matches(":dir(ltr),:dir(rtl)");
              } catch (u) {
                return !1;
              }
            })();
          return a
            ? function (u) {
                return (e.value = u), new FormData(i).get(e.dirName);
              }
            : c
            ? function (u) {
                return (o.value = u), o.matches(":dir(rtl)") ? "rtl" : "ltr";
              }
            : function (u) {
                let g = u.trim().charAt(0);
                return zr.test(g) ? "rtl" : "ltr";
              };
        })(),
        Qr = null,
        Zr = null,
        Or = null,
        Ei = null,
        Ai = () => (Qr || (Qr = Hr().concat(tr())), Qr),
        Ee = (o) => tt[o],
        tr = () => (Zr || (Zr = Object.keys(tt)), Zr),
        Ue = (o) => q[o],
        Hr = () => (Or || (Or = Object.keys(q)), Or),
        Cs = () => {
          if (!Ei) {
            Ei = [];
            for (let o in tt) {
              let { listAttribute: e } = tt[o];
              e != null && Ei.push(e);
            }
          }
          return Ei;
        },
        xi = function (o, e) {
          let i = Zo(o);
          i.textContent = e.replace(/%t/g, o);
        },
        Zo = function (o) {
          let e = document.createElement("style");
          e.setAttribute("type", "text/css"),
            e.setAttribute("data-tag-name", o.toLowerCase());
          let i = ks();
          return (
            i && e.setAttribute("nonce", i),
            document.head.insertBefore(e, document.head.firstChild),
            e
          );
        },
        ks = function () {
          let o = Ji("trix-csp-nonce") || Ji("csp-nonce");
          if (o) return o.getAttribute("content");
        },
        Ji = (o) => document.head.querySelector("meta[name=".concat(o, "]")),
        Wr = { "application/x-trix-feature-detection": "test" },
        Ls = function (o) {
          let e = o.getData("text/plain"),
            i = o.getData("text/html");
          if (e && i) {
            let { body: a } = new DOMParser().parseFromString(i, "text/html");
            if (a.textContent === e) return !a.querySelector("*");
          } else return e == null ? void 0 : e.length;
        },
        Ti = function (o) {
          if (!(o != null && o.setData)) return !1;
          for (let e in Wr) {
            let i = Wr[e];
            try {
              if ((o.setData(e, i), !o.getData(e) === i)) return !1;
            } catch (a) {
              return !1;
            }
          }
          return !0;
        },
        Rs = (function () {
          return /Mac|^iP/.test(navigator.platform)
            ? (o) => o.metaKey
            : (o) => o.ctrlKey;
        })(),
        lr = (o) => setTimeout(o, 1),
        _s = function () {
          let o =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : {},
            e = {};
          for (let i in o) {
            let a = o[i];
            e[i] = a;
          }
          return e;
        },
        ti = function () {
          let o =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : {},
            e =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {};
          if (Object.keys(o).length !== Object.keys(e).length) return !1;
          for (let i in o) if (o[i] !== e[i]) return !1;
          return !0;
        },
        ie = function (o) {
          if (o != null)
            return (
              Array.isArray(o) || (o = [o, o]),
              [Ds(o[0]), Ds(o[1] != null ? o[1] : o[0])]
            );
        },
        gr = function (o) {
          if (o == null) return;
          let [e, i] = ie(o);
          return Qi(e, i);
        },
        Si = function (o, e) {
          if (o == null || e == null) return;
          let [i, a] = ie(o),
            [c, u] = ie(e);
          return Qi(i, c) && Qi(a, u);
        },
        Ds = function (o) {
          return typeof o == "number" ? o : _s(o);
        },
        Qi = function (o, e) {
          return typeof o == "number" ? o === e : ti(o, e);
        };
      class Ps extends xt {
        constructor() {
          super(...arguments),
            (this.update = this.update.bind(this)),
            (this.selectionManagers = []);
        }
        start() {
          this.started ||
            ((this.started = !0),
            document.addEventListener("selectionchange", this.update, !0));
        }
        stop() {
          if (this.started)
            return (
              (this.started = !1),
              document.removeEventListener("selectionchange", this.update, !0)
            );
        }
        registerSelectionManager(e) {
          if (!this.selectionManagers.includes(e))
            return this.selectionManagers.push(e), this.start();
        }
        unregisterSelectionManager(e) {
          if (
            ((this.selectionManagers = this.selectionManagers.filter(
              (i) => i !== e,
            )),
            this.selectionManagers.length === 0)
          )
            return this.stop();
        }
        notifySelectionManagersOfSelectionChange() {
          return this.selectionManagers.map((e) => e.selectionDidChange());
        }
        update() {
          this.notifySelectionManagersOfSelectionChange();
        }
        reset() {
          this.update();
        }
      }
      let Mr = new Ps(),
        Os = function () {
          let o = window.getSelection();
          if (o.rangeCount > 0) return o;
        },
        ei = function () {
          var o;
          let e =
            (o = Os()) === null || o === void 0 ? void 0 : o.getRangeAt(0);
          if (e && !ta(e)) return e;
        },
        Ms = function (o) {
          let e = window.getSelection();
          return e.removeAllRanges(), e.addRange(o), Mr.update();
        },
        ta = (o) => Fs(o.startContainer) || Fs(o.endContainer),
        Fs = (o) => !Object.getPrototypeOf(o),
        ri = (o) =>
          o
            .replace(new RegExp("".concat(je), "g"), "")
            .replace(new RegExp("".concat(Te), "g"), " "),
        ea = (o) =>
          o.replace(
            /\r\n/g,
            `
`,
          ),
        Ci = new RegExp("[^\\S".concat(Te, "]")),
        T = (o) =>
          o
            .replace(new RegExp("".concat(Ci.source), "g"), " ")
            .replace(/\ {2,}/g, " "),
        m = function (o, e) {
          let i, a;
          return (
            (o = Fe.box(o)),
            (e = Fe.box(e)),
            e.length < o.length ? ([a, i] = v(o, e)) : ([i, a] = v(e, o)),
            { added: i, removed: a }
          );
        },
        v = function (o, e) {
          if (o.isEqualTo(e)) return ["", ""];
          let i = p(o, e),
            { length: a } = i.utf16String,
            c;
          if (a) {
            let { offset: u } = i,
              g = o.codepoints.slice(0, u).concat(o.codepoints.slice(u + a));
            c = p(e, Fe.fromCodepoints(g));
          } else c = p(e, o);
          return [i.utf16String.toString(), c.utf16String.toString()];
        },
        p = function (o, e) {
          let i = 0,
            a = o.length,
            c = e.length;
          for (; i < a && o.charAt(i).isEqualTo(e.charAt(i)); ) i++;
          for (; a > i + 1 && o.charAt(a - 1).isEqualTo(e.charAt(c - 1)); )
            a--, c--;
          return { utf16String: o.slice(i, a), offset: i };
        };
      class D extends Pr {
        static fromCommonAttributesOfObjects() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          if (!e.length) return new this();
          let i = lt(e[0]),
            a = i.getKeys();
          return (
            e.slice(1).forEach((c) => {
              (a = i.getKeysCommonToHash(lt(c))), (i = i.slice(a));
            }),
            i
          );
        }
        static box(e) {
          return lt(e);
        }
        constructor() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          super(...arguments), (this.values = z(e));
        }
        add(e, i) {
          return this.merge(k(e, i));
        }
        remove(e) {
          return new D(z(this.values, e));
        }
        get(e) {
          return this.values[e];
        }
        has(e) {
          return e in this.values;
        }
        merge(e) {
          return new D(M(this.values, nt(e)));
        }
        slice(e) {
          let i = {};
          return (
            Array.from(e).forEach((a) => {
              this.has(a) && (i[a] = this.values[a]);
            }),
            new D(i)
          );
        }
        getKeys() {
          return Object.keys(this.values);
        }
        getKeysCommonToHash(e) {
          return (
            (e = lt(e)),
            this.getKeys().filter((i) => this.values[i] === e.values[i])
          );
        }
        isEqualTo(e) {
          return We(this.toArray(), lt(e).toArray());
        }
        isEmpty() {
          return this.getKeys().length === 0;
        }
        toArray() {
          if (!this.array) {
            let e = [];
            for (let i in this.values) {
              let a = this.values[i];
              e.push(e.push(i, a));
            }
            this.array = e.slice(0);
          }
          return this.array;
        }
        toObject() {
          return z(this.values);
        }
        toJSON() {
          return this.toObject();
        }
        contentsForInspection() {
          return { values: JSON.stringify(this.values) };
        }
      }
      let k = function (o, e) {
          let i = {};
          return (i[o] = e), i;
        },
        M = function (o, e) {
          let i = z(o);
          for (let a in e) {
            let c = e[a];
            i[a] = c;
          }
          return i;
        },
        z = function (o, e) {
          let i = {};
          return (
            Object.keys(o)
              .sort()
              .forEach((c) => {
                c !== e && (i[c] = o[c]);
              }),
            i
          );
        },
        lt = function (o) {
          return o instanceof D ? o : new D(o);
        },
        nt = function (o) {
          return o instanceof D ? o.values : o;
        };
      class $ {
        static groupObjects() {
          let e =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : [],
            { depth: i, asTree: a } =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            c;
          a && i == null && (i = 0);
          let u = [];
          return (
            Array.from(e).forEach((g) => {
              var E;
              if (c) {
                var C, x, _;
                if (
                  (C = g.canBeGrouped) !== null &&
                  C !== void 0 &&
                  C.call(g, i) &&
                  (x = (_ = c[c.length - 1]).canBeGroupedWith) !== null &&
                  x !== void 0 &&
                  x.call(_, g, i)
                ) {
                  c.push(g);
                  return;
                } else u.push(new this(c, { depth: i, asTree: a })), (c = null);
              }
              (E = g.canBeGrouped) !== null && E !== void 0 && E.call(g, i)
                ? (c = [g])
                : u.push(g);
            }),
            c && u.push(new this(c, { depth: i, asTree: a })),
            u
          );
        }
        constructor() {
          let e =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : [],
            { depth: i, asTree: a } =
              arguments.length > 1 ? arguments[1] : void 0;
          (this.objects = e),
            a &&
              ((this.depth = i),
              (this.objects = this.constructor.groupObjects(this.objects, {
                asTree: a,
                depth: this.depth + 1,
              })));
        }
        getObjects() {
          return this.objects;
        }
        getDepth() {
          return this.depth;
        }
        getCacheKey() {
          let e = ["objectGroup"];
          return (
            Array.from(this.getObjects()).forEach((i) => {
              e.push(i.getCacheKey());
            }),
            e.join("/")
          );
        }
      }
      class K extends xt {
        constructor() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          super(...arguments),
            (this.objects = {}),
            Array.from(e).forEach((i) => {
              let a = JSON.stringify(i);
              this.objects[a] == null && (this.objects[a] = i);
            });
        }
        find(e) {
          let i = JSON.stringify(e);
          return this.objects[i];
        }
      }
      class ct {
        constructor(e) {
          this.reset(e);
        }
        add(e) {
          let i = Yt(e);
          this.elements[i] = e;
        }
        remove(e) {
          let i = Yt(e),
            a = this.elements[i];
          if (a) return delete this.elements[i], a;
        }
        reset() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          return (
            (this.elements = {}),
            Array.from(e).forEach((i) => {
              this.add(i);
            }),
            e
          );
        }
      }
      let Yt = (o) => o.dataset.trixStoreKey;
      class Xt extends xt {
        isPerforming() {
          return this.performing === !0;
        }
        hasPerformed() {
          return this.performed === !0;
        }
        hasSucceeded() {
          return this.performed && this.succeeded;
        }
        hasFailed() {
          return this.performed && !this.succeeded;
        }
        getPromise() {
          return (
            this.promise ||
              (this.promise = new Promise(
                (e, i) => (
                  (this.performing = !0),
                  this.perform((a, c) => {
                    (this.succeeded = a),
                      (this.performing = !1),
                      (this.performed = !0),
                      this.succeeded ? e(c) : i(c);
                  })
                ),
              )),
            this.promise
          );
        }
        perform(e) {
          return e(!1);
        }
        release() {
          var e, i;
          (e = this.promise) === null ||
            e === void 0 ||
            (i = e.cancel) === null ||
            i === void 0 ||
            i.call(e),
            (this.promise = null),
            (this.performing = null),
            (this.performed = null),
            (this.succeeded = null);
        }
      }
      Xt.proxyMethod("getPromise().then"), Xt.proxyMethod("getPromise().catch");
      class ne extends xt {
        constructor(e) {
          let i =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          super(...arguments),
            (this.object = e),
            (this.options = i),
            (this.childViews = []),
            (this.rootView = this);
        }
        getNodes() {
          return (
            this.nodes || (this.nodes = this.createNodes()),
            this.nodes.map((e) => e.cloneNode(!0))
          );
        }
        invalidate() {
          var e;
          return (
            (this.nodes = null),
            (this.childViews = []),
            (e = this.parentView) === null || e === void 0
              ? void 0
              : e.invalidate()
          );
        }
        invalidateViewForObject(e) {
          var i;
          return (i = this.findViewForObject(e)) === null || i === void 0
            ? void 0
            : i.invalidate();
        }
        findOrCreateCachedChildView(e, i, a) {
          let c = this.getCachedViewForObject(i);
          return (
            c
              ? this.recordChildView(c)
              : ((c = this.createChildView(...arguments)),
                this.cacheViewForObject(c, i)),
            c
          );
        }
        createChildView(e, i) {
          let a =
            arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
          i instanceof $ && ((a.viewClass = e), (e = se));
          let c = new e(i, a);
          return this.recordChildView(c);
        }
        recordChildView(e) {
          return (
            (e.parentView = this),
            (e.rootView = this.rootView),
            this.childViews.push(e),
            e
          );
        }
        getAllChildViews() {
          let e = [];
          return (
            this.childViews.forEach((i) => {
              e.push(i), (e = e.concat(i.getAllChildViews()));
            }),
            e
          );
        }
        findElement() {
          return this.findElementForObject(this.object);
        }
        findElementForObject(e) {
          let i = e == null ? void 0 : e.id;
          if (i)
            return this.rootView.element.querySelector(
              "[data-trix-id='".concat(i, "']"),
            );
        }
        findViewForObject(e) {
          for (let i of this.getAllChildViews()) if (i.object === e) return i;
        }
        getViewCache() {
          if (this.rootView === this) {
            if (this.isViewCachingEnabled())
              return this.viewCache || (this.viewCache = {}), this.viewCache;
          } else return this.rootView.getViewCache();
        }
        isViewCachingEnabled() {
          return this.shouldCacheViews !== !1;
        }
        enableViewCaching() {
          this.shouldCacheViews = !0;
        }
        disableViewCaching() {
          this.shouldCacheViews = !1;
        }
        getCachedViewForObject(e) {
          var i;
          return (i = this.getViewCache()) === null || i === void 0
            ? void 0
            : i[e.getCacheKey()];
        }
        cacheViewForObject(e, i) {
          let a = this.getViewCache();
          a && (a[i.getCacheKey()] = e);
        }
        garbageCollectCachedViews() {
          let e = this.getViewCache();
          if (e) {
            let a = this.getAllChildViews()
              .concat(this)
              .map((c) => c.object.getCacheKey());
            for (let c in e) a.includes(c) || delete e[c];
          }
        }
      }
      class se extends ne {
        constructor() {
          super(...arguments),
            (this.objectGroup = this.object),
            (this.viewClass = this.options.viewClass),
            delete this.options.viewClass;
        }
        getChildViews() {
          return (
            this.childViews.length ||
              Array.from(this.objectGroup.getObjects()).forEach((e) => {
                this.findOrCreateCachedChildView(
                  this.viewClass,
                  e,
                  this.options,
                );
              }),
            this.childViews
          );
        }
        createNodes() {
          let e = this.createContainerElement();
          return (
            this.getChildViews().forEach((i) => {
              Array.from(i.getNodes()).forEach((a) => {
                e.appendChild(a);
              });
            }),
            [e]
          );
        }
        createContainerElement() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0
              ? arguments[0]
              : this.objectGroup.getDepth();
          return this.getChildViews()[0].createContainerElement(e);
        }
      }
      let { css: fe } = Wt;
      class Le extends ne {
        constructor() {
          super(...arguments),
            (this.attachment = this.object),
            (this.attachment.uploadProgressDelegate = this),
            (this.attachmentPiece = this.options.piece);
        }
        createContentNodes() {
          return [];
        }
        createNodes() {
          let e,
            i = (e = A({
              tagName: "figure",
              className: this.getClassName(),
              data: this.getData(),
              editable: !1,
            })),
            a = this.getHref();
          return (
            a &&
              ((e = A({
                tagName: "a",
                editable: !1,
                attributes: { href: a, tabindex: -1 },
              })),
              i.appendChild(e)),
            this.attachment.hasContent()
              ? (e.innerHTML = this.attachment.getContent())
              : this.createContentNodes().forEach((c) => {
                  e.appendChild(c);
                }),
            e.appendChild(this.createCaptionElement()),
            this.attachment.isPending() &&
              ((this.progressElement = A({
                tagName: "progress",
                attributes: {
                  class: fe.attachmentProgress,
                  value: this.attachment.getUploadProgress(),
                  max: 100,
                },
                data: {
                  trixMutable: !0,
                  trixStoreKey: ["progressElement", this.attachment.id].join(
                    "/",
                  ),
                },
              })),
              i.appendChild(this.progressElement)),
            [Ae("left"), i, Ae("right")]
          );
        }
        createCaptionElement() {
          let e = A({ tagName: "figcaption", className: fe.attachmentCaption }),
            i = this.attachmentPiece.getCaption();
          if (i)
            e.classList.add("".concat(fe.attachmentCaption, "--edited")),
              (e.textContent = i);
          else {
            let a,
              c,
              u = this.getCaptionConfig();
            if (
              (u.name && (a = this.attachment.getFilename()),
              u.size && (c = this.attachment.getFormattedFilesize()),
              a)
            ) {
              let g = A({
                tagName: "span",
                className: fe.attachmentName,
                textContent: a,
              });
              e.appendChild(g);
            }
            if (c) {
              a && e.appendChild(document.createTextNode(" "));
              let g = A({
                tagName: "span",
                className: fe.attachmentSize,
                textContent: c,
              });
              e.appendChild(g);
            }
          }
          return e;
        }
        getClassName() {
          let e = [
              fe.attachment,
              "".concat(fe.attachment, "--").concat(this.attachment.getType()),
            ],
            i = this.attachment.getExtension();
          return (
            i && e.push("".concat(fe.attachment, "--").concat(i)), e.join(" ")
          );
        }
        getData() {
          let e = {
              trixAttachment: JSON.stringify(this.attachment),
              trixContentType: this.attachment.getContentType(),
              trixId: this.attachment.id,
            },
            { attributes: i } = this.attachmentPiece;
          return (
            i.isEmpty() || (e.trixAttributes = JSON.stringify(i)),
            this.attachment.isPending() && (e.trixSerialize = !1),
            e
          );
        }
        getHref() {
          if (!pr(this.attachment.getContent(), "a"))
            return this.attachment.getHref();
        }
        getCaptionConfig() {
          var e;
          let i = this.attachment.getType(),
            a = _s((e = H[i]) === null || e === void 0 ? void 0 : e.caption);
          return i === "file" && (a.name = !0), a;
        }
        findProgressElement() {
          var e;
          return (e = this.findElement()) === null || e === void 0
            ? void 0
            : e.querySelector("progress");
        }
        attachmentDidChangeUploadProgress() {
          let e = this.attachment.getUploadProgress(),
            i = this.findProgressElement();
          i && (i.value = e);
        }
      }
      let Ae = (o) =>
          A({
            tagName: "span",
            textContent: je,
            data: { trixCursorTarget: o, trixSerialize: !1 },
          }),
        pr = function (o, e) {
          let i = A("div");
          return (i.innerHTML = o || ""), i.querySelector(e);
        };
      class Ve extends Le {
        constructor() {
          super(...arguments), (this.attachment.previewDelegate = this);
        }
        createContentNodes() {
          return (
            (this.image = A({
              tagName: "img",
              attributes: { src: "" },
              data: { trixMutable: !0 },
            })),
            this.refresh(this.image),
            [this.image]
          );
        }
        createCaptionElement() {
          let e = super.createCaptionElement(...arguments);
          return (
            e.textContent ||
              e.setAttribute("data-trix-placeholder", St.captionPlaceholder),
            e
          );
        }
        refresh(e) {
          if (!e) {
            var i;
            e =
              (i = this.findElement()) === null || i === void 0
                ? void 0
                : i.querySelector("img");
          }
          if (e) return this.updateAttributesForImage(e);
        }
        updateAttributesForImage(e) {
          let i = this.attachment.getURL(),
            a = this.attachment.getPreviewURL();
          if (((e.src = a || i), a === i))
            e.removeAttribute("data-trix-serialized-attributes");
          else {
            let E = JSON.stringify({ src: i });
            e.setAttribute("data-trix-serialized-attributes", E);
          }
          let c = this.attachment.getWidth(),
            u = this.attachment.getHeight();
          c != null && (e.width = c), u != null && (e.height = u);
          let g = [
            "imageElement",
            this.attachment.id,
            e.src,
            e.width,
            e.height,
          ].join("/");
          e.dataset.trixStoreKey = g;
        }
        attachmentDidChangeAttributes() {
          return this.refresh(this.image), this.refresh();
        }
      }
      class gt extends ne {
        constructor() {
          super(...arguments),
            (this.piece = this.object),
            (this.attributes = this.piece.getAttributes()),
            (this.textConfig = this.options.textConfig),
            (this.context = this.options.context),
            this.piece.attachment
              ? (this.attachment = this.piece.attachment)
              : (this.string = this.piece.toString());
        }
        createNodes() {
          let e = this.attachment
              ? this.createAttachmentNodes()
              : this.createStringNodes(),
            i = this.createElement();
          if (i) {
            let a = It(i);
            Array.from(e).forEach((c) => {
              a.appendChild(c);
            }),
              (e = [i]);
          }
          return e;
        }
        createAttachmentNodes() {
          let e = this.attachment.isPreviewable() ? Ve : Le;
          return this.createChildView(e, this.piece.attachment, {
            piece: this.piece,
          }).getNodes();
        }
        createStringNodes() {
          var e;
          if ((e = this.textConfig) !== null && e !== void 0 && e.plaintext)
            return [document.createTextNode(this.string)];
          {
            let i = [],
              a = this.string.split(`
`);
            for (let c = 0; c < a.length; c++) {
              let u = a[c];
              if (c > 0) {
                let g = A("br");
                i.push(g);
              }
              if (u.length) {
                let g = document.createTextNode(this.preserveSpaces(u));
                i.push(g);
              }
            }
            return i;
          }
        }
        createElement() {
          let e,
            i,
            a,
            c = {};
          for (i in this.attributes) {
            a = this.attributes[i];
            let g = Ue(i);
            if (g) {
              if (g.tagName) {
                var u;
                let E = A(g.tagName);
                u ? (u.appendChild(E), (u = E)) : (e = u = E);
              }
              if ((g.styleProperty && (c[g.styleProperty] = a), g.style))
                for (i in g.style) (a = g.style[i]), (c[i] = a);
            }
          }
          if (Object.keys(c).length) {
            e || (e = A("span"));
            for (i in c) (a = c[i]), (e.style[i] = a);
          }
          return e;
        }
        createContainerElement() {
          for (let e in this.attributes) {
            let i = this.attributes[e],
              a = Ue(e);
            if (a && a.groupTagName) {
              let c = {};
              return (c[e] = i), A(a.groupTagName, c);
            }
          }
        }
        preserveSpaces(e) {
          return (
            this.context.isLast && (e = e.replace(/\ $/, Te)),
            (e = e
              .replace(/(\S)\ {3}(\S)/g, "$1 ".concat(Te, " $2"))
              .replace(/\ {2}/g, "".concat(Te, " "))
              .replace(/\ {2}/g, " ".concat(Te))),
            (this.context.isFirst || this.context.followsWhitespace) &&
              (e = e.replace(/^\ /, Te)),
            e
          );
        }
      }
      class ee extends ne {
        constructor() {
          super(...arguments),
            (this.text = this.object),
            (this.textConfig = this.options.textConfig);
        }
        createNodes() {
          let e = [],
            i = $.groupObjects(this.getPieces()),
            a = i.length - 1;
          for (let u = 0; u < i.length; u++) {
            let g = i[u],
              E = {};
            u === 0 && (E.isFirst = !0),
              u === a && (E.isLast = !0),
              De(c) && (E.followsWhitespace = !0);
            let C = this.findOrCreateCachedChildView(gt, g, {
              textConfig: this.textConfig,
              context: E,
            });
            e.push(...Array.from(C.getNodes() || []));
            var c = g;
          }
          return e;
        }
        getPieces() {
          return Array.from(this.text.getPieces()).filter(
            (e) => !e.hasAttribute("blockBreak"),
          );
        }
      }
      let De = (o) => /\s$/.test(o == null ? void 0 : o.toString()),
        { css: Ke } = Wt;
      class cr extends ne {
        constructor() {
          super(...arguments),
            (this.block = this.object),
            (this.attributes = this.block.getAttributes());
        }
        createNodes() {
          let i = [document.createComment("block")];
          if (this.block.isEmpty()) i.push(A("br"));
          else {
            var a;
            let c =
                (a = Ee(this.block.getLastAttribute())) === null || a === void 0
                  ? void 0
                  : a.text,
              u = this.findOrCreateCachedChildView(ee, this.block.text, {
                textConfig: c,
              });
            i.push(...Array.from(u.getNodes() || [])),
              this.shouldAddExtraNewlineElement() && i.push(A("br"));
          }
          if (this.attributes.length) return i;
          {
            let c,
              { tagName: u } = tt.default;
            this.block.isRTL() && (c = { dir: "rtl" });
            let g = A({ tagName: u, attributes: c });
            return i.forEach((E) => g.appendChild(E)), [g];
          }
        }
        createContainerElement(e) {
          let i,
            a,
            c = this.attributes[e],
            { tagName: u } = Ee(c);
          if (
            (e === 0 && this.block.isRTL() && (i = { dir: "rtl" }),
            c === "attachmentGallery")
          ) {
            let g = this.block.getBlockBreakPosition();
            a = ""
              .concat(Ke.attachmentGallery, " ")
              .concat(Ke.attachmentGallery, "--")
              .concat(g);
          }
          return A({ tagName: u, className: a, attributes: i });
        }
        shouldAddExtraNewlineElement() {
          return /\n\n$/.test(this.block.toString());
        }
      }
      class ur extends ne {
        static render(e) {
          let i = A("div"),
            a = new this(e, { element: i });
          return a.render(), a.sync(), i;
        }
        constructor() {
          super(...arguments),
            (this.element = this.options.element),
            (this.elementStore = new ct()),
            this.setDocument(this.object);
        }
        setDocument(e) {
          e.isEqualTo(this.document) || (this.document = this.object = e);
        }
        render() {
          if (
            ((this.childViews = []),
            (this.shadowElement = A("div")),
            !this.document.isEmpty())
          ) {
            let e = $.groupObjects(this.document.getBlocks(), { asTree: !0 });
            Array.from(e).forEach((i) => {
              let a = this.findOrCreateCachedChildView(cr, i);
              Array.from(a.getNodes()).map((c) =>
                this.shadowElement.appendChild(c),
              );
            });
          }
        }
        isSynced() {
          return kr(this.shadowElement, this.element);
        }
        sync() {
          let e = this.createDocumentFragmentForSync();
          for (; this.element.lastChild; )
            this.element.removeChild(this.element.lastChild);
          return this.element.appendChild(e), this.didSync();
        }
        didSync() {
          return (
            this.elementStore.reset(Cr(this.element)),
            lr(() => this.garbageCollectCachedViews())
          );
        }
        createDocumentFragmentForSync() {
          let e = document.createDocumentFragment();
          return (
            Array.from(this.shadowElement.childNodes).forEach((i) => {
              e.appendChild(i.cloneNode(!0));
            }),
            Array.from(Cr(e)).forEach((i) => {
              let a = this.elementStore.remove(i);
              a && i.parentNode.replaceChild(a, i);
            }),
            e
          );
        }
      }
      let Cr = (o) => o.querySelectorAll("[data-trix-store-key]"),
        kr = (o, e) => er(o.innerHTML) === er(e.innerHTML),
        er = (o) => o.replace(/&nbsp;/g, " ");
      function Ie(o) {
        var e, i;
        function a(u, g) {
          try {
            var E = o[u](g),
              C = E.value,
              x = C instanceof br;
            Promise.resolve(x ? C.v : C).then(
              function (_) {
                if (x) {
                  var O = u === "return" ? "return" : "next";
                  if (!C.k || _.done) return a(O, _);
                  _ = o[O](_).value;
                }
                c(E.done ? "return" : "normal", _);
              },
              function (_) {
                a("throw", _);
              },
            );
          } catch (_) {
            c("throw", _);
          }
        }
        function c(u, g) {
          switch (u) {
            case "return":
              e.resolve({ value: g, done: !0 });
              break;
            case "throw":
              e.reject(g);
              break;
            default:
              e.resolve({ value: g, done: !1 });
          }
          (e = e.next) ? a(e.key, e.arg) : (i = null);
        }
        (this._invoke = function (u, g) {
          return new Promise(function (E, C) {
            var x = { key: u, arg: g, resolve: E, reject: C, next: null };
            i ? (i = i.next = x) : ((e = i = x), a(u, g));
          });
        }),
          typeof o.return != "function" && (this.return = void 0);
      }
      (Ie.prototype[
        (typeof Symbol == "function" && Symbol.asyncIterator) ||
          "@@asyncIterator"
      ] = function () {
        return this;
      }),
        (Ie.prototype.next = function (o) {
          return this._invoke("next", o);
        }),
        (Ie.prototype.throw = function (o) {
          return this._invoke("throw", o);
        }),
        (Ie.prototype.return = function (o) {
          return this._invoke("return", o);
        });
      function br(o, e) {
        (this.v = o), (this.k = e);
      }
      function ii(o, e, i, a) {
        return {
          getMetadata: function (c) {
            Ri(a, "getMetadata"), tn(c);
            var u = o[c];
            if (u !== void 0) {
              if (e === 1) {
                var g = u.public;
                if (g !== void 0) return g[i];
              } else if (e === 2) {
                var E = u.private;
                if (E !== void 0) return E.get(i);
              } else if (Object.hasOwnProperty.call(u, "constructor"))
                return u.constructor;
            }
          },
          setMetadata: function (c, u) {
            Ri(a, "setMetadata"), tn(c);
            var g = o[c];
            if ((g === void 0 && (g = o[c] = {}), e === 1)) {
              var E = g.public;
              E === void 0 && (E = g.public = {}), (E[i] = u);
            } else if (e === 2) {
              var C = g.priv;
              C === void 0 && (C = g.private = new Map()), C.set(i, u);
            } else g.constructor = u;
          },
        };
      }
      function ki(o, e) {
        var i = o[Symbol.metadata || Symbol.for("Symbol.metadata")],
          a = Object.getOwnPropertySymbols(e);
        if (a.length !== 0) {
          for (var c = 0; c < a.length; c++) {
            var u = a[c],
              g = e[u],
              E = i ? i[u] : null,
              C = g.public,
              x = E ? E.public : null;
            C && x && Object.setPrototypeOf(C, x);
            var _ = g.private;
            if (_) {
              var O = Array.from(_.values()),
                G = E ? E.private : null;
              G && (O = O.concat(G)), (g.private = O);
            }
            E && Object.setPrototypeOf(g, E);
          }
          i && Object.setPrototypeOf(e, i),
            (o[Symbol.metadata || Symbol.for("Symbol.metadata")] = e);
        }
      }
      function Li(o, e) {
        return function (i) {
          Ri(e, "addInitializer"), Ur(i, "An initializer"), o.push(i);
        };
      }
      function Zi(o, e, i, a, c, u, g, E, C) {
        var x;
        switch (u) {
          case 1:
            x = "accessor";
            break;
          case 2:
            x = "method";
            break;
          case 3:
            x = "getter";
            break;
          case 4:
            x = "setter";
            break;
          default:
            x = "field";
        }
        var _,
          O,
          G = { kind: x, name: E ? "#" + e : e, isStatic: g, isPrivate: E },
          X = { v: !1 };
        if ((u !== 0 && (G.addInitializer = Li(c, X)), E)) {
          (_ = 2), (O = Symbol(e));
          var et = {};
          u === 0
            ? ((et.get = i.get), (et.set = i.set))
            : u === 2
            ? (et.get = function () {
                return i.value;
              })
            : ((u !== 1 && u !== 3) ||
                (et.get = function () {
                  return i.get.call(this);
                }),
              (u !== 1 && u !== 4) ||
                (et.set = function (J) {
                  i.set.call(this, J);
                })),
            (G.access = et);
        } else (_ = 1), (O = e);
        try {
          return o(C, Object.assign(G, ii(a, _, O, X)));
        } finally {
          X.v = !0;
        }
      }
      function Ri(o, e) {
        if (o.v)
          throw new Error(
            "attempted to call " + e + " after decoration was finished",
          );
      }
      function tn(o) {
        if (typeof o != "symbol")
          throw new TypeError("Metadata keys must be symbols, received: " + o);
      }
      function Ur(o, e) {
        if (typeof o != "function")
          throw new TypeError(e + " must be a function");
      }
      function en(o, e) {
        var i = typeof e;
        if (o === 1) {
          if (i !== "object" || e === null)
            throw new TypeError(
              "accessor decorators must return an object with get, set, or init properties or void 0",
            );
          e.get !== void 0 && Ur(e.get, "accessor.get"),
            e.set !== void 0 && Ur(e.set, "accessor.set"),
            e.init !== void 0 && Ur(e.init, "accessor.init"),
            e.initializer !== void 0 &&
              Ur(e.initializer, "accessor.initializer");
        } else if (i !== "function") {
          var a;
          throw (
            ((a = o === 0 ? "field" : o === 10 ? "class" : "method"),
            new TypeError(a + " decorators must return a function or void 0"))
          );
        }
      }
      function Is(o) {
        var e;
        return (
          (e = o.init) == null &&
            (e = o.initializer) &&
            typeof console != "undefined" &&
            console.warn(
              ".initializer has been renamed to .init as of March 2022",
            ),
          e
        );
      }
      function kh(o, e, i, a, c, u, g, E, C) {
        var x,
          _,
          O,
          G,
          X,
          et,
          J = i[0];
        if (
          (g
            ? (x =
                c === 0 || c === 1
                  ? { get: i[3], set: i[4] }
                  : c === 3
                  ? { get: i[3] }
                  : c === 4
                  ? { set: i[3] }
                  : { value: i[3] })
            : c !== 0 && (x = Object.getOwnPropertyDescriptor(e, a)),
          c === 1
            ? (O = { get: x.get, set: x.set })
            : c === 2
            ? (O = x.value)
            : c === 3
            ? (O = x.get)
            : c === 4 && (O = x.set),
          typeof J == "function")
        )
          (G = Zi(J, a, x, E, C, c, u, g, O)) !== void 0 &&
            (en(c, G),
            c === 0
              ? (_ = G)
              : c === 1
              ? ((_ = Is(G)),
                (X = G.get || O.get),
                (et = G.set || O.set),
                (O = { get: X, set: et }))
              : (O = G));
        else
          for (var rt = J.length - 1; rt >= 0; rt--) {
            var it;
            (G = Zi(J[rt], a, x, E, C, c, u, g, O)) !== void 0 &&
              (en(c, G),
              c === 0
                ? (it = G)
                : c === 1
                ? ((it = Is(G)),
                  (X = G.get || O.get),
                  (et = G.set || O.set),
                  (O = { get: X, set: et }))
                : (O = G),
              it !== void 0 &&
                (_ === void 0
                  ? (_ = it)
                  : typeof _ == "function"
                  ? (_ = [_, it])
                  : _.push(it)));
          }
        if (c === 0 || c === 1) {
          if (_ === void 0)
            _ = function (at, kt) {
              return kt;
            };
          else if (typeof _ != "function") {
            var Q = _;
            _ = function (at, kt) {
              for (var Lt = kt, Ft = 0; Ft < Q.length; Ft++)
                Lt = Q[Ft].call(at, Lt);
              return Lt;
            };
          } else {
            var ot = _;
            _ = function (at, kt) {
              return ot.call(at, kt);
            };
          }
          o.push(_);
        }
        c !== 0 &&
          (c === 1
            ? ((x.get = O.get), (x.set = O.set))
            : c === 2
            ? (x.value = O)
            : c === 3
            ? (x.get = O)
            : c === 4 && (x.set = O),
          g
            ? c === 1
              ? (o.push(function (at, kt) {
                  return O.get.call(at, kt);
                }),
                o.push(function (at, kt) {
                  return O.set.call(at, kt);
                }))
              : c === 2
              ? o.push(O)
              : o.push(function (at, kt) {
                  return O.call(at, kt);
                })
            : Object.defineProperty(e, a, x));
      }
      function Lh(o, e, i, a, c) {
        for (var u, g, E = new Map(), C = new Map(), x = 0; x < c.length; x++) {
          var _ = c[x];
          if (Array.isArray(_)) {
            var O,
              G,
              X,
              et = _[1],
              J = _[2],
              rt = _.length > 3,
              it = et >= 5;
            if (
              (it
                ? ((O = e), (G = a), (et -= 5) !== 0 && (X = g = g || []))
                : ((O = e.prototype), (G = i), et !== 0 && (X = u = u || [])),
              et !== 0 && !rt)
            ) {
              var Q = it ? C : E,
                ot = Q.get(J) || 0;
              if (ot === !0 || (ot === 3 && et !== 4) || (ot === 4 && et !== 3))
                throw new Error(
                  "Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: " +
                    J,
                );
              !ot && et > 2 ? Q.set(J, et) : Q.set(J, !0);
            }
            kh(o, O, _, J, et, it, rt, G, X);
          }
        }
        Ul(o, u), Ul(o, g);
      }
      function Ul(o, e) {
        e &&
          o.push(function (i) {
            for (var a = 0; a < e.length; a++) e[a].call(i);
            return i;
          });
      }
      function Rh(o, e, i, a) {
        if (a.length > 0) {
          for (var c = [], u = e, g = e.name, E = a.length - 1; E >= 0; E--) {
            var C = { v: !1 };
            try {
              var x = Object.assign(
                  { kind: "class", name: g, addInitializer: Li(c, C) },
                  ii(i, 0, g, C),
                ),
                _ = a[E](u, x);
            } finally {
              C.v = !0;
            }
            _ !== void 0 && (en(10, _), (u = _));
          }
          o.push(u, function () {
            for (var O = 0; O < c.length; O++) c[O].call(u);
          });
        }
      }
      function Ng(o, e, i) {
        var a = [],
          c = {},
          u = {};
        return (
          Lh(a, o, u, c, e), ki(o.prototype, u), Rh(a, o, c, i), ki(o, c), a
        );
      }
      function _h() {
        function o(g, E) {
          return function (C) {
            (function (x, _) {
              if (x.v)
                throw new Error(
                  "attempted to call " + _ + " after decoration was finished",
                );
            })(E, "addInitializer"),
              i(C, "An initializer"),
              g.push(C);
          };
        }
        function e(g, E, C, x, _, O, G, X) {
          var et;
          switch (_) {
            case 1:
              et = "accessor";
              break;
            case 2:
              et = "method";
              break;
            case 3:
              et = "getter";
              break;
            case 4:
              et = "setter";
              break;
            default:
              et = "field";
          }
          var J,
            rt,
            it = { kind: et, name: G ? "#" + E : E, static: O, private: G },
            Q = { v: !1 };
          _ !== 0 && (it.addInitializer = o(x, Q)),
            _ === 0
              ? G
                ? ((J = C.get), (rt = C.set))
                : ((J = function () {
                    return this[E];
                  }),
                  (rt = function (ot) {
                    this[E] = ot;
                  }))
              : _ === 2
              ? (J = function () {
                  return C.value;
                })
              : ((_ !== 1 && _ !== 3) ||
                  (J = function () {
                    return C.get.call(this);
                  }),
                (_ !== 1 && _ !== 4) ||
                  (rt = function (ot) {
                    C.set.call(this, ot);
                  })),
            (it.access =
              J && rt ? { get: J, set: rt } : J ? { get: J } : { set: rt });
          try {
            return g(X, it);
          } finally {
            Q.v = !0;
          }
        }
        function i(g, E) {
          if (typeof g != "function")
            throw new TypeError(E + " must be a function");
        }
        function a(g, E) {
          var C = typeof E;
          if (g === 1) {
            if (C !== "object" || E === null)
              throw new TypeError(
                "accessor decorators must return an object with get, set, or init properties or void 0",
              );
            E.get !== void 0 && i(E.get, "accessor.get"),
              E.set !== void 0 && i(E.set, "accessor.set"),
              E.init !== void 0 && i(E.init, "accessor.init");
          } else if (C !== "function") {
            var x;
            throw (
              ((x = g === 0 ? "field" : g === 10 ? "class" : "method"),
              new TypeError(x + " decorators must return a function or void 0"))
            );
          }
        }
        function c(g, E, C, x, _, O, G, X) {
          var et,
            J,
            rt,
            it,
            Q,
            ot,
            at = C[0];
          if (
            (G
              ? (et =
                  _ === 0 || _ === 1
                    ? { get: C[3], set: C[4] }
                    : _ === 3
                    ? { get: C[3] }
                    : _ === 4
                    ? { set: C[3] }
                    : { value: C[3] })
              : _ !== 0 && (et = Object.getOwnPropertyDescriptor(E, x)),
            _ === 1
              ? (rt = { get: et.get, set: et.set })
              : _ === 2
              ? (rt = et.value)
              : _ === 3
              ? (rt = et.get)
              : _ === 4 && (rt = et.set),
            typeof at == "function")
          )
            (it = e(at, x, et, X, _, O, G, rt)) !== void 0 &&
              (a(_, it),
              _ === 0
                ? (J = it)
                : _ === 1
                ? ((J = it.init),
                  (Q = it.get || rt.get),
                  (ot = it.set || rt.set),
                  (rt = { get: Q, set: ot }))
                : (rt = it));
          else
            for (var kt = at.length - 1; kt >= 0; kt--) {
              var Lt;
              (it = e(at[kt], x, et, X, _, O, G, rt)) !== void 0 &&
                (a(_, it),
                _ === 0
                  ? (Lt = it)
                  : _ === 1
                  ? ((Lt = it.init),
                    (Q = it.get || rt.get),
                    (ot = it.set || rt.set),
                    (rt = { get: Q, set: ot }))
                  : (rt = it),
                Lt !== void 0 &&
                  (J === void 0
                    ? (J = Lt)
                    : typeof J == "function"
                    ? (J = [J, Lt])
                    : J.push(Lt)));
            }
          if (_ === 0 || _ === 1) {
            if (J === void 0)
              J = function (jt, Ht) {
                return Ht;
              };
            else if (typeof J != "function") {
              var Ft = J;
              J = function (jt, Ht) {
                for (var ue = Ht, ze = 0; ze < Ft.length; ze++)
                  ue = Ft[ze].call(jt, ue);
                return ue;
              };
            } else {
              var Jt = J;
              J = function (jt, Ht) {
                return Jt.call(jt, Ht);
              };
            }
            g.push(J);
          }
          _ !== 0 &&
            (_ === 1
              ? ((et.get = rt.get), (et.set = rt.set))
              : _ === 2
              ? (et.value = rt)
              : _ === 3
              ? (et.get = rt)
              : _ === 4 && (et.set = rt),
            G
              ? _ === 1
                ? (g.push(function (jt, Ht) {
                    return rt.get.call(jt, Ht);
                  }),
                  g.push(function (jt, Ht) {
                    return rt.set.call(jt, Ht);
                  }))
                : _ === 2
                ? g.push(rt)
                : g.push(function (jt, Ht) {
                    return rt.call(jt, Ht);
                  })
              : Object.defineProperty(E, x, et));
        }
        function u(g, E) {
          E &&
            g.push(function (C) {
              for (var x = 0; x < E.length; x++) E[x].call(C);
              return C;
            });
        }
        return function (g, E, C) {
          var x = [];
          return (
            (function (_, O, G) {
              for (
                var X, et, J = new Map(), rt = new Map(), it = 0;
                it < G.length;
                it++
              ) {
                var Q = G[it];
                if (Array.isArray(Q)) {
                  var ot,
                    at,
                    kt = Q[1],
                    Lt = Q[2],
                    Ft = Q.length > 3,
                    Jt = kt >= 5;
                  if (
                    (Jt
                      ? ((ot = O), (kt -= 5) != 0 && (at = et = et || []))
                      : ((ot = O.prototype), kt !== 0 && (at = X = X || [])),
                    kt !== 0 && !Ft)
                  ) {
                    var jt = Jt ? rt : J,
                      Ht = jt.get(Lt) || 0;
                    if (
                      Ht === !0 ||
                      (Ht === 3 && kt !== 4) ||
                      (Ht === 4 && kt !== 3)
                    )
                      throw new Error(
                        "Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: " +
                          Lt,
                      );
                    !Ht && kt > 2 ? jt.set(Lt, kt) : jt.set(Lt, !0);
                  }
                  c(_, ot, Q, Lt, kt, Jt, Ft, at);
                }
              }
              u(_, X), u(_, et);
            })(x, g, E),
            (function (_, O, G) {
              if (G.length > 0) {
                for (
                  var X = [], et = O, J = O.name, rt = G.length - 1;
                  rt >= 0;
                  rt--
                ) {
                  var it = { v: !1 };
                  try {
                    var Q = G[rt](et, {
                      kind: "class",
                      name: J,
                      addInitializer: o(X, it),
                    });
                  } finally {
                    it.v = !0;
                  }
                  Q !== void 0 && (a(10, Q), (et = Q));
                }
                _.push(et, function () {
                  for (var ot = 0; ot < X.length; ot++) X[ot].call(et);
                });
              }
            })(x, g, C),
            x
          );
        };
      }
      var Vl;
      function jg(o, e, i) {
        return (Vl = Vl || _h())(o, e, i);
      }
      function Dh() {
        function o(E, C) {
          return function (x) {
            (function (_, O) {
              if (_.v)
                throw new Error(
                  "attempted to call " + O + " after decoration was finished",
                );
            })(C, "addInitializer"),
              i(x, "An initializer"),
              E.push(x);
          };
        }
        function e(E, C, x, _, O, G, X, et) {
          var J;
          switch (O) {
            case 1:
              J = "accessor";
              break;
            case 2:
              J = "method";
              break;
            case 3:
              J = "getter";
              break;
            case 4:
              J = "setter";
              break;
            default:
              J = "field";
          }
          var rt,
            it,
            Q = { kind: J, name: X ? "#" + C : C, static: G, private: X },
            ot = { v: !1 };
          O !== 0 && (Q.addInitializer = o(_, ot)),
            O === 0
              ? X
                ? ((rt = x.get), (it = x.set))
                : ((rt = function () {
                    return this[C];
                  }),
                  (it = function (at) {
                    this[C] = at;
                  }))
              : O === 2
              ? (rt = function () {
                  return x.value;
                })
              : ((O !== 1 && O !== 3) ||
                  (rt = function () {
                    return x.get.call(this);
                  }),
                (O !== 1 && O !== 4) ||
                  (it = function (at) {
                    x.set.call(this, at);
                  })),
            (Q.access =
              rt && it ? { get: rt, set: it } : rt ? { get: rt } : { set: it });
          try {
            return E(et, Q);
          } finally {
            ot.v = !0;
          }
        }
        function i(E, C) {
          if (typeof E != "function")
            throw new TypeError(C + " must be a function");
        }
        function a(E, C) {
          var x = typeof C;
          if (E === 1) {
            if (x !== "object" || C === null)
              throw new TypeError(
                "accessor decorators must return an object with get, set, or init properties or void 0",
              );
            C.get !== void 0 && i(C.get, "accessor.get"),
              C.set !== void 0 && i(C.set, "accessor.set"),
              C.init !== void 0 && i(C.init, "accessor.init");
          } else if (x !== "function") {
            var _;
            throw (
              ((_ = E === 0 ? "field" : E === 10 ? "class" : "method"),
              new TypeError(_ + " decorators must return a function or void 0"))
            );
          }
        }
        function c(E, C, x, _, O, G, X, et) {
          var J,
            rt,
            it,
            Q,
            ot,
            at,
            kt = x[0];
          if (
            (X
              ? (J =
                  O === 0 || O === 1
                    ? { get: x[3], set: x[4] }
                    : O === 3
                    ? { get: x[3] }
                    : O === 4
                    ? { set: x[3] }
                    : { value: x[3] })
              : O !== 0 && (J = Object.getOwnPropertyDescriptor(C, _)),
            O === 1
              ? (it = { get: J.get, set: J.set })
              : O === 2
              ? (it = J.value)
              : O === 3
              ? (it = J.get)
              : O === 4 && (it = J.set),
            typeof kt == "function")
          )
            (Q = e(kt, _, J, et, O, G, X, it)) !== void 0 &&
              (a(O, Q),
              O === 0
                ? (rt = Q)
                : O === 1
                ? ((rt = Q.init),
                  (ot = Q.get || it.get),
                  (at = Q.set || it.set),
                  (it = { get: ot, set: at }))
                : (it = Q));
          else
            for (var Lt = kt.length - 1; Lt >= 0; Lt--) {
              var Ft;
              (Q = e(kt[Lt], _, J, et, O, G, X, it)) !== void 0 &&
                (a(O, Q),
                O === 0
                  ? (Ft = Q)
                  : O === 1
                  ? ((Ft = Q.init),
                    (ot = Q.get || it.get),
                    (at = Q.set || it.set),
                    (it = { get: ot, set: at }))
                  : (it = Q),
                Ft !== void 0 &&
                  (rt === void 0
                    ? (rt = Ft)
                    : typeof rt == "function"
                    ? (rt = [rt, Ft])
                    : rt.push(Ft)));
            }
          if (O === 0 || O === 1) {
            if (rt === void 0)
              rt = function (Ht, ue) {
                return ue;
              };
            else if (typeof rt != "function") {
              var Jt = rt;
              rt = function (Ht, ue) {
                for (var ze = ue, yr = 0; yr < Jt.length; yr++)
                  ze = Jt[yr].call(Ht, ze);
                return ze;
              };
            } else {
              var jt = rt;
              rt = function (Ht, ue) {
                return jt.call(Ht, ue);
              };
            }
            E.push(rt);
          }
          O !== 0 &&
            (O === 1
              ? ((J.get = it.get), (J.set = it.set))
              : O === 2
              ? (J.value = it)
              : O === 3
              ? (J.get = it)
              : O === 4 && (J.set = it),
            X
              ? O === 1
                ? (E.push(function (Ht, ue) {
                    return it.get.call(Ht, ue);
                  }),
                  E.push(function (Ht, ue) {
                    return it.set.call(Ht, ue);
                  }))
                : O === 2
                ? E.push(it)
                : E.push(function (Ht, ue) {
                    return it.call(Ht, ue);
                  })
              : Object.defineProperty(C, _, J));
        }
        function u(E, C) {
          for (
            var x, _, O = [], G = new Map(), X = new Map(), et = 0;
            et < C.length;
            et++
          ) {
            var J = C[et];
            if (Array.isArray(J)) {
              var rt,
                it,
                Q = J[1],
                ot = J[2],
                at = J.length > 3,
                kt = Q >= 5;
              if (
                (kt
                  ? ((rt = E), (Q -= 5) !== 0 && (it = _ = _ || []))
                  : ((rt = E.prototype), Q !== 0 && (it = x = x || [])),
                Q !== 0 && !at)
              ) {
                var Lt = kt ? X : G,
                  Ft = Lt.get(ot) || 0;
                if (Ft === !0 || (Ft === 3 && Q !== 4) || (Ft === 4 && Q !== 3))
                  throw new Error(
                    "Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: " +
                      ot,
                  );
                !Ft && Q > 2 ? Lt.set(ot, Q) : Lt.set(ot, !0);
              }
              c(O, rt, J, ot, Q, kt, at, it);
            }
          }
          return g(O, x), g(O, _), O;
        }
        function g(E, C) {
          C &&
            E.push(function (x) {
              for (var _ = 0; _ < C.length; _++) C[_].call(x);
              return x;
            });
        }
        return function (E, C, x) {
          return {
            e: u(E, C),
            get c() {
              return (function (_, O) {
                if (O.length > 0) {
                  for (
                    var G = [], X = _, et = _.name, J = O.length - 1;
                    J >= 0;
                    J--
                  ) {
                    var rt = { v: !1 };
                    try {
                      var it = O[J](X, {
                        kind: "class",
                        name: et,
                        addInitializer: o(G, rt),
                      });
                    } finally {
                      rt.v = !0;
                    }
                    it !== void 0 && (a(10, it), (X = it));
                  }
                  return [
                    X,
                    function () {
                      for (var Q = 0; Q < G.length; Q++) G[Q].call(X);
                    },
                  ];
                }
              })(E, x);
            },
          };
        };
      }
      function Ph(o, e, i) {
        return (Ph = Dh())(o, e, i);
      }
      function Oh() {
        function o(x, _) {
          return function (O) {
            (function (G, X) {
              if (G.v)
                throw new Error(
                  "attempted to call " + X + " after decoration was finished",
                );
            })(_, "addInitializer"),
              a(O, "An initializer"),
              x.push(O);
          };
        }
        function e(x, _) {
          if (!x(_))
            throw new TypeError(
              "Attempted to access private element on non-instance",
            );
        }
        function i(x, _, O, G, X, et, J, rt, it) {
          var Q;
          switch (X) {
            case 1:
              Q = "accessor";
              break;
            case 2:
              Q = "method";
              break;
            case 3:
              Q = "getter";
              break;
            case 4:
              Q = "setter";
              break;
            default:
              Q = "field";
          }
          var ot,
            at,
            kt = { kind: Q, name: J ? "#" + _ : _, static: et, private: J },
            Lt = { v: !1 };
          if (
            (X !== 0 && (kt.addInitializer = o(G, Lt)),
            J || (X !== 0 && X !== 2))
          )
            if (X === 2)
              ot = function (jt) {
                return e(it, jt), O.value;
              };
            else {
              var Ft = X === 0 || X === 1;
              (Ft || X === 3) &&
                (ot = J
                  ? function (jt) {
                      return e(it, jt), O.get.call(jt);
                    }
                  : function (jt) {
                      return O.get.call(jt);
                    }),
                (Ft || X === 4) &&
                  (at = J
                    ? function (jt, Ht) {
                        e(it, jt), O.set.call(jt, Ht);
                      }
                    : function (jt, Ht) {
                        O.set.call(jt, Ht);
                      });
            }
          else
            (ot = function (jt) {
              return jt[_];
            }),
              X === 0 &&
                (at = function (jt, Ht) {
                  jt[_] = Ht;
                });
          var Jt = J
            ? it.bind()
            : function (jt) {
                return _ in jt;
              };
          kt.access =
            ot && at
              ? { get: ot, set: at, has: Jt }
              : ot
              ? { get: ot, has: Jt }
              : { set: at, has: Jt };
          try {
            return x(rt, kt);
          } finally {
            Lt.v = !0;
          }
        }
        function a(x, _) {
          if (typeof x != "function")
            throw new TypeError(_ + " must be a function");
        }
        function c(x, _) {
          var O = typeof _;
          if (x === 1) {
            if (O !== "object" || _ === null)
              throw new TypeError(
                "accessor decorators must return an object with get, set, or init properties or void 0",
              );
            _.get !== void 0 && a(_.get, "accessor.get"),
              _.set !== void 0 && a(_.set, "accessor.set"),
              _.init !== void 0 && a(_.init, "accessor.init");
          } else if (O !== "function") {
            var G;
            throw (
              ((G = x === 0 ? "field" : x === 10 ? "class" : "method"),
              new TypeError(G + " decorators must return a function or void 0"))
            );
          }
        }
        function u(x) {
          return function (_) {
            x(this, _);
          };
        }
        function g(x, _, O, G, X, et, J, rt, it) {
          var Q,
            ot,
            at,
            kt,
            Lt,
            Ft,
            Jt,
            jt = O[0];
          if (
            (J
              ? (Q =
                  X === 0 || X === 1
                    ? {
                        get:
                          ((kt = O[3]),
                          function () {
                            return kt(this);
                          }),
                        set: u(O[4]),
                      }
                    : X === 3
                    ? { get: O[3] }
                    : X === 4
                    ? { set: O[3] }
                    : { value: O[3] })
              : X !== 0 && (Q = Object.getOwnPropertyDescriptor(_, G)),
            X === 1
              ? (at = { get: Q.get, set: Q.set })
              : X === 2
              ? (at = Q.value)
              : X === 3
              ? (at = Q.get)
              : X === 4 && (at = Q.set),
            typeof jt == "function")
          )
            (Lt = i(jt, G, Q, rt, X, et, J, at, it)) !== void 0 &&
              (c(X, Lt),
              X === 0
                ? (ot = Lt)
                : X === 1
                ? ((ot = Lt.init),
                  (Ft = Lt.get || at.get),
                  (Jt = Lt.set || at.set),
                  (at = { get: Ft, set: Jt }))
                : (at = Lt));
          else
            for (var Ht = jt.length - 1; Ht >= 0; Ht--) {
              var ue;
              (Lt = i(jt[Ht], G, Q, rt, X, et, J, at, it)) !== void 0 &&
                (c(X, Lt),
                X === 0
                  ? (ue = Lt)
                  : X === 1
                  ? ((ue = Lt.init),
                    (Ft = Lt.get || at.get),
                    (Jt = Lt.set || at.set),
                    (at = { get: Ft, set: Jt }))
                  : (at = Lt),
                ue !== void 0 &&
                  (ot === void 0
                    ? (ot = ue)
                    : typeof ot == "function"
                    ? (ot = [ot, ue])
                    : ot.push(ue)));
            }
          if (X === 0 || X === 1) {
            if (ot === void 0)
              ot = function (Ye, Ge) {
                return Ge;
              };
            else if (typeof ot != "function") {
              var ze = ot;
              ot = function (Ye, Ge) {
                for (var dt = Ge, ut = 0; ut < ze.length; ut++)
                  dt = ze[ut].call(Ye, dt);
                return dt;
              };
            } else {
              var yr = ot;
              ot = function (Ye, Ge) {
                return yr.call(Ye, Ge);
              };
            }
            x.push(ot);
          }
          X !== 0 &&
            (X === 1
              ? ((Q.get = at.get), (Q.set = at.set))
              : X === 2
              ? (Q.value = at)
              : X === 3
              ? (Q.get = at)
              : X === 4 && (Q.set = at),
            J
              ? X === 1
                ? (x.push(function (Ye, Ge) {
                    return at.get.call(Ye, Ge);
                  }),
                  x.push(function (Ye, Ge) {
                    return at.set.call(Ye, Ge);
                  }))
                : X === 2
                ? x.push(at)
                : x.push(function (Ye, Ge) {
                    return at.call(Ye, Ge);
                  })
              : Object.defineProperty(_, G, Q));
        }
        function E(x, _, O) {
          for (
            var G, X, et, J = [], rt = new Map(), it = new Map(), Q = 0;
            Q < _.length;
            Q++
          ) {
            var ot = _[Q];
            if (Array.isArray(ot)) {
              var at,
                kt,
                Lt = ot[1],
                Ft = ot[2],
                Jt = ot.length > 3,
                jt = Lt >= 5,
                Ht = O;
              if (
                (jt
                  ? ((at = x),
                    (Lt -= 5) !== 0 && (kt = X = X || []),
                    Jt &&
                      !et &&
                      (et = function (yr) {
                        return Yl(yr) === x;
                      }),
                    (Ht = et))
                  : ((at = x.prototype), Lt !== 0 && (kt = G = G || [])),
                Lt !== 0 && !Jt)
              ) {
                var ue = jt ? it : rt,
                  ze = ue.get(Ft) || 0;
                if (
                  ze === !0 ||
                  (ze === 3 && Lt !== 4) ||
                  (ze === 4 && Lt !== 3)
                )
                  throw new Error(
                    "Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: " +
                      Ft,
                  );
                !ze && Lt > 2 ? ue.set(Ft, Lt) : ue.set(Ft, !0);
              }
              g(J, at, ot, Ft, Lt, jt, Jt, kt, Ht);
            }
          }
          return C(J, G), C(J, X), J;
        }
        function C(x, _) {
          _ &&
            x.push(function (O) {
              for (var G = 0; G < _.length; G++) _[G].call(O);
              return O;
            });
        }
        return function (x, _, O, G) {
          return {
            e: E(x, _, G),
            get c() {
              return (function (X, et) {
                if (et.length > 0) {
                  for (
                    var J = [], rt = X, it = X.name, Q = et.length - 1;
                    Q >= 0;
                    Q--
                  ) {
                    var ot = { v: !1 };
                    try {
                      var at = et[Q](rt, {
                        kind: "class",
                        name: it,
                        addInitializer: o(J, ot),
                      });
                    } finally {
                      ot.v = !0;
                    }
                    at !== void 0 && (c(10, at), (rt = at));
                  }
                  return [
                    rt,
                    function () {
                      for (var kt = 0; kt < J.length; kt++) J[kt].call(rt);
                    },
                  ];
                }
              })(x, O);
            },
          };
        };
      }
      function Mh(o, e, i, a) {
        return (Mh = Oh())(o, e, i, a);
      }
      function $l(o, e) {
        return function (i) {
          Ih(e, "addInitializer"), Bs(i, "An initializer"), o.push(i);
        };
      }
      function ra(o, e) {
        if (!o(e))
          throw new TypeError(
            "Attempted to access private element on non-instance",
          );
      }
      function Fh(o, e, i, a, c, u, g, E, C, x, _) {
        var O;
        switch (u) {
          case 1:
            O = "accessor";
            break;
          case 2:
            O = "method";
            break;
          case 3:
            O = "getter";
            break;
          case 4:
            O = "setter";
            break;
          default:
            O = "field";
        }
        var G,
          X,
          et = {
            kind: O,
            name: E ? "#" + i : i,
            static: g,
            private: E,
            metadata: _,
          },
          J = { v: !1 };
        if (
          (u !== 0 && (et.addInitializer = $l(c, J)), E || (u !== 0 && u !== 2))
        )
          if (u === 2)
            G = function (Q) {
              return ra(x, Q), a.value;
            };
          else {
            var rt = u === 0 || u === 1;
            (rt || u === 3) &&
              (G = E
                ? function (Q) {
                    return ra(x, Q), a.get.call(Q);
                  }
                : function (Q) {
                    return a.get.call(Q);
                  }),
              (rt || u === 4) &&
                (X = E
                  ? function (Q, ot) {
                      ra(x, Q), a.set.call(Q, ot);
                    }
                  : function (Q, ot) {
                      a.set.call(Q, ot);
                    });
          }
        else
          (G = function (Q) {
            return Q[i];
          }),
            u === 0 &&
              (X = function (Q, ot) {
                Q[i] = ot;
              });
        var it = E
          ? x.bind()
          : function (Q) {
              return i in Q;
            };
        et.access =
          G && X
            ? { get: G, set: X, has: it }
            : G
            ? { get: G, has: it }
            : { set: X, has: it };
        try {
          return o.call(e, C, et);
        } finally {
          J.v = !0;
        }
      }
      function Ih(o, e) {
        if (o.v)
          throw new Error(
            "attempted to call " + e + " after decoration was finished",
          );
      }
      function Bs(o, e) {
        if (typeof o != "function")
          throw new TypeError(e + " must be a function");
      }
      function Xl(o, e) {
        var i = typeof e;
        if (o === 1) {
          if (i !== "object" || e === null)
            throw new TypeError(
              "accessor decorators must return an object with get, set, or init properties or void 0",
            );
          e.get !== void 0 && Bs(e.get, "accessor.get"),
            e.set !== void 0 && Bs(e.set, "accessor.set"),
            e.init !== void 0 && Bs(e.init, "accessor.init");
        } else if (i !== "function") {
          var a;
          throw (
            ((a = o === 0 ? "field" : o === 5 ? "class" : "method"),
            new TypeError(a + " decorators must return a function or void 0"))
          );
        }
      }
      function Bh(o) {
        return function () {
          return o(this);
        };
      }
      function Nh(o) {
        return function (e) {
          o(this, e);
        };
      }
      function jh(o, e, i, a, c, u, g, E, C, x, _) {
        var O,
          G,
          X,
          et,
          J,
          rt,
          it = i[0];
        a || Array.isArray(it) || (it = [it]),
          E
            ? (O =
                u === 0 || u === 1
                  ? { get: Bh(i[3]), set: Nh(i[4]) }
                  : u === 3
                  ? { get: i[3] }
                  : u === 4
                  ? { set: i[3] }
                  : { value: i[3] })
            : u !== 0 && (O = Object.getOwnPropertyDescriptor(e, c)),
          u === 1
            ? (X = { get: O.get, set: O.set })
            : u === 2
            ? (X = O.value)
            : u === 3
            ? (X = O.get)
            : u === 4 && (X = O.set);
        for (var Q = a ? 2 : 1, ot = it.length - 1; ot >= 0; ot -= Q) {
          var at;
          (et = Fh(
            it[ot],
            a ? it[ot - 1] : void 0,
            c,
            O,
            C,
            u,
            g,
            E,
            X,
            x,
            _,
          )) !== void 0 &&
            (Xl(u, et),
            u === 0
              ? (at = et)
              : u === 1
              ? ((at = et.init),
                (J = et.get || X.get),
                (rt = et.set || X.set),
                (X = { get: J, set: rt }))
              : (X = et),
            at !== void 0 &&
              (G === void 0
                ? (G = at)
                : typeof G == "function"
                ? (G = [G, at])
                : G.push(at)));
        }
        if (u === 0 || u === 1) {
          if (G === void 0)
            G = function (Ft, Jt) {
              return Jt;
            };
          else if (typeof G != "function") {
            var kt = G;
            G = function (Ft, Jt) {
              for (var jt = Jt, Ht = kt.length - 1; Ht >= 0; Ht--)
                jt = kt[Ht].call(Ft, jt);
              return jt;
            };
          } else {
            var Lt = G;
            G = function (Ft, Jt) {
              return Lt.call(Ft, Jt);
            };
          }
          o.push(G);
        }
        u !== 0 &&
          (u === 1
            ? ((O.get = X.get), (O.set = X.set))
            : u === 2
            ? (O.value = X)
            : u === 3
            ? (O.get = X)
            : u === 4 && (O.set = X),
          E
            ? u === 1
              ? (o.push(function (Ft, Jt) {
                  return X.get.call(Ft, Jt);
                }),
                o.push(function (Ft, Jt) {
                  return X.set.call(Ft, Jt);
                }))
              : u === 2
              ? o.push(X)
              : o.push(function (Ft, Jt) {
                  return X.call(Ft, Jt);
                })
            : Object.defineProperty(e, c, O));
      }
      function qh(o, e, i, a) {
        for (
          var c, u, g, E = [], C = new Map(), x = new Map(), _ = 0;
          _ < e.length;
          _++
        ) {
          var O = e[_];
          if (Array.isArray(O)) {
            var G,
              X,
              et = O[1],
              J = O[2],
              rt = O.length > 3,
              it = 16 & et,
              Q = !!(8 & et),
              ot = i;
            if (
              ((et &= 7),
              Q
                ? ((G = o),
                  et !== 0 && (X = u = u || []),
                  rt &&
                    !g &&
                    (g = function (Lt) {
                      return Yl(Lt) === o;
                    }),
                  (ot = g))
                : ((G = o.prototype), et !== 0 && (X = c = c || [])),
              et !== 0 && !rt)
            ) {
              var at = Q ? x : C,
                kt = at.get(J) || 0;
              if (kt === !0 || (kt === 3 && et !== 4) || (kt === 4 && et !== 3))
                throw new Error(
                  "Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: " +
                    J,
                );
              at.set(J, !(!kt && et > 2) || et);
            }
            jh(E, G, O, it, J, et, Q, rt, X, ot, a);
          }
        }
        return Kl(E, c), Kl(E, u), E;
      }
      function Kl(o, e) {
        e &&
          o.push(function (i) {
            for (var a = 0; a < e.length; a++) e[a].call(i);
            return i;
          });
      }
      function zh(o, e, i, a) {
        if (e.length) {
          for (
            var c = [], u = o, g = o.name, E = i ? 2 : 1, C = e.length - 1;
            C >= 0;
            C -= E
          ) {
            var x = { v: !1 };
            try {
              var _ = e[C].call(i ? e[C - 1] : void 0, u, {
                kind: "class",
                name: g,
                addInitializer: $l(c, x),
                metadata: a,
              });
            } finally {
              x.v = !0;
            }
            _ !== void 0 && (Xl(5, _), (u = _));
          }
          return [
            Gl(u, a),
            function () {
              for (var O = 0; O < c.length; O++) c[O].call(u);
            },
          ];
        }
      }
      function Gl(o, e) {
        return Object.defineProperty(
          o,
          Symbol.metadata || Symbol.for("Symbol.metadata"),
          { configurable: !0, enumerable: !0, value: e },
        );
      }
      function qg(o, e, i, a, c, u) {
        if (arguments.length >= 6)
          var g = u[Symbol.metadata || Symbol.for("Symbol.metadata")];
        var E = Object.create(g === void 0 ? null : g),
          C = qh(o, e, c, E);
        return (
          i.length || Gl(o, E),
          {
            e: C,
            get c() {
              return zh(o, i, a, E);
            },
          }
        );
      }
      function zg(o) {
        var e = {},
          i = !1;
        function a(c, u) {
          return (
            (i = !0),
            (u = new Promise(function (g) {
              g(o[c](u));
            })),
            { done: !1, value: new br(u, 1) }
          );
        }
        return (
          (e[
            (typeof Symbol != "undefined" && Symbol.iterator) || "@@iterator"
          ] = function () {
            return this;
          }),
          (e.next = function (c) {
            return i ? ((i = !1), c) : a("next", c);
          }),
          typeof o.throw == "function" &&
            (e.throw = function (c) {
              if (i) throw ((i = !1), c);
              return a("throw", c);
            }),
          typeof o.return == "function" &&
            (e.return = function (c) {
              return i ? ((i = !1), c) : a("return", c);
            }),
          e
        );
      }
      function Hg(o) {
        var e,
          i,
          a,
          c = 2;
        for (
          typeof Symbol != "undefined" &&
          ((i = Symbol.asyncIterator), (a = Symbol.iterator));
          c--;

        ) {
          if (i && (e = o[i]) != null) return e.call(o);
          if (a && (e = o[a]) != null) return new Ns(e.call(o));
          (i = "@@asyncIterator"), (a = "@@iterator");
        }
        throw new TypeError("Object is not async iterable");
      }
      function Ns(o) {
        function e(i) {
          if (Object(i) !== i)
            return Promise.reject(new TypeError(i + " is not an object."));
          var a = i.done;
          return Promise.resolve(i.value).then(function (c) {
            return { value: c, done: a };
          });
        }
        return (
          (Ns = function (i) {
            (this.s = i), (this.n = i.next);
          }),
          (Ns.prototype = {
            s: null,
            n: null,
            next: function () {
              return e(this.n.apply(this.s, arguments));
            },
            return: function (i) {
              var a = this.s.return;
              return a === void 0
                ? Promise.resolve({ value: i, done: !0 })
                : e(a.apply(this.s, arguments));
            },
            throw: function (i) {
              var a = this.s.return;
              return a === void 0
                ? Promise.reject(i)
                : e(a.apply(this.s, arguments));
            },
          }),
          new Ns(o)
        );
      }
      function Wg(o) {
        return new br(o, 0);
      }
      function Yl(o) {
        if (Object(o) !== o)
          throw TypeError(
            "right-hand side of 'in' should be an object, got " +
              (o !== null ? typeof o : "null"),
          );
        return o;
      }
      function Ug(o, e, i, a) {
        var c = { configurable: !0, enumerable: !0 };
        return (c[o] = a), Object.defineProperty(e, i, c);
      }
      function _i(o, e) {
        return (
          typeof SuppressedError != "undefined"
            ? (_i = SuppressedError)
            : ((_i = function (i, a) {
                (this.suppressed = i),
                  (this.error = a),
                  (this.stack = new Error().stack);
              }),
              (_i.prototype = Object.create(Error.prototype, {
                constructor: { value: _i, writable: !0, configurable: !0 },
              }))),
          new _i(o, e)
        );
      }
      function Vg(o, e, i) {
        function a() {
          for (; o.length > 0; )
            try {
              var u = o.pop(),
                g = u.d.call(u.v);
              if (u.a) return Promise.resolve(g).then(a, c);
            } catch (E) {
              return c(E);
            }
          if (i) throw e;
        }
        function c(u) {
          return (e = i ? new _i(u, e) : u), (i = !0), a();
        }
        return a();
      }
      function $g(o) {
        var e = null,
          i = function (c) {
            return function () {
              return c;
            };
          },
          a = function (c) {
            return function (u, g, E) {
              return e === null && (e = o()), c(e, g, E);
            };
          };
        return new Proxy(
          {},
          {
            defineProperty: i(!1),
            deleteProperty: i(!1),
            get: a(Reflect.get),
            getOwnPropertyDescriptor: a(Reflect.getOwnPropertyDescriptor),
            getPrototypeOf: i(null),
            isExtensible: i(!1),
            has: a(Reflect.has),
            ownKeys: a(Reflect.ownKeys),
            preventExtensions: i(!0),
            set: i(!1),
            setPrototypeOf: i(!1),
          },
        );
      }
      function Hh(o, e) {
        var i =
          o == null
            ? null
            : (typeof Symbol != "undefined" && o[Symbol.iterator]) ||
              o["@@iterator"];
        if (i != null) {
          var a,
            c,
            u,
            g,
            E = [],
            C = !0,
            x = !1;
          try {
            if (((u = (i = i.call(o)).next), e === 0)) {
              if (Object(i) !== i) return;
              C = !1;
            } else
              for (
                ;
                !(C = (a = u.call(i)).done) &&
                (E.push(a.value), E.length !== e);
                C = !0
              );
          } catch (_) {
            (x = !0), (c = _);
          } finally {
            try {
              if (!C && i.return != null && ((g = i.return()), Object(g) !== g))
                return;
            } finally {
              if (x) throw c;
            }
          }
          return E;
        }
      }
      function Wh(o, e) {
        var i =
          o &&
          ((typeof Symbol != "undefined" && o[Symbol.iterator]) ||
            o["@@iterator"]);
        if (i != null) {
          var a,
            c = [];
          for (i = i.call(o); o.length < e && !(a = i.next()).done; )
            c.push(a.value);
          return c;
        }
      }
      var ia;
      function Xg(o, e, i, a) {
        ia ||
          (ia =
            (typeof Symbol == "function" &&
              Symbol.for &&
              Symbol.for("react.element")) ||
            60103);
        var c = o && o.defaultProps,
          u = arguments.length - 3;
        if ((e || u === 0 || (e = { children: void 0 }), u === 1))
          e.children = a;
        else if (u > 1) {
          for (var g = new Array(u), E = 0; E < u; E++) g[E] = arguments[E + 3];
          e.children = g;
        }
        if (e && c) for (var C in c) e[C] === void 0 && (e[C] = c[C]);
        else e || (e = c || {});
        return {
          $$typeof: ia,
          type: o,
          key: i === void 0 ? null : "" + i,
          ref: null,
          props: e,
          _owner: null,
        };
      }
      function Jl(o, e) {
        var i = Object.keys(o);
        if (Object.getOwnPropertySymbols) {
          var a = Object.getOwnPropertySymbols(o);
          e &&
            (a = a.filter(function (c) {
              return Object.getOwnPropertyDescriptor(o, c).enumerable;
            })),
            i.push.apply(i, a);
        }
        return i;
      }
      function Kg(o) {
        for (var e = 1; e < arguments.length; e++) {
          var i = arguments[e] != null ? arguments[e] : {};
          e % 2
            ? Jl(Object(i), !0).forEach(function (a) {
                $e(o, a, i[a]);
              })
            : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(o, Object.getOwnPropertyDescriptors(i))
            : Jl(Object(i)).forEach(function (a) {
                Object.defineProperty(
                  o,
                  a,
                  Object.getOwnPropertyDescriptor(i, a),
                );
              });
        }
        return o;
      }
      function Uh() {
        "use strict";
        Uh = function () {
          return e;
        };
        var o,
          e = {},
          i = Object.prototype,
          a = i.hasOwnProperty,
          c =
            Object.defineProperty ||
            function (dt, ut, At) {
              dt[ut] = At.value;
            },
          u = typeof Symbol == "function" ? Symbol : {},
          g = u.iterator || "@@iterator",
          E = u.asyncIterator || "@@asyncIterator",
          C = u.toStringTag || "@@toStringTag";
        function x(dt, ut, At) {
          return (
            Object.defineProperty(dt, ut, {
              value: At,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            }),
            dt[ut]
          );
        }
        try {
          x({}, "");
        } catch (dt) {
          x = function (ut, At, Gt) {
            return (ut[At] = Gt);
          };
        }
        function _(dt, ut, At, Gt) {
          var Bt = ut && ut.prototype instanceof it ? ut : it,
            me = Object.create(Bt.prototype),
            Be = new Ye(Gt || []);
          return c(me, "_invoke", { value: Ht(dt, At, Be) }), me;
        }
        function O(dt, ut, At) {
          try {
            return { type: "normal", arg: dt.call(ut, At) };
          } catch (Gt) {
            return { type: "throw", arg: Gt };
          }
        }
        e.wrap = _;
        var G = "suspendedStart",
          X = "suspendedYield",
          et = "executing",
          J = "completed",
          rt = {};
        function it() {}
        function Q() {}
        function ot() {}
        var at = {};
        x(at, g, function () {
          return this;
        });
        var kt = Object.getPrototypeOf,
          Lt = kt && kt(kt(Ge([])));
        Lt && Lt !== i && a.call(Lt, g) && (at = Lt);
        var Ft = (ot.prototype = it.prototype = Object.create(at));
        function Jt(dt) {
          ["next", "throw", "return"].forEach(function (ut) {
            x(dt, ut, function (At) {
              return this._invoke(ut, At);
            });
          });
        }
        function jt(dt, ut) {
          function At(Bt, me, Be, ir) {
            var nr = O(dt[Bt], dt, me);
            if (nr.type !== "throw") {
              var Bi = nr.arg,
                on = Bi.value;
              return on && typeof on == "object" && a.call(on, "__await")
                ? ut.resolve(on.__await).then(
                    function (li) {
                      At("next", li, Be, ir);
                    },
                    function (li) {
                      At("throw", li, Be, ir);
                    },
                  )
                : ut.resolve(on).then(
                    function (li) {
                      (Bi.value = li), Be(Bi);
                    },
                    function (li) {
                      return At("throw", li, Be, ir);
                    },
                  );
            }
            ir(nr.arg);
          }
          var Gt;
          c(this, "_invoke", {
            value: function (Bt, me) {
              function Be() {
                return new ut(function (ir, nr) {
                  At(Bt, me, ir, nr);
                });
              }
              return (Gt = Gt ? Gt.then(Be, Be) : Be());
            },
          });
        }
        function Ht(dt, ut, At) {
          var Gt = G;
          return function (Bt, me) {
            if (Gt === et) throw new Error("Generator is already running");
            if (Gt === J) {
              if (Bt === "throw") throw me;
              return { value: o, done: !0 };
            }
            for (At.method = Bt, At.arg = me; ; ) {
              var Be = At.delegate;
              if (Be) {
                var ir = ue(Be, At);
                if (ir) {
                  if (ir === rt) continue;
                  return ir;
                }
              }
              if (At.method === "next") At.sent = At._sent = At.arg;
              else if (At.method === "throw") {
                if (Gt === G) throw ((Gt = J), At.arg);
                At.dispatchException(At.arg);
              } else At.method === "return" && At.abrupt("return", At.arg);
              Gt = et;
              var nr = O(dt, ut, At);
              if (nr.type === "normal") {
                if (((Gt = At.done ? J : X), nr.arg === rt)) continue;
                return { value: nr.arg, done: At.done };
              }
              nr.type === "throw" &&
                ((Gt = J), (At.method = "throw"), (At.arg = nr.arg));
            }
          };
        }
        function ue(dt, ut) {
          var At = ut.method,
            Gt = dt.iterator[At];
          if (Gt === o)
            return (
              (ut.delegate = null),
              (At === "throw" &&
                dt.iterator.return &&
                ((ut.method = "return"),
                (ut.arg = o),
                ue(dt, ut),
                ut.method === "throw")) ||
                (At !== "return" &&
                  ((ut.method = "throw"),
                  (ut.arg = new TypeError(
                    "The iterator does not provide a '" + At + "' method",
                  )))),
              rt
            );
          var Bt = O(Gt, dt.iterator, ut.arg);
          if (Bt.type === "throw")
            return (
              (ut.method = "throw"), (ut.arg = Bt.arg), (ut.delegate = null), rt
            );
          var me = Bt.arg;
          return me
            ? me.done
              ? ((ut[dt.resultName] = me.value),
                (ut.next = dt.nextLoc),
                ut.method !== "return" && ((ut.method = "next"), (ut.arg = o)),
                (ut.delegate = null),
                rt)
              : me
            : ((ut.method = "throw"),
              (ut.arg = new TypeError("iterator result is not an object")),
              (ut.delegate = null),
              rt);
        }
        function ze(dt) {
          var ut = { tryLoc: dt[0] };
          1 in dt && (ut.catchLoc = dt[1]),
            2 in dt && ((ut.finallyLoc = dt[2]), (ut.afterLoc = dt[3])),
            this.tryEntries.push(ut);
        }
        function yr(dt) {
          var ut = dt.completion || {};
          (ut.type = "normal"), delete ut.arg, (dt.completion = ut);
        }
        function Ye(dt) {
          (this.tryEntries = [{ tryLoc: "root" }]),
            dt.forEach(ze, this),
            this.reset(!0);
        }
        function Ge(dt) {
          if (dt || dt === "") {
            var ut = dt[g];
            if (ut) return ut.call(dt);
            if (typeof dt.next == "function") return dt;
            if (!isNaN(dt.length)) {
              var At = -1,
                Gt = function Bt() {
                  for (; ++At < dt.length; )
                    if (a.call(dt, At))
                      return (Bt.value = dt[At]), (Bt.done = !1), Bt;
                  return (Bt.value = o), (Bt.done = !0), Bt;
                };
              return (Gt.next = Gt);
            }
          }
          throw new TypeError(typeof dt + " is not iterable");
        }
        return (
          (Q.prototype = ot),
          c(Ft, "constructor", { value: ot, configurable: !0 }),
          c(ot, "constructor", { value: Q, configurable: !0 }),
          (Q.displayName = x(ot, C, "GeneratorFunction")),
          (e.isGeneratorFunction = function (dt) {
            var ut = typeof dt == "function" && dt.constructor;
            return (
              !!ut &&
              (ut === Q || (ut.displayName || ut.name) === "GeneratorFunction")
            );
          }),
          (e.mark = function (dt) {
            return (
              Object.setPrototypeOf
                ? Object.setPrototypeOf(dt, ot)
                : ((dt.__proto__ = ot), x(dt, C, "GeneratorFunction")),
              (dt.prototype = Object.create(Ft)),
              dt
            );
          }),
          (e.awrap = function (dt) {
            return { __await: dt };
          }),
          Jt(jt.prototype),
          x(jt.prototype, E, function () {
            return this;
          }),
          (e.AsyncIterator = jt),
          (e.async = function (dt, ut, At, Gt, Bt) {
            Bt === void 0 && (Bt = Promise);
            var me = new jt(_(dt, ut, At, Gt), Bt);
            return e.isGeneratorFunction(ut)
              ? me
              : me.next().then(function (Be) {
                  return Be.done ? Be.value : me.next();
                });
          }),
          Jt(Ft),
          x(Ft, C, "Generator"),
          x(Ft, g, function () {
            return this;
          }),
          x(Ft, "toString", function () {
            return "[object Generator]";
          }),
          (e.keys = function (dt) {
            var ut = Object(dt),
              At = [];
            for (var Gt in ut) At.push(Gt);
            return (
              At.reverse(),
              function Bt() {
                for (; At.length; ) {
                  var me = At.pop();
                  if (me in ut) return (Bt.value = me), (Bt.done = !1), Bt;
                }
                return (Bt.done = !0), Bt;
              }
            );
          }),
          (e.values = Ge),
          (Ye.prototype = {
            constructor: Ye,
            reset: function (dt) {
              if (
                ((this.prev = 0),
                (this.next = 0),
                (this.sent = this._sent = o),
                (this.done = !1),
                (this.delegate = null),
                (this.method = "next"),
                (this.arg = o),
                this.tryEntries.forEach(yr),
                !dt)
              )
                for (var ut in this)
                  ut.charAt(0) === "t" &&
                    a.call(this, ut) &&
                    !isNaN(+ut.slice(1)) &&
                    (this[ut] = o);
            },
            stop: function () {
              this.done = !0;
              var dt = this.tryEntries[0].completion;
              if (dt.type === "throw") throw dt.arg;
              return this.rval;
            },
            dispatchException: function (dt) {
              if (this.done) throw dt;
              var ut = this;
              function At(nr, Bi) {
                return (
                  (me.type = "throw"),
                  (me.arg = dt),
                  (ut.next = nr),
                  Bi && ((ut.method = "next"), (ut.arg = o)),
                  !!Bi
                );
              }
              for (var Gt = this.tryEntries.length - 1; Gt >= 0; --Gt) {
                var Bt = this.tryEntries[Gt],
                  me = Bt.completion;
                if (Bt.tryLoc === "root") return At("end");
                if (Bt.tryLoc <= this.prev) {
                  var Be = a.call(Bt, "catchLoc"),
                    ir = a.call(Bt, "finallyLoc");
                  if (Be && ir) {
                    if (this.prev < Bt.catchLoc) return At(Bt.catchLoc, !0);
                    if (this.prev < Bt.finallyLoc) return At(Bt.finallyLoc);
                  } else if (Be) {
                    if (this.prev < Bt.catchLoc) return At(Bt.catchLoc, !0);
                  } else {
                    if (!ir)
                      throw new Error("try statement without catch or finally");
                    if (this.prev < Bt.finallyLoc) return At(Bt.finallyLoc);
                  }
                }
              }
            },
            abrupt: function (dt, ut) {
              for (var At = this.tryEntries.length - 1; At >= 0; --At) {
                var Gt = this.tryEntries[At];
                if (
                  Gt.tryLoc <= this.prev &&
                  a.call(Gt, "finallyLoc") &&
                  this.prev < Gt.finallyLoc
                ) {
                  var Bt = Gt;
                  break;
                }
              }
              Bt &&
                (dt === "break" || dt === "continue") &&
                Bt.tryLoc <= ut &&
                ut <= Bt.finallyLoc &&
                (Bt = null);
              var me = Bt ? Bt.completion : {};
              return (
                (me.type = dt),
                (me.arg = ut),
                Bt
                  ? ((this.method = "next"), (this.next = Bt.finallyLoc), rt)
                  : this.complete(me)
              );
            },
            complete: function (dt, ut) {
              if (dt.type === "throw") throw dt.arg;
              return (
                dt.type === "break" || dt.type === "continue"
                  ? (this.next = dt.arg)
                  : dt.type === "return"
                  ? ((this.rval = this.arg = dt.arg),
                    (this.method = "return"),
                    (this.next = "end"))
                  : dt.type === "normal" && ut && (this.next = ut),
                rt
              );
            },
            finish: function (dt) {
              for (var ut = this.tryEntries.length - 1; ut >= 0; --ut) {
                var At = this.tryEntries[ut];
                if (At.finallyLoc === dt)
                  return this.complete(At.completion, At.afterLoc), yr(At), rt;
              }
            },
            catch: function (dt) {
              for (var ut = this.tryEntries.length - 1; ut >= 0; --ut) {
                var At = this.tryEntries[ut];
                if (At.tryLoc === dt) {
                  var Gt = At.completion;
                  if (Gt.type === "throw") {
                    var Bt = Gt.arg;
                    yr(At);
                  }
                  return Bt;
                }
              }
              throw new Error("illegal catch attempt");
            },
            delegateYield: function (dt, ut, At) {
              return (
                (this.delegate = {
                  iterator: Ge(dt),
                  resultName: ut,
                  nextLoc: At,
                }),
                this.method === "next" && (this.arg = o),
                rt
              );
            },
          }),
          e
        );
      }
      function Ql(o) {
        return (
          (Ql =
            typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    typeof Symbol == "function" &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          Ql(o)
        );
      }
      function Gg(o, e, i) {
        if (e == null) return e;
        if (typeof e != "object")
          throw new TypeError(
            "using declarations can only be used with objects, null, or undefined.",
          );
        if (i)
          var a = e[Symbol.asyncDispose || Symbol.for("Symbol.asyncDispose")];
        if (
          (a == null && (a = e[Symbol.dispose || Symbol.for("Symbol.dispose")]),
          typeof a != "function")
        )
          throw new TypeError("Property [Symbol.dispose] is not a function.");
        return o.push({ v: e, d: a, a: i }), e;
      }
      function Zl() {
        Zl = function (c, u) {
          return new i(c, void 0, u);
        };
        var o = RegExp.prototype,
          e = new WeakMap();
        function i(c, u, g) {
          var E = new RegExp(c, u);
          return e.set(E, g || e.get(c)), ni(E, i.prototype);
        }
        function a(c, u) {
          var g = e.get(u);
          return Object.keys(g).reduce(function (E, C) {
            var x = g[C];
            if (typeof x == "number") E[C] = c[x];
            else {
              for (var _ = 0; c[x[_]] === void 0 && _ + 1 < x.length; ) _++;
              E[C] = c[x[_]];
            }
            return E;
          }, Object.create(null));
        }
        return (
          Vh(i, RegExp),
          (i.prototype.exec = function (c) {
            var u = o.exec.call(this, c);
            if (u) {
              u.groups = a(u, this);
              var g = u.indices;
              g && (g.groups = a(g, this));
            }
            return u;
          }),
          (i.prototype[Symbol.replace] = function (c, u) {
            if (typeof u == "string") {
              var g = e.get(this);
              return o[Symbol.replace].call(
                this,
                c,
                u.replace(/\$<([^>]+)>/g, function (C, x) {
                  var _ = g[x];
                  return "$" + (Array.isArray(_) ? _.join("$") : _);
                }),
              );
            }
            if (typeof u == "function") {
              var E = this;
              return o[Symbol.replace].call(this, c, function () {
                var C = arguments;
                return (
                  typeof C[C.length - 1] != "object" &&
                    (C = [].slice.call(C)).push(a(C, E)),
                  u.apply(this, C)
                );
              });
            }
            return o[Symbol.replace].call(this, c, u);
          }),
          Zl.apply(this, arguments)
        );
      }
      function Yg(o) {
        this.wrapped = o;
      }
      function Jg(o) {
        return function () {
          return new Ie(o.apply(this, arguments));
        };
      }
      function tc(o, e, i, a, c, u, g) {
        try {
          var E = o[u](g),
            C = E.value;
        } catch (x) {
          i(x);
          return;
        }
        E.done ? e(C) : Promise.resolve(C).then(a, c);
      }
      function Qg(o) {
        return function () {
          var e = this,
            i = arguments;
          return new Promise(function (a, c) {
            var u = o.apply(e, i);
            function g(C) {
              tc(u, a, c, g, E, "next", C);
            }
            function E(C) {
              tc(u, a, c, g, E, "throw", C);
            }
            g(void 0);
          });
        };
      }
      function Zg(o, e) {
        if (!(o instanceof e))
          throw new TypeError("Cannot call a class as a function");
      }
      function ec(o, e) {
        for (var i = 0; i < e.length; i++) {
          var a = e[i];
          (a.enumerable = a.enumerable || !1),
            (a.configurable = !0),
            "value" in a && (a.writable = !0),
            Object.defineProperty(o, Hs(a.key), a);
        }
      }
      function tp(o, e, i) {
        return (
          e && ec(o.prototype, e),
          i && ec(o, i),
          Object.defineProperty(o, "prototype", { writable: !1 }),
          o
        );
      }
      function ep(o, e) {
        for (var i in e) {
          var a = e[i];
          (a.configurable = a.enumerable = !0),
            "value" in a && (a.writable = !0),
            Object.defineProperty(o, i, a);
        }
        if (Object.getOwnPropertySymbols)
          for (
            var c = Object.getOwnPropertySymbols(e), u = 0;
            u < c.length;
            u++
          ) {
            var g = c[u],
              a = e[g];
            (a.configurable = a.enumerable = !0),
              "value" in a && (a.writable = !0),
              Object.defineProperty(o, g, a);
          }
        return o;
      }
      function rp(o, e) {
        for (var i = Object.getOwnPropertyNames(e), a = 0; a < i.length; a++) {
          var c = i[a],
            u = Object.getOwnPropertyDescriptor(e, c);
          u &&
            u.configurable &&
            o[c] === void 0 &&
            Object.defineProperty(o, c, u);
        }
        return o;
      }
      function $e(o, e, i) {
        return (
          (e = Hs(e)),
          e in o
            ? Object.defineProperty(o, e, {
                value: i,
                enumerable: !0,
                configurable: !0,
                writable: !0,
              })
            : (o[e] = i),
          o
        );
      }
      function rc() {
        return (
          (rc = Object.assign
            ? Object.assign.bind()
            : function (o) {
                for (var e = 1; e < arguments.length; e++) {
                  var i = arguments[e];
                  for (var a in i)
                    Object.prototype.hasOwnProperty.call(i, a) && (o[a] = i[a]);
                }
                return o;
              }),
          rc.apply(this, arguments)
        );
      }
      function ip(o) {
        for (var e = 1; e < arguments.length; e++) {
          var i = arguments[e] != null ? Object(arguments[e]) : {},
            a = Object.keys(i);
          typeof Object.getOwnPropertySymbols == "function" &&
            a.push.apply(
              a,
              Object.getOwnPropertySymbols(i).filter(function (c) {
                return Object.getOwnPropertyDescriptor(i, c).enumerable;
              }),
            ),
            a.forEach(function (c) {
              $e(o, c, i[c]);
            });
        }
        return o;
      }
      function Vh(o, e) {
        if (typeof e != "function" && e !== null)
          throw new TypeError(
            "Super expression must either be null or a function",
          );
        (o.prototype = Object.create(e && e.prototype, {
          constructor: { value: o, writable: !0, configurable: !0 },
        })),
          Object.defineProperty(o, "prototype", { writable: !1 }),
          e && ni(o, e);
      }
      function np(o, e) {
        (o.prototype = Object.create(e.prototype)),
          (o.prototype.constructor = o),
          ni(o, e);
      }
      function Di(o) {
        return (
          (Di = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (i) {
                return i.__proto__ || Object.getPrototypeOf(i);
              }),
          Di(o)
        );
      }
      function ni(o, e) {
        return (
          (ni = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (a, c) {
                return (a.__proto__ = c), a;
              }),
          ni(o, e)
        );
      }
      function ic() {
        if (
          typeof Reflect == "undefined" ||
          !Reflect.construct ||
          Reflect.construct.sham
        )
          return !1;
        if (typeof Proxy == "function") return !0;
        try {
          return (
            Boolean.prototype.valueOf.call(
              Reflect.construct(Boolean, [], function () {}),
            ),
            !0
          );
        } catch (o) {
          return !1;
        }
      }
      function js(o, e, i) {
        return (
          ic()
            ? (js = Reflect.construct.bind())
            : (js = function (c, u, g) {
                var E = [null];
                E.push.apply(E, u);
                var C = Function.bind.apply(c, E),
                  x = new C();
                return g && ni(x, g.prototype), x;
              }),
          js.apply(null, arguments)
        );
      }
      function $h(o) {
        return Function.toString.call(o).indexOf("[native code]") !== -1;
      }
      function nc(o) {
        var e = typeof Map == "function" ? new Map() : void 0;
        return (
          (nc = function (a) {
            if (a === null || !$h(a)) return a;
            if (typeof a != "function")
              throw new TypeError(
                "Super expression must either be null or a function",
              );
            if (typeof e != "undefined") {
              if (e.has(a)) return e.get(a);
              e.set(a, c);
            }
            function c() {
              return js(a, arguments, Di(this).constructor);
            }
            return (
              (c.prototype = Object.create(a.prototype, {
                constructor: {
                  value: c,
                  enumerable: !1,
                  writable: !0,
                  configurable: !0,
                },
              })),
              ni(c, a)
            );
          }),
          nc(o)
        );
      }
      function sp(o, e) {
        return e != null &&
          typeof Symbol != "undefined" &&
          e[Symbol.hasInstance]
          ? !!e[Symbol.hasInstance](o)
          : o instanceof e;
      }
      function op(o) {
        return o && o.__esModule ? o : { default: o };
      }
      function sc(o) {
        if (typeof WeakMap != "function") return null;
        var e = new WeakMap(),
          i = new WeakMap();
        return (sc = function (a) {
          return a ? i : e;
        })(o);
      }
      function ap(o, e) {
        if (!e && o && o.__esModule) return o;
        if (o === null || (typeof o != "object" && typeof o != "function"))
          return { default: o };
        var i = sc(e);
        if (i && i.has(o)) return i.get(o);
        var a = {},
          c = Object.defineProperty && Object.getOwnPropertyDescriptor;
        for (var u in o)
          if (u !== "default" && Object.prototype.hasOwnProperty.call(o, u)) {
            var g = c ? Object.getOwnPropertyDescriptor(o, u) : null;
            g && (g.get || g.set)
              ? Object.defineProperty(a, u, g)
              : (a[u] = o[u]);
          }
        return (a.default = o), i && i.set(o, a), a;
      }
      function lp(o, e) {
        if (o !== e)
          throw new TypeError("Cannot instantiate an arrow function");
      }
      function cp(o) {
        if (o == null) throw new TypeError("Cannot destructure " + o);
      }
      function Xh(o, e) {
        if (o == null) return {};
        var i = {},
          a = Object.keys(o),
          c,
          u;
        for (u = 0; u < a.length; u++)
          (c = a[u]), !(e.indexOf(c) >= 0) && (i[c] = o[c]);
        return i;
      }
      function up(o, e) {
        if (o == null) return {};
        var i = Xh(o, e),
          a,
          c;
        if (Object.getOwnPropertySymbols) {
          var u = Object.getOwnPropertySymbols(o);
          for (c = 0; c < u.length; c++)
            (a = u[c]),
              !(e.indexOf(a) >= 0) &&
                (!Object.prototype.propertyIsEnumerable.call(o, a) ||
                  (i[a] = o[a]));
        }
        return i;
      }
      function Kh(o) {
        if (o === void 0)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called",
          );
        return o;
      }
      function Gh(o, e) {
        if (e && (typeof e == "object" || typeof e == "function")) return e;
        if (e !== void 0)
          throw new TypeError(
            "Derived constructors may only return object or undefined",
          );
        return Kh(o);
      }
      function hp(o) {
        var e = ic();
        return function () {
          var a = Di(o),
            c;
          if (e) {
            var u = Di(this).constructor;
            c = Reflect.construct(a, arguments, u);
          } else c = a.apply(this, arguments);
          return Gh(this, c);
        };
      }
      function oc(o, e) {
        for (
          ;
          !Object.prototype.hasOwnProperty.call(o, e) &&
          ((o = Di(o)), o !== null);

        );
        return o;
      }
      function na() {
        return (
          typeof Reflect != "undefined" && Reflect.get
            ? (na = Reflect.get.bind())
            : (na = function (e, i, a) {
                var c = oc(e, i);
                if (!!c) {
                  var u = Object.getOwnPropertyDescriptor(c, i);
                  return u.get
                    ? u.get.call(arguments.length < 3 ? e : a)
                    : u.value;
                }
              }),
          na.apply(this, arguments)
        );
      }
      function qs(o, e, i, a) {
        return (
          typeof Reflect != "undefined" && Reflect.set
            ? (qs = Reflect.set)
            : (qs = function (u, g, E, C) {
                var x = oc(u, g),
                  _;
                if (x) {
                  if (((_ = Object.getOwnPropertyDescriptor(x, g)), _.set))
                    return _.set.call(C, E), !0;
                  if (!_.writable) return !1;
                }
                if (((_ = Object.getOwnPropertyDescriptor(C, g)), _)) {
                  if (!_.writable) return !1;
                  (_.value = E), Object.defineProperty(C, g, _);
                } else $e(C, g, E);
                return !0;
              }),
          qs(o, e, i, a)
        );
      }
      function dp(o, e, i, a, c) {
        var u = qs(o, e, i, a || o);
        if (!u && c) throw new TypeError("failed to set property");
        return i;
      }
      function fp(o, e) {
        return (
          e || (e = o.slice(0)),
          Object.freeze(
            Object.defineProperties(o, { raw: { value: Object.freeze(e) } }),
          )
        );
      }
      function mp(o, e) {
        return e || (e = o.slice(0)), (o.raw = e), o;
      }
      function gp(o) {
        throw new TypeError('"' + o + '" is read-only');
      }
      function pp(o) {
        throw new TypeError('"' + o + '" is write-only');
      }
      function bp(o) {
        throw new ReferenceError(
          'Class "' + o + '" cannot be referenced in computed property keys.',
        );
      }
      function Yh() {}
      function Jh(o) {
        throw new ReferenceError(o + " is not defined - temporal dead zone");
      }
      function vp(o, e) {
        return o === Yh ? Jh(e) : o;
      }
      function yp(o, e) {
        return sa(o) || Hh(o, e) || Pi(o, e) || oa();
      }
      function wp(o, e) {
        return sa(o) || Wh(o, e) || Pi(o, e) || oa();
      }
      function Qh(o) {
        return sa(o) || ac(o) || Pi(o) || oa();
      }
      function Ep(o) {
        return Zh(o) || ac(o) || Pi(o) || td();
      }
      function Zh(o) {
        if (Array.isArray(o)) return zs(o);
      }
      function sa(o) {
        if (Array.isArray(o)) return o;
      }
      function Ap(o, e, i) {
        if (e && !Array.isArray(e) && typeof e.length == "number") {
          var a = e.length;
          return zs(e, i !== void 0 && i < a ? i : a);
        }
        return o(e, i);
      }
      function ac(o) {
        if (
          (typeof Symbol != "undefined" && o[Symbol.iterator] != null) ||
          o["@@iterator"] != null
        )
          return Array.from(o);
      }
      function Pi(o, e) {
        if (!!o) {
          if (typeof o == "string") return zs(o, e);
          var i = Object.prototype.toString.call(o).slice(8, -1);
          if (
            (i === "Object" && o.constructor && (i = o.constructor.name),
            i === "Map" || i === "Set")
          )
            return Array.from(o);
          if (
            i === "Arguments" ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)
          )
            return zs(o, e);
        }
      }
      function zs(o, e) {
        (e == null || e > o.length) && (e = o.length);
        for (var i = 0, a = new Array(e); i < e; i++) a[i] = o[i];
        return a;
      }
      function td() {
        throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
      }
      function oa() {
        throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
      }
      function xp(o, e) {
        var i =
          (typeof Symbol != "undefined" && o[Symbol.iterator]) ||
          o["@@iterator"];
        if (!i) {
          if (
            Array.isArray(o) ||
            (i = Pi(o)) ||
            (e && o && typeof o.length == "number")
          ) {
            i && (o = i);
            var a = 0,
              c = function () {};
            return {
              s: c,
              n: function () {
                return a >= o.length
                  ? { done: !0 }
                  : { done: !1, value: o[a++] };
              },
              e: function (C) {
                throw C;
              },
              f: c,
            };
          }
          throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
        }
        var u = !0,
          g = !1,
          E;
        return {
          s: function () {
            i = i.call(o);
          },
          n: function () {
            var C = i.next();
            return (u = C.done), C;
          },
          e: function (C) {
            (g = !0), (E = C);
          },
          f: function () {
            try {
              !u && i.return != null && i.return();
            } finally {
              if (g) throw E;
            }
          },
        };
      }
      function Tp(o, e) {
        var i =
          (typeof Symbol != "undefined" && o[Symbol.iterator]) ||
          o["@@iterator"];
        if (i) return (i = i.call(o)).next.bind(i);
        if (
          Array.isArray(o) ||
          (i = Pi(o)) ||
          (e && o && typeof o.length == "number")
        ) {
          i && (o = i);
          var a = 0;
          return function () {
            return a >= o.length ? { done: !0 } : { done: !1, value: o[a++] };
          };
        }
        throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
      }
      function Sp(o) {
        return function () {
          var e = o.apply(this, arguments);
          return e.next(), e;
        };
      }
      function ed(o, e) {
        if (typeof o != "object" || o === null) return o;
        var i = o[Symbol.toPrimitive];
        if (i !== void 0) {
          var a = i.call(o, e || "default");
          if (typeof a != "object") return a;
          throw new TypeError("@@toPrimitive must return a primitive value.");
        }
        return (e === "string" ? String : Number)(o);
      }
      function Hs(o) {
        var e = ed(o, "string");
        return typeof e == "symbol" ? e : String(e);
      }
      function Cp(o, e) {
        throw new Error(
          "Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.",
        );
      }
      function kp(o, e, i, a) {
        !i ||
          Object.defineProperty(o, e, {
            enumerable: i.enumerable,
            configurable: i.configurable,
            writable: i.writable,
            value: i.initializer ? i.initializer.call(a) : void 0,
          });
      }
      function Lp(o, e, i, a, c) {
        var u = {};
        return (
          Object.keys(a).forEach(function (g) {
            u[g] = a[g];
          }),
          (u.enumerable = !!u.enumerable),
          (u.configurable = !!u.configurable),
          ("value" in u || u.initializer) && (u.writable = !0),
          (u = i
            .slice()
            .reverse()
            .reduce(function (g, E) {
              return E(o, e, g) || g;
            }, u)),
          c &&
            u.initializer !== void 0 &&
            ((u.value = u.initializer ? u.initializer.call(c) : void 0),
            (u.initializer = void 0)),
          u.initializer === void 0 &&
            (Object.defineProperty(o, e, u), (u = null)),
          u
        );
      }
      var rd = 0;
      function Rp(o) {
        return "__private_" + rd++ + "_" + o;
      }
      function _p(o, e) {
        if (!Object.prototype.hasOwnProperty.call(o, e))
          throw new TypeError("attempted to use private field on non-instance");
        return o;
      }
      function Dp(o, e) {
        var i = aa(o, e, "get");
        return lc(o, i);
      }
      function Pp(o, e, i) {
        var a = aa(o, e, "set");
        return cc(o, a, i), i;
      }
      function Op(o, e) {
        var i = aa(o, e, "set");
        return uc(o, i);
      }
      function aa(o, e, i) {
        if (!e.has(o))
          throw new TypeError(
            "attempted to " + i + " private field on non-instance",
          );
        return e.get(o);
      }
      function Mp(o, e, i) {
        return Ws(o, e), la(i, "get"), lc(o, i);
      }
      function Fp(o, e, i, a) {
        return Ws(o, e), la(i, "set"), cc(o, i, a), a;
      }
      function Ip(o, e, i) {
        return Ws(o, e), i;
      }
      function Bp() {
        throw new TypeError("attempted to set read only static private field");
      }
      function lc(o, e) {
        return e.get ? e.get.call(o) : e.value;
      }
      function cc(o, e, i) {
        if (e.set) e.set.call(o, i);
        else {
          if (!e.writable)
            throw new TypeError("attempted to set read only private field");
          e.value = i;
        }
      }
      function uc(o, e) {
        if (e.set)
          return (
            "__destrObj" in e ||
              (e.__destrObj = {
                set value(i) {
                  e.set.call(o, i);
                },
              }),
            e.__destrObj
          );
        if (!e.writable)
          throw new TypeError("attempted to set read only private field");
        return e;
      }
      function Np(o, e, i) {
        return Ws(o, e), la(i, "set"), uc(o, i);
      }
      function Ws(o, e) {
        if (o !== e)
          throw new TypeError("Private static access of wrong provenance");
      }
      function la(o, e) {
        if (o === void 0)
          throw new TypeError(
            "attempted to " +
              e +
              " private static field before its declaration",
          );
      }
      function jp(o, e, i, a) {
        var c = hc();
        if (a) for (var u = 0; u < a.length; u++) c = a[u](c);
        var g = e(function (x) {
            c.initializeInstanceElements(x, E.elements);
          }, i),
          E = c.decorateClass(sd(g.d.map(id)), o);
        return (
          c.initializeClassElements(g.F, E.elements),
          c.runClassFinishers(g.F, E.finishers)
        );
      }
      function hc() {
        hc = function () {
          return o;
        };
        var o = {
          elementsDefinitionOrder: [["method"], ["field"]],
          initializeInstanceElements: function (e, i) {
            ["method", "field"].forEach(function (a) {
              i.forEach(function (c) {
                c.kind === a &&
                  c.placement === "own" &&
                  this.defineClassElement(e, c);
              }, this);
            }, this);
          },
          initializeClassElements: function (e, i) {
            var a = e.prototype;
            ["method", "field"].forEach(function (c) {
              i.forEach(function (u) {
                var g = u.placement;
                if (u.kind === c && (g === "static" || g === "prototype")) {
                  var E = g === "static" ? e : a;
                  this.defineClassElement(E, u);
                }
              }, this);
            }, this);
          },
          defineClassElement: function (e, i) {
            var a = i.descriptor;
            if (i.kind === "field") {
              var c = i.initializer;
              a = {
                enumerable: a.enumerable,
                writable: a.writable,
                configurable: a.configurable,
                value: c === void 0 ? void 0 : c.call(e),
              };
            }
            Object.defineProperty(e, i.key, a);
          },
          decorateClass: function (e, i) {
            var a = [],
              c = [],
              u = { static: [], prototype: [], own: [] };
            if (
              (e.forEach(function (E) {
                this.addElementPlacement(E, u);
              }, this),
              e.forEach(function (E) {
                if (!rn(E)) return a.push(E);
                var C = this.decorateElement(E, u);
                a.push(C.element),
                  a.push.apply(a, C.extras),
                  c.push.apply(c, C.finishers);
              }, this),
              !i)
            )
              return { elements: a, finishers: c };
            var g = this.decorateConstructor(a, i);
            return c.push.apply(c, g.finishers), (g.finishers = c), g;
          },
          addElementPlacement: function (e, i, a) {
            var c = i[e.placement];
            if (!a && c.indexOf(e.key) !== -1)
              throw new TypeError("Duplicated element (" + e.key + ")");
            c.push(e.key);
          },
          decorateElement: function (e, i) {
            for (
              var a = [], c = [], u = e.decorators, g = u.length - 1;
              g >= 0;
              g--
            ) {
              var E = i[e.placement];
              E.splice(E.indexOf(e.key), 1);
              var C = this.fromElementDescriptor(e),
                x = this.toElementFinisherExtras((0, u[g])(C) || C);
              (e = x.element),
                this.addElementPlacement(e, i),
                x.finisher && c.push(x.finisher);
              var _ = x.extras;
              if (_) {
                for (var O = 0; O < _.length; O++)
                  this.addElementPlacement(_[O], i);
                a.push.apply(a, _);
              }
            }
            return { element: e, finishers: c, extras: a };
          },
          decorateConstructor: function (e, i) {
            for (var a = [], c = i.length - 1; c >= 0; c--) {
              var u = this.fromClassDescriptor(e),
                g = this.toClassDescriptor((0, i[c])(u) || u);
              if (
                (g.finisher !== void 0 && a.push(g.finisher),
                g.elements !== void 0)
              ) {
                e = g.elements;
                for (var E = 0; E < e.length - 1; E++)
                  for (var C = E + 1; C < e.length; C++)
                    if (
                      e[E].key === e[C].key &&
                      e[E].placement === e[C].placement
                    )
                      throw new TypeError(
                        "Duplicated element (" + e[E].key + ")",
                      );
              }
            }
            return { elements: e, finishers: a };
          },
          fromElementDescriptor: function (e) {
            var i = {
                kind: e.kind,
                key: e.key,
                placement: e.placement,
                descriptor: e.descriptor,
              },
              a = { value: "Descriptor", configurable: !0 };
            return (
              Object.defineProperty(i, Symbol.toStringTag, a),
              e.kind === "field" && (i.initializer = e.initializer),
              i
            );
          },
          toElementDescriptors: function (e) {
            if (e !== void 0)
              return Qh(e).map(function (i) {
                var a = this.toElementDescriptor(i);
                return (
                  this.disallowProperty(i, "finisher", "An element descriptor"),
                  this.disallowProperty(i, "extras", "An element descriptor"),
                  a
                );
              }, this);
          },
          toElementDescriptor: function (e) {
            var i = String(e.kind);
            if (i !== "method" && i !== "field")
              throw new TypeError(
                `An element descriptor's .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "` +
                  i +
                  '"',
              );
            var a = Hs(e.key),
              c = String(e.placement);
            if (c !== "static" && c !== "prototype" && c !== "own")
              throw new TypeError(
                `An element descriptor's .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "` +
                  c +
                  '"',
              );
            var u = e.descriptor;
            this.disallowProperty(e, "elements", "An element descriptor");
            var g = {
              kind: i,
              key: a,
              placement: c,
              descriptor: Object.assign({}, u),
            };
            return (
              i !== "field"
                ? this.disallowProperty(e, "initializer", "A method descriptor")
                : (this.disallowProperty(
                    u,
                    "get",
                    "The property descriptor of a field descriptor",
                  ),
                  this.disallowProperty(
                    u,
                    "set",
                    "The property descriptor of a field descriptor",
                  ),
                  this.disallowProperty(
                    u,
                    "value",
                    "The property descriptor of a field descriptor",
                  ),
                  (g.initializer = e.initializer)),
              g
            );
          },
          toElementFinisherExtras: function (e) {
            var i = this.toElementDescriptor(e),
              a = fc(e, "finisher"),
              c = this.toElementDescriptors(e.extras);
            return { element: i, finisher: a, extras: c };
          },
          fromClassDescriptor: function (e) {
            var i = {
                kind: "class",
                elements: e.map(this.fromElementDescriptor, this),
              },
              a = { value: "Descriptor", configurable: !0 };
            return Object.defineProperty(i, Symbol.toStringTag, a), i;
          },
          toClassDescriptor: function (e) {
            var i = String(e.kind);
            if (i !== "class")
              throw new TypeError(
                `A class descriptor's .kind property must be "class", but a decorator created a class descriptor with .kind "` +
                  i +
                  '"',
              );
            this.disallowProperty(e, "key", "A class descriptor"),
              this.disallowProperty(e, "placement", "A class descriptor"),
              this.disallowProperty(e, "descriptor", "A class descriptor"),
              this.disallowProperty(e, "initializer", "A class descriptor"),
              this.disallowProperty(e, "extras", "A class descriptor");
            var a = fc(e, "finisher"),
              c = this.toElementDescriptors(e.elements);
            return { elements: c, finisher: a };
          },
          runClassFinishers: function (e, i) {
            for (var a = 0; a < i.length; a++) {
              var c = (0, i[a])(e);
              if (c !== void 0) {
                if (typeof c != "function")
                  throw new TypeError("Finishers must return a constructor.");
                e = c;
              }
            }
            return e;
          },
          disallowProperty: function (e, i, a) {
            if (e[i] !== void 0)
              throw new TypeError(a + " can't have a ." + i + " property.");
          },
        };
        return o;
      }
      function id(o) {
        var e = Hs(o.key),
          i;
        o.kind === "method"
          ? (i = {
              value: o.value,
              writable: !0,
              configurable: !0,
              enumerable: !1,
            })
          : o.kind === "get"
          ? (i = { get: o.value, configurable: !0, enumerable: !1 })
          : o.kind === "set"
          ? (i = { set: o.value, configurable: !0, enumerable: !1 })
          : o.kind === "field" &&
            (i = { configurable: !0, writable: !0, enumerable: !0 });
        var a = {
          kind: o.kind === "field" ? "field" : "method",
          key: e,
          placement: o.static
            ? "static"
            : o.kind === "field"
            ? "own"
            : "prototype",
          descriptor: i,
        };
        return (
          o.decorators && (a.decorators = o.decorators),
          o.kind === "field" && (a.initializer = o.value),
          a
        );
      }
      function nd(o, e) {
        o.descriptor.get !== void 0
          ? (e.descriptor.get = o.descriptor.get)
          : (e.descriptor.set = o.descriptor.set);
      }
      function sd(o) {
        for (
          var e = [],
            i = function (g) {
              return (
                g.kind === "method" &&
                g.key === c.key &&
                g.placement === c.placement
              );
            },
            a = 0;
          a < o.length;
          a++
        ) {
          var c = o[a],
            u;
          if (c.kind === "method" && (u = e.find(i)))
            if (dc(c.descriptor) || dc(u.descriptor)) {
              if (rn(c) || rn(u))
                throw new ReferenceError(
                  "Duplicated methods (" + c.key + ") can't be decorated.",
                );
              u.descriptor = c.descriptor;
            } else {
              if (rn(c)) {
                if (rn(u))
                  throw new ReferenceError(
                    "Decorators can't be placed on different accessors with for the same property (" +
                      c.key +
                      ").",
                  );
                u.decorators = c.decorators;
              }
              nd(c, u);
            }
          else e.push(c);
        }
        return e;
      }
      function rn(o) {
        return o.decorators && o.decorators.length;
      }
      function dc(o) {
        return o !== void 0 && !(o.value === void 0 && o.writable === void 0);
      }
      function fc(o, e) {
        var i = o[e];
        if (i !== void 0 && typeof i != "function")
          throw new TypeError("Expected '" + e + "' to be a function");
        return i;
      }
      function qp(o, e, i) {
        if (!e.has(o))
          throw new TypeError("attempted to get private field on non-instance");
        return i;
      }
      function mc(o, e) {
        if (e.has(o))
          throw new TypeError(
            "Cannot initialize the same private elements twice on an object",
          );
      }
      function zp(o, e, i) {
        mc(o, e), e.set(o, i);
      }
      function Hp(o, e) {
        mc(o, e), e.add(o);
      }
      function Wp() {
        throw new TypeError("attempted to reassign private method");
      }
      function Up(o) {
        return o;
      }
      function Vp(o) {
        throw new TypeError("Cannot set property of null or undefined.");
      }
      class si extends Pr {
        static registerType(e, i) {
          (i.type = e), (this.types[e] = i);
        }
        static fromJSON(e) {
          let i = this.types[e.type];
          if (i) return i.fromJSON(e);
        }
        constructor(e) {
          let i =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          super(...arguments), (this.attributes = D.box(i));
        }
        copyWithAttributes(e) {
          return new this.constructor(this.getValue(), e);
        }
        copyWithAdditionalAttributes(e) {
          return this.copyWithAttributes(this.attributes.merge(e));
        }
        copyWithoutAttribute(e) {
          return this.copyWithAttributes(this.attributes.remove(e));
        }
        copy() {
          return this.copyWithAttributes(this.attributes);
        }
        getAttribute(e) {
          return this.attributes.get(e);
        }
        getAttributesHash() {
          return this.attributes;
        }
        getAttributes() {
          return this.attributes.toObject();
        }
        hasAttribute(e) {
          return this.attributes.has(e);
        }
        hasSameStringValueAsPiece(e) {
          return e && this.toString() === e.toString();
        }
        hasSameAttributesAsPiece(e) {
          return (
            e &&
            (this.attributes === e.attributes ||
              this.attributes.isEqualTo(e.attributes))
          );
        }
        isBlockBreak() {
          return !1;
        }
        isEqualTo(e) {
          return (
            super.isEqualTo(...arguments) ||
            (this.hasSameConstructorAs(e) &&
              this.hasSameStringValueAsPiece(e) &&
              this.hasSameAttributesAsPiece(e))
          );
        }
        isEmpty() {
          return this.length === 0;
        }
        isSerializable() {
          return !0;
        }
        toJSON() {
          return {
            type: this.constructor.type,
            attributes: this.getAttributes(),
          };
        }
        contentsForInspection() {
          return {
            type: this.constructor.type,
            attributes: this.attributes.inspect(),
          };
        }
        canBeGrouped() {
          return this.hasAttribute("href");
        }
        canBeGroupedWith(e) {
          return this.getAttribute("href") === e.getAttribute("href");
        }
        getLength() {
          return this.length;
        }
        canBeConsolidatedWith(e) {
          return !1;
        }
      }
      $e(si, "types", {});
      class gc extends Xt {
        constructor(e) {
          super(...arguments), (this.url = e);
        }
        perform(e) {
          let i = new Image();
          (i.onload = () => (
            (i.width = this.width = i.naturalWidth),
            (i.height = this.height = i.naturalHeight),
            e(!0, i)
          )),
            (i.onerror = () => e(!1)),
            (i.src = this.url);
        }
      }
      class Oi extends Pr {
        static attachmentForFile(e) {
          let i = this.attributesForFile(e),
            a = new this(i);
          return a.setFile(e), a;
        }
        static attributesForFile(e) {
          return new D({
            filename: e.name,
            filesize: e.size,
            contentType: e.type,
          });
        }
        static fromJSON(e) {
          return new this(e);
        }
        constructor() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          super(e),
            (this.releaseFile = this.releaseFile.bind(this)),
            (this.attributes = D.box(e)),
            this.didChangeAttributes();
        }
        getAttribute(e) {
          return this.attributes.get(e);
        }
        hasAttribute(e) {
          return this.attributes.has(e);
        }
        getAttributes() {
          return this.attributes.toObject();
        }
        setAttributes() {
          let e =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : {},
            i = this.attributes.merge(e);
          if (!this.attributes.isEqualTo(i)) {
            var a, c, u, g;
            return (
              (this.attributes = i),
              this.didChangeAttributes(),
              (a = this.previewDelegate) === null ||
                a === void 0 ||
                (c = a.attachmentDidChangeAttributes) === null ||
                c === void 0 ||
                c.call(a, this),
              (u = this.delegate) === null ||
              u === void 0 ||
              (g = u.attachmentDidChangeAttributes) === null ||
              g === void 0
                ? void 0
                : g.call(u, this)
            );
          }
        }
        didChangeAttributes() {
          if (this.isPreviewable()) return this.preloadURL();
        }
        isPending() {
          return this.file != null && !(this.getURL() || this.getHref());
        }
        isPreviewable() {
          return this.attributes.has("previewable")
            ? this.attributes.get("previewable")
            : Oi.previewablePattern.test(this.getContentType());
        }
        getType() {
          return this.hasContent()
            ? "content"
            : this.isPreviewable()
            ? "preview"
            : "file";
        }
        getURL() {
          return this.attributes.get("url");
        }
        getHref() {
          return this.attributes.get("href");
        }
        getFilename() {
          return this.attributes.get("filename") || "";
        }
        getFilesize() {
          return this.attributes.get("filesize");
        }
        getFormattedFilesize() {
          let e = this.attributes.get("filesize");
          return typeof e == "number" ? ve.formatter(e) : "";
        }
        getExtension() {
          var e;
          return (e = this.getFilename().match(/\.(\w+)$/)) === null ||
            e === void 0
            ? void 0
            : e[1].toLowerCase();
        }
        getContentType() {
          return this.attributes.get("contentType");
        }
        hasContent() {
          return this.attributes.has("content");
        }
        getContent() {
          return this.attributes.get("content");
        }
        getWidth() {
          return this.attributes.get("width");
        }
        getHeight() {
          return this.attributes.get("height");
        }
        getFile() {
          return this.file;
        }
        setFile(e) {
          if (((this.file = e), this.isPreviewable()))
            return this.preloadFile();
        }
        releaseFile() {
          this.releasePreloadedFile(), (this.file = null);
        }
        getUploadProgress() {
          return this.uploadProgress != null ? this.uploadProgress : 0;
        }
        setUploadProgress(e) {
          if (this.uploadProgress !== e) {
            var i, a;
            return (
              (this.uploadProgress = e),
              (i = this.uploadProgressDelegate) === null ||
              i === void 0 ||
              (a = i.attachmentDidChangeUploadProgress) === null ||
              a === void 0
                ? void 0
                : a.call(i, this)
            );
          }
        }
        toJSON() {
          return this.getAttributes();
        }
        getCacheKey() {
          return [
            super.getCacheKey(...arguments),
            this.attributes.getCacheKey(),
            this.getPreviewURL(),
          ].join("/");
        }
        getPreviewURL() {
          return this.previewURL || this.preloadingURL;
        }
        setPreviewURL(e) {
          if (e !== this.getPreviewURL()) {
            var i, a, c, u;
            return (
              (this.previewURL = e),
              (i = this.previewDelegate) === null ||
                i === void 0 ||
                (a = i.attachmentDidChangeAttributes) === null ||
                a === void 0 ||
                a.call(i, this),
              (c = this.delegate) === null ||
              c === void 0 ||
              (u = c.attachmentDidChangePreviewURL) === null ||
              u === void 0
                ? void 0
                : u.call(c, this)
            );
          }
        }
        preloadURL() {
          return this.preload(this.getURL(), this.releaseFile);
        }
        preloadFile() {
          if (this.file)
            return (
              (this.fileObjectURL = URL.createObjectURL(this.file)),
              this.preload(this.fileObjectURL)
            );
        }
        releasePreloadedFile() {
          this.fileObjectURL &&
            (URL.revokeObjectURL(this.fileObjectURL),
            (this.fileObjectURL = null));
        }
        preload(e, i) {
          if (e && e !== this.getPreviewURL())
            return (
              (this.preloadingURL = e),
              new gc(e)
                .then((c) => {
                  let { width: u, height: g } = c;
                  return (
                    (!this.getWidth() || !this.getHeight()) &&
                      this.setAttributes({ width: u, height: g }),
                    (this.preloadingURL = null),
                    this.setPreviewURL(e),
                    i == null ? void 0 : i()
                  );
                })
                .catch(
                  () => ((this.preloadingURL = null), i == null ? void 0 : i()),
                )
            );
        }
      }
      $e(Oi, "previewablePattern", /^image(\/(gif|png|webp|jpe?g)|$)/);
      class Mi extends si {
        static fromJSON(e) {
          return new this(Oi.fromJSON(e.attachment), e.attributes);
        }
        constructor(e) {
          super(...arguments),
            (this.attachment = e),
            (this.length = 1),
            this.ensureAttachmentExclusivelyHasAttribute("href"),
            this.attachment.hasContent() || this.removeProhibitedAttributes();
        }
        ensureAttachmentExclusivelyHasAttribute(e) {
          this.hasAttribute(e) &&
            (this.attachment.hasAttribute(e) ||
              this.attachment.setAttributes(this.attributes.slice([e])),
            (this.attributes = this.attributes.remove(e)));
        }
        removeProhibitedAttributes() {
          let e = this.attributes.slice(Mi.permittedAttributes);
          e.isEqualTo(this.attributes) || (this.attributes = e);
        }
        getValue() {
          return this.attachment;
        }
        isSerializable() {
          return !this.attachment.isPending();
        }
        getCaption() {
          return this.attributes.get("caption") || "";
        }
        isEqualTo(e) {
          var i;
          return (
            super.isEqualTo(e) &&
            this.attachment.id ===
              (e == null || (i = e.attachment) === null || i === void 0
                ? void 0
                : i.id)
          );
        }
        toString() {
          return U;
        }
        toJSON() {
          let e = super.toJSON(...arguments);
          return (e.attachment = this.attachment), e;
        }
        getCacheKey() {
          return [
            super.getCacheKey(...arguments),
            this.attachment.getCacheKey(),
          ].join("/");
        }
        toConsole() {
          return JSON.stringify(this.toString());
        }
      }
      $e(Mi, "permittedAttributes", ["caption", "presentation"]),
        si.registerType("attachment", Mi);
      class ca extends si {
        static fromJSON(e) {
          return new this(e.string, e.attributes);
        }
        constructor(e) {
          super(...arguments),
            (this.string = ea(e)),
            (this.length = this.string.length);
        }
        getValue() {
          return this.string;
        }
        toString() {
          return this.string.toString();
        }
        isBlockBreak() {
          return (
            this.toString() ===
              `
` && this.getAttribute("blockBreak") === !0
          );
        }
        toJSON() {
          let e = super.toJSON(...arguments);
          return (e.string = this.string), e;
        }
        canBeConsolidatedWith(e) {
          return (
            e &&
            this.hasSameConstructorAs(e) &&
            this.hasSameAttributesAsPiece(e)
          );
        }
        consolidateWith(e) {
          return new this.constructor(
            this.toString() + e.toString(),
            this.attributes,
          );
        }
        splitAtOffset(e) {
          let i, a;
          return (
            e === 0
              ? ((i = null), (a = this))
              : e === this.length
              ? ((i = this), (a = null))
              : ((i = new this.constructor(
                  this.string.slice(0, e),
                  this.attributes,
                )),
                (a = new this.constructor(
                  this.string.slice(e),
                  this.attributes,
                ))),
            [i, a]
          );
        }
        toConsole() {
          let { string: e } = this;
          return (
            e.length > 15 && (e = e.slice(0, 14) + "\u2026"),
            JSON.stringify(e.toString())
          );
        }
      }
      si.registerType("string", ca);
      class Us extends Pr {
        static box(e) {
          return e instanceof this ? e : new this(e);
        }
        constructor() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          super(...arguments),
            (this.objects = e.slice(0)),
            (this.length = this.objects.length);
        }
        indexOf(e) {
          return this.objects.indexOf(e);
        }
        splice() {
          for (var e = arguments.length, i = new Array(e), a = 0; a < e; a++)
            i[a] = arguments[a];
          return new this.constructor(ke(this.objects, ...i));
        }
        eachObject(e) {
          return this.objects.map((i, a) => e(i, a));
        }
        insertObjectAtIndex(e, i) {
          return this.splice(i, 0, e);
        }
        insertSplittableListAtIndex(e, i) {
          return this.splice(i, 0, ...e.objects);
        }
        insertSplittableListAtPosition(e, i) {
          let [a, c] = this.splitObjectAtPosition(i);
          return new this.constructor(a).insertSplittableListAtIndex(e, c);
        }
        editObjectAtIndex(e, i) {
          return this.replaceObjectAtIndex(i(this.objects[e]), e);
        }
        replaceObjectAtIndex(e, i) {
          return this.splice(i, 1, e);
        }
        removeObjectAtIndex(e) {
          return this.splice(e, 1);
        }
        getObjectAtIndex(e) {
          return this.objects[e];
        }
        getSplittableListInRange(e) {
          let [i, a, c] = this.splitObjectsAtRange(e);
          return new this.constructor(i.slice(a, c + 1));
        }
        selectSplittableList(e) {
          let i = this.objects.filter((a) => e(a));
          return new this.constructor(i);
        }
        removeObjectsInRange(e) {
          let [i, a, c] = this.splitObjectsAtRange(e);
          return new this.constructor(i).splice(a, c - a + 1);
        }
        transformObjectsInRange(e, i) {
          let [a, c, u] = this.splitObjectsAtRange(e),
            g = a.map((E, C) => (c <= C && C <= u ? i(E) : E));
          return new this.constructor(g);
        }
        splitObjectsAtRange(e) {
          let i,
            [a, c, u] = this.splitObjectAtPosition(ad(e));
          return (
            ([a, i] = new this.constructor(a).splitObjectAtPosition(ld(e) + u)),
            [a, c, i - 1]
          );
        }
        getObjectAtPosition(e) {
          let { index: i } = this.findIndexAndOffsetAtPosition(e);
          return this.objects[i];
        }
        splitObjectAtPosition(e) {
          let i,
            a,
            { index: c, offset: u } = this.findIndexAndOffsetAtPosition(e),
            g = this.objects.slice(0);
          if (c != null)
            if (u === 0) (i = c), (a = 0);
            else {
              let E = this.getObjectAtIndex(c),
                [C, x] = E.splitAtOffset(u);
              g.splice(c, 1, C, x), (i = c + 1), (a = C.getLength() - u);
            }
          else (i = g.length), (a = 0);
          return [g, i, a];
        }
        consolidate() {
          let e = [],
            i = this.objects[0];
          return (
            this.objects.slice(1).forEach((a) => {
              var c, u;
              (c = (u = i).canBeConsolidatedWith) !== null &&
              c !== void 0 &&
              c.call(u, a)
                ? (i = i.consolidateWith(a))
                : (e.push(i), (i = a));
            }),
            i && e.push(i),
            new this.constructor(e)
          );
        }
        consolidateFromIndexToIndex(e, i) {
          let c = this.objects.slice(0).slice(e, i + 1),
            u = new this.constructor(c).consolidate().toArray();
          return this.splice(e, c.length, ...u);
        }
        findIndexAndOffsetAtPosition(e) {
          let i,
            a = 0;
          for (i = 0; i < this.objects.length; i++) {
            let c = this.objects[i],
              u = a + c.getLength();
            if (a <= e && e < u) return { index: i, offset: e - a };
            a = u;
          }
          return { index: null, offset: null };
        }
        findPositionAtIndexAndOffset(e, i) {
          let a = 0;
          for (let c = 0; c < this.objects.length; c++) {
            let u = this.objects[c];
            if (c < e) a += u.getLength();
            else if (c === e) {
              a += i;
              break;
            }
          }
          return a;
        }
        getEndPosition() {
          return (
            this.endPosition == null &&
              ((this.endPosition = 0),
              this.objects.forEach((e) => (this.endPosition += e.getLength()))),
            this.endPosition
          );
        }
        toString() {
          return this.objects.join("");
        }
        toArray() {
          return this.objects.slice(0);
        }
        toJSON() {
          return this.toArray();
        }
        isEqualTo(e) {
          return (
            super.isEqualTo(...arguments) ||
            od(this.objects, e == null ? void 0 : e.objects)
          );
        }
        contentsForInspection() {
          return {
            objects: "[".concat(
              this.objects.map((e) => e.inspect()).join(", "),
              "]",
            ),
          };
        }
      }
      let od = function (o) {
          let e =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
          if (o.length !== e.length) return !1;
          let i = !0;
          for (let a = 0; a < o.length; a++) {
            let c = o[a];
            i && !c.isEqualTo(e[a]) && (i = !1);
          }
          return i;
        },
        ad = (o) => o[0],
        ld = (o) => o[1];
      class vr extends Pr {
        static textForAttachmentWithAttributes(e, i) {
          let a = new Mi(e, i);
          return new this([a]);
        }
        static textForStringWithAttributes(e, i) {
          let a = new ca(e, i);
          return new this([a]);
        }
        static fromJSON(e) {
          let i = Array.from(e).map((a) => si.fromJSON(a));
          return new this(i);
        }
        constructor() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          super(...arguments);
          let i = e.filter((a) => !a.isEmpty());
          this.pieceList = new Us(i);
        }
        copy() {
          return this.copyWithPieceList(this.pieceList);
        }
        copyWithPieceList(e) {
          return new this.constructor(e.consolidate().toArray());
        }
        copyUsingObjectMap(e) {
          let i = this.getPieces().map((a) => e.find(a) || a);
          return new this.constructor(i);
        }
        appendText(e) {
          return this.insertTextAtPosition(e, this.getLength());
        }
        insertTextAtPosition(e, i) {
          return this.copyWithPieceList(
            this.pieceList.insertSplittableListAtPosition(e.pieceList, i),
          );
        }
        removeTextAtRange(e) {
          return this.copyWithPieceList(this.pieceList.removeObjectsInRange(e));
        }
        replaceTextAtRange(e, i) {
          return this.removeTextAtRange(i).insertTextAtPosition(e, i[0]);
        }
        moveTextFromRangeToPosition(e, i) {
          if (e[0] <= i && i <= e[1]) return;
          let a = this.getTextAtRange(e),
            c = a.getLength();
          return (
            e[0] < i && (i -= c),
            this.removeTextAtRange(e).insertTextAtPosition(a, i)
          );
        }
        addAttributeAtRange(e, i, a) {
          let c = {};
          return (c[e] = i), this.addAttributesAtRange(c, a);
        }
        addAttributesAtRange(e, i) {
          return this.copyWithPieceList(
            this.pieceList.transformObjectsInRange(i, (a) =>
              a.copyWithAdditionalAttributes(e),
            ),
          );
        }
        removeAttributeAtRange(e, i) {
          return this.copyWithPieceList(
            this.pieceList.transformObjectsInRange(i, (a) =>
              a.copyWithoutAttribute(e),
            ),
          );
        }
        setAttributesAtRange(e, i) {
          return this.copyWithPieceList(
            this.pieceList.transformObjectsInRange(i, (a) =>
              a.copyWithAttributes(e),
            ),
          );
        }
        getAttributesAtPosition(e) {
          var i;
          return (
            ((i = this.pieceList.getObjectAtPosition(e)) === null ||
            i === void 0
              ? void 0
              : i.getAttributes()) || {}
          );
        }
        getCommonAttributes() {
          let e = Array.from(this.pieceList.toArray()).map((i) =>
            i.getAttributes(),
          );
          return D.fromCommonAttributesOfObjects(e).toObject();
        }
        getCommonAttributesAtRange(e) {
          return this.getTextAtRange(e).getCommonAttributes() || {};
        }
        getExpandedRangeForAttributeAtOffset(e, i) {
          let a,
            c = (a = i),
            u = this.getLength();
          for (; c > 0 && this.getCommonAttributesAtRange([c - 1, a])[e]; ) c--;
          for (; a < u && this.getCommonAttributesAtRange([i, a + 1])[e]; ) a++;
          return [c, a];
        }
        getTextAtRange(e) {
          return this.copyWithPieceList(
            this.pieceList.getSplittableListInRange(e),
          );
        }
        getStringAtRange(e) {
          return this.pieceList.getSplittableListInRange(e).toString();
        }
        getStringAtPosition(e) {
          return this.getStringAtRange([e, e + 1]);
        }
        startsWithString(e) {
          return this.getStringAtRange([0, e.length]) === e;
        }
        endsWithString(e) {
          let i = this.getLength();
          return this.getStringAtRange([i - e.length, i]) === e;
        }
        getAttachmentPieces() {
          return this.pieceList.toArray().filter((e) => !!e.attachment);
        }
        getAttachments() {
          return this.getAttachmentPieces().map((e) => e.attachment);
        }
        getAttachmentAndPositionById(e) {
          let i = 0;
          for (let c of this.pieceList.toArray()) {
            var a;
            if (
              ((a = c.attachment) === null || a === void 0 ? void 0 : a.id) ===
              e
            )
              return { attachment: c.attachment, position: i };
            i += c.length;
          }
          return { attachment: null, position: null };
        }
        getAttachmentById(e) {
          let { attachment: i } = this.getAttachmentAndPositionById(e);
          return i;
        }
        getRangeOfAttachment(e) {
          let i = this.getAttachmentAndPositionById(e.id),
            a = i.position;
          if (((e = i.attachment), e)) return [a, a + 1];
        }
        updateAttributesForAttachment(e, i) {
          let a = this.getRangeOfAttachment(i);
          return a ? this.addAttributesAtRange(e, a) : this;
        }
        getLength() {
          return this.pieceList.getEndPosition();
        }
        isEmpty() {
          return this.getLength() === 0;
        }
        isEqualTo(e) {
          var i;
          return (
            super.isEqualTo(e) ||
            (e == null || (i = e.pieceList) === null || i === void 0
              ? void 0
              : i.isEqualTo(this.pieceList))
          );
        }
        isBlockBreak() {
          return (
            this.getLength() === 1 &&
            this.pieceList.getObjectAtIndex(0).isBlockBreak()
          );
        }
        eachPiece(e) {
          return this.pieceList.eachObject(e);
        }
        getPieces() {
          return this.pieceList.toArray();
        }
        getPieceAtPosition(e) {
          return this.pieceList.getObjectAtPosition(e);
        }
        contentsForInspection() {
          return { pieceList: this.pieceList.inspect() };
        }
        toSerializableText() {
          let e = this.pieceList.selectSplittableList((i) =>
            i.isSerializable(),
          );
          return this.copyWithPieceList(e);
        }
        toString() {
          return this.pieceList.toString();
        }
        toJSON() {
          return this.pieceList.toJSON();
        }
        toConsole() {
          return JSON.stringify(
            this.pieceList.toArray().map((e) => JSON.parse(e.toConsole())),
          );
        }
        getDirection() {
          return Qo(this.toString());
        }
        isRTL() {
          return this.getDirection() === "rtl";
        }
      }
      class Fr extends Pr {
        static fromJSON(e) {
          let i = vr.fromJSON(e.text);
          return new this(i, e.attributes);
        }
        constructor(e, i) {
          super(...arguments),
            (this.text = cd(e || new vr())),
            (this.attributes = i || []);
        }
        isEmpty() {
          return this.text.isBlockBreak();
        }
        isEqualTo(e) {
          return super.isEqualTo(e)
            ? !0
            : this.text.isEqualTo(e == null ? void 0 : e.text) &&
                We(this.attributes, e == null ? void 0 : e.attributes);
        }
        copyWithText(e) {
          return new Fr(e, this.attributes);
        }
        copyWithoutText() {
          return this.copyWithText(null);
        }
        copyWithAttributes(e) {
          return new Fr(this.text, e);
        }
        copyWithoutAttributes() {
          return this.copyWithAttributes(null);
        }
        copyUsingObjectMap(e) {
          let i = e.find(this.text);
          return i
            ? this.copyWithText(i)
            : this.copyWithText(this.text.copyUsingObjectMap(e));
        }
        addAttribute(e) {
          let i = this.attributes.concat(bc(e));
          return this.copyWithAttributes(i);
        }
        removeAttribute(e) {
          let { listAttribute: i } = Ee(e),
            a = yc(yc(this.attributes, e), i);
          return this.copyWithAttributes(a);
        }
        removeLastAttribute() {
          return this.removeAttribute(this.getLastAttribute());
        }
        getLastAttribute() {
          return vc(this.attributes);
        }
        getAttributes() {
          return this.attributes.slice(0);
        }
        getAttributeLevel() {
          return this.attributes.length;
        }
        getAttributeAtLevel(e) {
          return this.attributes[e - 1];
        }
        hasAttribute(e) {
          return this.attributes.includes(e);
        }
        hasAttributes() {
          return this.getAttributeLevel() > 0;
        }
        getLastNestableAttribute() {
          return vc(this.getNestableAttributes());
        }
        getNestableAttributes() {
          return this.attributes.filter((e) => Ee(e).nestable);
        }
        getNestingLevel() {
          return this.getNestableAttributes().length;
        }
        decreaseNestingLevel() {
          let e = this.getLastNestableAttribute();
          return e ? this.removeAttribute(e) : this;
        }
        increaseNestingLevel() {
          let e = this.getLastNestableAttribute();
          if (e) {
            let i = this.attributes.lastIndexOf(e),
              a = ke(this.attributes, i + 1, 0, ...bc(e));
            return this.copyWithAttributes(a);
          } else return this;
        }
        getListItemAttributes() {
          return this.attributes.filter((e) => Ee(e).listAttribute);
        }
        isListItem() {
          var e;
          return (e = Ee(this.getLastAttribute())) === null || e === void 0
            ? void 0
            : e.listAttribute;
        }
        isTerminalBlock() {
          var e;
          return (e = Ee(this.getLastAttribute())) === null || e === void 0
            ? void 0
            : e.terminal;
        }
        breaksOnReturn() {
          var e;
          return (e = Ee(this.getLastAttribute())) === null || e === void 0
            ? void 0
            : e.breakOnReturn;
        }
        findLineBreakInDirectionFromPosition(e, i) {
          let a = this.toString(),
            c;
          switch (e) {
            case "forward":
              c = a.indexOf(
                `
`,
                i,
              );
              break;
            case "backward":
              c = a.slice(0, i).lastIndexOf(`
`);
          }
          if (c !== -1) return c;
        }
        contentsForInspection() {
          return { text: this.text.inspect(), attributes: this.attributes };
        }
        toString() {
          return this.text.toString();
        }
        toJSON() {
          return { text: this.text, attributes: this.attributes };
        }
        getDirection() {
          return this.text.getDirection();
        }
        isRTL() {
          return this.text.isRTL();
        }
        getLength() {
          return this.text.getLength();
        }
        canBeConsolidatedWith(e) {
          return (
            !this.hasAttributes() &&
            !e.hasAttributes() &&
            this.getDirection() === e.getDirection()
          );
        }
        consolidateWith(e) {
          let i = vr.textForStringWithAttributes(`
`),
            a = this.getTextWithoutBlockBreak().appendText(i);
          return this.copyWithText(a.appendText(e.text));
        }
        splitAtOffset(e) {
          let i, a;
          return (
            e === 0
              ? ((i = null), (a = this))
              : e === this.getLength()
              ? ((i = this), (a = null))
              : ((i = this.copyWithText(this.text.getTextAtRange([0, e]))),
                (a = this.copyWithText(
                  this.text.getTextAtRange([e, this.getLength()]),
                ))),
            [i, a]
          );
        }
        getBlockBreakPosition() {
          return this.text.getLength() - 1;
        }
        getTextWithoutBlockBreak() {
          return pc(this.text)
            ? this.text.getTextAtRange([0, this.getBlockBreakPosition()])
            : this.text.copy();
        }
        canBeGrouped(e) {
          return this.attributes[e];
        }
        canBeGroupedWith(e, i) {
          let a = e.getAttributes(),
            c = a[i],
            u = this.attributes[i];
          return (
            u === c &&
            !(Ee(u).group === !1 && !Cs().includes(a[i + 1])) &&
            (this.getDirection() === e.getDirection() || e.isEmpty())
          );
        }
      }
      let cd = function (o) {
          return (o = ud(o)), (o = dd(o)), o;
        },
        ud = function (o) {
          let e = !1,
            i = o.getPieces(),
            a = i.slice(0, i.length - 1),
            c = i[i.length - 1];
          return c
            ? ((a = a.map((u) => (u.isBlockBreak() ? ((e = !0), fd(u)) : u))),
              e ? new vr([...a, c]) : o)
            : o;
        },
        hd = vr.textForStringWithAttributes(
          `
`,
          { blockBreak: !0 },
        ),
        dd = function (o) {
          return pc(o) ? o : o.appendText(hd);
        },
        pc = function (o) {
          let e = o.getLength();
          return e === 0 ? !1 : o.getTextAtRange([e - 1, e]).isBlockBreak();
        },
        fd = (o) => o.copyWithoutAttribute("blockBreak"),
        bc = function (o) {
          let { listAttribute: e } = Ee(o);
          return e ? [e, o] : [o];
        },
        vc = (o) => o.slice(-1)[0],
        yc = function (o, e) {
          let i = o.lastIndexOf(e);
          return i === -1 ? o : ke(o, i, 1);
        };
      class rr extends Pr {
        static fromJSON(e) {
          let i = Array.from(e).map((a) => Fr.fromJSON(a));
          return new this(i);
        }
        static fromString(e, i) {
          let a = vr.textForStringWithAttributes(e, i);
          return new this([new Fr(a)]);
        }
        constructor() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          super(...arguments),
            e.length === 0 && (e = [new Fr()]),
            (this.blockList = Us.box(e));
        }
        isEmpty() {
          let e = this.getBlockAtIndex(0);
          return (
            this.blockList.length === 1 && e.isEmpty() && !e.hasAttributes()
          );
        }
        copy() {
          let i = (arguments.length > 0 && arguments[0] !== void 0
            ? arguments[0]
            : {}
          ).consolidateBlocks
            ? this.blockList.consolidate().toArray()
            : this.blockList.toArray();
          return new this.constructor(i);
        }
        copyUsingObjectsFromDocument(e) {
          let i = new K(e.getObjects());
          return this.copyUsingObjectMap(i);
        }
        copyUsingObjectMap(e) {
          let i = this.getBlocks().map(
            (a) => e.find(a) || a.copyUsingObjectMap(e),
          );
          return new this.constructor(i);
        }
        copyWithBaseBlockAttributes() {
          let e =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : [],
            i = this.getBlocks().map((a) => {
              let c = e.concat(a.getAttributes());
              return a.copyWithAttributes(c);
            });
          return new this.constructor(i);
        }
        replaceBlock(e, i) {
          let a = this.blockList.indexOf(e);
          return a === -1
            ? this
            : new this.constructor(this.blockList.replaceObjectAtIndex(i, a));
        }
        insertDocumentAtRange(e, i) {
          let { blockList: a } = e;
          i = ie(i);
          let [c] = i,
            { index: u, offset: g } = this.locationFromPosition(c),
            E = this,
            C = this.getBlockAtPosition(c);
          return (
            gr(i) && C.isEmpty() && !C.hasAttributes()
              ? (E = new this.constructor(E.blockList.removeObjectAtIndex(u)))
              : C.getBlockBreakPosition() === g && c++,
            (E = E.removeTextAtRange(i)),
            new this.constructor(
              E.blockList.insertSplittableListAtPosition(a, c),
            )
          );
        }
        mergeDocumentAtRange(e, i) {
          let a, c;
          i = ie(i);
          let [u] = i,
            g = this.locationFromPosition(u),
            E = this.getBlockAtIndex(g.index).getAttributes(),
            C = e.getBaseBlockAttributes(),
            x = E.slice(-C.length);
          if (We(C, x)) {
            let G = E.slice(0, -C.length);
            a = e.copyWithBaseBlockAttributes(G);
          } else a = e.copy({ consolidateBlocks: !0 }).copyWithBaseBlockAttributes(E);
          let _ = a.getBlockCount(),
            O = a.getBlockAtIndex(0);
          if (We(E, O.getAttributes())) {
            let G = O.getTextWithoutBlockBreak();
            if (((c = this.insertTextAtRange(G, i)), _ > 1)) {
              a = new this.constructor(a.getBlocks().slice(1));
              let X = u + G.getLength();
              c = c.insertDocumentAtRange(a, X);
            }
          } else c = this.insertDocumentAtRange(a, i);
          return c;
        }
        insertTextAtRange(e, i) {
          i = ie(i);
          let [a] = i,
            { index: c, offset: u } = this.locationFromPosition(a),
            g = this.removeTextAtRange(i);
          return new this.constructor(
            g.blockList.editObjectAtIndex(c, (E) =>
              E.copyWithText(E.text.insertTextAtPosition(e, u)),
            ),
          );
        }
        removeTextAtRange(e) {
          let i;
          e = ie(e);
          let [a, c] = e;
          if (gr(e)) return this;
          let [u, g] = Array.from(this.locationRangeFromRange(e)),
            E = u.index,
            C = u.offset,
            x = this.getBlockAtIndex(E),
            _ = g.index,
            O = g.offset,
            G = this.getBlockAtIndex(_);
          if (
            c - a === 1 &&
            x.getBlockBreakPosition() === C &&
            G.getBlockBreakPosition() !== O &&
            G.text.getStringAtPosition(O) ===
              `
`
          )
            i = this.blockList.editObjectAtIndex(_, (et) =>
              et.copyWithText(et.text.removeTextAtRange([O, O + 1])),
            );
          else {
            let et,
              J = x.text.getTextAtRange([0, C]),
              rt = G.text.getTextAtRange([O, G.getLength()]),
              it = J.appendText(rt);
            E !== _ && C === 0 && x.getAttributeLevel() >= G.getAttributeLevel()
              ? (et = G.copyWithText(it))
              : (et = x.copyWithText(it));
            let at = _ + 1 - E;
            i = this.blockList.splice(E, at, et);
          }
          return new this.constructor(i);
        }
        moveTextFromRangeToPosition(e, i) {
          let a;
          e = ie(e);
          let [c, u] = e;
          if (c <= i && i <= u) return this;
          let g = this.getDocumentAtRange(e),
            E = this.removeTextAtRange(e),
            C = c < i;
          C && (i -= g.getLength());
          let [x, ..._] = g.getBlocks();
          return (
            _.length === 0
              ? ((a = x.getTextWithoutBlockBreak()), C && (i += 1))
              : (a = x.text),
            (E = E.insertTextAtRange(a, i)),
            _.length === 0
              ? E
              : ((g = new this.constructor(_)),
                (i += a.getLength()),
                E.insertDocumentAtRange(g, i))
          );
        }
        addAttributeAtRange(e, i, a) {
          let { blockList: c } = this;
          return (
            this.eachBlockAtRange(
              a,
              (u, g, E) =>
                (c = c.editObjectAtIndex(E, function () {
                  return Ee(e)
                    ? u.addAttribute(e, i)
                    : g[0] === g[1]
                    ? u
                    : u.copyWithText(u.text.addAttributeAtRange(e, i, g));
                })),
            ),
            new this.constructor(c)
          );
        }
        addAttribute(e, i) {
          let { blockList: a } = this;
          return (
            this.eachBlock(
              (c, u) =>
                (a = a.editObjectAtIndex(u, () => c.addAttribute(e, i))),
            ),
            new this.constructor(a)
          );
        }
        removeAttributeAtRange(e, i) {
          let { blockList: a } = this;
          return (
            this.eachBlockAtRange(i, function (c, u, g) {
              Ee(e)
                ? (a = a.editObjectAtIndex(g, () => c.removeAttribute(e)))
                : u[0] !== u[1] &&
                  (a = a.editObjectAtIndex(g, () =>
                    c.copyWithText(c.text.removeAttributeAtRange(e, u)),
                  ));
            }),
            new this.constructor(a)
          );
        }
        updateAttributesForAttachment(e, i) {
          let a = this.getRangeOfAttachment(i),
            [c] = Array.from(a),
            { index: u } = this.locationFromPosition(c),
            g = this.getTextAtIndex(u);
          return new this.constructor(
            this.blockList.editObjectAtIndex(u, (E) =>
              E.copyWithText(g.updateAttributesForAttachment(e, i)),
            ),
          );
        }
        removeAttributeForAttachment(e, i) {
          let a = this.getRangeOfAttachment(i);
          return this.removeAttributeAtRange(e, a);
        }
        insertBlockBreakAtRange(e) {
          let i;
          e = ie(e);
          let [a] = e,
            { offset: c } = this.locationFromPosition(a),
            u = this.removeTextAtRange(e);
          return (
            c === 0 && (i = [new Fr()]),
            new this.constructor(
              u.blockList.insertSplittableListAtPosition(new Us(i), a),
            )
          );
        }
        applyBlockAttributeAtRange(e, i, a) {
          let c = this.expandRangeToLineBreaksAndSplitBlocks(a),
            u = c.document;
          a = c.range;
          let g = Ee(e);
          if (g.listAttribute) {
            u = u.removeLastListAttributeAtRange(a, { exceptAttributeName: e });
            let E = u.convertLineBreaksToBlockBreaksInRange(a);
            (u = E.document), (a = E.range);
          } else g.exclusive ? (u = u.removeBlockAttributesAtRange(a)) : g.terminal ? (u = u.removeLastTerminalAttributeAtRange(a)) : (u = u.consolidateBlocksAtRange(a));
          return u.addAttributeAtRange(e, i, a);
        }
        removeLastListAttributeAtRange(e) {
          let i =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            { blockList: a } = this;
          return (
            this.eachBlockAtRange(e, function (c, u, g) {
              let E = c.getLastAttribute();
              !E ||
                !Ee(E).listAttribute ||
                (E !== i.exceptAttributeName &&
                  (a = a.editObjectAtIndex(g, () => c.removeAttribute(E))));
            }),
            new this.constructor(a)
          );
        }
        removeLastTerminalAttributeAtRange(e) {
          let { blockList: i } = this;
          return (
            this.eachBlockAtRange(e, function (a, c, u) {
              let g = a.getLastAttribute();
              !g ||
                !Ee(g).terminal ||
                (i = i.editObjectAtIndex(u, () => a.removeAttribute(g)));
            }),
            new this.constructor(i)
          );
        }
        removeBlockAttributesAtRange(e) {
          let { blockList: i } = this;
          return (
            this.eachBlockAtRange(e, function (a, c, u) {
              a.hasAttributes() &&
                (i = i.editObjectAtIndex(u, () => a.copyWithoutAttributes()));
            }),
            new this.constructor(i)
          );
        }
        expandRangeToLineBreaksAndSplitBlocks(e) {
          let i;
          e = ie(e);
          let [a, c] = e,
            u = this.locationFromPosition(a),
            g = this.locationFromPosition(c),
            E = this,
            C = E.getBlockAtIndex(u.index);
          if (
            ((u.offset = C.findLineBreakInDirectionFromPosition(
              "backward",
              u.offset,
            )),
            u.offset != null &&
              ((i = E.positionFromLocation(u)),
              (E = E.insertBlockBreakAtRange([i, i + 1])),
              (g.index += 1),
              (g.offset -= E.getBlockAtIndex(u.index).getLength()),
              (u.index += 1)),
            (u.offset = 0),
            g.offset === 0 && g.index > u.index)
          )
            (g.index -= 1),
              (g.offset = E.getBlockAtIndex(g.index).getBlockBreakPosition());
          else {
            let x = E.getBlockAtIndex(g.index);
            x.text.getStringAtRange([g.offset - 1, g.offset]) ===
            `
`
              ? (g.offset -= 1)
              : (g.offset = x.findLineBreakInDirectionFromPosition(
                  "forward",
                  g.offset,
                )),
              g.offset !== x.getBlockBreakPosition() &&
                ((i = E.positionFromLocation(g)),
                (E = E.insertBlockBreakAtRange([i, i + 1])));
          }
          return (
            (a = E.positionFromLocation(u)),
            (c = E.positionFromLocation(g)),
            (e = ie([a, c])),
            { document: E, range: e }
          );
        }
        convertLineBreaksToBlockBreaksInRange(e) {
          e = ie(e);
          let [i] = e,
            a = this.getStringAtRange(e).slice(0, -1),
            c = this;
          return (
            a.replace(/.*?\n/g, function (u) {
              (i += u.length), (c = c.insertBlockBreakAtRange([i - 1, i]));
            }),
            { document: c, range: e }
          );
        }
        consolidateBlocksAtRange(e) {
          e = ie(e);
          let [i, a] = e,
            c = this.locationFromPosition(i).index,
            u = this.locationFromPosition(a).index;
          return new this.constructor(
            this.blockList.consolidateFromIndexToIndex(c, u),
          );
        }
        getDocumentAtRange(e) {
          e = ie(e);
          let i = this.blockList.getSplittableListInRange(e).toArray();
          return new this.constructor(i);
        }
        getStringAtRange(e) {
          let i,
            a = (e = ie(e));
          return (
            a[a.length - 1] !== this.getLength() && (i = -1),
            this.getDocumentAtRange(e).toString().slice(0, i)
          );
        }
        getBlockAtIndex(e) {
          return this.blockList.getObjectAtIndex(e);
        }
        getBlockAtPosition(e) {
          let { index: i } = this.locationFromPosition(e);
          return this.getBlockAtIndex(i);
        }
        getTextAtIndex(e) {
          var i;
          return (i = this.getBlockAtIndex(e)) === null || i === void 0
            ? void 0
            : i.text;
        }
        getTextAtPosition(e) {
          let { index: i } = this.locationFromPosition(e);
          return this.getTextAtIndex(i);
        }
        getPieceAtPosition(e) {
          let { index: i, offset: a } = this.locationFromPosition(e);
          return this.getTextAtIndex(i).getPieceAtPosition(a);
        }
        getCharacterAtPosition(e) {
          let { index: i, offset: a } = this.locationFromPosition(e);
          return this.getTextAtIndex(i).getStringAtRange([a, a + 1]);
        }
        getLength() {
          return this.blockList.getEndPosition();
        }
        getBlocks() {
          return this.blockList.toArray();
        }
        getBlockCount() {
          return this.blockList.length;
        }
        getEditCount() {
          return this.editCount;
        }
        eachBlock(e) {
          return this.blockList.eachObject(e);
        }
        eachBlockAtRange(e, i) {
          let a, c;
          e = ie(e);
          let [u, g] = e,
            E = this.locationFromPosition(u),
            C = this.locationFromPosition(g);
          if (E.index === C.index)
            return (
              (a = this.getBlockAtIndex(E.index)),
              (c = [E.offset, C.offset]),
              i(a, c, E.index)
            );
          for (let x = E.index; x <= C.index; x++)
            if (((a = this.getBlockAtIndex(x)), a)) {
              switch (x) {
                case E.index:
                  c = [E.offset, a.text.getLength()];
                  break;
                case C.index:
                  c = [0, C.offset];
                  break;
                default:
                  c = [0, a.text.getLength()];
              }
              i(a, c, x);
            }
        }
        getCommonAttributesAtRange(e) {
          e = ie(e);
          let [i] = e;
          if (gr(e)) return this.getCommonAttributesAtPosition(i);
          {
            let a = [],
              c = [];
            return (
              this.eachBlockAtRange(e, function (u, g) {
                if (g[0] !== g[1])
                  return (
                    a.push(u.text.getCommonAttributesAtRange(g)), c.push(wc(u))
                  );
              }),
              D.fromCommonAttributesOfObjects(a)
                .merge(D.fromCommonAttributesOfObjects(c))
                .toObject()
            );
          }
        }
        getCommonAttributesAtPosition(e) {
          let i,
            a,
            { index: c, offset: u } = this.locationFromPosition(e),
            g = this.getBlockAtIndex(c);
          if (!g) return {};
          let E = wc(g),
            C = g.text.getAttributesAtPosition(u),
            x = g.text.getAttributesAtPosition(u - 1),
            _ = Object.keys(q).filter((O) => q[O].inheritable);
          for (i in x) (a = x[i]), (a === C[i] || _.includes(i)) && (E[i] = a);
          return E;
        }
        getRangeOfCommonAttributeAtPosition(e, i) {
          let { index: a, offset: c } = this.locationFromPosition(i),
            u = this.getTextAtIndex(a),
            [g, E] = Array.from(u.getExpandedRangeForAttributeAtOffset(e, c)),
            C = this.positionFromLocation({ index: a, offset: g }),
            x = this.positionFromLocation({ index: a, offset: E });
          return ie([C, x]);
        }
        getBaseBlockAttributes() {
          let e = this.getBlockAtIndex(0).getAttributes();
          for (let i = 1; i < this.getBlockCount(); i++) {
            let a = this.getBlockAtIndex(i).getAttributes(),
              c = Math.min(e.length, a.length);
            e = (() => {
              let u = [];
              for (let g = 0; g < c && a[g] === e[g]; g++) u.push(a[g]);
              return u;
            })();
          }
          return e;
        }
        getAttachmentById(e) {
          for (let i of this.getAttachments()) if (i.id === e) return i;
        }
        getAttachmentPieces() {
          let e = [];
          return (
            this.blockList.eachObject((i) => {
              let { text: a } = i;
              return (e = e.concat(a.getAttachmentPieces()));
            }),
            e
          );
        }
        getAttachments() {
          return this.getAttachmentPieces().map((e) => e.attachment);
        }
        getRangeOfAttachment(e) {
          let i = 0,
            a = this.blockList.toArray();
          for (let c = 0; c < a.length; c++) {
            let { text: u } = a[c],
              g = u.getRangeOfAttachment(e);
            if (g) return ie([i + g[0], i + g[1]]);
            i += u.getLength();
          }
        }
        getLocationRangeOfAttachment(e) {
          let i = this.getRangeOfAttachment(e);
          return this.locationRangeFromRange(i);
        }
        getAttachmentPieceForAttachment(e) {
          for (let i of this.getAttachmentPieces())
            if (i.attachment === e) return i;
        }
        findRangesForBlockAttribute(e) {
          let i = 0,
            a = [];
          return (
            this.getBlocks().forEach((c) => {
              let u = c.getLength();
              c.hasAttribute(e) && a.push([i, i + u]), (i += u);
            }),
            a
          );
        }
        findRangesForTextAttribute(e) {
          let { withValue: i } =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            a = 0,
            c = [],
            u = [],
            g = function (E) {
              return i ? E.getAttribute(e) === i : E.hasAttribute(e);
            };
          return (
            this.getPieces().forEach((E) => {
              let C = E.getLength();
              g(E) && (c[1] === a ? (c[1] = a + C) : u.push((c = [a, a + C]))),
                (a += C);
            }),
            u
          );
        }
        locationFromPosition(e) {
          let i = this.blockList.findIndexAndOffsetAtPosition(Math.max(0, e));
          if (i.index != null) return i;
          {
            let a = this.getBlocks();
            return { index: a.length - 1, offset: a[a.length - 1].getLength() };
          }
        }
        positionFromLocation(e) {
          return this.blockList.findPositionAtIndexAndOffset(e.index, e.offset);
        }
        locationRangeFromPosition(e) {
          return ie(this.locationFromPosition(e));
        }
        locationRangeFromRange(e) {
          if (((e = ie(e)), !e)) return;
          let [i, a] = Array.from(e),
            c = this.locationFromPosition(i),
            u = this.locationFromPosition(a);
          return ie([c, u]);
        }
        rangeFromLocationRange(e) {
          let i;
          e = ie(e);
          let a = this.positionFromLocation(e[0]);
          return gr(e) || (i = this.positionFromLocation(e[1])), ie([a, i]);
        }
        isEqualTo(e) {
          return this.blockList.isEqualTo(e == null ? void 0 : e.blockList);
        }
        getTexts() {
          return this.getBlocks().map((e) => e.text);
        }
        getPieces() {
          let e = [];
          return (
            Array.from(this.getTexts()).forEach((i) => {
              e.push(...Array.from(i.getPieces() || []));
            }),
            e
          );
        }
        getObjects() {
          return this.getBlocks()
            .concat(this.getTexts())
            .concat(this.getPieces());
        }
        toSerializableDocument() {
          let e = [];
          return (
            this.blockList.eachObject((i) =>
              e.push(i.copyWithText(i.text.toSerializableText())),
            ),
            new this.constructor(e)
          );
        }
        toString() {
          return this.blockList.toString();
        }
        toJSON() {
          return this.blockList.toJSON();
        }
        toConsole() {
          return JSON.stringify(
            this.blockList.toArray().map((e) => JSON.parse(e.text.toConsole())),
          );
        }
      }
      let wc = function (o) {
          let e = {},
            i = o.getLastAttribute();
          return i && (e[i] = !0), e;
        },
        md = "style href src width height class".split(" "),
        gd = "javascript:".split(" "),
        pd = "script iframe form".split(" ");
      class Ec extends xt {
        static sanitize(e, i) {
          let a = new this(e, i);
          return a.sanitize(), a;
        }
        constructor(e) {
          let {
            allowedAttributes: i,
            forbiddenProtocols: a,
            forbiddenElements: c,
          } = arguments.length > 1 && arguments[1] !== void 0
            ? arguments[1]
            : {};
          super(...arguments),
            (this.allowedAttributes = i || md),
            (this.forbiddenProtocols = a || gd),
            (this.forbiddenElements = c || pd),
            (this.body = bd(e));
        }
        sanitize() {
          return this.sanitizeElements(), this.normalizeListElementNesting();
        }
        getHTML() {
          return this.body.innerHTML;
        }
        getBody() {
          return this.body;
        }
        sanitizeElements() {
          let e = Dt(this.body),
            i = [];
          for (; e.nextNode(); ) {
            let a = e.currentNode;
            switch (a.nodeType) {
              case Node.ELEMENT_NODE:
                this.elementIsRemovable(a)
                  ? i.push(a)
                  : this.sanitizeElement(a);
                break;
              case Node.COMMENT_NODE:
                i.push(a);
                break;
            }
          }
          return i.forEach((a) => we(a)), this.body;
        }
        sanitizeElement(e) {
          return (
            e.hasAttribute("href") &&
              this.forbiddenProtocols.includes(e.protocol) &&
              e.removeAttribute("href"),
            Array.from(e.attributes).forEach((i) => {
              let { name: a } = i;
              !this.allowedAttributes.includes(a) &&
                a.indexOf("data-trix") !== 0 &&
                e.removeAttribute(a);
            }),
            e
          );
        }
        normalizeListElementNesting() {
          return (
            Array.from(this.body.querySelectorAll("ul,ol")).forEach((e) => {
              let i = e.previousElementSibling;
              i && R(i) === "li" && i.appendChild(e);
            }),
            this.body
          );
        }
        elementIsRemovable(e) {
          if ((e == null ? void 0 : e.nodeType) === Node.ELEMENT_NODE)
            return (
              this.elementIsForbidden(e) || this.elementIsntSerializable(e)
            );
        }
        elementIsForbidden(e) {
          return this.forbiddenElements.includes(R(e));
        }
        elementIsntSerializable(e) {
          return e.getAttribute("data-trix-serialize") === "false" && !_e(e);
        }
      }
      let bd = function () {
          let o =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          o = o.replace(/<\/html[^>]*>[^]*$/i, "</html>");
          let e = document.implementation.createHTMLDocument("");
          return (
            (e.documentElement.innerHTML = o),
            Array.from(e.head.querySelectorAll("style")).forEach((i) => {
              e.body.appendChild(i);
            }),
            e.body
          );
        },
        ua = function (o) {
          let e =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            i = "string";
          return (o = ri(o)), { string: o, attributes: e, type: i };
        },
        vd = function (o) {
          let e =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          return { attachment: o, attributes: e, type: "attachment" };
        },
        yd = function () {
          let o =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return { text: [], attributes: o };
        },
        Ac = (o, e) => {
          try {
            return JSON.parse(o.getAttribute("data-trix-".concat(e)));
          } catch (i) {
            return {};
          }
        },
        wd = (o) => {
          let e = o.getAttribute("width"),
            i = o.getAttribute("height"),
            a = {};
          return (
            e && (a.width = parseInt(e, 10)),
            i && (a.height = parseInt(i, 10)),
            a
          );
        };
      class Fi extends xt {
        static parse(e, i) {
          let a = new this(e, i);
          return a.parse(), a;
        }
        constructor(e) {
          let { referenceElement: i } =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          super(...arguments),
            (this.html = e),
            (this.referenceElement = i),
            (this.blocks = []),
            (this.blockElements = []),
            (this.processedElements = []);
        }
        getDocument() {
          return rr.fromJSON(this.blocks);
        }
        parse() {
          try {
            this.createHiddenContainer();
            let e = Ec.sanitize(this.html).getHTML();
            this.containerElement.innerHTML = e;
            let i = Dt(this.containerElement, { usingFilter: Ad });
            for (; i.nextNode(); ) this.processNode(i.currentNode);
            return this.translateBlockElementMarginsToNewlines();
          } finally {
            this.removeHiddenContainer();
          }
        }
        createHiddenContainer() {
          return this.referenceElement
            ? ((this.containerElement = this.referenceElement.cloneNode(!1)),
              this.containerElement.removeAttribute("id"),
              this.containerElement.setAttribute("data-trix-internal", ""),
              (this.containerElement.style.display = "none"),
              this.referenceElement.parentNode.insertBefore(
                this.containerElement,
                this.referenceElement.nextSibling,
              ))
            : ((this.containerElement = A({
                tagName: "div",
                style: { display: "none" },
              })),
              document.body.appendChild(this.containerElement));
        }
        removeHiddenContainer() {
          return we(this.containerElement);
        }
        processNode(e) {
          switch (e.nodeType) {
            case Node.TEXT_NODE:
              if (!this.isInsignificantTextNode(e))
                return this.appendBlockForTextNode(e), this.processTextNode(e);
              break;
            case Node.ELEMENT_NODE:
              return this.appendBlockForElement(e), this.processElement(e);
          }
        }
        appendBlockForTextNode(e) {
          let i = e.parentNode;
          if (
            i === this.currentBlockElement &&
            this.isBlockElement(e.previousSibling)
          )
            return this.appendStringWithAttributes(`
`);
          if (i === this.containerElement || this.isBlockElement(i)) {
            var a;
            let c = this.getBlockAttributes(i);
            We(
              c,
              (a = this.currentBlock) === null || a === void 0
                ? void 0
                : a.attributes,
            ) ||
              ((this.currentBlock = this.appendBlockForAttributesWithElement(
                c,
                i,
              )),
              (this.currentBlockElement = i));
          }
        }
        appendBlockForElement(e) {
          let i = this.isBlockElement(e),
            a = Nt(this.currentBlockElement, e);
          if (i && !this.isBlockElement(e.firstChild)) {
            if (
              !this.isInsignificantTextNode(e.firstChild) ||
              !this.isBlockElement(e.firstElementChild)
            ) {
              let c = this.getBlockAttributes(e);
              if (e.firstChild)
                if (!(a && We(c, this.currentBlock.attributes)))
                  (this.currentBlock = this.appendBlockForAttributesWithElement(
                    c,
                    e,
                  )),
                    (this.currentBlockElement = e);
                else
                  return this.appendStringWithAttributes(`
`);
            }
          } else if (this.currentBlockElement && !a && !i) {
            let c = this.findParentBlockElement(e);
            if (c) return this.appendBlockForElement(c);
            (this.currentBlock = this.appendEmptyBlock()),
              (this.currentBlockElement = null);
          }
        }
        findParentBlockElement(e) {
          let { parentElement: i } = e;
          for (; i && i !== this.containerElement; ) {
            if (this.isBlockElement(i) && this.blockElements.includes(i))
              return i;
            i = i.parentElement;
          }
          return null;
        }
        processTextNode(e) {
          let i = e.data;
          if (!xc(e.parentNode)) {
            var a;
            (i = T(i)),
              Sc(
                (a = e.previousSibling) === null || a === void 0
                  ? void 0
                  : a.textContent,
              ) && (i = xd(i));
          }
          return this.appendStringWithAttributes(
            i,
            this.getTextAttributes(e.parentNode),
          );
        }
        processElement(e) {
          let i;
          if (_e(e)) {
            if (((i = Ac(e, "attachment")), Object.keys(i).length)) {
              let a = this.getTextAttributes(e);
              this.appendAttachmentWithAttributes(i, a), (e.innerHTML = "");
            }
            return this.processedElements.push(e);
          } else
            switch (R(e)) {
              case "br":
                return (
                  !this.isExtraBR(e) &&
                    !this.isBlockElement(e.nextSibling) &&
                    this.appendStringWithAttributes(
                      `
`,
                      this.getTextAttributes(e),
                    ),
                  this.processedElements.push(e)
                );
              case "img":
                i = { url: e.getAttribute("src"), contentType: "image" };
                let a = wd(e);
                for (let c in a) {
                  let u = a[c];
                  i[c] = u;
                }
                return (
                  this.appendAttachmentWithAttributes(
                    i,
                    this.getTextAttributes(e),
                  ),
                  this.processedElements.push(e)
                );
              case "tr":
                if (this.needsTableSeparator(e))
                  return this.appendStringWithAttributes(P.tableRowSeparator);
                break;
              case "td":
                if (this.needsTableSeparator(e))
                  return this.appendStringWithAttributes(P.tableCellSeparator);
                break;
            }
        }
        appendBlockForAttributesWithElement(e, i) {
          this.blockElements.push(i);
          let a = yd(e);
          return this.blocks.push(a), a;
        }
        appendEmptyBlock() {
          return this.appendBlockForAttributesWithElement([], null);
        }
        appendStringWithAttributes(e, i) {
          return this.appendPiece(ua(e, i));
        }
        appendAttachmentWithAttributes(e, i) {
          return this.appendPiece(vd(e, i));
        }
        appendPiece(e) {
          return (
            this.blocks.length === 0 && this.appendEmptyBlock(),
            this.blocks[this.blocks.length - 1].text.push(e)
          );
        }
        appendStringToTextAtIndex(e, i) {
          let { text: a } = this.blocks[i],
            c = a[a.length - 1];
          if ((c == null ? void 0 : c.type) === "string") c.string += e;
          else return a.push(ua(e));
        }
        prependStringToTextAtIndex(e, i) {
          let { text: a } = this.blocks[i],
            c = a[0];
          if ((c == null ? void 0 : c.type) === "string")
            c.string = e + c.string;
          else return a.unshift(ua(e));
        }
        getTextAttributes(e) {
          let i,
            a = {};
          for (let c in q) {
            let u = q[c];
            if (
              u.tagName &&
              wt(e, {
                matchingSelector: u.tagName,
                untilNode: this.containerElement,
              })
            )
              a[c] = !0;
            else if (u.parser) {
              if (((i = u.parser(e)), i)) {
                let g = !1;
                for (let E of this.findBlockElementAncestors(e))
                  if (u.parser(E) === i) {
                    g = !0;
                    break;
                  }
                g || (a[c] = i);
              }
            } else
              u.styleProperty &&
                ((i = e.style[u.styleProperty]), i && (a[c] = i));
          }
          if (_e(e)) {
            let c = Ac(e, "attributes");
            for (let u in c) (i = c[u]), (a[u] = i);
          }
          return a;
        }
        getBlockAttributes(e) {
          let i = [];
          for (; e && e !== this.containerElement; ) {
            for (let c in tt) {
              let u = tt[c];
              if (u.parse !== !1 && R(e) === u.tagName) {
                var a;
                (((a = u.test) !== null && a !== void 0 && a.call(u, e)) ||
                  !u.test) &&
                  (i.push(c), u.listAttribute && i.push(u.listAttribute));
              }
            }
            e = e.parentNode;
          }
          return i.reverse();
        }
        findBlockElementAncestors(e) {
          let i = [];
          for (; e && e !== this.containerElement; ) {
            let a = R(e);
            d().includes(a) && i.push(e), (e = e.parentNode);
          }
          return i;
        }
        isBlockElement(e) {
          if (
            (e == null ? void 0 : e.nodeType) === Node.ELEMENT_NODE &&
            !_e(e) &&
            !wt(e, { matchingSelector: "td", untilNode: this.containerElement })
          )
            return (
              d().includes(R(e)) ||
              window.getComputedStyle(e).display === "block"
            );
        }
        isInsignificantTextNode(e) {
          if (
            (e == null ? void 0 : e.nodeType) !== Node.TEXT_NODE ||
            !Td(e.data)
          )
            return;
          let { parentNode: i, previousSibling: a, nextSibling: c } = e;
          if (
            !(
              Ed(i.previousSibling) && !this.isBlockElement(i.previousSibling)
            ) &&
            !xc(i)
          )
            return !a || this.isBlockElement(a) || !c || this.isBlockElement(c);
        }
        isExtraBR(e) {
          return (
            R(e) === "br" &&
            this.isBlockElement(e.parentNode) &&
            e.parentNode.lastChild === e
          );
        }
        needsTableSeparator(e) {
          if (P.removeBlankTableCells) {
            var i;
            let a =
              (i = e.previousSibling) === null || i === void 0
                ? void 0
                : i.textContent;
            return a && /\S/.test(a);
          } else return e.previousSibling;
        }
        translateBlockElementMarginsToNewlines() {
          let e = this.getMarginOfDefaultBlockElement();
          for (let i = 0; i < this.blocks.length; i++) {
            let a = this.getMarginOfBlockElementAtIndex(i);
            a &&
              (a.top > e.top * 2 &&
                this.prependStringToTextAtIndex(
                  `
`,
                  i,
                ),
              a.bottom > e.bottom * 2 &&
                this.appendStringToTextAtIndex(
                  `
`,
                  i,
                ));
          }
        }
        getMarginOfBlockElementAtIndex(e) {
          let i = this.blockElements[e];
          if (
            i &&
            i.textContent &&
            !d().includes(R(i)) &&
            !this.processedElements.includes(i)
          )
            return Tc(i);
        }
        getMarginOfDefaultBlockElement() {
          let e = A(tt.default.tagName);
          return this.containerElement.appendChild(e), Tc(e);
        }
      }
      let xc = function (o) {
          let { whiteSpace: e } = window.getComputedStyle(o);
          return ["pre", "pre-wrap", "pre-line"].includes(e);
        },
        Ed = (o) => o && !Sc(o.textContent),
        Tc = function (o) {
          let e = window.getComputedStyle(o);
          if (e.display === "block")
            return {
              top: parseInt(e.marginTop),
              bottom: parseInt(e.marginBottom),
            };
        },
        Ad = function (o) {
          return R(o) === "style"
            ? NodeFilter.FILTER_REJECT
            : NodeFilter.FILTER_ACCEPT;
        },
        xd = (o) => o.replace(new RegExp("^".concat(Ci.source, "+")), ""),
        Td = (o) => new RegExp("^".concat(Ci.source, "*$")).test(o),
        Sc = (o) => /\s$/.test(o),
        Sd = "[data-trix-serialize=false]",
        Cd = [
          "contenteditable",
          "data-trix-id",
          "data-trix-store-key",
          "data-trix-mutable",
          "data-trix-placeholder",
          "tabindex",
        ],
        ha = "data-trix-serialized-attributes",
        kd = "[".concat(ha, "]"),
        Ld = new RegExp("<!--block-->", "g"),
        Rd = {
          "application/json": function (o) {
            let e;
            if (o instanceof rr) e = o;
            else if (o instanceof HTMLElement)
              e = Fi.parse(o.innerHTML).getDocument();
            else throw new Error("unserializable object");
            return e.toSerializableDocument().toJSONString();
          },
          "text/html": function (o) {
            let e;
            if (o instanceof rr) e = ur.render(o);
            else if (o instanceof HTMLElement) e = o.cloneNode(!0);
            else throw new Error("unserializable object");
            return (
              Array.from(e.querySelectorAll(Sd)).forEach((i) => {
                we(i);
              }),
              Cd.forEach((i) => {
                Array.from(e.querySelectorAll("[".concat(i, "]"))).forEach(
                  (a) => {
                    a.removeAttribute(i);
                  },
                );
              }),
              Array.from(e.querySelectorAll(kd)).forEach((i) => {
                try {
                  let a = JSON.parse(i.getAttribute(ha));
                  i.removeAttribute(ha);
                  for (let c in a) {
                    let u = a[c];
                    i.setAttribute(c, u);
                  }
                } catch (a) {}
              }),
              e.innerHTML.replace(Ld, "")
            );
          },
        },
        _d = {
          "application/json": function (o) {
            return rr.fromJSONString(o);
          },
          "text/html": function (o) {
            return Fi.parse(o).getDocument();
          },
        },
        Dd = function (o, e) {
          let i = Rd[e];
          if (i) return i(o);
          throw new Error("unknown content type: ".concat(e));
        },
        $p = function (o, e) {
          let i = _d[e];
          if (i) return i(o);
          throw new Error("unknown content type: ".concat(e));
        };
      var Pd = Object.freeze({ __proto__: null });
      class Pe extends xt {
        constructor(e, i) {
          super(...arguments),
            (this.attachmentManager = e),
            (this.attachment = i),
            (this.id = this.attachment.id),
            (this.file = this.attachment.file);
        }
        remove() {
          return this.attachmentManager.requestRemovalOfAttachment(
            this.attachment,
          );
        }
      }
      Pe.proxyMethod("attachment.getAttribute"),
        Pe.proxyMethod("attachment.hasAttribute"),
        Pe.proxyMethod("attachment.setAttribute"),
        Pe.proxyMethod("attachment.getAttributes"),
        Pe.proxyMethod("attachment.setAttributes"),
        Pe.proxyMethod("attachment.isPending"),
        Pe.proxyMethod("attachment.isPreviewable"),
        Pe.proxyMethod("attachment.getURL"),
        Pe.proxyMethod("attachment.getHref"),
        Pe.proxyMethod("attachment.getFilename"),
        Pe.proxyMethod("attachment.getFilesize"),
        Pe.proxyMethod("attachment.getFormattedFilesize"),
        Pe.proxyMethod("attachment.getExtension"),
        Pe.proxyMethod("attachment.getContentType"),
        Pe.proxyMethod("attachment.getFile"),
        Pe.proxyMethod("attachment.setFile"),
        Pe.proxyMethod("attachment.releaseFile"),
        Pe.proxyMethod("attachment.getUploadProgress"),
        Pe.proxyMethod("attachment.setUploadProgress");
      class Cc extends xt {
        constructor() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          super(...arguments),
            (this.managedAttachments = {}),
            Array.from(e).forEach((i) => {
              this.manageAttachment(i);
            });
        }
        getAttachments() {
          let e = [];
          for (let i in this.managedAttachments) {
            let a = this.managedAttachments[i];
            e.push(a);
          }
          return e;
        }
        manageAttachment(e) {
          return (
            this.managedAttachments[e.id] ||
              (this.managedAttachments[e.id] = new Pe(this, e)),
            this.managedAttachments[e.id]
          );
        }
        attachmentIsManaged(e) {
          return e.id in this.managedAttachments;
        }
        requestRemovalOfAttachment(e) {
          if (this.attachmentIsManaged(e)) {
            var i, a;
            return (i = this.delegate) === null ||
              i === void 0 ||
              (a = i.attachmentManagerDidRequestRemovalOfAttachment) === null ||
              a === void 0
              ? void 0
              : a.call(i, e);
          }
        }
        unmanageAttachment(e) {
          let i = this.managedAttachments[e.id];
          return delete this.managedAttachments[e.id], i;
        }
      }
      class kc {
        constructor(e) {
          (this.composition = e), (this.document = this.composition.document);
          let i = this.composition.getSelectedRange();
          (this.startPosition = i[0]),
            (this.endPosition = i[1]),
            (this.startLocation = this.document.locationFromPosition(
              this.startPosition,
            )),
            (this.endLocation = this.document.locationFromPosition(
              this.endPosition,
            )),
            (this.block = this.document.getBlockAtIndex(
              this.endLocation.index,
            )),
            (this.breaksOnReturn = this.block.breaksOnReturn()),
            (this.previousCharacter = this.block.text.getStringAtPosition(
              this.endLocation.offset - 1,
            )),
            (this.nextCharacter = this.block.text.getStringAtPosition(
              this.endLocation.offset,
            ));
        }
        shouldInsertBlockBreak() {
          return this.block.hasAttributes() &&
            this.block.isListItem() &&
            !this.block.isEmpty()
            ? this.startLocation.offset !== 0
            : this.breaksOnReturn &&
                this.nextCharacter !==
                  `
`;
        }
        shouldBreakFormattedBlock() {
          return (
            this.block.hasAttributes() &&
            !this.block.isListItem() &&
            ((this.breaksOnReturn &&
              this.nextCharacter ===
                `
`) ||
              this.previousCharacter ===
                `
`)
          );
        }
        shouldDecreaseListLevel() {
          return (
            this.block.hasAttributes() &&
            this.block.isListItem() &&
            this.block.isEmpty()
          );
        }
        shouldPrependListItem() {
          return (
            this.block.isListItem() &&
            this.startLocation.offset === 0 &&
            !this.block.isEmpty()
          );
        }
        shouldRemoveLastBlockAttribute() {
          return (
            this.block.hasAttributes() &&
            !this.block.isListItem() &&
            this.block.isEmpty()
          );
        }
      }
      let Lc = " ";
      class Vr extends xt {
        constructor() {
          super(...arguments),
            (this.document = new rr()),
            (this.attachments = []),
            (this.currentAttributes = {}),
            (this.revision = 0);
        }
        setDocument(e) {
          if (!e.isEqualTo(this.document)) {
            var i, a;
            return (
              (this.document = e),
              this.refreshAttachments(),
              this.revision++,
              (i = this.delegate) === null ||
              i === void 0 ||
              (a = i.compositionDidChangeDocument) === null ||
              a === void 0
                ? void 0
                : a.call(i, e)
            );
          }
        }
        getSnapshot() {
          return {
            document: this.document,
            selectedRange: this.getSelectedRange(),
          };
        }
        loadSnapshot(e) {
          var i, a, c, u;
          let { document: g, selectedRange: E } = e;
          return (
            (i = this.delegate) === null ||
              i === void 0 ||
              (a = i.compositionWillLoadSnapshot) === null ||
              a === void 0 ||
              a.call(i),
            this.setDocument(g != null ? g : new rr()),
            this.setSelection(E != null ? E : [0, 0]),
            (c = this.delegate) === null ||
            c === void 0 ||
            (u = c.compositionDidLoadSnapshot) === null ||
            u === void 0
              ? void 0
              : u.call(c)
          );
        }
        insertText(e) {
          let { updatePosition: i } =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : { updatePosition: !0 },
            a = this.getSelectedRange();
          this.setDocument(this.document.insertTextAtRange(e, a));
          let c = a[0],
            u = c + e.getLength();
          return (
            i && this.setSelection(u),
            this.notifyDelegateOfInsertionAtRange([c, u])
          );
        }
        insertBlock() {
          let e =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : new Fr(),
            i = new rr([e]);
          return this.insertDocument(i);
        }
        insertDocument() {
          let e =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : new rr(),
            i = this.getSelectedRange();
          this.setDocument(this.document.insertDocumentAtRange(e, i));
          let a = i[0],
            c = a + e.getLength();
          return (
            this.setSelection(c), this.notifyDelegateOfInsertionAtRange([a, c])
          );
        }
        insertString(e, i) {
          let a = this.getCurrentTextAttributes(),
            c = vr.textForStringWithAttributes(e, a);
          return this.insertText(c, i);
        }
        insertBlockBreak() {
          let e = this.getSelectedRange();
          this.setDocument(this.document.insertBlockBreakAtRange(e));
          let i = e[0],
            a = i + 1;
          return (
            this.setSelection(a), this.notifyDelegateOfInsertionAtRange([i, a])
          );
        }
        insertLineBreak() {
          let e = new kc(this);
          if (e.shouldDecreaseListLevel())
            return this.decreaseListLevel(), this.setSelection(e.startPosition);
          if (e.shouldPrependListItem()) {
            let i = new rr([e.block.copyWithoutText()]);
            return this.insertDocument(i);
          } else
            return e.shouldInsertBlockBreak()
              ? this.insertBlockBreak()
              : e.shouldRemoveLastBlockAttribute()
              ? this.removeLastBlockAttribute()
              : e.shouldBreakFormattedBlock()
              ? this.breakFormattedBlock(e)
              : this.insertString(`
`);
        }
        insertHTML(e) {
          let i = Fi.parse(e).getDocument(),
            a = this.getSelectedRange();
          this.setDocument(this.document.mergeDocumentAtRange(i, a));
          let c = a[0],
            u = c + i.getLength() - 1;
          return (
            this.setSelection(u), this.notifyDelegateOfInsertionAtRange([c, u])
          );
        }
        replaceHTML(e) {
          let i = Fi.parse(e)
              .getDocument()
              .copyUsingObjectsFromDocument(this.document),
            a = this.getLocationRange({ strict: !1 }),
            c = this.document.rangeFromLocationRange(a);
          return this.setDocument(i), this.setSelection(c);
        }
        insertFile(e) {
          return this.insertFiles([e]);
        }
        insertFiles(e) {
          let i = [];
          return (
            Array.from(e).forEach((a) => {
              var c;
              if (
                (c = this.delegate) !== null &&
                c !== void 0 &&
                c.compositionShouldAcceptFile(a)
              ) {
                let u = Oi.attachmentForFile(a);
                i.push(u);
              }
            }),
            this.insertAttachments(i)
          );
        }
        insertAttachment(e) {
          return this.insertAttachments([e]);
        }
        insertAttachments(e) {
          let i = new vr();
          return (
            Array.from(e).forEach((a) => {
              var c;
              let u = a.getType(),
                g =
                  (c = H[u]) === null || c === void 0 ? void 0 : c.presentation,
                E = this.getCurrentTextAttributes();
              g && (E.presentation = g);
              let C = vr.textForAttachmentWithAttributes(a, E);
              i = i.appendText(C);
            }),
            this.insertText(i)
          );
        }
        shouldManageDeletingInDirection(e) {
          let i = this.getLocationRange();
          if (gr(i)) {
            if (
              (e === "backward" && i[0].offset === 0) ||
              this.shouldManageMovingCursorInDirection(e)
            )
              return !0;
          } else if (i[0].index !== i[1].index) return !0;
          return !1;
        }
        deleteInDirection(e) {
          let { length: i } =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            a,
            c,
            u,
            g = this.getLocationRange(),
            E = this.getSelectedRange(),
            C = gr(E);
          if (
            (C
              ? (c = e === "backward" && g[0].offset === 0)
              : (u = g[0].index !== g[1].index),
            c && this.canDecreaseBlockAttributeLevel())
          ) {
            let x = this.getBlock();
            if (
              (x.isListItem()
                ? this.decreaseListLevel()
                : this.decreaseBlockAttributeLevel(),
              this.setSelection(E[0]),
              x.isEmpty())
            )
              return !1;
          }
          if (
            (C &&
              ((E = this.getExpandedRangeInDirection(e, { length: i })),
              e === "backward" && (a = this.getAttachmentAtRange(E))),
            a)
          )
            return this.editAttachment(a), !1;
          if (
            (this.setDocument(this.document.removeTextAtRange(E)),
            this.setSelection(E[0]),
            c || u)
          )
            return !1;
        }
        moveTextFromRange(e) {
          let [i] = Array.from(this.getSelectedRange());
          return (
            this.setDocument(this.document.moveTextFromRangeToPosition(e, i)),
            this.setSelection(i)
          );
        }
        removeAttachment(e) {
          let i = this.document.getRangeOfAttachment(e);
          if (i)
            return (
              this.stopEditingAttachment(),
              this.setDocument(this.document.removeTextAtRange(i)),
              this.setSelection(i[0])
            );
        }
        removeLastBlockAttribute() {
          let [e, i] = Array.from(this.getSelectedRange()),
            a = this.document.getBlockAtPosition(i);
          return (
            this.removeCurrentAttribute(a.getLastAttribute()),
            this.setSelection(e)
          );
        }
        insertPlaceholder() {
          return (
            (this.placeholderPosition = this.getPosition()),
            this.insertString(Lc)
          );
        }
        selectPlaceholder() {
          if (this.placeholderPosition != null)
            return (
              this.setSelectedRange([
                this.placeholderPosition,
                this.placeholderPosition + Lc.length,
              ]),
              this.getSelectedRange()
            );
        }
        forgetPlaceholder() {
          this.placeholderPosition = null;
        }
        hasCurrentAttribute(e) {
          let i = this.currentAttributes[e];
          return i != null && i !== !1;
        }
        toggleCurrentAttribute(e) {
          let i = !this.currentAttributes[e];
          return i
            ? this.setCurrentAttribute(e, i)
            : this.removeCurrentAttribute(e);
        }
        canSetCurrentAttribute(e) {
          return Ee(e)
            ? this.canSetCurrentBlockAttribute(e)
            : this.canSetCurrentTextAttribute(e);
        }
        canSetCurrentTextAttribute(e) {
          let i = this.getSelectedDocument();
          if (!!i) {
            for (let a of Array.from(i.getAttachments()))
              if (!a.hasContent()) return !1;
            return !0;
          }
        }
        canSetCurrentBlockAttribute(e) {
          let i = this.getBlock();
          if (!!i) return !i.isTerminalBlock();
        }
        setCurrentAttribute(e, i) {
          return Ee(e)
            ? this.setBlockAttribute(e, i)
            : (this.setTextAttribute(e, i),
              (this.currentAttributes[e] = i),
              this.notifyDelegateOfCurrentAttributesChange());
        }
        setTextAttribute(e, i) {
          let a = this.getSelectedRange();
          if (!a) return;
          let [c, u] = Array.from(a);
          if (c === u) {
            if (e === "href") {
              let g = vr.textForStringWithAttributes(i, { href: i });
              return this.insertText(g);
            }
          } else return this.setDocument(this.document.addAttributeAtRange(e, i, a));
        }
        setBlockAttribute(e, i) {
          let a = this.getSelectedRange();
          if (this.canSetCurrentAttribute(e))
            return (
              this.setDocument(
                this.document.applyBlockAttributeAtRange(e, i, a),
              ),
              this.setSelection(a)
            );
        }
        removeCurrentAttribute(e) {
          return Ee(e)
            ? (this.removeBlockAttribute(e), this.updateCurrentAttributes())
            : (this.removeTextAttribute(e),
              delete this.currentAttributes[e],
              this.notifyDelegateOfCurrentAttributesChange());
        }
        removeTextAttribute(e) {
          let i = this.getSelectedRange();
          if (!!i)
            return this.setDocument(this.document.removeAttributeAtRange(e, i));
        }
        removeBlockAttribute(e) {
          let i = this.getSelectedRange();
          if (!!i)
            return this.setDocument(this.document.removeAttributeAtRange(e, i));
        }
        canDecreaseNestingLevel() {
          var e;
          return (
            ((e = this.getBlock()) === null || e === void 0
              ? void 0
              : e.getNestingLevel()) > 0
          );
        }
        canIncreaseNestingLevel() {
          var e;
          let i = this.getBlock();
          if (!!i)
            if (
              (e = Ee(i.getLastNestableAttribute())) !== null &&
              e !== void 0 &&
              e.listAttribute
            ) {
              let a = this.getPreviousBlock();
              if (a)
                return Jo(a.getListItemAttributes(), i.getListItemAttributes());
            } else return i.getNestingLevel() > 0;
        }
        decreaseNestingLevel() {
          let e = this.getBlock();
          if (!!e)
            return this.setDocument(
              this.document.replaceBlock(e, e.decreaseNestingLevel()),
            );
        }
        increaseNestingLevel() {
          let e = this.getBlock();
          if (!!e)
            return this.setDocument(
              this.document.replaceBlock(e, e.increaseNestingLevel()),
            );
        }
        canDecreaseBlockAttributeLevel() {
          var e;
          return (
            ((e = this.getBlock()) === null || e === void 0
              ? void 0
              : e.getAttributeLevel()) > 0
          );
        }
        decreaseBlockAttributeLevel() {
          var e;
          let i =
            (e = this.getBlock()) === null || e === void 0
              ? void 0
              : e.getLastAttribute();
          if (i) return this.removeCurrentAttribute(i);
        }
        decreaseListLevel() {
          let [e] = Array.from(this.getSelectedRange()),
            { index: i } = this.document.locationFromPosition(e),
            a = i,
            c = this.getBlock().getAttributeLevel(),
            u = this.document.getBlockAtIndex(a + 1);
          for (; u && !(!u.isListItem() || u.getAttributeLevel() <= c); )
            a++, (u = this.document.getBlockAtIndex(a + 1));
          e = this.document.positionFromLocation({ index: i, offset: 0 });
          let g = this.document.positionFromLocation({ index: a, offset: 0 });
          return this.setDocument(
            this.document.removeLastListAttributeAtRange([e, g]),
          );
        }
        updateCurrentAttributes() {
          let e = this.getSelectedRange({ ignoreLock: !0 });
          if (e) {
            let i = this.document.getCommonAttributesAtRange(e);
            if (
              (Array.from(Ai()).forEach((a) => {
                i[a] || this.canSetCurrentAttribute(a) || (i[a] = !1);
              }),
              !ti(i, this.currentAttributes))
            )
              return (
                (this.currentAttributes = i),
                this.notifyDelegateOfCurrentAttributesChange()
              );
          }
        }
        getCurrentAttributes() {
          return S.call({}, this.currentAttributes);
        }
        getCurrentTextAttributes() {
          let e = {};
          for (let i in this.currentAttributes) {
            let a = this.currentAttributes[i];
            a !== !1 && Ue(i) && (e[i] = a);
          }
          return e;
        }
        freezeSelection() {
          return this.setCurrentAttribute("frozen", !0);
        }
        thawSelection() {
          return this.removeCurrentAttribute("frozen");
        }
        hasFrozenSelection() {
          return this.hasCurrentAttribute("frozen");
        }
        setSelection(e) {
          var i;
          let a = this.document.locationRangeFromRange(e);
          return (i = this.delegate) === null || i === void 0
            ? void 0
            : i.compositionDidRequestChangingSelectionToLocationRange(a);
        }
        getSelectedRange() {
          let e = this.getLocationRange();
          if (e) return this.document.rangeFromLocationRange(e);
        }
        setSelectedRange(e) {
          let i = this.document.locationRangeFromRange(e);
          return this.getSelectionManager().setLocationRange(i);
        }
        getPosition() {
          let e = this.getLocationRange();
          if (e) return this.document.positionFromLocation(e[0]);
        }
        getLocationRange(e) {
          return this.targetLocationRange
            ? this.targetLocationRange
            : this.getSelectionManager().getLocationRange(e) ||
                ie({ index: 0, offset: 0 });
        }
        withTargetLocationRange(e, i) {
          let a;
          this.targetLocationRange = e;
          try {
            a = i();
          } finally {
            this.targetLocationRange = null;
          }
          return a;
        }
        withTargetRange(e, i) {
          let a = this.document.locationRangeFromRange(e);
          return this.withTargetLocationRange(a, i);
        }
        withTargetDOMRange(e, i) {
          let a = this.createLocationRangeFromDOMRange(e, { strict: !1 });
          return this.withTargetLocationRange(a, i);
        }
        getExpandedRangeInDirection(e) {
          let { length: i } =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            [a, c] = Array.from(this.getSelectedRange());
          return (
            e === "backward"
              ? i
                ? (a -= i)
                : (a = this.translateUTF16PositionFromOffset(a, -1))
              : i
              ? (c += i)
              : (c = this.translateUTF16PositionFromOffset(c, 1)),
            ie([a, c])
          );
        }
        shouldManageMovingCursorInDirection(e) {
          if (this.editingAttachment) return !0;
          let i = this.getExpandedRangeInDirection(e);
          return this.getAttachmentAtRange(i) != null;
        }
        moveCursorInDirection(e) {
          let i, a;
          if (this.editingAttachment)
            a = this.document.getRangeOfAttachment(this.editingAttachment);
          else {
            let c = this.getSelectedRange();
            (a = this.getExpandedRangeInDirection(e)), (i = !Si(c, a));
          }
          if (
            (e === "backward"
              ? this.setSelectedRange(a[0])
              : this.setSelectedRange(a[1]),
            i)
          ) {
            let c = this.getAttachmentAtRange(a);
            if (c) return this.editAttachment(c);
          }
        }
        expandSelectionInDirection(e) {
          let { length: i } =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            a = this.getExpandedRangeInDirection(e, { length: i });
          return this.setSelectedRange(a);
        }
        expandSelectionForEditing() {
          if (this.hasCurrentAttribute("href"))
            return this.expandSelectionAroundCommonAttribute("href");
        }
        expandSelectionAroundCommonAttribute(e) {
          let i = this.getPosition(),
            a = this.document.getRangeOfCommonAttributeAtPosition(e, i);
          return this.setSelectedRange(a);
        }
        selectionContainsAttachments() {
          var e;
          return (
            ((e = this.getSelectedAttachments()) === null || e === void 0
              ? void 0
              : e.length) > 0
          );
        }
        selectionIsInCursorTarget() {
          return (
            this.editingAttachment ||
            this.positionIsCursorTarget(this.getPosition())
          );
        }
        positionIsCursorTarget(e) {
          let i = this.document.locationFromPosition(e);
          if (i) return this.locationIsCursorTarget(i);
        }
        positionIsBlockBreak(e) {
          var i;
          return (i = this.document.getPieceAtPosition(e)) === null ||
            i === void 0
            ? void 0
            : i.isBlockBreak();
        }
        getSelectedDocument() {
          let e = this.getSelectedRange();
          if (e) return this.document.getDocumentAtRange(e);
        }
        getSelectedAttachments() {
          var e;
          return (e = this.getSelectedDocument()) === null || e === void 0
            ? void 0
            : e.getAttachments();
        }
        getAttachments() {
          return this.attachments.slice(0);
        }
        refreshAttachments() {
          let e = this.document.getAttachments(),
            { added: i, removed: a } = ar(this.attachments, e);
          return (
            (this.attachments = e),
            Array.from(a).forEach((c) => {
              var u, g;
              (c.delegate = null),
                (u = this.delegate) === null ||
                  u === void 0 ||
                  (g = u.compositionDidRemoveAttachment) === null ||
                  g === void 0 ||
                  g.call(u, c);
            }),
            (() => {
              let c = [];
              return (
                Array.from(i).forEach((u) => {
                  var g, E;
                  (u.delegate = this),
                    c.push(
                      (g = this.delegate) === null ||
                        g === void 0 ||
                        (E = g.compositionDidAddAttachment) === null ||
                        E === void 0
                        ? void 0
                        : E.call(g, u),
                    );
                }),
                c
              );
            })()
          );
        }
        attachmentDidChangeAttributes(e) {
          var i, a;
          return (
            this.revision++,
            (i = this.delegate) === null ||
            i === void 0 ||
            (a = i.compositionDidEditAttachment) === null ||
            a === void 0
              ? void 0
              : a.call(i, e)
          );
        }
        attachmentDidChangePreviewURL(e) {
          var i, a;
          return (
            this.revision++,
            (i = this.delegate) === null ||
            i === void 0 ||
            (a = i.compositionDidChangeAttachmentPreviewURL) === null ||
            a === void 0
              ? void 0
              : a.call(i, e)
          );
        }
        editAttachment(e, i) {
          var a, c;
          if (e !== this.editingAttachment)
            return (
              this.stopEditingAttachment(),
              (this.editingAttachment = e),
              (a = this.delegate) === null ||
              a === void 0 ||
              (c = a.compositionDidStartEditingAttachment) === null ||
              c === void 0
                ? void 0
                : c.call(a, this.editingAttachment, i)
            );
        }
        stopEditingAttachment() {
          var e, i;
          !this.editingAttachment ||
            ((e = this.delegate) === null ||
              e === void 0 ||
              (i = e.compositionDidStopEditingAttachment) === null ||
              i === void 0 ||
              i.call(e, this.editingAttachment),
            (this.editingAttachment = null));
        }
        updateAttributesForAttachment(e, i) {
          return this.setDocument(
            this.document.updateAttributesForAttachment(e, i),
          );
        }
        removeAttributeForAttachment(e, i) {
          return this.setDocument(
            this.document.removeAttributeForAttachment(e, i),
          );
        }
        breakFormattedBlock(e) {
          let { document: i } = e,
            { block: a } = e,
            c = e.startPosition,
            u = [c - 1, c];
          a.getBlockBreakPosition() === e.startLocation.offset
            ? (a.breaksOnReturn() &&
              e.nextCharacter ===
                `
`
                ? (c += 1)
                : (i = i.removeTextAtRange(u)),
              (u = [c, c]))
            : e.nextCharacter ===
              `
`
            ? e.previousCharacter ===
              `
`
              ? (u = [c - 1, c + 1])
              : ((u = [c, c + 1]), (c += 1))
            : e.startLocation.offset - 1 !== 0 && (c += 1);
          let g = new rr([a.removeLastAttribute().copyWithoutText()]);
          return (
            this.setDocument(i.insertDocumentAtRange(g, u)),
            this.setSelection(c)
          );
        }
        getPreviousBlock() {
          let e = this.getLocationRange();
          if (e) {
            let { index: i } = e[0];
            if (i > 0) return this.document.getBlockAtIndex(i - 1);
          }
        }
        getBlock() {
          let e = this.getLocationRange();
          if (e) return this.document.getBlockAtIndex(e[0].index);
        }
        getAttachmentAtRange(e) {
          let i = this.document.getDocumentAtRange(e);
          if (
            i.toString() ===
            "".concat(
              U,
              `
`,
            )
          )
            return i.getAttachments()[0];
        }
        notifyDelegateOfCurrentAttributesChange() {
          var e, i;
          return (e = this.delegate) === null ||
            e === void 0 ||
            (i = e.compositionDidChangeCurrentAttributes) === null ||
            i === void 0
            ? void 0
            : i.call(e, this.currentAttributes);
        }
        notifyDelegateOfInsertionAtRange(e) {
          var i, a;
          return (i = this.delegate) === null ||
            i === void 0 ||
            (a = i.compositionDidPerformInsertionAtRange) === null ||
            a === void 0
            ? void 0
            : a.call(i, e);
        }
        translateUTF16PositionFromOffset(e, i) {
          let a = this.document.toUTF16String(),
            c = a.offsetFromUCS2Offset(e);
          return a.offsetToUCS2Offset(c + i);
        }
      }
      Vr.proxyMethod("getSelectionManager().getPointRange"),
        Vr.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),
        Vr.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),
        Vr.proxyMethod("getSelectionManager().locationIsCursorTarget"),
        Vr.proxyMethod("getSelectionManager().selectionIsExpanded"),
        Vr.proxyMethod("delegate?.getSelectionManager");
      class da extends xt {
        constructor(e) {
          super(...arguments),
            (this.composition = e),
            (this.undoEntries = []),
            (this.redoEntries = []);
        }
        recordUndoEntry(e) {
          let { context: i, consolidatable: a } =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            c = this.undoEntries.slice(-1)[0];
          if (!a || !Od(c, e, i)) {
            let u = this.createEntry({ description: e, context: i });
            this.undoEntries.push(u), (this.redoEntries = []);
          }
        }
        undo() {
          let e = this.undoEntries.pop();
          if (e) {
            let i = this.createEntry(e);
            return (
              this.redoEntries.push(i),
              this.composition.loadSnapshot(e.snapshot)
            );
          }
        }
        redo() {
          let e = this.redoEntries.pop();
          if (e) {
            let i = this.createEntry(e);
            return (
              this.undoEntries.push(i),
              this.composition.loadSnapshot(e.snapshot)
            );
          }
        }
        canUndo() {
          return this.undoEntries.length > 0;
        }
        canRedo() {
          return this.redoEntries.length > 0;
        }
        createEntry() {
          let { description: e, context: i } =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return {
            description: e == null ? void 0 : e.toString(),
            context: JSON.stringify(i),
            snapshot: this.composition.getSnapshot(),
          };
        }
      }
      let Od = (o, e, i) =>
          (o == null ? void 0 : o.description) ===
            (e == null ? void 0 : e.toString()) &&
          (o == null ? void 0 : o.context) === JSON.stringify(i),
        fa = "attachmentGallery",
        Md = "presentation",
        Fd = "gallery";
      class Rc {
        constructor(e) {
          (this.document = e.document), (this.selectedRange = e.selectedRange);
        }
        perform() {
          return this.removeBlockAttribute(), this.applyBlockAttribute();
        }
        getSnapshot() {
          return { document: this.document, selectedRange: this.selectedRange };
        }
        removeBlockAttribute() {
          return this.findRangesOfBlocks().map(
            (e) =>
              (this.document = this.document.removeAttributeAtRange(fa, e)),
          );
        }
        applyBlockAttribute() {
          let e = 0;
          this.findRangesOfPieces().forEach((i) => {
            i[1] - i[0] > 1 &&
              ((i[0] += e),
              (i[1] += e),
              this.document.getCharacterAtPosition(i[1]) !==
                `
` &&
                ((this.document = this.document.insertBlockBreakAtRange(i[1])),
                i[1] < this.selectedRange[1] && this.moveSelectedRangeForward(),
                i[1]++,
                e++),
              i[0] !== 0 &&
                this.document.getCharacterAtPosition(i[0] - 1) !==
                  `
` &&
                ((this.document = this.document.insertBlockBreakAtRange(i[0])),
                i[0] < this.selectedRange[0] && this.moveSelectedRangeForward(),
                i[0]++,
                e++),
              (this.document = this.document.applyBlockAttributeAtRange(
                fa,
                !0,
                i,
              )));
          });
        }
        findRangesOfBlocks() {
          return this.document.findRangesForBlockAttribute(fa);
        }
        findRangesOfPieces() {
          return this.document.findRangesForTextAttribute(Md, {
            withValue: Fd,
          });
        }
        moveSelectedRangeForward() {
          (this.selectedRange[0] += 1), (this.selectedRange[1] += 1);
        }
      }
      let _c = function (o) {
          let e = new Rc(o);
          return e.perform(), e.getSnapshot();
        },
        Id = [_c];
      class Dc {
        constructor(e, i, a) {
          (this.insertFiles = this.insertFiles.bind(this)),
            (this.composition = e),
            (this.selectionManager = i),
            (this.element = a),
            (this.undoManager = new da(this.composition)),
            (this.filters = Id.slice(0));
        }
        loadDocument(e) {
          return this.loadSnapshot({ document: e, selectedRange: [0, 0] });
        }
        loadHTML() {
          let e =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : "",
            i = Fi.parse(e, { referenceElement: this.element }).getDocument();
          return this.loadDocument(i);
        }
        loadJSON(e) {
          let { document: i, selectedRange: a } = e;
          return (
            (i = rr.fromJSON(i)),
            this.loadSnapshot({ document: i, selectedRange: a })
          );
        }
        loadSnapshot(e) {
          return (
            (this.undoManager = new da(this.composition)),
            this.composition.loadSnapshot(e)
          );
        }
        getDocument() {
          return this.composition.document;
        }
        getSelectedDocument() {
          return this.composition.getSelectedDocument();
        }
        getSnapshot() {
          return this.composition.getSnapshot();
        }
        toJSON() {
          return this.getSnapshot();
        }
        deleteInDirection(e) {
          return this.composition.deleteInDirection(e);
        }
        insertAttachment(e) {
          return this.composition.insertAttachment(e);
        }
        insertAttachments(e) {
          return this.composition.insertAttachments(e);
        }
        insertDocument(e) {
          return this.composition.insertDocument(e);
        }
        insertFile(e) {
          return this.composition.insertFile(e);
        }
        insertFiles(e) {
          return this.composition.insertFiles(e);
        }
        insertHTML(e) {
          return this.composition.insertHTML(e);
        }
        insertString(e) {
          return this.composition.insertString(e);
        }
        insertText(e) {
          return this.composition.insertText(e);
        }
        insertLineBreak() {
          return this.composition.insertLineBreak();
        }
        getSelectedRange() {
          return this.composition.getSelectedRange();
        }
        getPosition() {
          return this.composition.getPosition();
        }
        getClientRectAtPosition(e) {
          let i = this.getDocument().locationRangeFromRange([e, e + 1]);
          return this.selectionManager.getClientRectAtLocationRange(i);
        }
        expandSelectionInDirection(e) {
          return this.composition.expandSelectionInDirection(e);
        }
        moveCursorInDirection(e) {
          return this.composition.moveCursorInDirection(e);
        }
        setSelectedRange(e) {
          return this.composition.setSelectedRange(e);
        }
        activateAttribute(e) {
          let i =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
          return this.composition.setCurrentAttribute(e, i);
        }
        attributeIsActive(e) {
          return this.composition.hasCurrentAttribute(e);
        }
        canActivateAttribute(e) {
          return this.composition.canSetCurrentAttribute(e);
        }
        deactivateAttribute(e) {
          return this.composition.removeCurrentAttribute(e);
        }
        canDecreaseNestingLevel() {
          return this.composition.canDecreaseNestingLevel();
        }
        canIncreaseNestingLevel() {
          return this.composition.canIncreaseNestingLevel();
        }
        decreaseNestingLevel() {
          if (this.canDecreaseNestingLevel())
            return this.composition.decreaseNestingLevel();
        }
        increaseNestingLevel() {
          if (this.canIncreaseNestingLevel())
            return this.composition.increaseNestingLevel();
        }
        canRedo() {
          return this.undoManager.canRedo();
        }
        canUndo() {
          return this.undoManager.canUndo();
        }
        recordUndoEntry(e) {
          let { context: i, consolidatable: a } =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          return this.undoManager.recordUndoEntry(e, {
            context: i,
            consolidatable: a,
          });
        }
        redo() {
          if (this.canRedo()) return this.undoManager.redo();
        }
        undo() {
          if (this.canUndo()) return this.undoManager.undo();
        }
      }
      class Pc {
        constructor(e) {
          this.element = e;
        }
        findLocationFromContainerAndOffset(e, i) {
          let { strict: a } =
              arguments.length > 2 && arguments[2] !== void 0
                ? arguments[2]
                : { strict: !0 },
            c = 0,
            u = !1,
            g = { index: 0, offset: 0 },
            E = this.findAttachmentElementParentForNode(e);
          E && ((e = E.parentNode), (i = qe(E)));
          let C = Dt(this.element, { usingFilter: Oc });
          for (; C.nextNode(); ) {
            let x = C.currentNode;
            if (x === e && dr(e)) {
              Me(x) || (g.offset += i);
              break;
            } else {
              if (x.parentNode === e) {
                if (c++ === i) break;
              } else if (!Nt(e, x) && c > 0) break;
              Kt(x, { strict: a })
                ? (u && g.index++, (g.offset = 0), (u = !0))
                : (g.offset += ma(x));
            }
          }
          return g;
        }
        findContainerAndOffsetFromLocation(e) {
          let i, a;
          if (e.index === 0 && e.offset === 0) {
            for (i = this.element, a = 0; i.firstChild; )
              if (((i = i.firstChild), y(i))) {
                a = 1;
                break;
              }
            return [i, a];
          }
          let [c, u] = this.findNodeAndOffsetFromLocation(e);
          if (!!c) {
            if (dr(c))
              ma(c) === 0
                ? ((i = c.parentNode.parentNode),
                  (a = qe(c.parentNode)),
                  Me(c, { name: "right" }) && a++)
                : ((i = c), (a = e.offset - u));
            else {
              if (((i = c.parentNode), !Kt(c.previousSibling) && !y(i)))
                for (
                  ;
                  c === i.lastChild && ((c = i), (i = i.parentNode), !y(i));

                );
              (a = qe(c)), e.offset !== 0 && a++;
            }
            return [i, a];
          }
        }
        findNodeAndOffsetFromLocation(e) {
          let i,
            a,
            c = 0;
          for (let u of this.getSignificantNodesForIndex(e.index)) {
            let g = ma(u);
            if (e.offset <= c + g)
              if (dr(u)) {
                if (((i = u), (a = c), e.offset === a && Me(i))) break;
              } else i || ((i = u), (a = c));
            if (((c += g), c > e.offset)) break;
          }
          return [i, a];
        }
        findAttachmentElementParentForNode(e) {
          for (; e && e !== this.element; ) {
            if (_e(e)) return e;
            e = e.parentNode;
          }
        }
        getSignificantNodesForIndex(e) {
          let i = [],
            a = Dt(this.element, { usingFilter: Bd }),
            c = !1;
          for (; a.nextNode(); ) {
            let g = a.currentNode;
            if (oe(g)) {
              var u;
              if ((u != null ? u++ : (u = 0), u === e)) c = !0;
              else if (c) break;
            } else c && i.push(g);
          }
          return i;
        }
      }
      let ma = function (o) {
          return o.nodeType === Node.TEXT_NODE
            ? Me(o)
              ? 0
              : o.textContent.length
            : R(o) === "br" || _e(o)
            ? 1
            : 0;
        },
        Bd = function (o) {
          return Nd(o) === NodeFilter.FILTER_ACCEPT
            ? Oc(o)
            : NodeFilter.FILTER_REJECT;
        },
        Nd = function (o) {
          return Ze(o) ? NodeFilter.FILTER_REJECT : NodeFilter.FILTER_ACCEPT;
        },
        Oc = function (o) {
          return _e(o.parentNode)
            ? NodeFilter.FILTER_REJECT
            : NodeFilter.FILTER_ACCEPT;
        };
      class Mc {
        createDOMRangeFromPoint(e) {
          let { x: i, y: a } = e,
            c;
          if (document.caretPositionFromPoint) {
            let { offsetNode: u, offset: g } = document.caretPositionFromPoint(
              i,
              a,
            );
            return (c = document.createRange()), c.setStart(u, g), c;
          } else {
            if (document.caretRangeFromPoint)
              return document.caretRangeFromPoint(i, a);
            if (document.body.createTextRange) {
              let u = ei();
              try {
                let g = document.body.createTextRange();
                g.moveToPoint(i, a), g.select();
              } catch (g) {}
              return (c = ei()), Ms(u), c;
            }
          }
        }
        getClientRectsForDOMRange(e) {
          let i = Array.from(e.getClientRects()),
            a = i[0],
            c = i[i.length - 1];
          return [a, c];
        }
      }
      class oi extends xt {
        constructor(e) {
          super(...arguments),
            (this.didMouseDown = this.didMouseDown.bind(this)),
            (this.selectionDidChange = this.selectionDidChange.bind(this)),
            (this.element = e),
            (this.locationMapper = new Pc(this.element)),
            (this.pointMapper = new Mc()),
            (this.lockCount = 0),
            V("mousedown", {
              onElement: this.element,
              withCallback: this.didMouseDown,
            });
        }
        getLocationRange() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          return e.strict === !1
            ? this.createLocationRangeFromDOMRange(ei())
            : e.ignoreLock
            ? this.currentLocationRange
            : this.lockedLocationRange
            ? this.lockedLocationRange
            : this.currentLocationRange;
        }
        setLocationRange(e) {
          if (this.lockedLocationRange) return;
          e = ie(e);
          let i = this.createDOMRangeFromLocationRange(e);
          i && (Ms(i), this.updateCurrentLocationRange(e));
        }
        setLocationRangeFromPointRange(e) {
          e = ie(e);
          let i = this.getLocationAtPoint(e[0]),
            a = this.getLocationAtPoint(e[1]);
          this.setLocationRange([i, a]);
        }
        getClientRectAtLocationRange(e) {
          let i = this.createDOMRangeFromLocationRange(e);
          if (i) return this.getClientRectsForDOMRange(i)[1];
        }
        locationIsCursorTarget(e) {
          let i = Array.from(this.findNodeAndOffsetFromLocation(e))[0];
          return Me(i);
        }
        lock() {
          this.lockCount++ === 0 &&
            (this.updateCurrentLocationRange(),
            (this.lockedLocationRange = this.getLocationRange()));
        }
        unlock() {
          if (--this.lockCount === 0) {
            let { lockedLocationRange: e } = this;
            if (((this.lockedLocationRange = null), e != null))
              return this.setLocationRange(e);
          }
        }
        clearSelection() {
          var e;
          return (e = Os()) === null || e === void 0
            ? void 0
            : e.removeAllRanges();
        }
        selectionIsCollapsed() {
          var e;
          return (
            ((e = ei()) === null || e === void 0 ? void 0 : e.collapsed) === !0
          );
        }
        selectionIsExpanded() {
          return !this.selectionIsCollapsed();
        }
        createLocationRangeFromDOMRange(e, i) {
          if (e == null || !this.domRangeWithinElement(e)) return;
          let a = this.findLocationFromContainerAndOffset(
            e.startContainer,
            e.startOffset,
            i,
          );
          if (!a) return;
          let c = e.collapsed
            ? void 0
            : this.findLocationFromContainerAndOffset(
                e.endContainer,
                e.endOffset,
                i,
              );
          return ie([a, c]);
        }
        didMouseDown() {
          return this.pauseTemporarily();
        }
        pauseTemporarily() {
          let e;
          this.paused = !0;
          let i = () => {
              if (
                ((this.paused = !1),
                clearTimeout(a),
                Array.from(e).forEach((c) => {
                  c.destroy();
                }),
                Nt(document, this.element))
              )
                return this.selectionDidChange();
            },
            a = setTimeout(i, 200);
          e = ["mousemove", "keydown"].map((c) =>
            V(c, { onElement: document, withCallback: i }),
          );
        }
        selectionDidChange() {
          if (!this.paused && !_t(this.element))
            return this.updateCurrentLocationRange();
        }
        updateCurrentLocationRange(e) {
          if (
            (e != null
              ? e
              : (e = this.createLocationRangeFromDOMRange(ei()))) &&
            !Si(e, this.currentLocationRange)
          ) {
            var i, a;
            return (
              (this.currentLocationRange = e),
              (i = this.delegate) === null ||
              i === void 0 ||
              (a = i.locationRangeDidChange) === null ||
              a === void 0
                ? void 0
                : a.call(i, this.currentLocationRange.slice(0))
            );
          }
        }
        createDOMRangeFromLocationRange(e) {
          let i = this.findContainerAndOffsetFromLocation(e[0]),
            a = gr(e) ? i : this.findContainerAndOffsetFromLocation(e[1]) || i;
          if (i != null && a != null) {
            let c = document.createRange();
            return (
              c.setStart(...Array.from(i || [])),
              c.setEnd(...Array.from(a || [])),
              c
            );
          }
        }
        getLocationAtPoint(e) {
          let i = this.createDOMRangeFromPoint(e);
          if (i) {
            var a;
            return (a = this.createLocationRangeFromDOMRange(i)) === null ||
              a === void 0
              ? void 0
              : a[0];
          }
        }
        domRangeWithinElement(e) {
          return e.collapsed
            ? Nt(this.element, e.startContainer)
            : Nt(this.element, e.startContainer) &&
                Nt(this.element, e.endContainer);
        }
      }
      oi.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),
        oi.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),
        oi.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),
        oi.proxyMethod("pointMapper.createDOMRangeFromPoint"),
        oi.proxyMethod("pointMapper.getClientRectsForDOMRange");
      var Fc = Object.freeze({
          __proto__: null,
          Attachment: Oi,
          AttachmentManager: Cc,
          AttachmentPiece: Mi,
          Block: Fr,
          Composition: Vr,
          Document: rr,
          Editor: Dc,
          HTMLParser: Fi,
          HTMLSanitizer: Ec,
          LineBreakInsertion: kc,
          LocationMapper: Pc,
          ManagedAttachment: Pe,
          Piece: si,
          PointMapper: Mc,
          SelectionManager: oi,
          SplittableList: Us,
          StringPiece: ca,
          Text: vr,
          UndoManager: da,
        }),
        jd = Object.freeze({
          __proto__: null,
          ObjectView: ne,
          AttachmentView: Le,
          BlockView: cr,
          DocumentView: ur,
          PieceView: gt,
          PreviewableAttachmentView: Ve,
          TextView: ee,
        });
      let { lang: ga, css: ai, keyNames: qd } = Wt,
        pa = function (o) {
          return function () {
            let e = o.apply(this, arguments);
            e.do(), this.undos || (this.undos = []), this.undos.push(e.undo);
          };
        };
      class Ic extends xt {
        constructor(e, i, a) {
          let c =
            arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
          super(...arguments),
            $e(
              this,
              "makeElementMutable",
              pa(() => ({
                do: () => {
                  this.element.dataset.trixMutable = !0;
                },
                undo: () => delete this.element.dataset.trixMutable,
              })),
            ),
            $e(
              this,
              "addToolbar",
              pa(() => {
                let u = A({
                  tagName: "div",
                  className: ai.attachmentToolbar,
                  data: { trixMutable: !0 },
                  childNodes: A({
                    tagName: "div",
                    className: "trix-button-row",
                    childNodes: A({
                      tagName: "span",
                      className: "trix-button-group trix-button-group--actions",
                      childNodes: A({
                        tagName: "button",
                        className: "trix-button trix-button--remove",
                        textContent: ga.remove,
                        attributes: { title: ga.remove },
                        data: { trixAction: "remove" },
                      }),
                    }),
                  }),
                });
                return (
                  this.attachment.isPreviewable() &&
                    u.appendChild(
                      A({
                        tagName: "div",
                        className: ai.attachmentMetadataContainer,
                        childNodes: A({
                          tagName: "span",
                          className: ai.attachmentMetadata,
                          childNodes: [
                            A({
                              tagName: "span",
                              className: ai.attachmentName,
                              textContent: this.attachment.getFilename(),
                              attributes: {
                                title: this.attachment.getFilename(),
                              },
                            }),
                            A({
                              tagName: "span",
                              className: ai.attachmentSize,
                              textContent:
                                this.attachment.getFormattedFilesize(),
                            }),
                          ],
                        }),
                      }),
                    ),
                  V("click", {
                    onElement: u,
                    withCallback: this.didClickToolbar,
                  }),
                  V("click", {
                    onElement: u,
                    matchingSelector: "[data-trix-action]",
                    withCallback: this.didClickActionButton,
                  }),
                  pt("trix-attachment-before-toolbar", {
                    onElement: this.element,
                    attributes: { toolbar: u, attachment: this.attachment },
                  }),
                  { do: () => this.element.appendChild(u), undo: () => we(u) }
                );
              }),
            ),
            $e(
              this,
              "installCaptionEditor",
              pa(() => {
                let u = A({
                  tagName: "textarea",
                  className: ai.attachmentCaptionEditor,
                  attributes: { placeholder: ga.captionPlaceholder },
                  data: { trixMutable: !0 },
                });
                u.value = this.attachmentPiece.getCaption();
                let g = u.cloneNode();
                g.classList.add("trix-autoresize-clone"), (g.tabIndex = -1);
                let E = function () {
                  (g.value = u.value), (u.style.height = g.scrollHeight + "px");
                };
                V("input", { onElement: u, withCallback: E }),
                  V("input", {
                    onElement: u,
                    withCallback: this.didInputCaption,
                  }),
                  V("keydown", {
                    onElement: u,
                    withCallback: this.didKeyDownCaption,
                  }),
                  V("change", {
                    onElement: u,
                    withCallback: this.didChangeCaption,
                  }),
                  V("blur", {
                    onElement: u,
                    withCallback: this.didBlurCaption,
                  });
                let C = this.element.querySelector("figcaption"),
                  x = C.cloneNode();
                return {
                  do: () => {
                    if (
                      ((C.style.display = "none"),
                      x.appendChild(u),
                      x.appendChild(g),
                      x.classList.add(
                        "".concat(ai.attachmentCaption, "--editing"),
                      ),
                      C.parentElement.insertBefore(x, C),
                      E(),
                      this.options.editCaption)
                    )
                      return lr(() => u.focus());
                  },
                  undo() {
                    we(x), (C.style.display = null);
                  },
                };
              }),
            ),
            (this.didClickToolbar = this.didClickToolbar.bind(this)),
            (this.didClickActionButton = this.didClickActionButton.bind(this)),
            (this.didKeyDownCaption = this.didKeyDownCaption.bind(this)),
            (this.didInputCaption = this.didInputCaption.bind(this)),
            (this.didChangeCaption = this.didChangeCaption.bind(this)),
            (this.didBlurCaption = this.didBlurCaption.bind(this)),
            (this.attachmentPiece = e),
            (this.element = i),
            (this.container = a),
            (this.options = c),
            (this.attachment = this.attachmentPiece.attachment),
            R(this.element) === "a" && (this.element = this.element.firstChild),
            this.install();
        }
        install() {
          this.makeElementMutable(),
            this.addToolbar(),
            this.attachment.isPreviewable() && this.installCaptionEditor();
        }
        uninstall() {
          var e;
          let i = this.undos.pop();
          for (this.savePendingCaption(); i; ) i(), (i = this.undos.pop());
          (e = this.delegate) === null ||
            e === void 0 ||
            e.didUninstallAttachmentEditor(this);
        }
        savePendingCaption() {
          if (this.pendingCaption != null) {
            let u = this.pendingCaption;
            if (((this.pendingCaption = null), u)) {
              var e, i;
              (e = this.delegate) === null ||
                e === void 0 ||
                (i =
                  e.attachmentEditorDidRequestUpdatingAttributesForAttachment) ===
                  null ||
                i === void 0 ||
                i.call(e, { caption: u }, this.attachment);
            } else {
              var a, c;
              (a = this.delegate) === null ||
                a === void 0 ||
                (c =
                  a.attachmentEditorDidRequestRemovingAttributeForAttachment) ===
                  null ||
                c === void 0 ||
                c.call(a, "caption", this.attachment);
            }
          }
        }
        didClickToolbar(e) {
          return e.preventDefault(), e.stopPropagation();
        }
        didClickActionButton(e) {
          var i;
          switch (e.target.getAttribute("data-trix-action")) {
            case "remove":
              return (i = this.delegate) === null || i === void 0
                ? void 0
                : i.attachmentEditorDidRequestRemovalOfAttachment(
                    this.attachment,
                  );
          }
        }
        didKeyDownCaption(e) {
          if (qd[e.keyCode] === "return") {
            var i, a;
            return (
              e.preventDefault(),
              this.savePendingCaption(),
              (i = this.delegate) === null ||
              i === void 0 ||
              (a = i.attachmentEditorDidRequestDeselectingAttachment) ===
                null ||
              a === void 0
                ? void 0
                : a.call(i, this.attachment)
            );
          }
        }
        didInputCaption(e) {
          this.pendingCaption = e.target.value.replace(/\s/g, " ").trim();
        }
        didChangeCaption(e) {
          return this.savePendingCaption();
        }
        didBlurCaption(e) {
          return this.savePendingCaption();
        }
      }
      class Bc extends xt {
        constructor(e, i) {
          super(...arguments),
            (this.didFocus = this.didFocus.bind(this)),
            (this.didBlur = this.didBlur.bind(this)),
            (this.didClickAttachment = this.didClickAttachment.bind(this)),
            (this.element = e),
            (this.composition = i),
            (this.documentView = new ur(this.composition.document, {
              element: this.element,
            })),
            V("focus", {
              onElement: this.element,
              withCallback: this.didFocus,
            }),
            V("blur", { onElement: this.element, withCallback: this.didBlur }),
            V("click", {
              onElement: this.element,
              matchingSelector: "a[contenteditable=false]",
              preventDefault: !0,
            }),
            V("mousedown", {
              onElement: this.element,
              matchingSelector: bt,
              withCallback: this.didClickAttachment,
            }),
            V("click", {
              onElement: this.element,
              matchingSelector: "a".concat(bt),
              preventDefault: !0,
            });
        }
        didFocus(e) {
          var i;
          let a = () => {
            if (!this.focused) {
              var c, u;
              return (
                (this.focused = !0),
                (c = this.delegate) === null ||
                c === void 0 ||
                (u = c.compositionControllerDidFocus) === null ||
                u === void 0
                  ? void 0
                  : u.call(c)
              );
            }
          };
          return (
            ((i = this.blurPromise) === null || i === void 0
              ? void 0
              : i.then(a)) || a()
          );
        }
        didBlur(e) {
          this.blurPromise = new Promise((i) =>
            lr(() => {
              if (!_t(this.element)) {
                var a, c;
                (this.focused = null),
                  (a = this.delegate) === null ||
                    a === void 0 ||
                    (c = a.compositionControllerDidBlur) === null ||
                    c === void 0 ||
                    c.call(a);
              }
              return (this.blurPromise = null), i();
            }),
          );
        }
        didClickAttachment(e, i) {
          var a, c;
          let u = this.findAttachmentForElement(i),
            g = !!wt(e.target, { matchingSelector: "figcaption" });
          return (a = this.delegate) === null ||
            a === void 0 ||
            (c = a.compositionControllerDidSelectAttachment) === null ||
            c === void 0
            ? void 0
            : c.call(a, u, { editCaption: g });
        }
        getSerializableElement() {
          return this.isEditingAttachment()
            ? this.documentView.shadowElement
            : this.element;
        }
        render() {
          var e, i;
          if (
            (this.revision !== this.composition.revision &&
              (this.documentView.setDocument(this.composition.document),
              this.documentView.render(),
              (this.revision = this.composition.revision)),
            this.canSyncDocumentView() && !this.documentView.isSynced())
          ) {
            var a, c, u, g;
            (a = this.delegate) === null ||
              a === void 0 ||
              (c = a.compositionControllerWillSyncDocumentView) === null ||
              c === void 0 ||
              c.call(a),
              this.documentView.sync(),
              (u = this.delegate) === null ||
                u === void 0 ||
                (g = u.compositionControllerDidSyncDocumentView) === null ||
                g === void 0 ||
                g.call(u);
          }
          return (e = this.delegate) === null ||
            e === void 0 ||
            (i = e.compositionControllerDidRender) === null ||
            i === void 0
            ? void 0
            : i.call(e);
        }
        rerenderViewForObject(e) {
          return this.invalidateViewForObject(e), this.render();
        }
        invalidateViewForObject(e) {
          return this.documentView.invalidateViewForObject(e);
        }
        isViewCachingEnabled() {
          return this.documentView.isViewCachingEnabled();
        }
        enableViewCaching() {
          return this.documentView.enableViewCaching();
        }
        disableViewCaching() {
          return this.documentView.disableViewCaching();
        }
        refreshViewCache() {
          return this.documentView.garbageCollectCachedViews();
        }
        isEditingAttachment() {
          return !!this.attachmentEditor;
        }
        installAttachmentEditorForAttachment(e, i) {
          var a;
          if (
            ((a = this.attachmentEditor) === null || a === void 0
              ? void 0
              : a.attachment) === e
          )
            return;
          let c = this.documentView.findElementForObject(e);
          if (!c) return;
          this.uninstallAttachmentEditor();
          let u = this.composition.document.getAttachmentPieceForAttachment(e);
          (this.attachmentEditor = new Ic(u, c, this.element, i)),
            (this.attachmentEditor.delegate = this);
        }
        uninstallAttachmentEditor() {
          var e;
          return (e = this.attachmentEditor) === null || e === void 0
            ? void 0
            : e.uninstall();
        }
        didUninstallAttachmentEditor() {
          return (this.attachmentEditor = null), this.render();
        }
        attachmentEditorDidRequestUpdatingAttributesForAttachment(e, i) {
          var a, c;
          return (
            (a = this.delegate) === null ||
              a === void 0 ||
              (c = a.compositionControllerWillUpdateAttachment) === null ||
              c === void 0 ||
              c.call(a, i),
            this.composition.updateAttributesForAttachment(e, i)
          );
        }
        attachmentEditorDidRequestRemovingAttributeForAttachment(e, i) {
          var a, c;
          return (
            (a = this.delegate) === null ||
              a === void 0 ||
              (c = a.compositionControllerWillUpdateAttachment) === null ||
              c === void 0 ||
              c.call(a, i),
            this.composition.removeAttributeForAttachment(e, i)
          );
        }
        attachmentEditorDidRequestRemovalOfAttachment(e) {
          var i, a;
          return (i = this.delegate) === null ||
            i === void 0 ||
            (a = i.compositionControllerDidRequestRemovalOfAttachment) ===
              null ||
            a === void 0
            ? void 0
            : a.call(i, e);
        }
        attachmentEditorDidRequestDeselectingAttachment(e) {
          var i, a;
          return (i = this.delegate) === null ||
            i === void 0 ||
            (a = i.compositionControllerDidRequestDeselectingAttachment) ===
              null ||
            a === void 0
            ? void 0
            : a.call(i, e);
        }
        canSyncDocumentView() {
          return !this.isEditingAttachment();
        }
        findAttachmentForElement(e) {
          return this.composition.document.getAttachmentById(
            parseInt(e.dataset.trixId, 10),
          );
        }
      }
      class Nc extends xt {}
      let jc = "data-trix-mutable",
        zd = "[".concat(jc, "]"),
        Hd = {
          attributes: !0,
          childList: !0,
          characterData: !0,
          characterDataOldValue: !0,
          subtree: !0,
        };
      class qc extends xt {
        constructor(e) {
          super(e),
            (this.didMutate = this.didMutate.bind(this)),
            (this.element = e),
            (this.observer = new window.MutationObserver(this.didMutate)),
            this.start();
        }
        start() {
          return this.reset(), this.observer.observe(this.element, Hd);
        }
        stop() {
          return this.observer.disconnect();
        }
        didMutate(e) {
          if (
            (this.mutations.push(
              ...Array.from(this.findSignificantMutations(e) || []),
            ),
            this.mutations.length)
          ) {
            var i, a;
            return (
              (i = this.delegate) === null ||
                i === void 0 ||
                (a = i.elementDidMutate) === null ||
                a === void 0 ||
                a.call(i, this.getMutationSummary()),
              this.reset()
            );
          }
        }
        reset() {
          this.mutations = [];
        }
        findSignificantMutations(e) {
          return e.filter((i) => this.mutationIsSignificant(i));
        }
        mutationIsSignificant(e) {
          if (this.nodeIsMutable(e.target)) return !1;
          for (let i of Array.from(this.nodesModifiedByMutation(e)))
            if (this.nodeIsSignificant(i)) return !0;
          return !1;
        }
        nodeIsSignificant(e) {
          return e !== this.element && !this.nodeIsMutable(e) && !Ze(e);
        }
        nodeIsMutable(e) {
          return wt(e, { matchingSelector: zd });
        }
        nodesModifiedByMutation(e) {
          let i = [];
          switch (e.type) {
            case "attributes":
              e.attributeName !== jc && i.push(e.target);
              break;
            case "characterData":
              i.push(e.target.parentNode), i.push(e.target);
              break;
            case "childList":
              i.push(...Array.from(e.addedNodes || [])),
                i.push(...Array.from(e.removedNodes || []));
              break;
          }
          return i;
        }
        getMutationSummary() {
          return this.getTextMutationSummary();
        }
        getTextMutationSummary() {
          let { additions: e, deletions: i } =
              this.getTextChangesFromCharacterData(),
            a = this.getTextChangesFromChildList();
          Array.from(a.additions).forEach((E) => {
            Array.from(e).includes(E) || e.push(E);
          }),
            i.push(...Array.from(a.deletions || []));
          let c = {},
            u = e.join("");
          u && (c.textAdded = u);
          let g = i.join("");
          return g && (c.textDeleted = g), c;
        }
        getMutationsByType(e) {
          return Array.from(this.mutations).filter((i) => i.type === e);
        }
        getTextChangesFromChildList() {
          let e,
            i,
            a = [],
            c = [];
          Array.from(this.getMutationsByType("childList")).forEach((C) => {
            a.push(...Array.from(C.addedNodes || [])),
              c.push(...Array.from(C.removedNodes || []));
          }),
            a.length === 0 && c.length === 1 && oe(c[0])
              ? ((e = []),
                (i = [
                  `
`,
                ]))
              : ((e = ba(a)), (i = ba(c)));
          let g = e.filter((C, x) => C !== i[x]).map(ri),
            E = i.filter((C, x) => C !== e[x]).map(ri);
          return { additions: g, deletions: E };
        }
        getTextChangesFromCharacterData() {
          let e,
            i,
            a = this.getMutationsByType("characterData");
          if (a.length) {
            let c = a[0],
              u = a[a.length - 1],
              g = ri(c.oldValue),
              E = ri(u.target.data),
              C = m(g, E);
            (e = C.added), (i = C.removed);
          }
          return { additions: e ? [e] : [], deletions: i ? [i] : [] };
        }
      }
      let ba = function () {
        let o =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [],
          e = [];
        for (let i of Array.from(o))
          switch (i.nodeType) {
            case Node.TEXT_NODE:
              e.push(i.data);
              break;
            case Node.ELEMENT_NODE:
              R(i) === "br"
                ? e.push(`
`)
                : e.push(...Array.from(ba(i.childNodes) || []));
              break;
          }
        return e;
      };
      class zc extends Xt {
        constructor(e) {
          super(...arguments), (this.file = e);
        }
        perform(e) {
          let i = new FileReader();
          return (
            (i.onerror = () => e(!1)),
            (i.onload = () => {
              i.onerror = null;
              try {
                i.abort();
              } catch (a) {}
              return e(!0, this.file);
            }),
            i.readAsArrayBuffer(this.file)
          );
        }
      }
      class Wd {
        constructor(e) {
          this.element = e;
        }
        shouldIgnore(e) {
          return Vt.samsungAndroid
            ? ((this.previousEvent = this.event),
              (this.event = e),
              this.checkSamsungKeyboardBuggyModeStart(),
              this.checkSamsungKeyboardBuggyModeEnd(),
              this.buggyMode)
            : !1;
        }
        checkSamsungKeyboardBuggyModeStart() {
          this.insertingLongTextAfterUnidentifiedChar() &&
            Ud(this.element.innerText, this.event.data) &&
            ((this.buggyMode = !0), this.event.preventDefault());
        }
        checkSamsungKeyboardBuggyModeEnd() {
          this.buggyMode &&
            this.event.inputType !== "insertText" &&
            (this.buggyMode = !1);
        }
        insertingLongTextAfterUnidentifiedChar() {
          var e;
          return (
            this.isBeforeInputInsertText() &&
            this.previousEventWasUnidentifiedKeydown() &&
            ((e = this.event.data) === null || e === void 0
              ? void 0
              : e.length) > 50
          );
        }
        isBeforeInputInsertText() {
          return (
            this.event.type === "beforeinput" &&
            this.event.inputType === "insertText"
          );
        }
        previousEventWasUnidentifiedKeydown() {
          var e, i;
          return (
            ((e = this.previousEvent) === null || e === void 0
              ? void 0
              : e.type) === "keydown" &&
            ((i = this.previousEvent) === null || i === void 0
              ? void 0
              : i.key) === "Unidentified"
          );
        }
      }
      let Ud = (o, e) => Hc(o) === Hc(e),
        Vd = new RegExp(
          "(".concat(U, "|").concat(je, "|").concat(Te, "|\\s)+"),
          "g",
        ),
        Hc = (o) => o.replace(Vd, " ").trim();
      class Vs extends xt {
        constructor(e) {
          super(...arguments),
            (this.element = e),
            (this.mutationObserver = new qc(this.element)),
            (this.mutationObserver.delegate = this),
            (this.flakyKeyboardDetector = new Wd(this.element));
          for (let i in this.constructor.events)
            V(i, { onElement: this.element, withCallback: this.handlerFor(i) });
        }
        elementDidMutate(e) {}
        editorWillSyncDocumentView() {
          return this.mutationObserver.stop();
        }
        editorDidSyncDocumentView() {
          return this.mutationObserver.start();
        }
        requestRender() {
          var e, i;
          return (e = this.delegate) === null ||
            e === void 0 ||
            (i = e.inputControllerDidRequestRender) === null ||
            i === void 0
            ? void 0
            : i.call(e);
        }
        requestReparse() {
          var e, i;
          return (
            (e = this.delegate) === null ||
              e === void 0 ||
              (i = e.inputControllerDidRequestReparse) === null ||
              i === void 0 ||
              i.call(e),
            this.requestRender()
          );
        }
        attachFiles(e) {
          let i = Array.from(e).map((a) => new zc(a));
          return Promise.all(i).then((a) => {
            this.handleInput(function () {
              var c, u;
              return (
                (c = this.delegate) === null ||
                  c === void 0 ||
                  c.inputControllerWillAttachFiles(),
                (u = this.responder) === null ||
                  u === void 0 ||
                  u.insertFiles(a),
                this.requestRender()
              );
            });
          });
        }
        handlerFor(e) {
          return (i) => {
            i.defaultPrevented ||
              this.handleInput(() => {
                if (!_t(this.element)) {
                  if (this.flakyKeyboardDetector.shouldIgnore(i)) return;
                  (this.eventName = e),
                    this.constructor.events[e].call(this, i);
                }
              });
          };
        }
        handleInput(e) {
          try {
            var i;
            (i = this.delegate) === null ||
              i === void 0 ||
              i.inputControllerWillHandleInput(),
              e.call(this);
          } finally {
            var a;
            (a = this.delegate) === null ||
              a === void 0 ||
              a.inputControllerDidHandleInput();
          }
        }
        createLinkHTML(e, i) {
          let a = document.createElement("a");
          return (a.href = e), (a.textContent = i || e), a.outerHTML;
        }
      }
      $e(Vs, "events", {});
      var va, Wc;
      let { browser: $d, keyNames: Uc } = Wt,
        Xd = 0;
      class Ir extends Vs {
        constructor() {
          super(...arguments), this.resetInputSummary();
        }
        setInputSummary() {
          let e =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          this.inputSummary.eventName = this.eventName;
          for (let i in e) {
            let a = e[i];
            this.inputSummary[i] = a;
          }
          return this.inputSummary;
        }
        resetInputSummary() {
          this.inputSummary = {};
        }
        reset() {
          return this.resetInputSummary(), Mr.reset();
        }
        elementDidMutate(e) {
          if (this.isComposing()) {
            var i, a;
            return (i = this.delegate) === null ||
              i === void 0 ||
              (a = i.inputControllerDidAllowUnhandledInput) === null ||
              a === void 0
              ? void 0
              : a.call(i);
          } else
            return this.handleInput(function () {
              return (
                this.mutationIsSignificant(e) &&
                  (this.mutationIsExpected(e)
                    ? this.requestRender()
                    : this.requestReparse()),
                this.reset()
              );
            });
        }
        mutationIsExpected(e) {
          let { textAdded: i, textDeleted: a } = e;
          if (this.inputSummary.preferDocument) return !0;
          let c =
              i != null
                ? i === this.inputSummary.textAdded
                : !this.inputSummary.textAdded,
            u =
              a != null
                ? this.inputSummary.didDelete
                : !this.inputSummary.didDelete,
            g =
              [
                `
`,
                ` 
`,
              ].includes(i) && !c,
            E =
              a ===
                `
` && !u;
          if ((g && !E) || (E && !g)) {
            let _ = this.getSelectedRange();
            if (_) {
              var x;
              let O = g
                ? i.replace(/\n$/, "").length || -1
                : (i == null ? void 0 : i.length) || 1;
              if (
                (x = this.responder) !== null &&
                x !== void 0 &&
                x.positionIsBlockBreak(_[1] + O)
              )
                return !0;
            }
          }
          return c && u;
        }
        mutationIsSignificant(e) {
          var i;
          let a = Object.keys(e).length > 0,
            c =
              ((i = this.compositionInput) === null || i === void 0
                ? void 0
                : i.getEndData()) === "";
          return a || !c;
        }
        getCompositionInput() {
          if (this.isComposing()) return this.compositionInput;
          this.compositionInput = new $r(this);
        }
        isComposing() {
          return this.compositionInput && !this.compositionInput.isEnded();
        }
        deleteInDirection(e, i) {
          var a;
          if (
            ((a = this.responder) === null || a === void 0
              ? void 0
              : a.deleteInDirection(e)) === !1
          ) {
            if (i) return i.preventDefault(), this.requestRender();
          } else return this.setInputSummary({ didDelete: !0 });
        }
        serializeSelectionToDataTransfer(e) {
          var i;
          if (!Ti(e)) return;
          let a =
            (i = this.responder) === null || i === void 0
              ? void 0
              : i.getSelectedDocument().toSerializableDocument();
          return (
            e.setData("application/x-trix-document", JSON.stringify(a)),
            e.setData("text/html", ur.render(a).innerHTML),
            e.setData("text/plain", a.toString().replace(/\n$/, "")),
            !0
          );
        }
        canAcceptDataTransfer(e) {
          let i = {};
          return (
            Array.from((e == null ? void 0 : e.types) || []).forEach((a) => {
              i[a] = !0;
            }),
            i.Files ||
              i["application/x-trix-document"] ||
              i["text/html"] ||
              i["text/plain"]
          );
        }
        getPastedHTMLUsingHiddenElement(e) {
          let i = this.getSelectedRange(),
            a = {
              position: "absolute",
              left: "".concat(window.pageXOffset, "px"),
              top: "".concat(window.pageYOffset, "px"),
              opacity: 0,
            },
            c = A({ style: a, tagName: "div", editable: !0 });
          return (
            document.body.appendChild(c),
            c.focus(),
            requestAnimationFrame(() => {
              let u = c.innerHTML;
              return we(c), this.setSelectedRange(i), e(u);
            })
          );
        }
      }
      $e(Ir, "events", {
        keydown(o) {
          this.isComposing() || this.resetInputSummary(),
            (this.inputSummary.didInput = !0);
          let e = Uc[o.keyCode];
          if (e) {
            var i;
            let c = this.keys;
            ["ctrl", "alt", "shift", "meta"].forEach((u) => {
              if (o["".concat(u, "Key")]) {
                var g;
                u === "ctrl" && (u = "control"),
                  (c = (g = c) === null || g === void 0 ? void 0 : g[u]);
              }
            }),
              ((i = c) === null || i === void 0 ? void 0 : i[e]) != null &&
                (this.setInputSummary({ keyName: e }),
                Mr.reset(),
                c[e].call(this, o));
          }
          if (Rs(o)) {
            let c = String.fromCharCode(o.keyCode).toLowerCase();
            if (c) {
              var a;
              let u = ["alt", "shift"]
                .map((g) => {
                  if (o["".concat(g, "Key")]) return g;
                })
                .filter((g) => g);
              u.push(c),
                (a = this.delegate) !== null &&
                  a !== void 0 &&
                  a.inputControllerDidReceiveKeyboardCommand(u) &&
                  o.preventDefault();
            }
          }
        },
        keypress(o) {
          if (
            this.inputSummary.eventName != null ||
            o.metaKey ||
            (o.ctrlKey && !o.altKey)
          )
            return;
          let e = Yd(o);
          if (e) {
            var i, a;
            return (
              (i = this.delegate) === null ||
                i === void 0 ||
                i.inputControllerWillPerformTyping(),
              (a = this.responder) === null ||
                a === void 0 ||
                a.insertString(e),
              this.setInputSummary({
                textAdded: e,
                didDelete: this.selectionIsExpanded(),
              })
            );
          }
        },
        textInput(o) {
          let { data: e } = o,
            { textAdded: i } = this.inputSummary;
          if (i && i !== e && i.toUpperCase() === e) {
            var a;
            let c = this.getSelectedRange();
            return (
              this.setSelectedRange([c[0], c[1] + i.length]),
              (a = this.responder) === null ||
                a === void 0 ||
                a.insertString(e),
              this.setInputSummary({ textAdded: e }),
              this.setSelectedRange(c)
            );
          }
        },
        dragenter(o) {
          o.preventDefault();
        },
        dragstart(o) {
          var e, i;
          return (
            this.serializeSelectionToDataTransfer(o.dataTransfer),
            (this.draggedRange = this.getSelectedRange()),
            (e = this.delegate) === null ||
            e === void 0 ||
            (i = e.inputControllerDidStartDrag) === null ||
            i === void 0
              ? void 0
              : i.call(e)
          );
        },
        dragover(o) {
          if (this.draggedRange || this.canAcceptDataTransfer(o.dataTransfer)) {
            o.preventDefault();
            let a = { x: o.clientX, y: o.clientY };
            if (!ti(a, this.draggingPoint)) {
              var e, i;
              return (
                (this.draggingPoint = a),
                (e = this.delegate) === null ||
                e === void 0 ||
                (i = e.inputControllerDidReceiveDragOverPoint) === null ||
                i === void 0
                  ? void 0
                  : i.call(e, this.draggingPoint)
              );
            }
          }
        },
        dragend(o) {
          var e, i;
          (e = this.delegate) === null ||
            e === void 0 ||
            (i = e.inputControllerDidCancelDrag) === null ||
            i === void 0 ||
            i.call(e),
            (this.draggedRange = null),
            (this.draggingPoint = null);
        },
        drop(o) {
          var e, i;
          o.preventDefault();
          let a =
              (e = o.dataTransfer) === null || e === void 0 ? void 0 : e.files,
            c = o.dataTransfer.getData("application/x-trix-document"),
            u = { x: o.clientX, y: o.clientY };
          if (
            ((i = this.responder) === null ||
              i === void 0 ||
              i.setLocationRangeFromPointRange(u),
            a != null && a.length)
          )
            this.attachFiles(a);
          else if (this.draggedRange) {
            var g, E;
            (g = this.delegate) === null ||
              g === void 0 ||
              g.inputControllerWillMoveText(),
              (E = this.responder) === null ||
                E === void 0 ||
                E.moveTextFromRange(this.draggedRange),
              (this.draggedRange = null),
              this.requestRender();
          } else if (c) {
            var C;
            let x = rr.fromJSONString(c);
            (C = this.responder) === null ||
              C === void 0 ||
              C.insertDocument(x),
              this.requestRender();
          }
          (this.draggedRange = null), (this.draggingPoint = null);
        },
        cut(o) {
          var e;
          if (
            (e = this.responder) !== null &&
            e !== void 0 &&
            e.selectionIsExpanded()
          ) {
            var i;
            if (
              (this.serializeSelectionToDataTransfer(o.clipboardData) &&
                o.preventDefault(),
              (i = this.delegate) === null ||
                i === void 0 ||
                i.inputControllerWillCutText(),
              this.deleteInDirection("backward"),
              o.defaultPrevented)
            )
              return this.requestRender();
          }
        },
        copy(o) {
          var e;
          (e = this.responder) !== null &&
            e !== void 0 &&
            e.selectionIsExpanded() &&
            this.serializeSelectionToDataTransfer(o.clipboardData) &&
            o.preventDefault();
        },
        paste(o) {
          let e = o.clipboardData || o.testClipboardData,
            i = { clipboard: e };
          if (!e || Jd(o)) {
            this.getPastedHTMLUsingHiddenElement((at) => {
              var kt, Lt, Ft;
              return (
                (i.type = "text/html"),
                (i.html = at),
                (kt = this.delegate) === null ||
                  kt === void 0 ||
                  kt.inputControllerWillPaste(i),
                (Lt = this.responder) === null ||
                  Lt === void 0 ||
                  Lt.insertHTML(i.html),
                this.requestRender(),
                (Ft = this.delegate) === null || Ft === void 0
                  ? void 0
                  : Ft.inputControllerDidPaste(i)
              );
            });
            return;
          }
          let a = e.getData("URL"),
            c = e.getData("text/html"),
            u = e.getData("public.url-name");
          if (a) {
            var g, E, C;
            let at;
            (i.type = "text/html"),
              u ? (at = T(u).trim()) : (at = a),
              (i.html = this.createLinkHTML(a, at)),
              (g = this.delegate) === null ||
                g === void 0 ||
                g.inputControllerWillPaste(i),
              this.setInputSummary({
                textAdded: at,
                didDelete: this.selectionIsExpanded(),
              }),
              (E = this.responder) === null ||
                E === void 0 ||
                E.insertHTML(i.html),
              this.requestRender(),
              (C = this.delegate) === null ||
                C === void 0 ||
                C.inputControllerDidPaste(i);
          } else if (Ls(e)) {
            var x, _, O;
            (i.type = "text/plain"),
              (i.string = e.getData("text/plain")),
              (x = this.delegate) === null ||
                x === void 0 ||
                x.inputControllerWillPaste(i),
              this.setInputSummary({
                textAdded: i.string,
                didDelete: this.selectionIsExpanded(),
              }),
              (_ = this.responder) === null ||
                _ === void 0 ||
                _.insertString(i.string),
              this.requestRender(),
              (O = this.delegate) === null ||
                O === void 0 ||
                O.inputControllerDidPaste(i);
          } else if (c) {
            var G, X, et;
            (i.type = "text/html"),
              (i.html = c),
              (G = this.delegate) === null ||
                G === void 0 ||
                G.inputControllerWillPaste(i),
              (X = this.responder) === null ||
                X === void 0 ||
                X.insertHTML(i.html),
              this.requestRender(),
              (et = this.delegate) === null ||
                et === void 0 ||
                et.inputControllerDidPaste(i);
          } else if (Array.from(e.types).includes("Files")) {
            var J, rt;
            let at =
              (J = e.items) === null ||
              J === void 0 ||
              (J = J[0]) === null ||
              J === void 0 ||
              (rt = J.getAsFile) === null ||
              rt === void 0
                ? void 0
                : rt.call(J);
            if (at) {
              var it, Q, ot;
              let kt = Kd(at);
              !at.name &&
                kt &&
                (at.name = "pasted-file-".concat(++Xd, ".").concat(kt)),
                (i.type = "File"),
                (i.file = at),
                (it = this.delegate) === null ||
                  it === void 0 ||
                  it.inputControllerWillAttachFiles(),
                (Q = this.responder) === null ||
                  Q === void 0 ||
                  Q.insertFile(i.file),
                this.requestRender(),
                (ot = this.delegate) === null ||
                  ot === void 0 ||
                  ot.inputControllerDidPaste(i);
            }
          }
          o.preventDefault();
        },
        compositionstart(o) {
          return this.getCompositionInput().start(o.data);
        },
        compositionupdate(o) {
          return this.getCompositionInput().update(o.data);
        },
        compositionend(o) {
          return this.getCompositionInput().end(o.data);
        },
        beforeinput(o) {
          this.inputSummary.didInput = !0;
        },
        input(o) {
          return (this.inputSummary.didInput = !0), o.stopPropagation();
        },
      }),
        $e(Ir, "keys", {
          backspace(o) {
            var e;
            return (
              (e = this.delegate) === null ||
                e === void 0 ||
                e.inputControllerWillPerformTyping(),
              this.deleteInDirection("backward", o)
            );
          },
          delete(o) {
            var e;
            return (
              (e = this.delegate) === null ||
                e === void 0 ||
                e.inputControllerWillPerformTyping(),
              this.deleteInDirection("forward", o)
            );
          },
          return(o) {
            var e, i;
            return (
              this.setInputSummary({ preferDocument: !0 }),
              (e = this.delegate) === null ||
                e === void 0 ||
                e.inputControllerWillPerformTyping(),
              (i = this.responder) === null || i === void 0
                ? void 0
                : i.insertLineBreak()
            );
          },
          tab(o) {
            var e;
            if (
              (e = this.responder) !== null &&
              e !== void 0 &&
              e.canIncreaseNestingLevel()
            ) {
              var i;
              (i = this.responder) === null ||
                i === void 0 ||
                i.increaseNestingLevel(),
                this.requestRender(),
                o.preventDefault();
            }
          },
          left(o) {
            if (this.selectionIsInCursorTarget()) {
              var e;
              return (
                o.preventDefault(),
                (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.moveCursorInDirection("backward")
              );
            }
          },
          right(o) {
            if (this.selectionIsInCursorTarget()) {
              var e;
              return (
                o.preventDefault(),
                (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.moveCursorInDirection("forward")
              );
            }
          },
          control: {
            d(o) {
              var e;
              return (
                (e = this.delegate) === null ||
                  e === void 0 ||
                  e.inputControllerWillPerformTyping(),
                this.deleteInDirection("forward", o)
              );
            },
            h(o) {
              var e;
              return (
                (e = this.delegate) === null ||
                  e === void 0 ||
                  e.inputControllerWillPerformTyping(),
                this.deleteInDirection("backward", o)
              );
            },
            o(o) {
              var e, i;
              return (
                o.preventDefault(),
                (e = this.delegate) === null ||
                  e === void 0 ||
                  e.inputControllerWillPerformTyping(),
                (i = this.responder) === null ||
                  i === void 0 ||
                  i.insertString(
                    `
`,
                    { updatePosition: !1 },
                  ),
                this.requestRender()
              );
            },
          },
          shift: {
            return(o) {
              var e, i;
              (e = this.delegate) === null ||
                e === void 0 ||
                e.inputControllerWillPerformTyping(),
                (i = this.responder) === null ||
                  i === void 0 ||
                  i.insertString(`
`),
                this.requestRender(),
                o.preventDefault();
            },
            tab(o) {
              var e;
              if (
                (e = this.responder) !== null &&
                e !== void 0 &&
                e.canDecreaseNestingLevel()
              ) {
                var i;
                (i = this.responder) === null ||
                  i === void 0 ||
                  i.decreaseNestingLevel(),
                  this.requestRender(),
                  o.preventDefault();
              }
            },
            left(o) {
              if (this.selectionIsInCursorTarget())
                return (
                  o.preventDefault(),
                  this.expandSelectionInDirection("backward")
                );
            },
            right(o) {
              if (this.selectionIsInCursorTarget())
                return (
                  o.preventDefault(), this.expandSelectionInDirection("forward")
                );
            },
          },
          alt: {
            backspace(o) {
              var e;
              return (
                this.setInputSummary({ preferDocument: !1 }),
                (e = this.delegate) === null || e === void 0
                  ? void 0
                  : e.inputControllerWillPerformTyping()
              );
            },
          },
          meta: {
            backspace(o) {
              var e;
              return (
                this.setInputSummary({ preferDocument: !1 }),
                (e = this.delegate) === null || e === void 0
                  ? void 0
                  : e.inputControllerWillPerformTyping()
              );
            },
          },
        }),
        Ir.proxyMethod("responder?.getSelectedRange"),
        Ir.proxyMethod("responder?.setSelectedRange"),
        Ir.proxyMethod("responder?.expandSelectionInDirection"),
        Ir.proxyMethod("responder?.selectionIsInCursorTarget"),
        Ir.proxyMethod("responder?.selectionIsExpanded");
      let Kd = (o) => {
          var e;
          return (e = o.type) === null ||
            e === void 0 ||
            (e = e.match(/\/(\w+)$/)) === null ||
            e === void 0
            ? void 0
            : e[1];
        },
        Gd = !!(
          (va = (Wc = " ").codePointAt) !== null &&
          va !== void 0 &&
          va.call(Wc, 0)
        ),
        Yd = function (o) {
          if (o.key && Gd && o.key.codePointAt(0) === o.keyCode) return o.key;
          {
            let e;
            if (
              (o.which === null
                ? (e = o.keyCode)
                : o.which !== 0 && o.charCode !== 0 && (e = o.charCode),
              e != null && Uc[e] !== "escape")
            )
              return Fe.fromCodepoints([e]).toString();
          }
        },
        Jd = function (o) {
          let e = o.clipboardData;
          if (e)
            if (e.types.includes("text/html")) {
              for (let i of e.types) {
                let a = /^CorePasteboardFlavorType/.test(i),
                  c = /^dyn\./.test(i) && e.getData(i);
                if (a || c) return !0;
              }
              return !1;
            } else {
              let i = e.types.includes("com.apple.webarchive"),
                a = e.types.includes("com.apple.flat-rtfd");
              return i || a;
            }
        };
      class $r extends xt {
        constructor(e) {
          super(...arguments),
            (this.inputController = e),
            (this.responder = this.inputController.responder),
            (this.delegate = this.inputController.delegate),
            (this.inputSummary = this.inputController.inputSummary),
            (this.data = {});
        }
        start(e) {
          if (((this.data.start = e), this.isSignificant())) {
            var i;
            if (
              this.inputSummary.eventName === "keypress" &&
              this.inputSummary.textAdded
            ) {
              var a;
              (a = this.responder) === null ||
                a === void 0 ||
                a.deleteInDirection("left");
            }
            this.selectionIsExpanded() ||
              (this.insertPlaceholder(), this.requestRender()),
              (this.range =
                (i = this.responder) === null || i === void 0
                  ? void 0
                  : i.getSelectedRange());
          }
        }
        update(e) {
          if (((this.data.update = e), this.isSignificant())) {
            let i = this.selectPlaceholder();
            i && (this.forgetPlaceholder(), (this.range = i));
          }
        }
        end(e) {
          if (((this.data.end = e), this.isSignificant())) {
            if ((this.forgetPlaceholder(), this.canApplyToDocument())) {
              var i, a, c, u;
              return (
                this.setInputSummary({ preferDocument: !0, didInput: !1 }),
                (i = this.delegate) === null ||
                  i === void 0 ||
                  i.inputControllerWillPerformTyping(),
                (a = this.responder) === null ||
                  a === void 0 ||
                  a.setSelectedRange(this.range),
                (c = this.responder) === null ||
                  c === void 0 ||
                  c.insertString(this.data.end),
                (u = this.responder) === null || u === void 0
                  ? void 0
                  : u.setSelectedRange(this.range[0] + this.data.end.length)
              );
            } else if (this.data.start != null || this.data.update != null)
              return this.requestReparse(), this.inputController.reset();
          } else return this.inputController.reset();
        }
        getEndData() {
          return this.data.end;
        }
        isEnded() {
          return this.getEndData() != null;
        }
        isSignificant() {
          return $d.composesExistingText ? this.inputSummary.didInput : !0;
        }
        canApplyToDocument() {
          var e, i;
          return (
            ((e = this.data.start) === null || e === void 0
              ? void 0
              : e.length) === 0 &&
            ((i = this.data.end) === null || i === void 0 ? void 0 : i.length) >
              0 &&
            this.range
          );
        }
      }
      $r.proxyMethod("inputController.setInputSummary"),
        $r.proxyMethod("inputController.requestRender"),
        $r.proxyMethod("inputController.requestReparse"),
        $r.proxyMethod("responder?.selectionIsExpanded"),
        $r.proxyMethod("responder?.insertPlaceholder"),
        $r.proxyMethod("responder?.selectPlaceholder"),
        $r.proxyMethod("responder?.forgetPlaceholder");
      class nn extends Vs {
        constructor() {
          super(...arguments), (this.render = this.render.bind(this));
        }
        elementDidMutate() {
          if (this.scheduledRender) {
            if (this.composing) {
              var e, i;
              return (e = this.delegate) === null ||
                e === void 0 ||
                (i = e.inputControllerDidAllowUnhandledInput) === null ||
                i === void 0
                ? void 0
                : i.call(e);
            }
          } else return this.reparse();
        }
        scheduleRender() {
          return this.scheduledRender
            ? this.scheduledRender
            : (this.scheduledRender = requestAnimationFrame(this.render));
        }
        render() {
          var e;
          if (
            (cancelAnimationFrame(this.scheduledRender),
            (this.scheduledRender = null),
            !this.composing)
          ) {
            var i;
            (i = this.delegate) === null || i === void 0 || i.render();
          }
          (e = this.afterRender) === null || e === void 0 || e.call(this),
            (this.afterRender = null);
        }
        reparse() {
          var e;
          return (e = this.delegate) === null || e === void 0
            ? void 0
            : e.reparse();
        }
        insertString() {
          var e;
          let i =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : "",
            a = arguments.length > 1 ? arguments[1] : void 0;
          return (
            (e = this.delegate) === null ||
              e === void 0 ||
              e.inputControllerWillPerformTyping(),
            this.withTargetDOMRange(function () {
              var c;
              return (c = this.responder) === null || c === void 0
                ? void 0
                : c.insertString(i, a);
            })
          );
        }
        toggleAttributeIfSupported(e) {
          if (Ai().includes(e)) {
            var i;
            return (
              (i = this.delegate) === null ||
                i === void 0 ||
                i.inputControllerWillPerformFormatting(e),
              this.withTargetDOMRange(function () {
                var a;
                return (a = this.responder) === null || a === void 0
                  ? void 0
                  : a.toggleCurrentAttribute(e);
              })
            );
          }
        }
        activateAttributeIfSupported(e, i) {
          if (Ai().includes(e)) {
            var a;
            return (
              (a = this.delegate) === null ||
                a === void 0 ||
                a.inputControllerWillPerformFormatting(e),
              this.withTargetDOMRange(function () {
                var c;
                return (c = this.responder) === null || c === void 0
                  ? void 0
                  : c.setCurrentAttribute(e, i);
              })
            );
          }
        }
        deleteInDirection(e) {
          let { recordUndoEntry: i } =
            arguments.length > 1 && arguments[1] !== void 0
              ? arguments[1]
              : { recordUndoEntry: !0 };
          if (i) {
            var a;
            (a = this.delegate) === null ||
              a === void 0 ||
              a.inputControllerWillPerformTyping();
          }
          let c = () => {
              var g;
              return (g = this.responder) === null || g === void 0
                ? void 0
                : g.deleteInDirection(e);
            },
            u = this.getTargetDOMRange({ minLength: 2 });
          return u ? this.withTargetDOMRange(u, c) : c();
        }
        withTargetDOMRange(e, i) {
          if (
            (typeof e == "function" &&
              ((i = e), (e = this.getTargetDOMRange())),
            e)
          ) {
            var a;
            return (a = this.responder) === null || a === void 0
              ? void 0
              : a.withTargetDOMRange(e, i.bind(this));
          } else return Mr.reset(), i.call(this);
        }
        getTargetDOMRange() {
          var e, i;
          let { minLength: a } =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : { minLength: 0 },
            c =
              (e = (i = this.event).getTargetRanges) === null || e === void 0
                ? void 0
                : e.call(i);
          if (c && c.length) {
            let u = Qd(c[0]);
            if (a === 0 || u.toString().length >= a) return u;
          }
        }
        withEvent(e, i) {
          let a;
          this.event = e;
          try {
            a = i.call(this);
          } finally {
            this.event = null;
          }
          return a;
        }
      }
      $e(nn, "events", {
        keydown(o) {
          if (Rs(o)) {
            var e;
            let i = ef(o);
            (e = this.delegate) !== null &&
              e !== void 0 &&
              e.inputControllerDidReceiveKeyboardCommand(i) &&
              o.preventDefault();
          } else {
            let i = o.key;
            o.altKey && (i += "+Alt"), o.shiftKey && (i += "+Shift");
            let a = this.constructor.keys[i];
            if (a) return this.withEvent(o, a);
          }
        },
        paste(o) {
          var e;
          let i,
            a =
              (e = o.clipboardData) === null || e === void 0
                ? void 0
                : e.getData("URL");
          if (Zd(o))
            return o.preventDefault(), this.attachFiles(o.clipboardData.files);
          if (tf(o)) {
            var c, u, g;
            return (
              o.preventDefault(),
              (i = {
                type: "text/plain",
                string: o.clipboardData.getData("text/plain"),
              }),
              (c = this.delegate) === null ||
                c === void 0 ||
                c.inputControllerWillPaste(i),
              (u = this.responder) === null ||
                u === void 0 ||
                u.insertString(i.string),
              this.render(),
              (g = this.delegate) === null || g === void 0
                ? void 0
                : g.inputControllerDidPaste(i)
            );
          } else if (a) {
            var E, C, x;
            return (
              o.preventDefault(),
              (i = { type: "text/html", html: this.createLinkHTML(a) }),
              (E = this.delegate) === null ||
                E === void 0 ||
                E.inputControllerWillPaste(i),
              (C = this.responder) === null ||
                C === void 0 ||
                C.insertHTML(i.html),
              this.render(),
              (x = this.delegate) === null || x === void 0
                ? void 0
                : x.inputControllerDidPaste(i)
            );
          }
        },
        beforeinput(o) {
          let e = this.constructor.inputTypes[o.inputType];
          e && (this.withEvent(o, e), this.scheduleRender());
        },
        input(o) {
          Mr.reset();
        },
        dragstart(o) {
          var e;
          if (
            (e = this.responder) !== null &&
            e !== void 0 &&
            e.selectionContainsAttachments()
          ) {
            var i;
            o.dataTransfer.setData("application/x-trix-dragging", !0),
              (this.dragging = {
                range:
                  (i = this.responder) === null || i === void 0
                    ? void 0
                    : i.getSelectedRange(),
                point: wa(o),
              });
          }
        },
        dragenter(o) {
          ya(o) && o.preventDefault();
        },
        dragover(o) {
          if (this.dragging) {
            o.preventDefault();
            let i = wa(o);
            if (!ti(i, this.dragging.point)) {
              var e;
              return (
                (this.dragging.point = i),
                (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.setLocationRangeFromPointRange(i)
              );
            }
          } else ya(o) && o.preventDefault();
        },
        drop(o) {
          if (this.dragging) {
            var e, i;
            return (
              o.preventDefault(),
              (e = this.delegate) === null ||
                e === void 0 ||
                e.inputControllerWillMoveText(),
              (i = this.responder) === null ||
                i === void 0 ||
                i.moveTextFromRange(this.dragging.range),
              (this.dragging = null),
              this.scheduleRender()
            );
          } else if (ya(o)) {
            var a;
            o.preventDefault();
            let c = wa(o);
            return (
              (a = this.responder) === null ||
                a === void 0 ||
                a.setLocationRangeFromPointRange(c),
              this.attachFiles(o.dataTransfer.files)
            );
          }
        },
        dragend() {
          if (this.dragging) {
            var o;
            (o = this.responder) === null ||
              o === void 0 ||
              o.setSelectedRange(this.dragging.range),
              (this.dragging = null);
          }
        },
        compositionend(o) {
          this.composing &&
            ((this.composing = !1), Vt.recentAndroid || this.scheduleRender());
        },
      }),
        $e(nn, "keys", {
          ArrowLeft() {
            var o;
            if (
              (o = this.responder) !== null &&
              o !== void 0 &&
              o.shouldManageMovingCursorInDirection("backward")
            ) {
              var e;
              return (
                this.event.preventDefault(),
                (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.moveCursorInDirection("backward")
              );
            }
          },
          ArrowRight() {
            var o;
            if (
              (o = this.responder) !== null &&
              o !== void 0 &&
              o.shouldManageMovingCursorInDirection("forward")
            ) {
              var e;
              return (
                this.event.preventDefault(),
                (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.moveCursorInDirection("forward")
              );
            }
          },
          Backspace() {
            var o;
            if (
              (o = this.responder) !== null &&
              o !== void 0 &&
              o.shouldManageDeletingInDirection("backward")
            ) {
              var e, i;
              return (
                this.event.preventDefault(),
                (e = this.delegate) === null ||
                  e === void 0 ||
                  e.inputControllerWillPerformTyping(),
                (i = this.responder) === null ||
                  i === void 0 ||
                  i.deleteInDirection("backward"),
                this.render()
              );
            }
          },
          Tab() {
            var o;
            if (
              (o = this.responder) !== null &&
              o !== void 0 &&
              o.canIncreaseNestingLevel()
            ) {
              var e;
              return (
                this.event.preventDefault(),
                (e = this.responder) === null ||
                  e === void 0 ||
                  e.increaseNestingLevel(),
                this.render()
              );
            }
          },
          "Tab+Shift"() {
            var o;
            if (
              (o = this.responder) !== null &&
              o !== void 0 &&
              o.canDecreaseNestingLevel()
            ) {
              var e;
              return (
                this.event.preventDefault(),
                (e = this.responder) === null ||
                  e === void 0 ||
                  e.decreaseNestingLevel(),
                this.render()
              );
            }
          },
        }),
        $e(nn, "inputTypes", {
          deleteByComposition() {
            return this.deleteInDirection("backward", { recordUndoEntry: !1 });
          },
          deleteByCut() {
            return this.deleteInDirection("backward");
          },
          deleteByDrag() {
            return (
              this.event.preventDefault(),
              this.withTargetDOMRange(function () {
                var o;
                this.deleteByDragRange =
                  (o = this.responder) === null || o === void 0
                    ? void 0
                    : o.getSelectedRange();
              })
            );
          },
          deleteCompositionText() {
            return this.deleteInDirection("backward", { recordUndoEntry: !1 });
          },
          deleteContent() {
            return this.deleteInDirection("backward");
          },
          deleteContentBackward() {
            return this.deleteInDirection("backward");
          },
          deleteContentForward() {
            return this.deleteInDirection("forward");
          },
          deleteEntireSoftLine() {
            return this.deleteInDirection("forward");
          },
          deleteHardLineBackward() {
            return this.deleteInDirection("backward");
          },
          deleteHardLineForward() {
            return this.deleteInDirection("forward");
          },
          deleteSoftLineBackward() {
            return this.deleteInDirection("backward");
          },
          deleteSoftLineForward() {
            return this.deleteInDirection("forward");
          },
          deleteWordBackward() {
            return this.deleteInDirection("backward");
          },
          deleteWordForward() {
            return this.deleteInDirection("forward");
          },
          formatBackColor() {
            return this.activateAttributeIfSupported(
              "backgroundColor",
              this.event.data,
            );
          },
          formatBold() {
            return this.toggleAttributeIfSupported("bold");
          },
          formatFontColor() {
            return this.activateAttributeIfSupported("color", this.event.data);
          },
          formatFontName() {
            return this.activateAttributeIfSupported("font", this.event.data);
          },
          formatIndent() {
            var o;
            if (
              (o = this.responder) !== null &&
              o !== void 0 &&
              o.canIncreaseNestingLevel()
            )
              return this.withTargetDOMRange(function () {
                var e;
                return (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.increaseNestingLevel();
              });
          },
          formatItalic() {
            return this.toggleAttributeIfSupported("italic");
          },
          formatJustifyCenter() {
            return this.toggleAttributeIfSupported("justifyCenter");
          },
          formatJustifyFull() {
            return this.toggleAttributeIfSupported("justifyFull");
          },
          formatJustifyLeft() {
            return this.toggleAttributeIfSupported("justifyLeft");
          },
          formatJustifyRight() {
            return this.toggleAttributeIfSupported("justifyRight");
          },
          formatOutdent() {
            var o;
            if (
              (o = this.responder) !== null &&
              o !== void 0 &&
              o.canDecreaseNestingLevel()
            )
              return this.withTargetDOMRange(function () {
                var e;
                return (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.decreaseNestingLevel();
              });
          },
          formatRemove() {
            this.withTargetDOMRange(function () {
              for (let i in (o = this.responder) === null || o === void 0
                ? void 0
                : o.getCurrentAttributes()) {
                var o, e;
                (e = this.responder) === null ||
                  e === void 0 ||
                  e.removeCurrentAttribute(i);
              }
            });
          },
          formatSetBlockTextDirection() {
            return this.activateAttributeIfSupported(
              "blockDir",
              this.event.data,
            );
          },
          formatSetInlineTextDirection() {
            return this.activateAttributeIfSupported(
              "textDir",
              this.event.data,
            );
          },
          formatStrikeThrough() {
            return this.toggleAttributeIfSupported("strike");
          },
          formatSubscript() {
            return this.toggleAttributeIfSupported("sub");
          },
          formatSuperscript() {
            return this.toggleAttributeIfSupported("sup");
          },
          formatUnderline() {
            return this.toggleAttributeIfSupported("underline");
          },
          historyRedo() {
            var o;
            return (o = this.delegate) === null || o === void 0
              ? void 0
              : o.inputControllerWillPerformRedo();
          },
          historyUndo() {
            var o;
            return (o = this.delegate) === null || o === void 0
              ? void 0
              : o.inputControllerWillPerformUndo();
          },
          insertCompositionText() {
            return (this.composing = !0), this.insertString(this.event.data);
          },
          insertFromComposition() {
            return (this.composing = !1), this.insertString(this.event.data);
          },
          insertFromDrop() {
            let o = this.deleteByDragRange;
            if (o) {
              var e;
              return (
                (this.deleteByDragRange = null),
                (e = this.delegate) === null ||
                  e === void 0 ||
                  e.inputControllerWillMoveText(),
                this.withTargetDOMRange(function () {
                  var i;
                  return (i = this.responder) === null || i === void 0
                    ? void 0
                    : i.moveTextFromRange(o);
                })
              );
            }
          },
          insertFromPaste() {
            var o;
            let { dataTransfer: e } = this.event,
              i = { dataTransfer: e },
              a = e.getData("URL"),
              c = e.getData("text/html");
            if (a) {
              var u;
              let x;
              this.event.preventDefault(), (i.type = "text/html");
              let _ = e.getData("public.url-name");
              _ ? (x = T(_).trim()) : (x = a),
                (i.html = this.createLinkHTML(a, x)),
                (u = this.delegate) === null ||
                  u === void 0 ||
                  u.inputControllerWillPaste(i),
                this.withTargetDOMRange(function () {
                  var O;
                  return (O = this.responder) === null || O === void 0
                    ? void 0
                    : O.insertHTML(i.html);
                }),
                (this.afterRender = () => {
                  var O;
                  return (O = this.delegate) === null || O === void 0
                    ? void 0
                    : O.inputControllerDidPaste(i);
                });
            } else if (Ls(e)) {
              var g;
              (i.type = "text/plain"),
                (i.string = e.getData("text/plain")),
                (g = this.delegate) === null ||
                  g === void 0 ||
                  g.inputControllerWillPaste(i),
                this.withTargetDOMRange(function () {
                  var x;
                  return (x = this.responder) === null || x === void 0
                    ? void 0
                    : x.insertString(i.string);
                }),
                (this.afterRender = () => {
                  var x;
                  return (x = this.delegate) === null || x === void 0
                    ? void 0
                    : x.inputControllerDidPaste(i);
                });
            } else if (c) {
              var E;
              this.event.preventDefault(),
                (i.type = "text/html"),
                (i.html = c),
                (E = this.delegate) === null ||
                  E === void 0 ||
                  E.inputControllerWillPaste(i),
                this.withTargetDOMRange(function () {
                  var x;
                  return (x = this.responder) === null || x === void 0
                    ? void 0
                    : x.insertHTML(i.html);
                }),
                (this.afterRender = () => {
                  var x;
                  return (x = this.delegate) === null || x === void 0
                    ? void 0
                    : x.inputControllerDidPaste(i);
                });
            } else if ((o = e.files) !== null && o !== void 0 && o.length) {
              var C;
              (i.type = "File"),
                (i.file = e.files[0]),
                (C = this.delegate) === null ||
                  C === void 0 ||
                  C.inputControllerWillPaste(i),
                this.withTargetDOMRange(function () {
                  var x;
                  return (x = this.responder) === null || x === void 0
                    ? void 0
                    : x.insertFile(i.file);
                }),
                (this.afterRender = () => {
                  var x;
                  return (x = this.delegate) === null || x === void 0
                    ? void 0
                    : x.inputControllerDidPaste(i);
                });
            }
          },
          insertFromYank() {
            return this.insertString(this.event.data);
          },
          insertLineBreak() {
            return this.insertString(`
`);
          },
          insertLink() {
            return this.activateAttributeIfSupported("href", this.event.data);
          },
          insertOrderedList() {
            return this.toggleAttributeIfSupported("number");
          },
          insertParagraph() {
            var o;
            return (
              (o = this.delegate) === null ||
                o === void 0 ||
                o.inputControllerWillPerformTyping(),
              this.withTargetDOMRange(function () {
                var e;
                return (e = this.responder) === null || e === void 0
                  ? void 0
                  : e.insertLineBreak();
              })
            );
          },
          insertReplacementText() {
            return this.insertString(
              this.event.dataTransfer.getData("text/plain"),
              { updatePosition: !1 },
            );
          },
          insertText() {
            var o;
            return this.insertString(
              this.event.data ||
                ((o = this.event.dataTransfer) === null || o === void 0
                  ? void 0
                  : o.getData("text/plain")),
            );
          },
          insertTranspose() {
            return this.insertString(this.event.data);
          },
          insertUnorderedList() {
            return this.toggleAttributeIfSupported("bullet");
          },
        });
      let Qd = function (o) {
          let e = document.createRange();
          return (
            e.setStart(o.startContainer, o.startOffset),
            e.setEnd(o.endContainer, o.endOffset),
            e
          );
        },
        ya = (o) => {
          var e;
          return Array.from(
            ((e = o.dataTransfer) === null || e === void 0
              ? void 0
              : e.types) || [],
          ).includes("Files");
        },
        Zd = function (o) {
          let e = o.clipboardData;
          if (e)
            return (
              e.types.includes("Files") &&
              e.types.length === 1 &&
              e.files.length >= 1
            );
        },
        tf = function (o) {
          let e = o.clipboardData;
          if (e) return e.types.includes("text/plain") && e.types.length === 1;
        },
        ef = function (o) {
          let e = [];
          return (
            o.altKey && e.push("alt"),
            o.shiftKey && e.push("shift"),
            e.push(o.key),
            e
          );
        },
        wa = (o) => ({ x: o.clientX, y: o.clientY }),
        Ea = "[data-trix-attribute]",
        Aa = "[data-trix-action]",
        rf = "".concat(Ea, ", ").concat(Aa),
        $s = "[data-trix-dialog]",
        nf = "".concat($s, "[data-trix-active]"),
        sf = "".concat($s, " [data-trix-method]"),
        Vc = "".concat($s, " [data-trix-input]"),
        $c = (o, e) => (
          e || (e = Ii(o)),
          o.querySelector("[data-trix-input][name='".concat(e, "']"))
        ),
        Xc = (o) => o.getAttribute("data-trix-action"),
        Ii = (o) =>
          o.getAttribute("data-trix-attribute") ||
          o.getAttribute("data-trix-dialog-attribute"),
        of = (o) => o.getAttribute("data-trix-dialog");
      class Kc extends xt {
        constructor(e) {
          super(e),
            (this.didClickActionButton = this.didClickActionButton.bind(this)),
            (this.didClickAttributeButton =
              this.didClickAttributeButton.bind(this)),
            (this.didClickDialogButton = this.didClickDialogButton.bind(this)),
            (this.didKeyDownDialogInput =
              this.didKeyDownDialogInput.bind(this)),
            (this.element = e),
            (this.attributes = {}),
            (this.actions = {}),
            this.resetDialogInputs(),
            V("mousedown", {
              onElement: this.element,
              matchingSelector: Aa,
              withCallback: this.didClickActionButton,
            }),
            V("mousedown", {
              onElement: this.element,
              matchingSelector: Ea,
              withCallback: this.didClickAttributeButton,
            }),
            V("click", {
              onElement: this.element,
              matchingSelector: rf,
              preventDefault: !0,
            }),
            V("click", {
              onElement: this.element,
              matchingSelector: sf,
              withCallback: this.didClickDialogButton,
            }),
            V("keydown", {
              onElement: this.element,
              matchingSelector: Vc,
              withCallback: this.didKeyDownDialogInput,
            });
        }
        didClickActionButton(e, i) {
          var a;
          (a = this.delegate) === null ||
            a === void 0 ||
            a.toolbarDidClickButton(),
            e.preventDefault();
          let c = Xc(i);
          if (this.getDialog(c)) return this.toggleDialog(c);
          var u;
          return (u = this.delegate) === null || u === void 0
            ? void 0
            : u.toolbarDidInvokeAction(c);
        }
        didClickAttributeButton(e, i) {
          var a;
          (a = this.delegate) === null ||
            a === void 0 ||
            a.toolbarDidClickButton(),
            e.preventDefault();
          let c = Ii(i);
          if (this.getDialog(c)) this.toggleDialog(c);
          else {
            var u;
            (u = this.delegate) === null ||
              u === void 0 ||
              u.toolbarDidToggleAttribute(c);
          }
          return this.refreshAttributeButtons();
        }
        didClickDialogButton(e, i) {
          let a = wt(i, { matchingSelector: $s }),
            c = i.getAttribute("data-trix-method");
          return this[c].call(this, a);
        }
        didKeyDownDialogInput(e, i) {
          if (e.keyCode === 13) {
            e.preventDefault();
            let a = i.getAttribute("name"),
              c = this.getDialog(a);
            this.setAttribute(c);
          }
          if (e.keyCode === 27) return e.preventDefault(), this.hideDialog();
        }
        updateActions(e) {
          return (this.actions = e), this.refreshActionButtons();
        }
        refreshActionButtons() {
          return this.eachActionButton((e, i) => {
            e.disabled = this.actions[i] === !1;
          });
        }
        eachActionButton(e) {
          return Array.from(this.element.querySelectorAll(Aa)).map((i) =>
            e(i, Xc(i)),
          );
        }
        updateAttributes(e) {
          return (this.attributes = e), this.refreshAttributeButtons();
        }
        refreshAttributeButtons() {
          return this.eachAttributeButton(
            (e, i) => (
              (e.disabled = this.attributes[i] === !1),
              this.attributes[i] || this.dialogIsVisible(i)
                ? (e.setAttribute("data-trix-active", ""),
                  e.classList.add("trix-active"))
                : (e.removeAttribute("data-trix-active"),
                  e.classList.remove("trix-active"))
            ),
          );
        }
        eachAttributeButton(e) {
          return Array.from(this.element.querySelectorAll(Ea)).map((i) =>
            e(i, Ii(i)),
          );
        }
        applyKeyboardCommand(e) {
          let i = JSON.stringify(e.sort());
          for (let a of Array.from(
            this.element.querySelectorAll("[data-trix-key]"),
          )) {
            let c = a.getAttribute("data-trix-key").split("+");
            if (JSON.stringify(c.sort()) === i)
              return pt("mousedown", { onElement: a }), !0;
          }
          return !1;
        }
        dialogIsVisible(e) {
          let i = this.getDialog(e);
          if (i) return i.hasAttribute("data-trix-active");
        }
        toggleDialog(e) {
          return this.dialogIsVisible(e)
            ? this.hideDialog()
            : this.showDialog(e);
        }
        showDialog(e) {
          var i, a;
          this.hideDialog(),
            (i = this.delegate) === null ||
              i === void 0 ||
              i.toolbarWillShowDialog();
          let c = this.getDialog(e);
          c.setAttribute("data-trix-active", ""),
            c.classList.add("trix-active"),
            Array.from(c.querySelectorAll("input[disabled]")).forEach((g) => {
              g.removeAttribute("disabled");
            });
          let u = Ii(c);
          if (u) {
            let g = $c(c, e);
            g && ((g.value = this.attributes[u] || ""), g.select());
          }
          return (a = this.delegate) === null || a === void 0
            ? void 0
            : a.toolbarDidShowDialog(e);
        }
        setAttribute(e) {
          let i = Ii(e),
            a = $c(e, i);
          if (a.willValidate && !a.checkValidity())
            return (
              a.setAttribute("data-trix-validate", ""),
              a.classList.add("trix-validate"),
              a.focus()
            );
          var c;
          return (
            (c = this.delegate) === null ||
              c === void 0 ||
              c.toolbarDidUpdateAttribute(i, a.value),
            this.hideDialog()
          );
        }
        removeAttribute(e) {
          var i;
          let a = Ii(e);
          return (
            (i = this.delegate) === null ||
              i === void 0 ||
              i.toolbarDidRemoveAttribute(a),
            this.hideDialog()
          );
        }
        hideDialog() {
          let e = this.element.querySelector(nf);
          if (e) {
            var i;
            return (
              e.removeAttribute("data-trix-active"),
              e.classList.remove("trix-active"),
              this.resetDialogInputs(),
              (i = this.delegate) === null || i === void 0
                ? void 0
                : i.toolbarDidHideDialog(of(e))
            );
          }
        }
        resetDialogInputs() {
          Array.from(this.element.querySelectorAll(Vc)).forEach((e) => {
            e.setAttribute("disabled", "disabled"),
              e.removeAttribute("data-trix-validate"),
              e.classList.remove("trix-validate");
          });
        }
        getDialog(e) {
          return this.element.querySelector(
            "[data-trix-dialog=".concat(e, "]"),
          );
        }
      }
      let af = (o, e) =>
        Si(o.selectedRange, e.selectedRange) &&
        o.document.isEqualTo(e.document);
      class sn extends Nc {
        constructor(e) {
          let { editorElement: i, document: a, html: c } = e;
          super(...arguments),
            (this.editorElement = i),
            (this.selectionManager = new oi(this.editorElement)),
            (this.selectionManager.delegate = this),
            (this.composition = new Vr()),
            (this.composition.delegate = this),
            (this.attachmentManager = new Cc(
              this.composition.getAttachments(),
            )),
            (this.attachmentManager.delegate = this),
            (this.inputController =
              fr.getLevel() === 2
                ? new nn(this.editorElement)
                : new Ir(this.editorElement)),
            (this.inputController.delegate = this),
            (this.inputController.responder = this.composition),
            (this.compositionController = new Bc(
              this.editorElement,
              this.composition,
            )),
            (this.compositionController.delegate = this),
            (this.toolbarController = new Kc(
              this.editorElement.toolbarElement,
            )),
            (this.toolbarController.delegate = this),
            (this.editor = new Dc(
              this.composition,
              this.selectionManager,
              this.editorElement,
            )),
            a ? this.editor.loadDocument(a) : this.editor.loadHTML(c);
        }
        registerSelectionManager() {
          return Mr.registerSelectionManager(this.selectionManager);
        }
        unregisterSelectionManager() {
          return Mr.unregisterSelectionManager(this.selectionManager);
        }
        render() {
          return this.compositionController.render();
        }
        reparse() {
          return this.composition.replaceHTML(this.editorElement.innerHTML);
        }
        compositionDidChangeDocument(e) {
          if (
            (this.notifyEditorElement("document-change"), !this.handlingInput)
          )
            return this.render();
        }
        compositionDidChangeCurrentAttributes(e) {
          return (
            (this.currentAttributes = e),
            this.toolbarController.updateAttributes(this.currentAttributes),
            this.updateCurrentActions(),
            this.notifyEditorElement("attributes-change", {
              attributes: this.currentAttributes,
            })
          );
        }
        compositionDidPerformInsertionAtRange(e) {
          this.pasting && (this.pastedRange = e);
        }
        compositionShouldAcceptFile(e) {
          return this.notifyEditorElement("file-accept", { file: e });
        }
        compositionDidAddAttachment(e) {
          let i = this.attachmentManager.manageAttachment(e);
          return this.notifyEditorElement("attachment-add", { attachment: i });
        }
        compositionDidEditAttachment(e) {
          this.compositionController.rerenderViewForObject(e);
          let i = this.attachmentManager.manageAttachment(e);
          return (
            this.notifyEditorElement("attachment-edit", { attachment: i }),
            this.notifyEditorElement("change")
          );
        }
        compositionDidChangeAttachmentPreviewURL(e) {
          return (
            this.compositionController.invalidateViewForObject(e),
            this.notifyEditorElement("change")
          );
        }
        compositionDidRemoveAttachment(e) {
          let i = this.attachmentManager.unmanageAttachment(e);
          return this.notifyEditorElement("attachment-remove", {
            attachment: i,
          });
        }
        compositionDidStartEditingAttachment(e, i) {
          return (
            (this.attachmentLocationRange =
              this.composition.document.getLocationRangeOfAttachment(e)),
            this.compositionController.installAttachmentEditorForAttachment(
              e,
              i,
            ),
            this.selectionManager.setLocationRange(this.attachmentLocationRange)
          );
        }
        compositionDidStopEditingAttachment(e) {
          this.compositionController.uninstallAttachmentEditor(),
            (this.attachmentLocationRange = null);
        }
        compositionDidRequestChangingSelectionToLocationRange(e) {
          if (
            !(this.loadingSnapshot && !this.isFocused()) &&
            ((this.requestedLocationRange = e),
            (this.compositionRevisionWhenLocationRangeRequested =
              this.composition.revision),
            !this.handlingInput)
          )
            return this.render();
        }
        compositionWillLoadSnapshot() {
          this.loadingSnapshot = !0;
        }
        compositionDidLoadSnapshot() {
          this.compositionController.refreshViewCache(),
            this.render(),
            (this.loadingSnapshot = !1);
        }
        getSelectionManager() {
          return this.selectionManager;
        }
        attachmentManagerDidRequestRemovalOfAttachment(e) {
          return this.removeAttachment(e);
        }
        compositionControllerWillSyncDocumentView() {
          return (
            this.inputController.editorWillSyncDocumentView(),
            this.selectionManager.lock(),
            this.selectionManager.clearSelection()
          );
        }
        compositionControllerDidSyncDocumentView() {
          return (
            this.inputController.editorDidSyncDocumentView(),
            this.selectionManager.unlock(),
            this.updateCurrentActions(),
            this.notifyEditorElement("sync")
          );
        }
        compositionControllerDidRender() {
          this.requestedLocationRange &&
            (this.compositionRevisionWhenLocationRangeRequested ===
              this.composition.revision &&
              this.selectionManager.setLocationRange(
                this.requestedLocationRange,
              ),
            (this.requestedLocationRange = null),
            (this.compositionRevisionWhenLocationRangeRequested = null)),
            this.renderedCompositionRevision !== this.composition.revision &&
              (this.runEditorFilters(),
              this.composition.updateCurrentAttributes(),
              this.notifyEditorElement("render")),
            (this.renderedCompositionRevision = this.composition.revision);
        }
        compositionControllerDidFocus() {
          return (
            this.isFocusedInvisibly() &&
              this.setLocationRange({ index: 0, offset: 0 }),
            this.toolbarController.hideDialog(),
            this.notifyEditorElement("focus")
          );
        }
        compositionControllerDidBlur() {
          return this.notifyEditorElement("blur");
        }
        compositionControllerDidSelectAttachment(e, i) {
          return (
            this.toolbarController.hideDialog(),
            this.composition.editAttachment(e, i)
          );
        }
        compositionControllerDidRequestDeselectingAttachment(e) {
          let i =
            this.attachmentLocationRange ||
            this.composition.document.getLocationRangeOfAttachment(e);
          return this.selectionManager.setLocationRange(i[1]);
        }
        compositionControllerWillUpdateAttachment(e) {
          return this.editor.recordUndoEntry("Edit Attachment", {
            context: e.id,
            consolidatable: !0,
          });
        }
        compositionControllerDidRequestRemovalOfAttachment(e) {
          return this.removeAttachment(e);
        }
        inputControllerWillHandleInput() {
          (this.handlingInput = !0), (this.requestedRender = !1);
        }
        inputControllerDidRequestRender() {
          this.requestedRender = !0;
        }
        inputControllerDidHandleInput() {
          if (((this.handlingInput = !1), this.requestedRender))
            return (this.requestedRender = !1), this.render();
        }
        inputControllerDidAllowUnhandledInput() {
          return this.notifyEditorElement("change");
        }
        inputControllerDidRequestReparse() {
          return this.reparse();
        }
        inputControllerWillPerformTyping() {
          return this.recordTypingUndoEntry();
        }
        inputControllerWillPerformFormatting(e) {
          return this.recordFormattingUndoEntry(e);
        }
        inputControllerWillCutText() {
          return this.editor.recordUndoEntry("Cut");
        }
        inputControllerWillPaste(e) {
          return (
            this.editor.recordUndoEntry("Paste"),
            (this.pasting = !0),
            this.notifyEditorElement("before-paste", { paste: e })
          );
        }
        inputControllerDidPaste(e) {
          return (
            (e.range = this.pastedRange),
            (this.pastedRange = null),
            (this.pasting = null),
            this.notifyEditorElement("paste", { paste: e })
          );
        }
        inputControllerWillMoveText() {
          return this.editor.recordUndoEntry("Move");
        }
        inputControllerWillAttachFiles() {
          return this.editor.recordUndoEntry("Drop Files");
        }
        inputControllerWillPerformUndo() {
          return this.editor.undo();
        }
        inputControllerWillPerformRedo() {
          return this.editor.redo();
        }
        inputControllerDidReceiveKeyboardCommand(e) {
          return this.toolbarController.applyKeyboardCommand(e);
        }
        inputControllerDidStartDrag() {
          this.locationRangeBeforeDrag =
            this.selectionManager.getLocationRange();
        }
        inputControllerDidReceiveDragOverPoint(e) {
          return this.selectionManager.setLocationRangeFromPointRange(e);
        }
        inputControllerDidCancelDrag() {
          this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),
            (this.locationRangeBeforeDrag = null);
        }
        locationRangeDidChange(e) {
          return (
            this.composition.updateCurrentAttributes(),
            this.updateCurrentActions(),
            this.attachmentLocationRange &&
              !Si(this.attachmentLocationRange, e) &&
              this.composition.stopEditingAttachment(),
            this.notifyEditorElement("selection-change")
          );
        }
        toolbarDidClickButton() {
          if (!this.getLocationRange())
            return this.setLocationRange({ index: 0, offset: 0 });
        }
        toolbarDidInvokeAction(e) {
          return this.invokeAction(e);
        }
        toolbarDidToggleAttribute(e) {
          if (
            (this.recordFormattingUndoEntry(e),
            this.composition.toggleCurrentAttribute(e),
            this.render(),
            !this.selectionFrozen)
          )
            return this.editorElement.focus();
        }
        toolbarDidUpdateAttribute(e, i) {
          if (
            (this.recordFormattingUndoEntry(e),
            this.composition.setCurrentAttribute(e, i),
            this.render(),
            !this.selectionFrozen)
          )
            return this.editorElement.focus();
        }
        toolbarDidRemoveAttribute(e) {
          if (
            (this.recordFormattingUndoEntry(e),
            this.composition.removeCurrentAttribute(e),
            this.render(),
            !this.selectionFrozen)
          )
            return this.editorElement.focus();
        }
        toolbarWillShowDialog(e) {
          return (
            this.composition.expandSelectionForEditing(), this.freezeSelection()
          );
        }
        toolbarDidShowDialog(e) {
          return this.notifyEditorElement("toolbar-dialog-show", {
            dialogName: e,
          });
        }
        toolbarDidHideDialog(e) {
          return (
            this.thawSelection(),
            this.editorElement.focus(),
            this.notifyEditorElement("toolbar-dialog-hide", { dialogName: e })
          );
        }
        freezeSelection() {
          if (!this.selectionFrozen)
            return (
              this.selectionManager.lock(),
              this.composition.freezeSelection(),
              (this.selectionFrozen = !0),
              this.render()
            );
        }
        thawSelection() {
          if (this.selectionFrozen)
            return (
              this.composition.thawSelection(),
              this.selectionManager.unlock(),
              (this.selectionFrozen = !1),
              this.render()
            );
        }
        canInvokeAction(e) {
          if (this.actionIsExternal(e)) return !0;
          var i;
          return !!(
            (i = this.actions[e]) !== null &&
            i !== void 0 &&
            (i = i.test) !== null &&
            i !== void 0 &&
            i.call(this)
          );
        }
        invokeAction(e) {
          if (this.actionIsExternal(e))
            return this.notifyEditorElement("action-invoke", { actionName: e });
          var i;
          return (i = this.actions[e]) === null ||
            i === void 0 ||
            (i = i.perform) === null ||
            i === void 0
            ? void 0
            : i.call(this);
        }
        actionIsExternal(e) {
          return /^x-./.test(e);
        }
        getCurrentActions() {
          let e = {};
          for (let i in this.actions) e[i] = this.canInvokeAction(i);
          return e;
        }
        updateCurrentActions() {
          let e = this.getCurrentActions();
          if (!ti(e, this.currentActions))
            return (
              (this.currentActions = e),
              this.toolbarController.updateActions(this.currentActions),
              this.notifyEditorElement("actions-change", {
                actions: this.currentActions,
              })
            );
        }
        runEditorFilters() {
          let e = this.composition.getSnapshot();
          if (
            (Array.from(this.editor.filters).forEach((i) => {
              let { document: a, selectedRange: c } = e;
              (e = i.call(this.editor, e) || {}),
                e.document || (e.document = a),
                e.selectedRange || (e.selectedRange = c);
            }),
            !af(e, this.composition.getSnapshot()))
          )
            return this.composition.loadSnapshot(e);
        }
        updateInputElement() {
          let e = this.compositionController.getSerializableElement(),
            i = Dd(e, "text/html");
          return this.editorElement.setInputElementValue(i);
        }
        notifyEditorElement(e, i) {
          switch (e) {
            case "document-change":
              this.documentChangedSinceLastRender = !0;
              break;
            case "render":
              this.documentChangedSinceLastRender &&
                ((this.documentChangedSinceLastRender = !1),
                this.notifyEditorElement("change"));
              break;
            case "change":
            case "attachment-add":
            case "attachment-edit":
            case "attachment-remove":
              this.updateInputElement();
              break;
          }
          return this.editorElement.notify(e, i);
        }
        removeAttachment(e) {
          return (
            this.editor.recordUndoEntry("Delete Attachment"),
            this.composition.removeAttachment(e),
            this.render()
          );
        }
        recordFormattingUndoEntry(e) {
          let i = Ee(e),
            a = this.selectionManager.getLocationRange();
          if (i || !gr(a))
            return this.editor.recordUndoEntry("Formatting", {
              context: this.getUndoContext(),
              consolidatable: !0,
            });
        }
        recordTypingUndoEntry() {
          return this.editor.recordUndoEntry("Typing", {
            context: this.getUndoContext(this.currentAttributes),
            consolidatable: !0,
          });
        }
        getUndoContext() {
          for (var e = arguments.length, i = new Array(e), a = 0; a < e; a++)
            i[a] = arguments[a];
          return [
            this.getLocationContext(),
            this.getTimeContext(),
            ...Array.from(i),
          ];
        }
        getLocationContext() {
          let e = this.selectionManager.getLocationRange();
          return gr(e) ? e[0].index : e;
        }
        getTimeContext() {
          return re.interval > 0
            ? Math.floor(new Date().getTime() / re.interval)
            : 0;
        }
        isFocused() {
          var e;
          return (
            this.editorElement ===
            ((e = this.editorElement.ownerDocument) === null || e === void 0
              ? void 0
              : e.activeElement)
          );
        }
        isFocusedInvisibly() {
          return this.isFocused() && !this.getLocationRange();
        }
        get actions() {
          return this.constructor.actions;
        }
      }
      $e(sn, "actions", {
        undo: {
          test() {
            return this.editor.canUndo();
          },
          perform() {
            return this.editor.undo();
          },
        },
        redo: {
          test() {
            return this.editor.canRedo();
          },
          perform() {
            return this.editor.redo();
          },
        },
        link: {
          test() {
            return this.editor.canActivateAttribute("href");
          },
        },
        increaseNestingLevel: {
          test() {
            return this.editor.canIncreaseNestingLevel();
          },
          perform() {
            return this.editor.increaseNestingLevel() && this.render();
          },
        },
        decreaseNestingLevel: {
          test() {
            return this.editor.canDecreaseNestingLevel();
          },
          perform() {
            return this.editor.decreaseNestingLevel() && this.render();
          },
        },
        attachFiles: {
          test() {
            return !0;
          },
          perform() {
            return fr.pickFiles(this.editor.insertFiles);
          },
        },
      }),
        sn.proxyMethod("getSelectionManager().setLocationRange"),
        sn.proxyMethod("getSelectionManager().getLocationRange");
      var lf = Object.freeze({
          __proto__: null,
          AttachmentEditorController: Ic,
          CompositionController: Bc,
          Controller: Nc,
          EditorController: sn,
          InputController: Vs,
          Level0InputController: Ir,
          Level2InputController: nn,
          ToolbarController: Kc,
        }),
        cf = Object.freeze({
          __proto__: null,
          MutationObserver: qc,
          SelectionChangeObserver: Ps,
        }),
        uf = Object.freeze({
          __proto__: null,
          FileVerificationOperation: zc,
          ImagePreloadOperation: gc,
        });
      xi(
        "trix-toolbar",
        `%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`,
      );
      class Gc extends HTMLElement {
        connectedCallback() {
          this.innerHTML === "" && (this.innerHTML = Et.getDefaultHTML());
        }
      }
      let hf = 0,
        df = function (o) {
          if (
            !document.querySelector(":focus") &&
            o.hasAttribute("autofocus") &&
            document.querySelector("[autofocus]") === o
          )
            return o.focus();
        },
        ff = function (o) {
          if (!o.hasAttribute("contenteditable"))
            return (
              o.setAttribute("contenteditable", ""),
              Rt("focus", {
                onElement: o,
                withCallback() {
                  return mf(o);
                },
              })
            );
        },
        mf = function (o) {
          return gf(o), pf(o);
        },
        gf = function (o) {
          var e, i;
          if (
            (e = (i = document).queryCommandSupported) !== null &&
            e !== void 0 &&
            e.call(i, "enableObjectResizing")
          )
            return (
              document.execCommand("enableObjectResizing", !1, !1),
              V("mscontrolselect", { onElement: o, preventDefault: !0 })
            );
        },
        pf = function (o) {
          var e, i;
          if (
            (e = (i = document).queryCommandSupported) !== null &&
            e !== void 0 &&
            e.call(i, "DefaultParagraphSeparator")
          ) {
            let { tagName: a } = tt.default;
            if (["div", "p"].includes(a))
              return document.execCommand("DefaultParagraphSeparator", !1, a);
          }
        },
        bf = function (o) {
          if (!o.hasAttribute("role")) return o.setAttribute("role", "textbox");
        },
        vf = function (o) {
          if (o.hasAttribute("aria-label") || o.hasAttribute("aria-labelledby"))
            return;
          let e = function () {
            let a = Array.from(o.labels)
              .map((c) => {
                if (!c.contains(o)) return c.textContent;
              })
              .filter((c) => c)
              .join(" ");
            return a
              ? o.setAttribute("aria-label", a)
              : o.removeAttribute("aria-label");
          };
          return e(), V("focus", { onElement: o, withCallback: e });
        },
        Yc = (function () {
          return Vt.forcesObjectResizing
            ? { display: "inline", width: "auto" }
            : { display: "inline-block", width: "1px" };
        })();
      xi(
        "trix-editor",
        `%t {
    display: block;
}

%t:empty:not(:focus)::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `
          .concat(
            bt,
            ` figcaption textarea {
    resize: none;
}

%t `,
          )
          .concat(
            bt,
            ` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `,
          )
          .concat(
            bt,
            ` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `,
          )
          .concat(
            Yc.display,
            ` !important;
    width: `,
          )
          .concat(
            Yc.width,
            ` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`,
          ),
      );
      class Jc extends HTMLElement {
        get trixId() {
          return this.hasAttribute("trix-id")
            ? this.getAttribute("trix-id")
            : (this.setAttribute("trix-id", ++hf), this.trixId);
        }
        get labels() {
          let e = [];
          this.id &&
            this.ownerDocument &&
            e.push(
              ...Array.from(
                this.ownerDocument.querySelectorAll(
                  "label[for='".concat(this.id, "']"),
                ) || [],
              ),
            );
          let i = wt(this, { matchingSelector: "label" });
          return i && [this, null].includes(i.control) && e.push(i), e;
        }
        get toolbarElement() {
          if (this.hasAttribute("toolbar")) {
            var e;
            return (e = this.ownerDocument) === null || e === void 0
              ? void 0
              : e.getElementById(this.getAttribute("toolbar"));
          } else if (this.parentNode) {
            let i = "trix-toolbar-".concat(this.trixId);
            this.setAttribute("toolbar", i);
            let a = A("trix-toolbar", { id: i });
            return this.parentNode.insertBefore(a, this), a;
          } else return;
        }
        get form() {
          var e;
          return (e = this.inputElement) === null || e === void 0
            ? void 0
            : e.form;
        }
        get inputElement() {
          if (this.hasAttribute("input")) {
            var e;
            return (e = this.ownerDocument) === null || e === void 0
              ? void 0
              : e.getElementById(this.getAttribute("input"));
          } else if (this.parentNode) {
            let i = "trix-input-".concat(this.trixId);
            this.setAttribute("input", i);
            let a = A("input", { type: "hidden", id: i });
            return this.parentNode.insertBefore(a, this.nextElementSibling), a;
          } else return;
        }
        get editor() {
          var e;
          return (e = this.editorController) === null || e === void 0
            ? void 0
            : e.editor;
        }
        get name() {
          var e;
          return (e = this.inputElement) === null || e === void 0
            ? void 0
            : e.name;
        }
        get value() {
          var e;
          return (e = this.inputElement) === null || e === void 0
            ? void 0
            : e.value;
        }
        set value(e) {
          var i;
          (this.defaultValue = e),
            (i = this.editor) === null ||
              i === void 0 ||
              i.loadHTML(this.defaultValue);
        }
        notify(e, i) {
          if (this.editorController)
            return pt("trix-".concat(e), { onElement: this, attributes: i });
        }
        setInputElementValue(e) {
          this.inputElement && (this.inputElement.value = e);
        }
        connectedCallback() {
          this.hasAttribute("data-trix-internal") ||
            (ff(this),
            bf(this),
            vf(this),
            this.editorController ||
              (pt("trix-before-initialize", { onElement: this }),
              (this.editorController = new sn({
                editorElement: this,
                html: (this.defaultValue = this.value),
              })),
              requestAnimationFrame(() =>
                pt("trix-initialize", { onElement: this }),
              )),
            this.editorController.registerSelectionManager(),
            this.registerResetListener(),
            this.registerClickListener(),
            df(this));
        }
        disconnectedCallback() {
          var e;
          return (
            (e = this.editorController) === null ||
              e === void 0 ||
              e.unregisterSelectionManager(),
            this.unregisterResetListener(),
            this.unregisterClickListener()
          );
        }
        registerResetListener() {
          return (
            (this.resetListener = this.resetBubbled.bind(this)),
            window.addEventListener("reset", this.resetListener, !1)
          );
        }
        unregisterResetListener() {
          return window.removeEventListener("reset", this.resetListener, !1);
        }
        registerClickListener() {
          return (
            (this.clickListener = this.clickBubbled.bind(this)),
            window.addEventListener("click", this.clickListener, !1)
          );
        }
        unregisterClickListener() {
          return window.removeEventListener("click", this.clickListener, !1);
        }
        resetBubbled(e) {
          if (!e.defaultPrevented && e.target === this.form)
            return this.reset();
        }
        clickBubbled(e) {
          if (e.defaultPrevented || this.contains(e.target)) return;
          let i = wt(e.target, { matchingSelector: "label" });
          if (!!i && !!Array.from(this.labels).includes(i)) return this.focus();
        }
        reset() {
          this.value = this.defaultValue;
        }
      }
      var yf = Object.freeze({
          __proto__: null,
          TrixEditorElement: Jc,
          TrixToolbarElement: Gc,
        }),
        wf = Object.freeze({
          __proto__: null,
          Filter: Rc,
          attachmentGalleryFilter: _c,
        });
      let xa = {
        VERSION: t,
        config: Wt,
        core: Pd,
        models: Fc,
        views: jd,
        controllers: lf,
        observers: cf,
        operations: uf,
        elements: yf,
        filters: wf,
      };
      Object.assign(xa, Fc);
      function Ef() {
        customElements.get("trix-toolbar") ||
          customElements.define("trix-toolbar", Gc),
          customElements.get("trix-editor") ||
            customElements.define("trix-editor", Jc);
      }
      return (window.Trix = xa), setTimeout(Ef, 0), xa;
    });
  });
  var dh = hr(() => {
    (function (r) {
      typeof define == "function" && define.amd ? define(r) : r();
    })(function () {
      "use strict";
      var r = { exports: {} };
      (function (U, S) {
        (function (F) {
          U.exports = F();
        })(function (F) {
          var st = [
            "0",
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8",
            "9",
            "a",
            "b",
            "c",
            "d",
            "e",
            "f",
          ];
          function V(R, A) {
            var f = R[0],
              d = R[1],
              y = R[2],
              b = R[3];
            (f += (((d & y) | (~d & b)) + A[0] - 680876936) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[1] - 389564586) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[2] + 606105819) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[3] - 1044525330) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & y) | (~d & b)) + A[4] - 176418897) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[5] + 1200080426) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[6] - 1473231341) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[7] - 45705983) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & y) | (~d & b)) + A[8] + 1770035416) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[9] - 1958414417) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[10] - 42063) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[11] - 1990404162) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & y) | (~d & b)) + A[12] + 1804603682) | 0),
              (f = (((f << 7) | (f >>> 25)) + d) | 0),
              (b += (((f & d) | (~f & y)) + A[13] - 40341101) | 0),
              (b = (((b << 12) | (b >>> 20)) + f) | 0),
              (y += (((b & f) | (~b & d)) + A[14] - 1502002290) | 0),
              (y = (((y << 17) | (y >>> 15)) + b) | 0),
              (d += (((y & b) | (~y & f)) + A[15] + 1236535329) | 0),
              (d = (((d << 22) | (d >>> 10)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[1] - 165796510) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[6] - 1069501632) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[11] + 643717713) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[0] - 373897302) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[5] - 701558691) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[10] + 38016083) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[15] - 660478335) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[4] - 405537848) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[9] + 568446438) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[14] - 1019803690) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[3] - 187363961) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[8] + 1163531501) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += (((d & b) | (y & ~b)) + A[13] - 1444681467) | 0),
              (f = (((f << 5) | (f >>> 27)) + d) | 0),
              (b += (((f & y) | (d & ~y)) + A[2] - 51403784) | 0),
              (b = (((b << 9) | (b >>> 23)) + f) | 0),
              (y += (((b & d) | (f & ~d)) + A[7] + 1735328473) | 0),
              (y = (((y << 14) | (y >>> 18)) + b) | 0),
              (d += (((y & f) | (b & ~f)) + A[12] - 1926607734) | 0),
              (d = (((d << 20) | (d >>> 12)) + y) | 0),
              (f += ((d ^ y ^ b) + A[5] - 378558) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[8] - 2022574463) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[11] + 1839030562) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[14] - 35309556) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((d ^ y ^ b) + A[1] - 1530992060) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[4] + 1272893353) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[7] - 155497632) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[10] - 1094730640) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((d ^ y ^ b) + A[13] + 681279174) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[0] - 358537222) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[3] - 722521979) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[6] + 76029189) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((d ^ y ^ b) + A[9] - 640364487) | 0),
              (f = (((f << 4) | (f >>> 28)) + d) | 0),
              (b += ((f ^ d ^ y) + A[12] - 421815835) | 0),
              (b = (((b << 11) | (b >>> 21)) + f) | 0),
              (y += ((b ^ f ^ d) + A[15] + 530742520) | 0),
              (y = (((y << 16) | (y >>> 16)) + b) | 0),
              (d += ((y ^ b ^ f) + A[2] - 995338651) | 0),
              (d = (((d << 23) | (d >>> 9)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[0] - 198630844) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[7] + 1126891415) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[14] - 1416354905) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[5] - 57434055) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[12] + 1700485571) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[3] - 1894986606) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[10] - 1051523) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[1] - 2054922799) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[8] + 1873313359) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[15] - 30611744) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[6] - 1560198380) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[13] + 1309151649) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (f += ((y ^ (d | ~b)) + A[4] - 145523070) | 0),
              (f = (((f << 6) | (f >>> 26)) + d) | 0),
              (b += ((d ^ (f | ~y)) + A[11] - 1120210379) | 0),
              (b = (((b << 10) | (b >>> 22)) + f) | 0),
              (y += ((f ^ (b | ~d)) + A[2] + 718787259) | 0),
              (y = (((y << 15) | (y >>> 17)) + b) | 0),
              (d += ((b ^ (y | ~f)) + A[9] - 343485551) | 0),
              (d = (((d << 21) | (d >>> 11)) + y) | 0),
              (R[0] = (f + R[0]) | 0),
              (R[1] = (d + R[1]) | 0),
              (R[2] = (y + R[2]) | 0),
              (R[3] = (b + R[3]) | 0);
          }
          function Rt(R) {
            var A = [],
              f;
            for (f = 0; f < 64; f += 4)
              A[f >> 2] =
                R.charCodeAt(f) +
                (R.charCodeAt(f + 1) << 8) +
                (R.charCodeAt(f + 2) << 16) +
                (R.charCodeAt(f + 3) << 24);
            return A;
          }
          function pt(R) {
            var A = [],
              f;
            for (f = 0; f < 64; f += 4)
              A[f >> 2] =
                R[f] + (R[f + 1] << 8) + (R[f + 2] << 16) + (R[f + 3] << 24);
            return A;
          }
          function mt(R) {
            var A = R.length,
              f = [1732584193, -271733879, -1732584194, 271733878],
              d,
              y,
              b,
              Kt,
              oe,
              ye;
            for (d = 64; d <= A; d += 64) V(f, Rt(R.substring(d - 64, d)));
            for (
              R = R.substring(d - 64),
                y = R.length,
                b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                d = 0;
              d < y;
              d += 1
            )
              b[d >> 2] |= R.charCodeAt(d) << (d % 4 << 3);
            if (((b[d >> 2] |= 128 << (d % 4 << 3)), d > 55))
              for (V(f, b), d = 0; d < 16; d += 1) b[d] = 0;
            return (
              (Kt = A * 8),
              (Kt = Kt.toString(16).match(/(.*?)(.{0,8})$/)),
              (oe = parseInt(Kt[2], 16)),
              (ye = parseInt(Kt[1], 16) || 0),
              (b[14] = oe),
              (b[15] = ye),
              V(f, b),
              f
            );
          }
          function wt(R) {
            var A = R.length,
              f = [1732584193, -271733879, -1732584194, 271733878],
              d,
              y,
              b,
              Kt,
              oe,
              ye;
            for (d = 64; d <= A; d += 64) V(f, pt(R.subarray(d - 64, d)));
            for (
              R = d - 64 < A ? R.subarray(d - 64) : new Uint8Array(0),
                y = R.length,
                b = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                d = 0;
              d < y;
              d += 1
            )
              b[d >> 2] |= R[d] << (d % 4 << 3);
            if (((b[d >> 2] |= 128 << (d % 4 << 3)), d > 55))
              for (V(f, b), d = 0; d < 16; d += 1) b[d] = 0;
            return (
              (Kt = A * 8),
              (Kt = Kt.toString(16).match(/(.*?)(.{0,8})$/)),
              (oe = parseInt(Kt[2], 16)),
              (ye = parseInt(Kt[1], 16) || 0),
              (b[14] = oe),
              (b[15] = ye),
              V(f, b),
              f
            );
          }
          function It(R) {
            var A = "",
              f;
            for (f = 0; f < 4; f += 1)
              A += st[(R >> (f * 8 + 4)) & 15] + st[(R >> (f * 8)) & 15];
            return A;
          }
          function _t(R) {
            var A;
            for (A = 0; A < R.length; A += 1) R[A] = It(R[A]);
            return R.join("");
          }
          _t(mt("hello")),
            typeof ArrayBuffer != "undefined" &&
              !ArrayBuffer.prototype.slice &&
              (function () {
                function R(A, f) {
                  return (
                    (A = A | 0 || 0),
                    A < 0 ? Math.max(A + f, 0) : Math.min(A, f)
                  );
                }
                ArrayBuffer.prototype.slice = function (A, f) {
                  var d = this.byteLength,
                    y = R(A, d),
                    b = d,
                    Kt,
                    oe,
                    ye,
                    Me;
                  return (
                    f !== F && (b = R(f, d)),
                    y > b
                      ? new ArrayBuffer(0)
                      : ((Kt = b - y),
                        (oe = new ArrayBuffer(Kt)),
                        (ye = new Uint8Array(oe)),
                        (Me = new Uint8Array(this, y, Kt)),
                        ye.set(Me),
                        oe)
                  );
                };
              })();
          function Nt(R) {
            return (
              /[\u0080-\uFFFF]/.test(R) &&
                (R = unescape(encodeURIComponent(R))),
              R
            );
          }
          function pe(R, A) {
            var f = R.length,
              d = new ArrayBuffer(f),
              y = new Uint8Array(d),
              b;
            for (b = 0; b < f; b += 1) y[b] = R.charCodeAt(b);
            return A ? y : d;
          }
          function Re(R) {
            return String.fromCharCode.apply(null, new Uint8Array(R));
          }
          function qe(R, A, f) {
            var d = new Uint8Array(R.byteLength + A.byteLength);
            return (
              d.set(new Uint8Array(R)),
              d.set(new Uint8Array(A), R.byteLength),
              f ? d : d.buffer
            );
          }
          function we(R) {
            var A = [],
              f = R.length,
              d;
            for (d = 0; d < f - 1; d += 2) A.push(parseInt(R.substr(d, 2), 16));
            return String.fromCharCode.apply(String, A);
          }
          function Dt() {
            this.reset();
          }
          return (
            (Dt.prototype.append = function (R) {
              return this.appendBinary(Nt(R)), this;
            }),
            (Dt.prototype.appendBinary = function (R) {
              (this._buff += R), (this._length += R.length);
              var A = this._buff.length,
                f;
              for (f = 64; f <= A; f += 64)
                V(this._hash, Rt(this._buff.substring(f - 64, f)));
              return (this._buff = this._buff.substring(f - 64)), this;
            }),
            (Dt.prototype.end = function (R) {
              var A = this._buff,
                f = A.length,
                d,
                y = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                b;
              for (d = 0; d < f; d += 1)
                y[d >> 2] |= A.charCodeAt(d) << (d % 4 << 3);
              return (
                this._finish(y, f),
                (b = _t(this._hash)),
                R && (b = we(b)),
                this.reset(),
                b
              );
            }),
            (Dt.prototype.reset = function () {
              return (
                (this._buff = ""),
                (this._length = 0),
                (this._hash = [1732584193, -271733879, -1732584194, 271733878]),
                this
              );
            }),
            (Dt.prototype.getState = function () {
              return {
                buff: this._buff,
                length: this._length,
                hash: this._hash.slice(),
              };
            }),
            (Dt.prototype.setState = function (R) {
              return (
                (this._buff = R.buff),
                (this._length = R.length),
                (this._hash = R.hash),
                this
              );
            }),
            (Dt.prototype.destroy = function () {
              delete this._hash, delete this._buff, delete this._length;
            }),
            (Dt.prototype._finish = function (R, A) {
              var f = A,
                d,
                y,
                b;
              if (((R[f >> 2] |= 128 << (f % 4 << 3)), f > 55))
                for (V(this._hash, R), f = 0; f < 16; f += 1) R[f] = 0;
              (d = this._length * 8),
                (d = d.toString(16).match(/(.*?)(.{0,8})$/)),
                (y = parseInt(d[2], 16)),
                (b = parseInt(d[1], 16) || 0),
                (R[14] = y),
                (R[15] = b),
                V(this._hash, R);
            }),
            (Dt.hash = function (R, A) {
              return Dt.hashBinary(Nt(R), A);
            }),
            (Dt.hashBinary = function (R, A) {
              var f = mt(R),
                d = _t(f);
              return A ? we(d) : d;
            }),
            (Dt.ArrayBuffer = function () {
              this.reset();
            }),
            (Dt.ArrayBuffer.prototype.append = function (R) {
              var A = qe(this._buff.buffer, R, !0),
                f = A.length,
                d;
              for (this._length += R.byteLength, d = 64; d <= f; d += 64)
                V(this._hash, pt(A.subarray(d - 64, d)));
              return (
                (this._buff =
                  d - 64 < f
                    ? new Uint8Array(A.buffer.slice(d - 64))
                    : new Uint8Array(0)),
                this
              );
            }),
            (Dt.ArrayBuffer.prototype.end = function (R) {
              var A = this._buff,
                f = A.length,
                d = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                y,
                b;
              for (y = 0; y < f; y += 1) d[y >> 2] |= A[y] << (y % 4 << 3);
              return (
                this._finish(d, f),
                (b = _t(this._hash)),
                R && (b = we(b)),
                this.reset(),
                b
              );
            }),
            (Dt.ArrayBuffer.prototype.reset = function () {
              return (
                (this._buff = new Uint8Array(0)),
                (this._length = 0),
                (this._hash = [1732584193, -271733879, -1732584194, 271733878]),
                this
              );
            }),
            (Dt.ArrayBuffer.prototype.getState = function () {
              var R = Dt.prototype.getState.call(this);
              return (R.buff = Re(R.buff)), R;
            }),
            (Dt.ArrayBuffer.prototype.setState = function (R) {
              return (
                (R.buff = pe(R.buff, !0)), Dt.prototype.setState.call(this, R)
              );
            }),
            (Dt.ArrayBuffer.prototype.destroy = Dt.prototype.destroy),
            (Dt.ArrayBuffer.prototype._finish = Dt.prototype._finish),
            (Dt.ArrayBuffer.hash = function (R, A) {
              var f = wt(new Uint8Array(R)),
                d = _t(f);
              return A ? we(d) : d;
            }),
            Dt
          );
        });
      })(r);
      var t = r.exports;
      let n =
        File.prototype.slice ||
        File.prototype.mozSlice ||
        File.prototype.webkitSlice;
      class s {
        static create(S, F) {
          new s(S).create(F);
        }
        constructor(S) {
          (this.file = S),
            (this.chunkSize = 2097152),
            (this.chunkCount = Math.ceil(this.file.size / this.chunkSize)),
            (this.chunkIndex = 0);
        }
        create(S) {
          (this.callback = S),
            (this.md5Buffer = new t.ArrayBuffer()),
            (this.fileReader = new FileReader()),
            this.fileReader.addEventListener("load", (F) =>
              this.fileReaderDidLoad(F),
            ),
            this.fileReader.addEventListener("error", (F) =>
              this.fileReaderDidError(F),
            ),
            this.readNextChunk();
        }
        fileReaderDidLoad(S) {
          if ((this.md5Buffer.append(S.target.result), !this.readNextChunk())) {
            let F = this.md5Buffer.end(!0),
              st = btoa(F);
            this.callback(null, st);
          }
        }
        fileReaderDidError(S) {
          this.callback(`Error reading ${this.file.name}`);
        }
        readNextChunk() {
          if (
            this.chunkIndex < this.chunkCount ||
            (this.chunkIndex == 0 && this.chunkCount == 0)
          ) {
            let S = this.chunkIndex * this.chunkSize,
              F = Math.min(S + this.chunkSize, this.file.size),
              st = n.call(this.file, S, F);
            return this.fileReader.readAsArrayBuffer(st), this.chunkIndex++, !0;
          } else return !1;
        }
      }
      function l(U) {
        let S = w(document.head, `meta[name="${U}"]`);
        if (S) return S.getAttribute("content");
      }
      function h(U, S) {
        typeof U == "string" && ((S = U), (U = document));
        let F = U.querySelectorAll(S);
        return I(F);
      }
      function w(U, S) {
        return (
          typeof U == "string" && ((S = U), (U = document)), U.querySelector(S)
        );
      }
      function L(U, S, F = {}) {
        let { disabled: st } = U,
          { bubbles: V, cancelable: Rt, detail: pt } = F,
          mt = document.createEvent("Event");
        mt.initEvent(S, V || !0, Rt || !0), (mt.detail = pt || {});
        try {
          (U.disabled = !1), U.dispatchEvent(mt);
        } finally {
          U.disabled = st;
        }
        return mt;
      }
      function I(U) {
        return Array.isArray(U)
          ? U
          : Array.from
          ? Array.from(U)
          : [].slice.call(U);
      }
      class B {
        constructor(S, F, st, V = {}) {
          (this.file = S),
            (this.attributes = {
              filename: S.name,
              content_type: S.type || "application/octet-stream",
              byte_size: S.size,
              checksum: F,
            }),
            (this.xhr = new XMLHttpRequest()),
            this.xhr.open("POST", st, !0),
            (this.xhr.responseType = "json"),
            this.xhr.setRequestHeader("Content-Type", "application/json"),
            this.xhr.setRequestHeader("Accept", "application/json"),
            this.xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"),
            Object.keys(V).forEach((pt) => {
              this.xhr.setRequestHeader(pt, V[pt]);
            });
          let Rt = l("csrf-token");
          Rt != null && this.xhr.setRequestHeader("X-CSRF-Token", Rt),
            this.xhr.addEventListener("load", (pt) => this.requestDidLoad(pt)),
            this.xhr.addEventListener("error", (pt) =>
              this.requestDidError(pt),
            );
        }
        get status() {
          return this.xhr.status;
        }
        get response() {
          let { responseType: S, response: F } = this.xhr;
          return S == "json" ? F : JSON.parse(F);
        }
        create(S) {
          (this.callback = S),
            this.xhr.send(JSON.stringify({ blob: this.attributes }));
        }
        requestDidLoad(S) {
          if (this.status >= 200 && this.status < 300) {
            let { response: F } = this,
              { direct_upload: st } = F;
            delete F.direct_upload,
              (this.attributes = F),
              (this.directUploadData = st),
              this.callback(null, this.toJSON());
          } else this.requestDidError(S);
        }
        requestDidError(S) {
          this.callback(
            `Error creating Blob for "${this.file.name}". Status: ${this.status}`,
          );
        }
        toJSON() {
          let S = {};
          for (let F in this.attributes) S[F] = this.attributes[F];
          return S;
        }
      }
      class Z {
        constructor(S) {
          (this.blob = S), (this.file = S.file);
          let { url: F, headers: st } = S.directUploadData;
          (this.xhr = new XMLHttpRequest()),
            this.xhr.open("PUT", F, !0),
            (this.xhr.responseType = "text");
          for (let V in st) this.xhr.setRequestHeader(V, st[V]);
          this.xhr.addEventListener("load", (V) => this.requestDidLoad(V)),
            this.xhr.addEventListener("error", (V) => this.requestDidError(V));
        }
        create(S) {
          (this.callback = S), this.xhr.send(this.file.slice());
        }
        requestDidLoad(S) {
          let { status: F, response: st } = this.xhr;
          F >= 200 && F < 300
            ? this.callback(null, st)
            : this.requestDidError(S);
        }
        requestDidError(S) {
          this.callback(
            `Error storing "${this.file.name}". Status: ${this.xhr.status}`,
          );
        }
      }
      let Tt = 0;
      class ft {
        constructor(S, F, st, V = {}) {
          (this.id = ++Tt),
            (this.file = S),
            (this.url = F),
            (this.delegate = st),
            (this.customHeaders = V);
        }
        create(S) {
          s.create(this.file, (F, st) => {
            if (F) {
              S(F);
              return;
            }
            let V = new B(this.file, st, this.url, this.customHeaders);
            vt(this.delegate, "directUploadWillCreateBlobWithXHR", V.xhr),
              V.create((Rt) => {
                if (Rt) S(Rt);
                else {
                  let pt = new Z(V);
                  vt(this.delegate, "directUploadWillStoreFileWithXHR", pt.xhr),
                    pt.create((mt) => {
                      mt ? S(mt) : S(null, V.toJSON());
                    });
                }
              });
          });
        }
      }
      function vt(U, S, ...F) {
        if (U && typeof U[S] == "function") return U[S](...F);
      }
      class ht {
        constructor(S, F) {
          (this.input = S),
            (this.file = F),
            (this.directUpload = new ft(this.file, this.url, this)),
            this.dispatch("initialize");
        }
        start(S) {
          let F = document.createElement("input");
          (F.type = "hidden"),
            (F.name = this.input.name),
            this.input.insertAdjacentElement("beforebegin", F),
            this.dispatch("start"),
            this.directUpload.create((st, V) => {
              st
                ? (F.parentNode.removeChild(F), this.dispatchError(st))
                : (F.value = V.signed_id),
                this.dispatch("end"),
                S(st);
            });
        }
        uploadRequestDidProgress(S) {
          let F = (S.loaded / S.total) * 100;
          F && this.dispatch("progress", { progress: F });
        }
        get url() {
          return this.input.getAttribute("data-direct-upload-url");
        }
        dispatch(S, F = {}) {
          return (
            (F.file = this.file),
            (F.id = this.directUpload.id),
            L(this.input, `direct-upload:${S}`, { detail: F })
          );
        }
        dispatchError(S) {
          this.dispatch("error", { error: S }).defaultPrevented || alert(S);
        }
        directUploadWillCreateBlobWithXHR(S) {
          this.dispatch("before-blob-request", { xhr: S });
        }
        directUploadWillStoreFileWithXHR(S) {
          this.dispatch("before-storage-request", { xhr: S }),
            S.upload.addEventListener("progress", (F) =>
              this.uploadRequestDidProgress(F),
            );
        }
      }
      let Pt = "input[type=file][data-direct-upload-url]:not([disabled])";
      class Ct {
        constructor(S) {
          (this.form = S),
            (this.inputs = h(S, Pt).filter((F) => F.files.length));
        }
        start(S) {
          let F = this.createDirectUploadControllers(),
            st = () => {
              let V = F.shift();
              V
                ? V.start((Rt) => {
                    Rt ? (S(Rt), this.dispatch("end")) : st();
                  })
                : (S(), this.dispatch("end"));
            };
          this.dispatch("start"), st();
        }
        createDirectUploadControllers() {
          let S = [];
          return (
            this.inputs.forEach((F) => {
              I(F.files).forEach((st) => {
                let V = new ht(F, st);
                S.push(V);
              });
            }),
            S
          );
        }
        dispatch(S, F = {}) {
          return L(this.form, `direct-uploads:${S}`, { detail: F });
        }
      }
      let bt = "data-direct-uploads-processing",
        H = new WeakMap(),
        tt = !1;
      function Mt() {
        tt ||
          ((tt = !0),
          document.addEventListener("click", zt, !0),
          document.addEventListener("submit", $t, !0),
          document.addEventListener("ajax:before", Vt));
      }
      function zt(U) {
        let { target: S } = U;
        (S.tagName == "INPUT" || S.tagName == "BUTTON") &&
          S.type == "submit" &&
          S.form &&
          H.set(S.form, S);
      }
      function $t(U) {
        ae(U);
      }
      function Vt(U) {
        U.target.tagName == "FORM" && ae(U);
      }
      function ae(U) {
        let S = U.target;
        if (S.hasAttribute(bt)) {
          U.preventDefault();
          return;
        }
        let F = new Ct(S),
          { inputs: st } = F;
        st.length &&
          (U.preventDefault(),
          S.setAttribute(bt, ""),
          st.forEach(Ne),
          F.start((V) => {
            S.removeAttribute(bt), V ? st.forEach(ve) : St(S);
          }));
      }
      function St(U) {
        let S = H.get(U) || w(U, "input[type=submit], button[type=submit]");
        if (S) {
          let { disabled: F } = S;
          (S.disabled = !1), S.focus(), S.click(), (S.disabled = F);
        } else (S = document.createElement("input")), (S.type = "submit"), (S.style.display = "none"), U.appendChild(S), S.click(), U.removeChild(S);
        H.delete(U);
      }
      function Ne(U) {
        U.disabled = !0;
      }
      function ve(U) {
        U.disabled = !1;
      }
      function je() {
        window.ActiveStorage && Mt();
      }
      setTimeout(je, 1);
      class Te {
        constructor(S, F) {
          (this.attachment = S),
            (this.element = F),
            (this.directUpload = new ft(S.file, this.directUploadUrl, this));
        }
        start() {
          this.directUpload.create(this.directUploadDidComplete.bind(this));
        }
        directUploadWillStoreFileWithXHR(S) {
          S.upload.addEventListener("progress", (F) => {
            let st = (F.loaded / F.total) * 100;
            this.attachment.setUploadProgress(st);
          });
        }
        directUploadDidComplete(S, F) {
          if (S) throw new Error(`Direct upload failed: ${S}`);
          this.attachment.setAttributes({
            sgid: F.attachable_sgid,
            url: this.createBlobUrl(F.signed_id, F.filename),
          });
        }
        createBlobUrl(S, F) {
          return this.blobUrlTemplate
            .replace(":signed_id", S)
            .replace(":filename", encodeURIComponent(F));
        }
        get directUploadUrl() {
          return this.element.dataset.directUploadUrl;
        }
        get blobUrlTemplate() {
          return this.element.dataset.blobUrlTemplate;
        }
      }
      addEventListener("trix-attachment-add", (U) => {
        let { attachment: S, target: F } = U;
        S.file && new Te(S, F).start();
      });
    });
  });
  var fh = {};
  tu(fh, { default: () => Mg });
  var $o,
    Og,
    Mg,
    mh = hr(() => {
      $o = Qt(hh());
      dh();
      (Og = {
        start() {
          document.addEventListener("trix-initialize", () => {
            this.setToolbar(), this.setLanguage(), this.setAttachmentsConfig();
          });
        },
        setToolbar() {
          let r = document.getElementsByTagName("trix-toolbar"),
            { lang: t } = $o.default.config;
          r.forEach((n) => {
            n.innerHTML = `<div class="text-editor-button-groups">
        <span class="text-editor-button-group festalab-tools">
            <button type="button" class="festalab-tools-button festalab-tools-button--bold" data-trix-attribute="bold" data-key="b" title="${t.bold}"></button>
            <button type="button" class="festalab-tools-button festalab-tools-button--italic" data-trix-attribute="italic" data-key="i" title="${t.italic}"></button>
            <button type="button" class="festalab-tools-button festalab-tools-button--photo-upload" data-trix-action="attachFiles" title="${t.attachFiles}"></button>
            <button type="button" class="festalab-tools-button festalab-tools-button--undo" data-trix-action="undo" data-key="z" title="${t.undo}"></button>
            <button type="button" class="festalab-tools-button festalab-tools-button--redo" data-trix-action="redo" data-key="shift+z" title="${t.redo}"></button>
            <button type="button" class="festalab-tools-button festalab-tools-button--bullets" data-trix-attribute="bullet" data-key="" tab-index="-1" title="${t.bullets}"></button>
        </span>
      </div>`;
          });
        },
        setAttachmentsConfig() {
          let { attachments: r } = $o.default.config;
          (r.preview.caption.name = !1), (r.preview.caption.size = !1);
        },
        setLanguage() {
          let { lang: r } = $o.default.config;
          (r.bold = "Negrito"),
            (r.italic = "It\xE1lico"),
            (r.attachFiles = "Adicionar fotos"),
            (r.undo = "Desfazer"),
            (r.redo = "Refazer"),
            (r.captionPlaceholder = "Adicionar legenda..."),
            (r.bullets = "Lista de itens");
        },
      }),
        (Mg = Og);
    });
  var ph = Lr((gh, ql) => {
    (function () {
      "use strict";
      function r() {
        var t = window,
          n = document;
        if (
          "scrollBehavior" in n.documentElement.style &&
          t.__forceSmoothScrollPolyfill__ !== !0
        )
          return;
        var s = t.HTMLElement || t.Element,
          l = 468,
          h = {
            scroll: t.scroll || t.scrollTo,
            scrollBy: t.scrollBy,
            elementScroll: s.prototype.scroll || B,
            scrollIntoView: s.prototype.scrollIntoView,
          },
          w =
            t.performance && t.performance.now
              ? t.performance.now.bind(t.performance)
              : Date.now;
        function L(H) {
          var tt = ["MSIE ", "Trident/", "Edge/"];
          return new RegExp(tt.join("|")).test(H);
        }
        var I = L(t.navigator.userAgent) ? 1 : 0;
        function B(H, tt) {
          (this.scrollLeft = H), (this.scrollTop = tt);
        }
        function Z(H) {
          return 0.5 * (1 - Math.cos(Math.PI * H));
        }
        function Tt(H) {
          if (
            H === null ||
            typeof H != "object" ||
            H.behavior === void 0 ||
            H.behavior === "auto" ||
            H.behavior === "instant"
          )
            return !0;
          if (typeof H == "object" && H.behavior === "smooth") return !1;
          throw new TypeError(
            "behavior member of ScrollOptions " +
              H.behavior +
              " is not a valid value for enumeration ScrollBehavior.",
          );
        }
        function ft(H, tt) {
          if (tt === "Y") return H.clientHeight + I < H.scrollHeight;
          if (tt === "X") return H.clientWidth + I < H.scrollWidth;
        }
        function vt(H, tt) {
          var Mt = t.getComputedStyle(H, null)["overflow" + tt];
          return Mt === "auto" || Mt === "scroll";
        }
        function ht(H) {
          var tt = ft(H, "Y") && vt(H, "Y"),
            Mt = ft(H, "X") && vt(H, "X");
          return tt || Mt;
        }
        function Pt(H) {
          for (; H !== n.body && ht(H) === !1; ) H = H.parentNode || H.host;
          return H;
        }
        function Ct(H) {
          var tt = w(),
            Mt,
            zt,
            $t,
            Vt = (tt - H.startTime) / l;
          (Vt = Vt > 1 ? 1 : Vt),
            (Mt = Z(Vt)),
            (zt = H.startX + (H.x - H.startX) * Mt),
            ($t = H.startY + (H.y - H.startY) * Mt),
            H.method.call(H.scrollable, zt, $t),
            (zt !== H.x || $t !== H.y) &&
              t.requestAnimationFrame(Ct.bind(t, H));
        }
        function bt(H, tt, Mt) {
          var zt,
            $t,
            Vt,
            ae,
            St = w();
          H === n.body
            ? ((zt = t),
              ($t = t.scrollX || t.pageXOffset),
              (Vt = t.scrollY || t.pageYOffset),
              (ae = h.scroll))
            : ((zt = H), ($t = H.scrollLeft), (Vt = H.scrollTop), (ae = B)),
            Ct({
              scrollable: zt,
              method: ae,
              startTime: St,
              startX: $t,
              startY: Vt,
              x: tt,
              y: Mt,
            });
        }
        (t.scroll = t.scrollTo =
          function () {
            if (arguments[0] !== void 0) {
              if (Tt(arguments[0]) === !0) {
                h.scroll.call(
                  t,
                  arguments[0].left !== void 0
                    ? arguments[0].left
                    : typeof arguments[0] != "object"
                    ? arguments[0]
                    : t.scrollX || t.pageXOffset,
                  arguments[0].top !== void 0
                    ? arguments[0].top
                    : arguments[1] !== void 0
                    ? arguments[1]
                    : t.scrollY || t.pageYOffset,
                );
                return;
              }
              bt.call(
                t,
                n.body,
                arguments[0].left !== void 0
                  ? ~~arguments[0].left
                  : t.scrollX || t.pageXOffset,
                arguments[0].top !== void 0
                  ? ~~arguments[0].top
                  : t.scrollY || t.pageYOffset,
              );
            }
          }),
          (t.scrollBy = function () {
            if (arguments[0] !== void 0) {
              if (Tt(arguments[0])) {
                h.scrollBy.call(
                  t,
                  arguments[0].left !== void 0
                    ? arguments[0].left
                    : typeof arguments[0] != "object"
                    ? arguments[0]
                    : 0,
                  arguments[0].top !== void 0
                    ? arguments[0].top
                    : arguments[1] !== void 0
                    ? arguments[1]
                    : 0,
                );
                return;
              }
              bt.call(
                t,
                n.body,
                ~~arguments[0].left + (t.scrollX || t.pageXOffset),
                ~~arguments[0].top + (t.scrollY || t.pageYOffset),
              );
            }
          }),
          (s.prototype.scroll = s.prototype.scrollTo =
            function () {
              if (arguments[0] !== void 0) {
                if (Tt(arguments[0]) === !0) {
                  if (
                    typeof arguments[0] == "number" &&
                    arguments[1] === void 0
                  )
                    throw new SyntaxError("Value could not be converted");
                  h.elementScroll.call(
                    this,
                    arguments[0].left !== void 0
                      ? ~~arguments[0].left
                      : typeof arguments[0] != "object"
                      ? ~~arguments[0]
                      : this.scrollLeft,
                    arguments[0].top !== void 0
                      ? ~~arguments[0].top
                      : arguments[1] !== void 0
                      ? ~~arguments[1]
                      : this.scrollTop,
                  );
                  return;
                }
                var H = arguments[0].left,
                  tt = arguments[0].top;
                bt.call(
                  this,
                  this,
                  typeof H == "undefined" ? this.scrollLeft : ~~H,
                  typeof tt == "undefined" ? this.scrollTop : ~~tt,
                );
              }
            }),
          (s.prototype.scrollBy = function () {
            if (arguments[0] !== void 0) {
              if (Tt(arguments[0]) === !0) {
                h.elementScroll.call(
                  this,
                  arguments[0].left !== void 0
                    ? ~~arguments[0].left + this.scrollLeft
                    : ~~arguments[0] + this.scrollLeft,
                  arguments[0].top !== void 0
                    ? ~~arguments[0].top + this.scrollTop
                    : ~~arguments[1] + this.scrollTop,
                );
                return;
              }
              this.scroll({
                left: ~~arguments[0].left + this.scrollLeft,
                top: ~~arguments[0].top + this.scrollTop,
                behavior: arguments[0].behavior,
              });
            }
          }),
          (s.prototype.scrollIntoView = function () {
            if (Tt(arguments[0]) === !0) {
              h.scrollIntoView.call(
                this,
                arguments[0] === void 0 ? !0 : arguments[0],
              );
              return;
            }
            var H = Pt(this),
              tt = H.getBoundingClientRect(),
              Mt = this.getBoundingClientRect();
            H !== n.body
              ? (bt.call(
                  this,
                  H,
                  H.scrollLeft + Mt.left - tt.left,
                  H.scrollTop + Mt.top - tt.top,
                ),
                t.getComputedStyle(H).position !== "fixed" &&
                  t.scrollBy({
                    left: tt.left,
                    top: tt.top,
                    behavior: "smooth",
                  }))
              : t.scrollBy({ left: Mt.left, top: Mt.top, behavior: "smooth" });
          });
      }
      typeof gh == "object" && typeof ql != "undefined"
        ? (ql.exports = { polyfill: r })
        : r();
    })();
  });
  var vh = Lr((bh, zl) => {
    (function (r) {
      if (typeof bh == "object" && typeof zl != "undefined") zl.exports = r();
      else if (typeof define == "function" && define.amd) define([], r);
      else {
        var t;
        typeof window != "undefined"
          ? (t = window)
          : typeof global != "undefined"
          ? (t = global)
          : typeof self != "undefined"
          ? (t = self)
          : (t = this),
          (t.polyfillEventTarget = r());
      }
    })(function () {
      var r, t, n;
      return (function s(l, h, w) {
        function L(Z, Tt) {
          if (!h[Z]) {
            if (!l[Z]) {
              var ft = typeof an == "function" && an;
              if (!Tt && ft) return ft(Z, !0);
              if (I) return I(Z, !0);
              var vt = new Error("Cannot find module '" + Z + "'");
              throw ((vt.code = "MODULE_NOT_FOUND"), vt);
            }
            var ht = (h[Z] = { exports: {} });
            l[Z][0].call(
              ht.exports,
              function (Pt) {
                var Ct = l[Z][1][Pt];
                return L(Ct || Pt);
              },
              ht,
              ht.exports,
              s,
              l,
              h,
              w,
            );
          }
          return h[Z].exports;
        }
        for (var I = typeof an == "function" && an, B = 0; B < w.length; B++)
          L(w[B]);
        return L;
      })(
        {
          1: [
            function (s, l, h) {
              var w = !1,
                L = !1;
              function I() {}
              try {
                var B = Object.create(
                  {},
                  {
                    passive: {
                      get: function () {
                        w = !0;
                      },
                    },
                    once: {
                      get: function () {
                        L = !0;
                      },
                    },
                  },
                );
                window.addEventListener("test", I, B),
                  window.removeEventListener("test", I, B);
              } catch (Tt) {}
              var Z = (l.exports = function (ft) {
                var vt = ft.addEventListener,
                  ht = ft.removeEventListener,
                  Pt = new WeakMap();
                (ft.addEventListener = function (Ct, bt, H) {
                  if (
                    H === void 0 ||
                    H === !0 ||
                    H === !1 ||
                    !bt ||
                    (typeof bt != "function" && typeof bt != "object")
                  )
                    return vt.call(this, Ct, bt, H);
                  var tt =
                      typeof bt != "function" &&
                      typeof bt.handleEvent == "function"
                        ? bt.handleEvent.bind(bt)
                        : bt,
                    Mt = typeof H == "boolean" ? { capture: H } : H || {},
                    zt = Boolean(Mt.passive),
                    $t = Boolean(Mt.once),
                    Vt = Boolean(Mt.capture),
                    ae = tt;
                  !L &&
                    $t &&
                    (tt = function (ve) {
                      this.removeEventListener(Ct, bt, Mt), ae.call(this, ve);
                    }),
                    !w &&
                      zt &&
                      (tt = function (ve) {
                        (ve.preventDefault = I), ae.call(this, ve);
                      }),
                    Pt.has(this) || Pt.set(this, new WeakMap());
                  var St = Pt.get(this);
                  St.has(bt) || St.set(bt, []);
                  var Ne = zt * 1 + $t * 2 + Vt * 4;
                  (St.get(bt)[Ne] = tt), vt.call(this, Ct, tt, Vt);
                }),
                  (ft.removeEventListener = function (Ct, bt, H) {
                    var tt = Boolean(typeof H == "object" ? H.capture : H),
                      Mt = Pt.get(this);
                    if (!Mt) return ht.call(this, Ct, bt, H);
                    var zt = Mt.get(bt);
                    if (!zt) return ht.call(this, Ct, bt, H);
                    for (var $t in zt) {
                      var Vt = Boolean($t & 4);
                      Vt === tt && ht.call(this, Ct, zt[$t], Vt);
                    }
                  });
              });
              (!w || !L) &&
                (typeof EventTarget != "undefined"
                  ? Z(EventTarget.prototype)
                  : (Z(Text.prototype),
                    Z(HTMLElement.prototype),
                    Z(HTMLDocument.prototype),
                    Z(Window.prototype),
                    Z(XMLHttpRequest.prototype)));
            },
            {},
          ],
        },
        {},
        [1],
      )(1);
    });
  });
  var Eh = Lr((Hl, Wl) => {
    (function (r, t) {
      typeof Hl == "object" && typeof Wl != "undefined"
        ? (Wl.exports = t())
        : typeof define == "function" && define.amd
        ? define(t)
        : (r.lozad = t());
    })(Hl, function () {
      "use strict";
      var r = typeof document != "undefined" && document.documentMode,
        t = {
          rootMargin: "0px",
          threshold: 0,
          load: function (h) {
            if (h.nodeName.toLowerCase() === "picture") {
              var w = h.querySelector("img"),
                L = !1;
              w === null && ((w = document.createElement("img")), (L = !0)),
                r &&
                  h.getAttribute("data-iesrc") &&
                  (w.src = h.getAttribute("data-iesrc")),
                h.getAttribute("data-alt") &&
                  (w.alt = h.getAttribute("data-alt")),
                L && h.append(w);
            }
            if (
              h.nodeName.toLowerCase() === "video" &&
              !h.getAttribute("data-src") &&
              h.children
            ) {
              for (
                var I = h.children, B = void 0, Z = 0;
                Z <= I.length - 1;
                Z++
              )
                (B = I[Z].getAttribute("data-src")) && (I[Z].src = B);
              h.load();
            }
            h.getAttribute("data-poster") &&
              (h.poster = h.getAttribute("data-poster")),
              h.getAttribute("data-src") &&
                (h.src = h.getAttribute("data-src")),
              h.getAttribute("data-srcset") &&
                h.setAttribute("srcset", h.getAttribute("data-srcset"));
            var Tt = ",";
            if (
              (h.getAttribute("data-background-delimiter") &&
                (Tt = h.getAttribute("data-background-delimiter")),
              h.getAttribute("data-background-image"))
            )
              h.style.backgroundImage =
                "url('" +
                h
                  .getAttribute("data-background-image")
                  .split(Tt)
                  .join("'),url('") +
                "')";
            else if (h.getAttribute("data-background-image-set")) {
              var ft = h.getAttribute("data-background-image-set").split(Tt),
                vt = ft[0].substr(0, ft[0].indexOf(" ")) || ft[0];
              (vt = vt.indexOf("url(") === -1 ? "url(" + vt + ")" : vt),
                ft.length === 1
                  ? (h.style.backgroundImage = vt)
                  : h.setAttribute(
                      "style",
                      (h.getAttribute("style") || "") +
                        "background-image: " +
                        vt +
                        "; background-image: -webkit-image-set(" +
                        ft +
                        "); background-image: image-set(" +
                        ft +
                        ")",
                    );
            }
            h.getAttribute("data-toggle-class") &&
              h.classList.toggle(h.getAttribute("data-toggle-class"));
          },
          loaded: function () {},
        };
      function n(h) {
        h.setAttribute("data-loaded", !0);
      }
      var s = function (h) {
          return h.getAttribute("data-loaded") === "true";
        },
        l = function (h) {
          var w =
            1 < arguments.length && arguments[1] !== void 0
              ? arguments[1]
              : document;
          return h instanceof Element
            ? [h]
            : h instanceof NodeList
            ? h
            : w.querySelectorAll(h);
        };
      return function () {
        var h,
          w,
          L =
            0 < arguments.length && arguments[0] !== void 0
              ? arguments[0]
              : ".lozad",
          I =
            1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {},
          B = Object.assign({}, t, I),
          Z = B.root,
          Tt = B.rootMargin,
          ft = B.threshold,
          vt = B.load,
          ht = B.loaded,
          Pt = void 0;
        typeof window != "undefined" &&
          window.IntersectionObserver &&
          (Pt = new IntersectionObserver(
            ((h = vt),
            (w = ht),
            function (tt, Mt) {
              tt.forEach(function (zt) {
                (0 < zt.intersectionRatio || zt.isIntersecting) &&
                  (Mt.unobserve(zt.target),
                  s(zt.target) || (h(zt.target), n(zt.target), w(zt.target)));
              });
            }),
            { root: Z, rootMargin: Tt, threshold: ft },
          ));
        for (var Ct, bt = l(L, Z), H = 0; H < bt.length; H++)
          (Ct = bt[H]).getAttribute("data-placeholder-background") &&
            (Ct.style.background = Ct.getAttribute(
              "data-placeholder-background",
            ));
        return {
          observe: function () {
            for (var tt = l(L, Z), Mt = 0; Mt < tt.length; Mt++)
              s(tt[Mt]) ||
                (Pt ? Pt.observe(tt[Mt]) : (vt(tt[Mt]), n(tt[Mt]), ht(tt[Mt])));
          },
          triggerLoad: function (tt) {
            s(tt) || (vt(tt), n(tt), ht(tt));
          },
          observer: Pt,
        };
      };
    });
  });
  var Sh = Qt(Oe()),
    Ch = Qt(Ca());
  (function () {
    if (
      window.Reflect === void 0 ||
      window.customElements === void 0 ||
      window.customElements.polyfillWrapFlushCallback
    )
      return;
    let r = HTMLElement,
      t = {
        HTMLElement: function () {
          return Reflect.construct(r, [], this.constructor);
        },
      };
    (window.HTMLElement = t.HTMLElement),
      (HTMLElement.prototype = r.prototype),
      (HTMLElement.prototype.constructor = HTMLElement),
      Object.setPrototypeOf(HTMLElement, r);
  })();
  (function (r) {
    if (typeof r.requestSubmit == "function") return;
    r.requestSubmit = function (s) {
      s
        ? (t(s, this), s.click())
        : ((s = document.createElement("input")),
          (s.type = "submit"),
          (s.hidden = !0),
          this.appendChild(s),
          s.click(),
          this.removeChild(s));
    };
    function t(s, l) {
      s instanceof HTMLElement ||
        n(TypeError, "parameter 1 is not of type 'HTMLElement'"),
        s.type == "submit" ||
          n(TypeError, "The specified element is not a submit button"),
        s.form == l ||
          n(
            DOMException,
            "The specified element is not owned by this form element",
            "NotFoundError",
          );
    }
    function n(s, l, h) {
      throw new s(
        "Failed to execute 'requestSubmit' on 'HTMLFormElement': " + l + ".",
        h,
      );
    }
  })(HTMLFormElement.prototype);
  var ou = new WeakMap();
  function Lf(r) {
    let t =
        r instanceof Element ? r : r instanceof Node ? r.parentElement : null,
      n = t ? t.closest("input, button") : null;
    return (n == null ? void 0 : n.type) == "submit" ? n : null;
  }
  function Rf(r) {
    let t = Lf(r.target);
    t && t.form && ou.set(t.form, t);
  }
  (function () {
    if ("submitter" in Event.prototype) return;
    let r = window.Event.prototype;
    if ("SubmitEvent" in window && /Apple Computer/.test(navigator.vendor))
      r = window.SubmitEvent.prototype;
    else if ("SubmitEvent" in window) return;
    addEventListener("click", Rf, !0),
      Object.defineProperty(r, "submitter", {
        get() {
          if (this.type == "submit" && this.target instanceof HTMLFormElement)
            return ou.get(this.target);
        },
      });
  })();
  var Gr;
  (function (r) {
    (r.eager = "eager"), (r.lazy = "lazy");
  })(Gr || (Gr = {}));
  var Ar = class extends HTMLElement {
    static get observedAttributes() {
      return ["disabled", "complete", "loading", "src"];
    }
    constructor() {
      super(),
        (this.loaded = Promise.resolve()),
        (this.delegate = new Ar.delegateConstructor(this));
    }
    connectedCallback() {
      this.delegate.connect();
    }
    disconnectedCallback() {
      this.delegate.disconnect();
    }
    reload() {
      return this.delegate.sourceURLReloaded();
    }
    attributeChangedCallback(t) {
      t == "loading"
        ? this.delegate.loadingStyleChanged()
        : t == "complete"
        ? this.delegate.completeChanged()
        : t == "src"
        ? this.delegate.sourceURLChanged()
        : this.delegate.disabledChanged();
    }
    get src() {
      return this.getAttribute("src");
    }
    set src(t) {
      t ? this.setAttribute("src", t) : this.removeAttribute("src");
    }
    get loading() {
      return _f(this.getAttribute("loading") || "");
    }
    set loading(t) {
      t ? this.setAttribute("loading", t) : this.removeAttribute("loading");
    }
    get disabled() {
      return this.hasAttribute("disabled");
    }
    set disabled(t) {
      t ? this.setAttribute("disabled", "") : this.removeAttribute("disabled");
    }
    get autoscroll() {
      return this.hasAttribute("autoscroll");
    }
    set autoscroll(t) {
      t
        ? this.setAttribute("autoscroll", "")
        : this.removeAttribute("autoscroll");
    }
    get complete() {
      return !this.delegate.isLoading;
    }
    get isActive() {
      return this.ownerDocument === document && !this.isPreview;
    }
    get isPreview() {
      var t, n;
      return (n =
        (t = this.ownerDocument) === null || t === void 0
          ? void 0
          : t.documentElement) === null || n === void 0
        ? void 0
        : n.hasAttribute("data-turbo-preview");
    }
  };
  function _f(r) {
    switch (r.toLowerCase()) {
      case "lazy":
        return Gr.lazy;
      default:
        return Gr.eager;
    }
  }
  function Xe(r) {
    return new URL(r.toString(), document.baseURI);
  }
  function ci(r) {
    let t;
    if (r.hash) return r.hash.slice(1);
    if ((t = r.href.match(/#(.*)$/))) return t[1];
  }
  function Ja(r, t) {
    let n =
      (t == null ? void 0 : t.getAttribute("formaction")) ||
      r.getAttribute("action") ||
      r.action;
    return Xe(n);
  }
  function Df(r) {
    return (If(r).match(/\.[^.]*$/) || [])[0] || "";
  }
  function Pf(r) {
    return !!Df(r).match(/^(?:|\.(?:htm|html|xhtml|php))$/);
  }
  function Of(r, t) {
    let n = Bf(t);
    return r.href === Xe(n).href || r.href.startsWith(n);
  }
  function ji(r, t) {
    return Of(r, t) && Pf(r);
  }
  function ka(r) {
    let t = ci(r);
    return t != null ? r.href.slice(0, -(t.length + 1)) : r.href;
  }
  function Js(r) {
    return ka(r);
  }
  function Mf(r, t) {
    return Xe(r).href == Xe(t).href;
  }
  function Ff(r) {
    return r.pathname.split("/").slice(1);
  }
  function If(r) {
    return Ff(r).slice(-1)[0];
  }
  function Bf(r) {
    return Nf(r.origin + r.pathname);
  }
  function Nf(r) {
    return r.endsWith("/") ? r : r + "/";
  }
  var ln = class {
    constructor(t) {
      this.response = t;
    }
    get succeeded() {
      return this.response.ok;
    }
    get failed() {
      return !this.succeeded;
    }
    get clientError() {
      return this.statusCode >= 400 && this.statusCode <= 499;
    }
    get serverError() {
      return this.statusCode >= 500 && this.statusCode <= 599;
    }
    get redirected() {
      return this.response.redirected;
    }
    get location() {
      return Xe(this.response.url);
    }
    get isHTML() {
      return (
        this.contentType &&
        this.contentType.match(
          /^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/,
        )
      );
    }
    get statusCode() {
      return this.response.status;
    }
    get contentType() {
      return this.header("Content-Type");
    }
    get responseText() {
      return this.response.clone().text();
    }
    get responseHTML() {
      return this.isHTML
        ? this.response.clone().text()
        : Promise.resolve(void 0);
    }
    header(t) {
      return this.response.headers.get(t);
    }
  };
  function cn(r) {
    if (r.getAttribute("data-turbo-eval") == "false") return r;
    {
      let t = document.createElement("script"),
        n = to("csp-nonce");
      return (
        n && (t.nonce = n),
        (t.textContent = r.textContent),
        (t.async = !1),
        jf(t, r),
        t
      );
    }
  }
  function jf(r, t) {
    for (let { name: n, value: s } of t.attributes) r.setAttribute(n, s);
  }
  function qf(r) {
    let t = document.createElement("template");
    return (t.innerHTML = r), t.content;
  }
  function He(r, { target: t, cancelable: n, detail: s } = {}) {
    let l = new CustomEvent(r, {
      cancelable: n,
      bubbles: !0,
      composed: !0,
      detail: s,
    });
    return (
      t && t.isConnected
        ? t.dispatchEvent(l)
        : document.documentElement.dispatchEvent(l),
      l
    );
  }
  function Qs() {
    return new Promise((r) => requestAnimationFrame(() => r()));
  }
  function zf() {
    return new Promise((r) => setTimeout(() => r(), 0));
  }
  function Hf() {
    return Promise.resolve();
  }
  function au(r = "") {
    return new DOMParser().parseFromString(r, "text/html");
  }
  function lu(r, ...t) {
    let n = Wf(r, t).replace(/^\n/, "").split(`
`),
      s = n[0].match(/^\s+/),
      l = s ? s[0].length : 0;
    return n.map((h) => h.slice(l)).join(`
`);
  }
  function Wf(r, t) {
    return r.reduce((n, s, l) => {
      let h = t[l] == null ? "" : t[l];
      return n + s + h;
    }, "");
  }
  function qi() {
    return Array.from({ length: 36 })
      .map((r, t) =>
        t == 8 || t == 13 || t == 18 || t == 23
          ? "-"
          : t == 14
          ? "4"
          : t == 19
          ? (Math.floor(Math.random() * 4) + 8).toString(16)
          : Math.floor(Math.random() * 15).toString(16),
      )
      .join("");
  }
  function Zs(r, ...t) {
    for (let n of t.map((s) => (s == null ? void 0 : s.getAttribute(r))))
      if (typeof n == "string") return n;
    return null;
  }
  function Uf(r, ...t) {
    return t.some((n) => n && n.hasAttribute(r));
  }
  function La(...r) {
    for (let t of r)
      t.localName == "turbo-frame" && t.setAttribute("busy", ""),
        t.setAttribute("aria-busy", "true");
  }
  function Ra(...r) {
    for (let t of r)
      t.localName == "turbo-frame" && t.removeAttribute("busy"),
        t.removeAttribute("aria-busy");
  }
  function Vf(r, t = 2e3) {
    return new Promise((n) => {
      let s = () => {
        r.removeEventListener("error", s),
          r.removeEventListener("load", s),
          n();
      };
      r.addEventListener("load", s, { once: !0 }),
        r.addEventListener("error", s, { once: !0 }),
        setTimeout(n, t);
    });
  }
  function cu(r) {
    switch (r) {
      case "replace":
        return history.replaceState;
      case "advance":
      case "restore":
        return history.pushState;
    }
  }
  function $f(r) {
    return r == "advance" || r == "replace" || r == "restore";
  }
  function lo(...r) {
    let t = Zs("data-turbo-action", ...r);
    return $f(t) ? t : null;
  }
  function uu(r) {
    return document.querySelector(`meta[name="${r}"]`);
  }
  function to(r) {
    let t = uu(r);
    return t && t.content;
  }
  function Xf(r, t) {
    let n = uu(r);
    return (
      n ||
        ((n = document.createElement("meta")),
        n.setAttribute("name", r),
        document.head.appendChild(n)),
      n.setAttribute("content", t),
      n
    );
  }
  function eo(r, t) {
    var n;
    if (r instanceof Element)
      return (
        r.closest(t) ||
        eo(
          r.assignedSlot ||
            ((n = r.getRootNode()) === null || n === void 0 ? void 0 : n.host),
          t,
        )
      );
  }
  var Je;
  (function (r) {
    (r[(r.get = 0)] = "get"),
      (r[(r.post = 1)] = "post"),
      (r[(r.put = 2)] = "put"),
      (r[(r.patch = 3)] = "patch"),
      (r[(r.delete = 4)] = "delete");
  })(Je || (Je = {}));
  function Kf(r) {
    switch (r.toLowerCase()) {
      case "get":
        return Je.get;
      case "post":
        return Je.post;
      case "put":
        return Je.put;
      case "patch":
        return Je.patch;
      case "delete":
        return Je.delete;
    }
  }
  var un = class {
      constructor(t, n, s, l = new URLSearchParams(), h = null) {
        (this.abortController = new AbortController()),
          (this.resolveRequestPromise = (w) => {}),
          (this.delegate = t),
          (this.method = n),
          (this.headers = this.defaultHeaders),
          (this.body = l),
          (this.url = s),
          (this.target = h);
      }
      get location() {
        return this.url;
      }
      get params() {
        return this.url.searchParams;
      }
      get entries() {
        return this.body ? Array.from(this.body.entries()) : [];
      }
      cancel() {
        this.abortController.abort();
      }
      perform() {
        return Ot(this, null, function* () {
          let { fetchOptions: t } = this;
          this.delegate.prepareRequest(this),
            yield this.allowRequestToBeIntercepted(t);
          try {
            this.delegate.requestStarted(this);
            let n = yield fetch(this.url.href, t);
            return yield this.receive(n);
          } catch (n) {
            if (n.name !== "AbortError")
              throw (
                (this.willDelegateErrorHandling(n) &&
                  this.delegate.requestErrored(this, n),
                n)
              );
          } finally {
            this.delegate.requestFinished(this);
          }
        });
      }
      receive(t) {
        return Ot(this, null, function* () {
          let n = new ln(t);
          return (
            He("turbo:before-fetch-response", {
              cancelable: !0,
              detail: { fetchResponse: n },
              target: this.target,
            }).defaultPrevented
              ? this.delegate.requestPreventedHandlingResponse(this, n)
              : n.succeeded
              ? this.delegate.requestSucceededWithResponse(this, n)
              : this.delegate.requestFailedWithResponse(this, n),
            n
          );
        });
      }
      get fetchOptions() {
        var t;
        return {
          method: Je[this.method].toUpperCase(),
          credentials: "same-origin",
          headers: this.headers,
          redirect: "follow",
          body: this.isSafe ? null : this.body,
          signal: this.abortSignal,
          referrer:
            (t = this.delegate.referrer) === null || t === void 0
              ? void 0
              : t.href,
        };
      }
      get defaultHeaders() {
        return { Accept: "text/html, application/xhtml+xml" };
      }
      get isSafe() {
        return this.method === Je.get;
      }
      get abortSignal() {
        return this.abortController.signal;
      }
      acceptResponseType(t) {
        this.headers.Accept = [t, this.headers.Accept].join(", ");
      }
      allowRequestToBeIntercepted(t) {
        return Ot(this, null, function* () {
          let n = new Promise((l) => (this.resolveRequestPromise = l));
          He("turbo:before-fetch-request", {
            cancelable: !0,
            detail: {
              fetchOptions: t,
              url: this.url,
              resume: this.resolveRequestPromise,
            },
            target: this.target,
          }).defaultPrevented && (yield n);
        });
      }
      willDelegateErrorHandling(t) {
        return !He("turbo:fetch-request-error", {
          target: this.target,
          cancelable: !0,
          detail: { request: this, error: t },
        }).defaultPrevented;
      }
    },
    _a = class {
      constructor(t, n) {
        (this.started = !1),
          (this.intersect = (s) => {
            let l = s.slice(-1)[0];
            l != null &&
              l.isIntersecting &&
              this.delegate.elementAppearedInViewport(this.element);
          }),
          (this.delegate = t),
          (this.element = n),
          (this.intersectionObserver = new IntersectionObserver(
            this.intersect,
          ));
      }
      start() {
        this.started ||
          ((this.started = !0),
          this.intersectionObserver.observe(this.element));
      }
      stop() {
        this.started &&
          ((this.started = !1),
          this.intersectionObserver.unobserve(this.element));
      }
    },
    Nr = class {
      static wrap(t) {
        return typeof t == "string" ? new this(qf(t)) : t;
      }
      constructor(t) {
        this.fragment = Gf(t);
      }
    };
  Nr.contentType = "text/vnd.turbo-stream.html";
  function Gf(r) {
    for (let t of r.querySelectorAll("turbo-stream")) {
      let n = document.importNode(t, !0);
      for (let s of n.templateElement.content.querySelectorAll("script"))
        s.replaceWith(cn(s));
      t.replaceWith(n);
    }
    return r;
  }
  var Xr;
  (function (r) {
    (r[(r.initialized = 0)] = "initialized"),
      (r[(r.requesting = 1)] = "requesting"),
      (r[(r.waiting = 2)] = "waiting"),
      (r[(r.receiving = 3)] = "receiving"),
      (r[(r.stopping = 4)] = "stopping"),
      (r[(r.stopped = 5)] = "stopped");
  })(Xr || (Xr = {}));
  var Kr;
  (function (r) {
    (r.urlEncoded = "application/x-www-form-urlencoded"),
      (r.multipart = "multipart/form-data"),
      (r.plain = "text/plain");
  })(Kr || (Kr = {}));
  function Yf(r) {
    switch (r.toLowerCase()) {
      case Kr.multipart:
        return Kr.multipart;
      case Kr.plain:
        return Kr.plain;
      default:
        return Kr.urlEncoded;
    }
  }
  var ui = class {
    static confirmMethod(t, n, s) {
      return Promise.resolve(confirm(t));
    }
    constructor(t, n, s, l = !1) {
      (this.state = Xr.initialized),
        (this.delegate = t),
        (this.formElement = n),
        (this.submitter = s),
        (this.formData = Jf(n, s)),
        (this.location = Xe(this.action)),
        this.method == Je.get && tm(this.location, [...this.body.entries()]),
        (this.fetchRequest = new un(
          this,
          this.method,
          this.location,
          this.body,
          this.formElement,
        )),
        (this.mustRedirect = l);
    }
    get method() {
      var t;
      let n =
        ((t = this.submitter) === null || t === void 0
          ? void 0
          : t.getAttribute("formmethod")) ||
        this.formElement.getAttribute("method") ||
        "";
      return Kf(n.toLowerCase()) || Je.get;
    }
    get action() {
      var t;
      let n =
        typeof this.formElement.action == "string"
          ? this.formElement.action
          : null;
      return !((t = this.submitter) === null || t === void 0) &&
        t.hasAttribute("formaction")
        ? this.submitter.getAttribute("formaction") || ""
        : this.formElement.getAttribute("action") || n || "";
    }
    get body() {
      return this.enctype == Kr.urlEncoded || this.method == Je.get
        ? new URLSearchParams(this.stringFormData)
        : this.formData;
    }
    get enctype() {
      var t;
      return Yf(
        ((t = this.submitter) === null || t === void 0
          ? void 0
          : t.getAttribute("formenctype")) || this.formElement.enctype,
      );
    }
    get isSafe() {
      return this.fetchRequest.isSafe;
    }
    get stringFormData() {
      return [...this.formData].reduce(
        (t, [n, s]) => t.concat(typeof s == "string" ? [[n, s]] : []),
        [],
      );
    }
    start() {
      return Ot(this, null, function* () {
        let { initialized: t, requesting: n } = Xr,
          s = Zs("data-turbo-confirm", this.submitter, this.formElement);
        if (
          !(
            typeof s == "string" &&
            !(yield ui.confirmMethod(s, this.formElement, this.submitter))
          ) &&
          this.state == t
        )
          return (this.state = n), this.fetchRequest.perform();
      });
    }
    stop() {
      let { stopping: t, stopped: n } = Xr;
      if (this.state != t && this.state != n)
        return (this.state = t), this.fetchRequest.cancel(), !0;
    }
    prepareRequest(t) {
      if (!t.isSafe) {
        let n = Qf(to("csrf-param")) || to("csrf-token");
        n && (t.headers["X-CSRF-Token"] = n);
      }
      this.requestAcceptsTurboStreamResponse(t) &&
        t.acceptResponseType(Nr.contentType);
    }
    requestStarted(t) {
      var n;
      (this.state = Xr.waiting),
        (n = this.submitter) === null ||
          n === void 0 ||
          n.setAttribute("disabled", ""),
        this.setSubmitsWith(),
        He("turbo:submit-start", {
          target: this.formElement,
          detail: { formSubmission: this },
        }),
        this.delegate.formSubmissionStarted(this);
    }
    requestPreventedHandlingResponse(t, n) {
      this.result = { success: n.succeeded, fetchResponse: n };
    }
    requestSucceededWithResponse(t, n) {
      if (n.clientError || n.serverError)
        this.delegate.formSubmissionFailedWithResponse(this, n);
      else if (this.requestMustRedirect(t) && Zf(n)) {
        let s = new Error("Form responses must redirect to another location");
        this.delegate.formSubmissionErrored(this, s);
      } else
        (this.state = Xr.receiving),
          (this.result = { success: !0, fetchResponse: n }),
          this.delegate.formSubmissionSucceededWithResponse(this, n);
    }
    requestFailedWithResponse(t, n) {
      (this.result = { success: !1, fetchResponse: n }),
        this.delegate.formSubmissionFailedWithResponse(this, n);
    }
    requestErrored(t, n) {
      (this.result = { success: !1, error: n }),
        this.delegate.formSubmissionErrored(this, n);
    }
    requestFinished(t) {
      var n;
      (this.state = Xr.stopped),
        (n = this.submitter) === null ||
          n === void 0 ||
          n.removeAttribute("disabled"),
        this.resetSubmitterText(),
        He("turbo:submit-end", {
          target: this.formElement,
          detail: Object.assign({ formSubmission: this }, this.result),
        }),
        this.delegate.formSubmissionFinished(this);
    }
    setSubmitsWith() {
      if (!(!this.submitter || !this.submitsWith)) {
        if (this.submitter.matches("button"))
          (this.originalSubmitText = this.submitter.innerHTML),
            (this.submitter.innerHTML = this.submitsWith);
        else if (this.submitter.matches("input")) {
          let t = this.submitter;
          (this.originalSubmitText = t.value), (t.value = this.submitsWith);
        }
      }
    }
    resetSubmitterText() {
      if (!(!this.submitter || !this.originalSubmitText)) {
        if (this.submitter.matches("button"))
          this.submitter.innerHTML = this.originalSubmitText;
        else if (this.submitter.matches("input")) {
          let t = this.submitter;
          t.value = this.originalSubmitText;
        }
      }
    }
    requestMustRedirect(t) {
      return !t.isSafe && this.mustRedirect;
    }
    requestAcceptsTurboStreamResponse(t) {
      return (
        !t.isSafe || Uf("data-turbo-stream", this.submitter, this.formElement)
      );
    }
    get submitsWith() {
      var t;
      return (t = this.submitter) === null || t === void 0
        ? void 0
        : t.getAttribute("data-turbo-submits-with");
    }
  };
  function Jf(r, t) {
    let n = new FormData(r),
      s = t == null ? void 0 : t.getAttribute("name"),
      l = t == null ? void 0 : t.getAttribute("value");
    return s && n.append(s, l || ""), n;
  }
  function Qf(r) {
    if (r != null) {
      let n = (document.cookie ? document.cookie.split("; ") : []).find((s) =>
        s.startsWith(r),
      );
      if (n) {
        let s = n.split("=").slice(1).join("=");
        return s ? decodeURIComponent(s) : void 0;
      }
    }
  }
  function Zf(r) {
    return r.statusCode == 200 && !r.redirected;
  }
  function tm(r, t) {
    let n = new URLSearchParams();
    for (let [s, l] of t) l instanceof File || n.append(s, l);
    return (r.search = n.toString()), r;
  }
  var zi = class {
    constructor(t) {
      this.element = t;
    }
    get activeElement() {
      return this.element.ownerDocument.activeElement;
    }
    get children() {
      return [...this.element.children];
    }
    hasAnchor(t) {
      return this.getElementForAnchor(t) != null;
    }
    getElementForAnchor(t) {
      return t
        ? this.element.querySelector(`[id='${t}'], a[name='${t}']`)
        : null;
    }
    get isConnected() {
      return this.element.isConnected;
    }
    get firstAutofocusableElement() {
      let t =
        "[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";
      for (let n of this.element.querySelectorAll("[autofocus]"))
        if (n.closest(t) == null) return n;
      return null;
    }
    get permanentElements() {
      return du(this.element);
    }
    getPermanentElementById(t) {
      return hu(this.element, t);
    }
    getPermanentElementMapForSnapshot(t) {
      let n = {};
      for (let s of this.permanentElements) {
        let { id: l } = s,
          h = t.getPermanentElementById(l);
        h && (n[l] = [s, h]);
      }
      return n;
    }
  };
  function hu(r, t) {
    return r.querySelector(`#${t}[data-turbo-permanent]`);
  }
  function du(r) {
    return r.querySelectorAll("[id][data-turbo-permanent]");
  }
  var hn = class {
    constructor(t, n) {
      (this.started = !1),
        (this.submitCaptured = () => {
          this.eventTarget.removeEventListener(
            "submit",
            this.submitBubbled,
            !1,
          ),
            this.eventTarget.addEventListener("submit", this.submitBubbled, !1);
        }),
        (this.submitBubbled = (s) => {
          if (!s.defaultPrevented) {
            let l = s.target instanceof HTMLFormElement ? s.target : void 0,
              h = s.submitter || void 0;
            l &&
              em(l, h) &&
              rm(l, h) &&
              this.delegate.willSubmitForm(l, h) &&
              (s.preventDefault(),
              s.stopImmediatePropagation(),
              this.delegate.formSubmitted(l, h));
          }
        }),
        (this.delegate = t),
        (this.eventTarget = n);
    }
    start() {
      this.started ||
        (this.eventTarget.addEventListener("submit", this.submitCaptured, !0),
        (this.started = !0));
    }
    stop() {
      this.started &&
        (this.eventTarget.removeEventListener(
          "submit",
          this.submitCaptured,
          !0,
        ),
        (this.started = !1));
    }
  };
  function em(r, t) {
    return (
      ((t == null ? void 0 : t.getAttribute("formmethod")) ||
        r.getAttribute("method")) != "dialog"
    );
  }
  function rm(r, t) {
    if (
      (t == null ? void 0 : t.hasAttribute("formtarget")) ||
      r.hasAttribute("target")
    ) {
      let n = (t == null ? void 0 : t.getAttribute("formtarget")) || r.target;
      for (let s of document.getElementsByName(n))
        if (s instanceof HTMLIFrameElement) return !1;
      return !0;
    } else return !0;
  }
  var ro = class {
      constructor(t, n) {
        (this.resolveRenderPromise = (s) => {}),
          (this.resolveInterceptionPromise = (s) => {}),
          (this.delegate = t),
          (this.element = n);
      }
      scrollToAnchor(t) {
        let n = this.snapshot.getElementForAnchor(t);
        n
          ? (this.scrollToElement(n), this.focusElement(n))
          : this.scrollToPosition({ x: 0, y: 0 });
      }
      scrollToAnchorFromLocation(t) {
        this.scrollToAnchor(ci(t));
      }
      scrollToElement(t) {
        t.scrollIntoView();
      }
      focusElement(t) {
        t instanceof HTMLElement &&
          (t.hasAttribute("tabindex")
            ? t.focus()
            : (t.setAttribute("tabindex", "-1"),
              t.focus(),
              t.removeAttribute("tabindex")));
      }
      scrollToPosition({ x: t, y: n }) {
        this.scrollRoot.scrollTo(t, n);
      }
      scrollToTop() {
        this.scrollToPosition({ x: 0, y: 0 });
      }
      get scrollRoot() {
        return window;
      }
      render(t) {
        return Ot(this, null, function* () {
          let { isPreview: n, shouldRender: s, newSnapshot: l } = t;
          if (s)
            try {
              (this.renderPromise = new Promise(
                (I) => (this.resolveRenderPromise = I),
              )),
                (this.renderer = t),
                yield this.prepareToRenderSnapshot(t);
              let h = new Promise((I) => (this.resolveInterceptionPromise = I)),
                w = {
                  resume: this.resolveInterceptionPromise,
                  render: this.renderer.renderElement,
                };
              this.delegate.allowsImmediateRender(l, w) || (yield h),
                yield this.renderSnapshot(t),
                this.delegate.viewRenderedSnapshot(l, n),
                this.delegate.preloadOnLoadLinksForView(this.element),
                this.finishRenderingSnapshot(t);
            } finally {
              delete this.renderer,
                this.resolveRenderPromise(void 0),
                delete this.renderPromise;
            }
          else this.invalidate(t.reloadReason);
        });
      }
      invalidate(t) {
        this.delegate.viewInvalidated(t);
      }
      prepareToRenderSnapshot(t) {
        return Ot(this, null, function* () {
          this.markAsPreview(t.isPreview), yield t.prepareToRender();
        });
      }
      markAsPreview(t) {
        t
          ? this.element.setAttribute("data-turbo-preview", "")
          : this.element.removeAttribute("data-turbo-preview");
      }
      renderSnapshot(t) {
        return Ot(this, null, function* () {
          yield t.render();
        });
      }
      finishRenderingSnapshot(t) {
        t.finishRendering();
      }
    },
    Da = class extends ro {
      missing() {
        this.element.innerHTML =
          '<strong class="turbo-frame-error">Content missing</strong>';
      }
      get snapshot() {
        return new zi(this.element);
      }
    },
    io = class {
      constructor(t, n) {
        (this.clickBubbled = (s) => {
          this.respondsToEventTarget(s.target)
            ? (this.clickEvent = s)
            : delete this.clickEvent;
        }),
          (this.linkClicked = (s) => {
            this.clickEvent &&
              this.respondsToEventTarget(s.target) &&
              s.target instanceof Element &&
              this.delegate.shouldInterceptLinkClick(
                s.target,
                s.detail.url,
                s.detail.originalEvent,
              ) &&
              (this.clickEvent.preventDefault(),
              s.preventDefault(),
              this.delegate.linkClickIntercepted(
                s.target,
                s.detail.url,
                s.detail.originalEvent,
              )),
              delete this.clickEvent;
          }),
          (this.willVisit = (s) => {
            delete this.clickEvent;
          }),
          (this.delegate = t),
          (this.element = n);
      }
      start() {
        this.element.addEventListener("click", this.clickBubbled),
          document.addEventListener("turbo:click", this.linkClicked),
          document.addEventListener("turbo:before-visit", this.willVisit);
      }
      stop() {
        this.element.removeEventListener("click", this.clickBubbled),
          document.removeEventListener("turbo:click", this.linkClicked),
          document.removeEventListener("turbo:before-visit", this.willVisit);
      }
      respondsToEventTarget(t) {
        let n =
          t instanceof Element ? t : t instanceof Node ? t.parentElement : null;
        return n && n.closest("turbo-frame, html") == this.element;
      }
    },
    no = class {
      constructor(t, n) {
        (this.started = !1),
          (this.clickCaptured = () => {
            this.eventTarget.removeEventListener(
              "click",
              this.clickBubbled,
              !1,
            ),
              this.eventTarget.addEventListener("click", this.clickBubbled, !1);
          }),
          (this.clickBubbled = (s) => {
            if (s instanceof MouseEvent && this.clickEventIsSignificant(s)) {
              let l = (s.composedPath && s.composedPath()[0]) || s.target,
                h = this.findLinkFromClickTarget(l);
              if (h && im(h)) {
                let w = this.getLocationForLink(h);
                this.delegate.willFollowLinkToLocation(h, w, s) &&
                  (s.preventDefault(),
                  this.delegate.followedLinkToLocation(h, w));
              }
            }
          }),
          (this.delegate = t),
          (this.eventTarget = n);
      }
      start() {
        this.started ||
          (this.eventTarget.addEventListener("click", this.clickCaptured, !0),
          (this.started = !0));
      }
      stop() {
        this.started &&
          (this.eventTarget.removeEventListener(
            "click",
            this.clickCaptured,
            !0,
          ),
          (this.started = !1));
      }
      clickEventIsSignificant(t) {
        return !(
          (t.target && t.target.isContentEditable) ||
          t.defaultPrevented ||
          t.which > 1 ||
          t.altKey ||
          t.ctrlKey ||
          t.metaKey ||
          t.shiftKey
        );
      }
      findLinkFromClickTarget(t) {
        return eo(t, "a[href]:not([target^=_]):not([download])");
      }
      getLocationForLink(t) {
        return Xe(t.getAttribute("href") || "");
      }
    };
  function im(r) {
    if (r.hasAttribute("target")) {
      for (let t of document.getElementsByName(r.target))
        if (t instanceof HTMLIFrameElement) return !1;
      return !0;
    } else return !0;
  }
  var so = class {
      constructor(t, n) {
        (this.delegate = t), (this.linkInterceptor = new no(this, n));
      }
      start() {
        this.linkInterceptor.start();
      }
      stop() {
        this.linkInterceptor.stop();
      }
      willFollowLinkToLocation(t, n, s) {
        return (
          this.delegate.willSubmitFormLinkToLocation(t, n, s) &&
          t.hasAttribute("data-turbo-method")
        );
      }
      followedLinkToLocation(t, n) {
        let s = document.createElement("form"),
          l = "hidden";
        for (let [Tt, ft] of n.searchParams)
          s.append(
            Object.assign(document.createElement("input"), {
              type: l,
              name: Tt,
              value: ft,
            }),
          );
        let h = Object.assign(n, { search: "" });
        s.setAttribute("data-turbo", "true"),
          s.setAttribute("action", h.href),
          s.setAttribute("hidden", "");
        let w = t.getAttribute("data-turbo-method");
        w && s.setAttribute("method", w);
        let L = t.getAttribute("data-turbo-frame");
        L && s.setAttribute("data-turbo-frame", L);
        let I = lo(t);
        I && s.setAttribute("data-turbo-action", I);
        let B = t.getAttribute("data-turbo-confirm");
        B && s.setAttribute("data-turbo-confirm", B),
          t.hasAttribute("data-turbo-stream") &&
            s.setAttribute("data-turbo-stream", ""),
          this.delegate.submittedFormLinkToLocation(t, n, s),
          document.body.appendChild(s),
          s.addEventListener("turbo:submit-end", () => s.remove(), {
            once: !0,
          }),
          requestAnimationFrame(() => s.requestSubmit());
      }
    },
    oo = class {
      static preservingPermanentElements(t, n, s) {
        return Ot(this, null, function* () {
          let l = new this(t, n);
          l.enter(), yield s(), l.leave();
        });
      }
      constructor(t, n) {
        (this.delegate = t), (this.permanentElementMap = n);
      }
      enter() {
        for (let t in this.permanentElementMap) {
          let [n, s] = this.permanentElementMap[t];
          this.delegate.enteringBardo(n, s),
            this.replaceNewPermanentElementWithPlaceholder(s);
        }
      }
      leave() {
        for (let t in this.permanentElementMap) {
          let [n] = this.permanentElementMap[t];
          this.replaceCurrentPermanentElementWithClone(n),
            this.replacePlaceholderWithPermanentElement(n),
            this.delegate.leavingBardo(n);
        }
      }
      replaceNewPermanentElementWithPlaceholder(t) {
        let n = nm(t);
        t.replaceWith(n);
      }
      replaceCurrentPermanentElementWithClone(t) {
        let n = t.cloneNode(!0);
        t.replaceWith(n);
      }
      replacePlaceholderWithPermanentElement(t) {
        let n = this.getPlaceholderById(t.id);
        n == null || n.replaceWith(t);
      }
      getPlaceholderById(t) {
        return this.placeholders.find((n) => n.content == t);
      }
      get placeholders() {
        return [
          ...document.querySelectorAll(
            "meta[name=turbo-permanent-placeholder][content]",
          ),
        ];
      }
    };
  function nm(r) {
    let t = document.createElement("meta");
    return (
      t.setAttribute("name", "turbo-permanent-placeholder"),
      t.setAttribute("content", r.id),
      t
    );
  }
  var dn = class {
    constructor(t, n, s, l, h = !0) {
      (this.activeElement = null),
        (this.currentSnapshot = t),
        (this.newSnapshot = n),
        (this.isPreview = l),
        (this.willRender = h),
        (this.renderElement = s),
        (this.promise = new Promise(
          (w, L) => (this.resolvingFunctions = { resolve: w, reject: L }),
        ));
    }
    get shouldRender() {
      return !0;
    }
    get reloadReason() {}
    prepareToRender() {}
    finishRendering() {
      this.resolvingFunctions &&
        (this.resolvingFunctions.resolve(), delete this.resolvingFunctions);
    }
    preservingPermanentElements(t) {
      return Ot(this, null, function* () {
        yield oo.preservingPermanentElements(this, this.permanentElementMap, t);
      });
    }
    focusFirstAutofocusableElement() {
      let t = this.connectedSnapshot.firstAutofocusableElement;
      sm(t) && t.focus();
    }
    enteringBardo(t) {
      this.activeElement ||
        (t.contains(this.currentSnapshot.activeElement) &&
          (this.activeElement = this.currentSnapshot.activeElement));
    }
    leavingBardo(t) {
      t.contains(this.activeElement) &&
        this.activeElement instanceof HTMLElement &&
        (this.activeElement.focus(), (this.activeElement = null));
    }
    get connectedSnapshot() {
      return this.newSnapshot.isConnected
        ? this.newSnapshot
        : this.currentSnapshot;
    }
    get currentElement() {
      return this.currentSnapshot.element;
    }
    get newElement() {
      return this.newSnapshot.element;
    }
    get permanentElementMap() {
      return this.currentSnapshot.getPermanentElementMapForSnapshot(
        this.newSnapshot,
      );
    }
  };
  function sm(r) {
    return r && typeof r.focus == "function";
  }
  var fn = class extends dn {
    static renderElement(t, n) {
      var s;
      let l = document.createRange();
      l.selectNodeContents(t), l.deleteContents();
      let h = n,
        w =
          (s = h.ownerDocument) === null || s === void 0
            ? void 0
            : s.createRange();
      w && (w.selectNodeContents(h), t.appendChild(w.extractContents()));
    }
    constructor(t, n, s, l, h, w = !0) {
      super(n, s, l, h, w), (this.delegate = t);
    }
    get shouldRender() {
      return !0;
    }
    render() {
      return Ot(this, null, function* () {
        yield Qs(),
          this.preservingPermanentElements(() => {
            this.loadFrameElement();
          }),
          this.scrollFrameIntoView(),
          yield Qs(),
          this.focusFirstAutofocusableElement(),
          yield Qs(),
          this.activateScriptElements();
      });
    }
    loadFrameElement() {
      this.delegate.willRenderFrame(this.currentElement, this.newElement),
        this.renderElement(this.currentElement, this.newElement);
    }
    scrollFrameIntoView() {
      if (this.currentElement.autoscroll || this.newElement.autoscroll) {
        let t = this.currentElement.firstElementChild,
          n = om(
            this.currentElement.getAttribute("data-autoscroll-block"),
            "end",
          ),
          s = am(
            this.currentElement.getAttribute("data-autoscroll-behavior"),
            "auto",
          );
        if (t) return t.scrollIntoView({ block: n, behavior: s }), !0;
      }
      return !1;
    }
    activateScriptElements() {
      for (let t of this.newScriptElements) {
        let n = cn(t);
        t.replaceWith(n);
      }
    }
    get newScriptElements() {
      return this.currentElement.querySelectorAll("script");
    }
  };
  function om(r, t) {
    return r == "end" || r == "start" || r == "center" || r == "nearest"
      ? r
      : t;
  }
  function am(r, t) {
    return r == "auto" || r == "smooth" ? r : t;
  }
  var Er = class {
    static get defaultCSS() {
      return lu`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${Er.animationDuration}ms ease-out,
          opacity ${Er.animationDuration / 2}ms ${
        Er.animationDuration / 2
      }ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `;
    }
    constructor() {
      (this.hiding = !1),
        (this.value = 0),
        (this.visible = !1),
        (this.trickle = () => {
          this.setValue(this.value + Math.random() / 100);
        }),
        (this.stylesheetElement = this.createStylesheetElement()),
        (this.progressElement = this.createProgressElement()),
        this.installStylesheetElement(),
        this.setValue(0);
    }
    show() {
      this.visible ||
        ((this.visible = !0),
        this.installProgressElement(),
        this.startTrickling());
    }
    hide() {
      this.visible &&
        !this.hiding &&
        ((this.hiding = !0),
        this.fadeProgressElement(() => {
          this.uninstallProgressElement(),
            this.stopTrickling(),
            (this.visible = !1),
            (this.hiding = !1);
        }));
    }
    setValue(t) {
      (this.value = t), this.refresh();
    }
    installStylesheetElement() {
      document.head.insertBefore(
        this.stylesheetElement,
        document.head.firstChild,
      );
    }
    installProgressElement() {
      (this.progressElement.style.width = "0"),
        (this.progressElement.style.opacity = "1"),
        document.documentElement.insertBefore(
          this.progressElement,
          document.body,
        ),
        this.refresh();
    }
    fadeProgressElement(t) {
      (this.progressElement.style.opacity = "0"),
        setTimeout(t, Er.animationDuration * 1.5);
    }
    uninstallProgressElement() {
      this.progressElement.parentNode &&
        document.documentElement.removeChild(this.progressElement);
    }
    startTrickling() {
      this.trickleInterval ||
        (this.trickleInterval = window.setInterval(
          this.trickle,
          Er.animationDuration,
        ));
    }
    stopTrickling() {
      window.clearInterval(this.trickleInterval), delete this.trickleInterval;
    }
    refresh() {
      requestAnimationFrame(() => {
        this.progressElement.style.width = `${10 + this.value * 90}%`;
      });
    }
    createStylesheetElement() {
      let t = document.createElement("style");
      return (
        (t.type = "text/css"),
        (t.textContent = Er.defaultCSS),
        this.cspNonce && (t.nonce = this.cspNonce),
        t
      );
    }
    createProgressElement() {
      let t = document.createElement("div");
      return (t.className = "turbo-progress-bar"), t;
    }
    get cspNonce() {
      return to("csp-nonce");
    }
  };
  Er.animationDuration = 300;
  var Pa = class extends zi {
    constructor() {
      super(...arguments),
        (this.detailsByOuterHTML = this.children
          .filter((t) => !hm(t))
          .map((t) => mm(t))
          .reduce((t, n) => {
            let { outerHTML: s } = n,
              l = s in t ? t[s] : { type: lm(n), tracked: cm(n), elements: [] };
            return Object.assign(Object.assign({}, t), {
              [s]: Object.assign(Object.assign({}, l), {
                elements: [...l.elements, n],
              }),
            });
          }, {}));
    }
    get trackedElementSignature() {
      return Object.keys(this.detailsByOuterHTML)
        .filter((t) => this.detailsByOuterHTML[t].tracked)
        .join("");
    }
    getScriptElementsNotInSnapshot(t) {
      return this.getElementsMatchingTypeNotInSnapshot("script", t);
    }
    getStylesheetElementsNotInSnapshot(t) {
      return this.getElementsMatchingTypeNotInSnapshot("stylesheet", t);
    }
    getElementsMatchingTypeNotInSnapshot(t, n) {
      return Object.keys(this.detailsByOuterHTML)
        .filter((s) => !(s in n.detailsByOuterHTML))
        .map((s) => this.detailsByOuterHTML[s])
        .filter(({ type: s }) => s == t)
        .map(({ elements: [s] }) => s);
    }
    get provisionalElements() {
      return Object.keys(this.detailsByOuterHTML).reduce((t, n) => {
        let { type: s, tracked: l, elements: h } = this.detailsByOuterHTML[n];
        return s == null && !l
          ? [...t, ...h]
          : h.length > 1
          ? [...t, ...h.slice(1)]
          : t;
      }, []);
    }
    getMetaValue(t) {
      let n = this.findMetaElementByName(t);
      return n ? n.getAttribute("content") : null;
    }
    findMetaElementByName(t) {
      return Object.keys(this.detailsByOuterHTML).reduce((n, s) => {
        let {
          elements: [l],
        } = this.detailsByOuterHTML[s];
        return fm(l, t) ? l : n;
      }, void 0);
    }
  };
  function lm(r) {
    if (um(r)) return "script";
    if (dm(r)) return "stylesheet";
  }
  function cm(r) {
    return r.getAttribute("data-turbo-track") == "reload";
  }
  function um(r) {
    return r.localName == "script";
  }
  function hm(r) {
    return r.localName == "noscript";
  }
  function dm(r) {
    let t = r.localName;
    return (
      t == "style" || (t == "link" && r.getAttribute("rel") == "stylesheet")
    );
  }
  function fm(r, t) {
    return r.localName == "meta" && r.getAttribute("name") == t;
  }
  function mm(r) {
    return r.hasAttribute("nonce") && r.setAttribute("nonce", ""), r;
  }
  var sr = class extends zi {
      static fromHTMLString(t = "") {
        return this.fromDocument(au(t));
      }
      static fromElement(t) {
        return this.fromDocument(t.ownerDocument);
      }
      static fromDocument({ head: t, body: n }) {
        return new this(n, new Pa(t));
      }
      constructor(t, n) {
        super(t), (this.headSnapshot = n);
      }
      clone() {
        let t = this.element.cloneNode(!0),
          n = this.element.querySelectorAll("select"),
          s = t.querySelectorAll("select");
        for (let [l, h] of n.entries()) {
          let w = s[l];
          for (let L of w.selectedOptions) L.selected = !1;
          for (let L of h.selectedOptions) w.options[L.index].selected = !0;
        }
        for (let l of t.querySelectorAll('input[type="password"]'))
          l.value = "";
        return new sr(t, this.headSnapshot);
      }
      get headElement() {
        return this.headSnapshot.element;
      }
      get rootLocation() {
        var t;
        let n =
          (t = this.getSetting("root")) !== null && t !== void 0 ? t : "/";
        return Xe(n);
      }
      get cacheControlValue() {
        return this.getSetting("cache-control");
      }
      get isPreviewable() {
        return this.cacheControlValue != "no-preview";
      }
      get isCacheable() {
        return this.cacheControlValue != "no-cache";
      }
      get isVisitable() {
        return this.getSetting("visit-control") != "reload";
      }
      getSetting(t) {
        return this.headSnapshot.getMetaValue(`turbo-${t}`);
      }
    },
    Ni;
  (function (r) {
    (r.visitStart = "visitStart"),
      (r.requestStart = "requestStart"),
      (r.requestEnd = "requestEnd"),
      (r.visitEnd = "visitEnd");
  })(Ni || (Ni = {}));
  var wr;
  (function (r) {
    (r.initialized = "initialized"),
      (r.started = "started"),
      (r.canceled = "canceled"),
      (r.failed = "failed"),
      (r.completed = "completed");
  })(wr || (wr = {}));
  var gm = {
      action: "advance",
      historyChanged: !1,
      visitCachedSnapshot: () => {},
      willRender: !0,
      updateHistory: !0,
      shouldCacheSnapshot: !0,
      acceptsStreamResponse: !1,
    },
    Yr;
  (function (r) {
    (r[(r.networkFailure = 0)] = "networkFailure"),
      (r[(r.timeoutFailure = -1)] = "timeoutFailure"),
      (r[(r.contentTypeMismatch = -2)] = "contentTypeMismatch");
  })(Yr || (Yr = {}));
  var Oa = class {
    constructor(t, n, s, l = {}) {
      (this.identifier = qi()),
        (this.timingMetrics = {}),
        (this.followedRedirect = !1),
        (this.historyChanged = !1),
        (this.scrolled = !1),
        (this.shouldCacheSnapshot = !0),
        (this.acceptsStreamResponse = !1),
        (this.snapshotCached = !1),
        (this.state = wr.initialized),
        (this.delegate = t),
        (this.location = n),
        (this.restorationIdentifier = s || qi());
      let {
        action: h,
        historyChanged: w,
        referrer: L,
        snapshot: I,
        snapshotHTML: B,
        response: Z,
        visitCachedSnapshot: Tt,
        willRender: ft,
        updateHistory: vt,
        shouldCacheSnapshot: ht,
        acceptsStreamResponse: Pt,
      } = Object.assign(Object.assign({}, gm), l);
      (this.action = h),
        (this.historyChanged = w),
        (this.referrer = L),
        (this.snapshot = I),
        (this.snapshotHTML = B),
        (this.response = Z),
        (this.isSamePage = this.delegate.locationWithActionIsSamePage(
          this.location,
          this.action,
        )),
        (this.visitCachedSnapshot = Tt),
        (this.willRender = ft),
        (this.updateHistory = vt),
        (this.scrolled = !ft),
        (this.shouldCacheSnapshot = ht),
        (this.acceptsStreamResponse = Pt);
    }
    get adapter() {
      return this.delegate.adapter;
    }
    get view() {
      return this.delegate.view;
    }
    get history() {
      return this.delegate.history;
    }
    get restorationData() {
      return this.history.getRestorationDataForIdentifier(
        this.restorationIdentifier,
      );
    }
    get silent() {
      return this.isSamePage;
    }
    start() {
      this.state == wr.initialized &&
        (this.recordTimingMetric(Ni.visitStart),
        (this.state = wr.started),
        this.adapter.visitStarted(this),
        this.delegate.visitStarted(this));
    }
    cancel() {
      this.state == wr.started &&
        (this.request && this.request.cancel(),
        this.cancelRender(),
        (this.state = wr.canceled));
    }
    complete() {
      this.state == wr.started &&
        (this.recordTimingMetric(Ni.visitEnd),
        (this.state = wr.completed),
        this.followRedirect(),
        this.followedRedirect ||
          (this.adapter.visitCompleted(this),
          this.delegate.visitCompleted(this)));
    }
    fail() {
      this.state == wr.started &&
        ((this.state = wr.failed), this.adapter.visitFailed(this));
    }
    changeHistory() {
      var t;
      if (!this.historyChanged && this.updateHistory) {
        let n =
            this.location.href ===
            ((t = this.referrer) === null || t === void 0 ? void 0 : t.href)
              ? "replace"
              : this.action,
          s = cu(n);
        this.history.update(s, this.location, this.restorationIdentifier),
          (this.historyChanged = !0);
      }
    }
    issueRequest() {
      this.hasPreloadedResponse()
        ? this.simulateRequest()
        : this.shouldIssueRequest() &&
          !this.request &&
          ((this.request = new un(this, Je.get, this.location)),
          this.request.perform());
    }
    simulateRequest() {
      this.response &&
        (this.startRequest(), this.recordResponse(), this.finishRequest());
    }
    startRequest() {
      this.recordTimingMetric(Ni.requestStart),
        this.adapter.visitRequestStarted(this);
    }
    recordResponse(t = this.response) {
      if (((this.response = t), t)) {
        let { statusCode: n } = t;
        ru(n)
          ? this.adapter.visitRequestCompleted(this)
          : this.adapter.visitRequestFailedWithStatusCode(this, n);
      }
    }
    finishRequest() {
      this.recordTimingMetric(Ni.requestEnd),
        this.adapter.visitRequestFinished(this);
    }
    loadResponse() {
      if (this.response) {
        let { statusCode: t, responseHTML: n } = this.response;
        this.render(() =>
          Ot(this, null, function* () {
            this.shouldCacheSnapshot && this.cacheSnapshot(),
              this.view.renderPromise && (yield this.view.renderPromise),
              ru(t) && n != null
                ? (yield this.view.renderPage(
                    sr.fromHTMLString(n),
                    !1,
                    this.willRender,
                    this,
                  ),
                  this.performScroll(),
                  this.adapter.visitRendered(this),
                  this.complete())
                : (yield this.view.renderError(sr.fromHTMLString(n), this),
                  this.adapter.visitRendered(this),
                  this.fail());
          }),
        );
      }
    }
    getCachedSnapshot() {
      let t =
        this.view.getCachedSnapshotForLocation(this.location) ||
        this.getPreloadedSnapshot();
      if (
        t &&
        (!ci(this.location) || t.hasAnchor(ci(this.location))) &&
        (this.action == "restore" || t.isPreviewable)
      )
        return t;
    }
    getPreloadedSnapshot() {
      if (this.snapshotHTML) return sr.fromHTMLString(this.snapshotHTML);
    }
    hasCachedSnapshot() {
      return this.getCachedSnapshot() != null;
    }
    loadCachedSnapshot() {
      let t = this.getCachedSnapshot();
      if (t) {
        let n = this.shouldIssueRequest();
        this.render(() =>
          Ot(this, null, function* () {
            this.cacheSnapshot(),
              this.isSamePage
                ? this.adapter.visitRendered(this)
                : (this.view.renderPromise && (yield this.view.renderPromise),
                  yield this.view.renderPage(t, n, this.willRender, this),
                  this.performScroll(),
                  this.adapter.visitRendered(this),
                  n || this.complete());
          }),
        );
      }
    }
    followRedirect() {
      var t;
      this.redirectedToLocation &&
        !this.followedRedirect &&
        ((t = this.response) === null || t === void 0
          ? void 0
          : t.redirected) &&
        (this.adapter.visitProposedToLocation(this.redirectedToLocation, {
          action: "replace",
          response: this.response,
          shouldCacheSnapshot: !1,
          willRender: !1,
        }),
        (this.followedRedirect = !0));
    }
    goToSamePageAnchor() {
      this.isSamePage &&
        this.render(() =>
          Ot(this, null, function* () {
            this.cacheSnapshot(),
              this.performScroll(),
              this.changeHistory(),
              this.adapter.visitRendered(this);
          }),
        );
    }
    prepareRequest(t) {
      this.acceptsStreamResponse && t.acceptResponseType(Nr.contentType);
    }
    requestStarted() {
      this.startRequest();
    }
    requestPreventedHandlingResponse(t, n) {}
    requestSucceededWithResponse(t, n) {
      return Ot(this, null, function* () {
        let s = yield n.responseHTML,
          { redirected: l, statusCode: h } = n;
        s == null
          ? this.recordResponse({
              statusCode: Yr.contentTypeMismatch,
              redirected: l,
            })
          : ((this.redirectedToLocation = n.redirected ? n.location : void 0),
            this.recordResponse({
              statusCode: h,
              responseHTML: s,
              redirected: l,
            }));
      });
    }
    requestFailedWithResponse(t, n) {
      return Ot(this, null, function* () {
        let s = yield n.responseHTML,
          { redirected: l, statusCode: h } = n;
        s == null
          ? this.recordResponse({
              statusCode: Yr.contentTypeMismatch,
              redirected: l,
            })
          : this.recordResponse({
              statusCode: h,
              responseHTML: s,
              redirected: l,
            });
      });
    }
    requestErrored(t, n) {
      this.recordResponse({ statusCode: Yr.networkFailure, redirected: !1 });
    }
    requestFinished() {
      this.finishRequest();
    }
    performScroll() {
      !this.scrolled &&
        !this.view.forceReloaded &&
        (this.action == "restore"
          ? this.scrollToRestoredPosition() ||
            this.scrollToAnchor() ||
            this.view.scrollToTop()
          : this.scrollToAnchor() || this.view.scrollToTop(),
        this.isSamePage &&
          this.delegate.visitScrolledToSamePageLocation(
            this.view.lastRenderedLocation,
            this.location,
          ),
        (this.scrolled = !0));
    }
    scrollToRestoredPosition() {
      let { scrollPosition: t } = this.restorationData;
      if (t) return this.view.scrollToPosition(t), !0;
    }
    scrollToAnchor() {
      let t = ci(this.location);
      if (t != null) return this.view.scrollToAnchor(t), !0;
    }
    recordTimingMetric(t) {
      this.timingMetrics[t] = new Date().getTime();
    }
    getTimingMetrics() {
      return Object.assign({}, this.timingMetrics);
    }
    getHistoryMethodForAction(t) {
      switch (t) {
        case "replace":
          return history.replaceState;
        case "advance":
        case "restore":
          return history.pushState;
      }
    }
    hasPreloadedResponse() {
      return typeof this.response == "object";
    }
    shouldIssueRequest() {
      return this.isSamePage
        ? !1
        : this.action == "restore"
        ? !this.hasCachedSnapshot()
        : this.willRender;
    }
    cacheSnapshot() {
      this.snapshotCached ||
        (this.view
          .cacheSnapshot(this.snapshot)
          .then((t) => t && this.visitCachedSnapshot(t)),
        (this.snapshotCached = !0));
    }
    render(t) {
      return Ot(this, null, function* () {
        this.cancelRender(),
          yield new Promise((n) => {
            this.frame = requestAnimationFrame(() => n());
          }),
          yield t(),
          delete this.frame;
      });
    }
    cancelRender() {
      this.frame && (cancelAnimationFrame(this.frame), delete this.frame);
    }
  };
  function ru(r) {
    return r >= 200 && r < 300;
  }
  var Ma = class {
      constructor(t) {
        (this.progressBar = new Er()),
          (this.showProgressBar = () => {
            this.progressBar.show();
          }),
          (this.session = t);
      }
      visitProposedToLocation(t, n) {
        this.navigator.startVisit(
          t,
          (n == null ? void 0 : n.restorationIdentifier) || qi(),
          n,
        );
      }
      visitStarted(t) {
        (this.location = t.location),
          t.loadCachedSnapshot(),
          t.issueRequest(),
          t.goToSamePageAnchor();
      }
      visitRequestStarted(t) {
        this.progressBar.setValue(0),
          t.hasCachedSnapshot() || t.action != "restore"
            ? this.showVisitProgressBarAfterDelay()
            : this.showProgressBar();
      }
      visitRequestCompleted(t) {
        t.loadResponse();
      }
      visitRequestFailedWithStatusCode(t, n) {
        switch (n) {
          case Yr.networkFailure:
          case Yr.timeoutFailure:
          case Yr.contentTypeMismatch:
            return this.reload({
              reason: "request_failed",
              context: { statusCode: n },
            });
          default:
            return t.loadResponse();
        }
      }
      visitRequestFinished(t) {
        this.progressBar.setValue(1), this.hideVisitProgressBar();
      }
      visitCompleted(t) {}
      pageInvalidated(t) {
        this.reload(t);
      }
      visitFailed(t) {}
      visitRendered(t) {}
      formSubmissionStarted(t) {
        this.progressBar.setValue(0), this.showFormProgressBarAfterDelay();
      }
      formSubmissionFinished(t) {
        this.progressBar.setValue(1), this.hideFormProgressBar();
      }
      showVisitProgressBarAfterDelay() {
        this.visitProgressBarTimeout = window.setTimeout(
          this.showProgressBar,
          this.session.progressBarDelay,
        );
      }
      hideVisitProgressBar() {
        this.progressBar.hide(),
          this.visitProgressBarTimeout != null &&
            (window.clearTimeout(this.visitProgressBarTimeout),
            delete this.visitProgressBarTimeout);
      }
      showFormProgressBarAfterDelay() {
        this.formProgressBarTimeout == null &&
          (this.formProgressBarTimeout = window.setTimeout(
            this.showProgressBar,
            this.session.progressBarDelay,
          ));
      }
      hideFormProgressBar() {
        this.progressBar.hide(),
          this.formProgressBarTimeout != null &&
            (window.clearTimeout(this.formProgressBarTimeout),
            delete this.formProgressBarTimeout);
      }
      reload(t) {
        var n;
        He("turbo:reload", { detail: t }),
          (window.location.href =
            ((n = this.location) === null || n === void 0
              ? void 0
              : n.toString()) || window.location.href);
      }
      get navigator() {
        return this.session.navigator;
      }
    },
    Fa = class {
      constructor() {
        (this.selector = "[data-turbo-temporary]"),
          (this.deprecatedSelector = "[data-turbo-cache=false]"),
          (this.started = !1),
          (this.removeTemporaryElements = (t) => {
            for (let n of this.temporaryElements) n.remove();
          });
      }
      start() {
        this.started ||
          ((this.started = !0),
          addEventListener(
            "turbo:before-cache",
            this.removeTemporaryElements,
            !1,
          ));
      }
      stop() {
        this.started &&
          ((this.started = !1),
          removeEventListener(
            "turbo:before-cache",
            this.removeTemporaryElements,
            !1,
          ));
      }
      get temporaryElements() {
        return [
          ...document.querySelectorAll(this.selector),
          ...this.temporaryElementsWithDeprecation,
        ];
      }
      get temporaryElementsWithDeprecation() {
        let t = document.querySelectorAll(this.deprecatedSelector);
        return (
          t.length &&
            console.warn(
              `The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`,
            ),
          [...t]
        );
      }
    },
    Ia = class {
      constructor(t, n) {
        (this.session = t),
          (this.element = n),
          (this.linkInterceptor = new io(this, n)),
          (this.formSubmitObserver = new hn(this, n));
      }
      start() {
        this.linkInterceptor.start(), this.formSubmitObserver.start();
      }
      stop() {
        this.linkInterceptor.stop(), this.formSubmitObserver.stop();
      }
      shouldInterceptLinkClick(t, n, s) {
        return this.shouldRedirect(t);
      }
      linkClickIntercepted(t, n, s) {
        let l = this.findFrameElement(t);
        l && l.delegate.linkClickIntercepted(t, n, s);
      }
      willSubmitForm(t, n) {
        return (
          t.closest("turbo-frame") == null &&
          this.shouldSubmit(t, n) &&
          this.shouldRedirect(t, n)
        );
      }
      formSubmitted(t, n) {
        let s = this.findFrameElement(t, n);
        s && s.delegate.formSubmitted(t, n);
      }
      shouldSubmit(t, n) {
        var s;
        let l = Ja(t, n),
          h = this.element.ownerDocument.querySelector(
            'meta[name="turbo-root"]',
          ),
          w = Xe(
            (s = h == null ? void 0 : h.content) !== null && s !== void 0
              ? s
              : "/",
          );
        return this.shouldRedirect(t, n) && ji(l, w);
      }
      shouldRedirect(t, n) {
        if (
          t instanceof HTMLFormElement
            ? this.session.submissionIsNavigatable(t, n)
            : this.session.elementIsNavigatable(t)
        ) {
          let l = this.findFrameElement(t, n);
          return l ? l != t.closest("turbo-frame") : !1;
        } else return !1;
      }
      findFrameElement(t, n) {
        let s =
          (n == null ? void 0 : n.getAttribute("data-turbo-frame")) ||
          t.getAttribute("data-turbo-frame");
        if (s && s != "_top") {
          let l = this.element.querySelector(`#${s}:not([disabled])`);
          if (l instanceof Ar) return l;
        }
      }
    },
    Ba = class {
      constructor(t) {
        (this.restorationIdentifier = qi()),
          (this.restorationData = {}),
          (this.started = !1),
          (this.pageLoaded = !1),
          (this.onPopState = (n) => {
            if (this.shouldHandlePopState()) {
              let { turbo: s } = n.state || {};
              if (s) {
                this.location = new URL(window.location.href);
                let { restorationIdentifier: l } = s;
                (this.restorationIdentifier = l),
                  this.delegate.historyPoppedToLocationWithRestorationIdentifier(
                    this.location,
                    l,
                  );
              }
            }
          }),
          (this.onPageLoad = (n) =>
            Ot(this, null, function* () {
              yield Hf(), (this.pageLoaded = !0);
            })),
          (this.delegate = t);
      }
      start() {
        this.started ||
          (addEventListener("popstate", this.onPopState, !1),
          addEventListener("load", this.onPageLoad, !1),
          (this.started = !0),
          this.replace(new URL(window.location.href)));
      }
      stop() {
        this.started &&
          (removeEventListener("popstate", this.onPopState, !1),
          removeEventListener("load", this.onPageLoad, !1),
          (this.started = !1));
      }
      push(t, n) {
        this.update(history.pushState, t, n);
      }
      replace(t, n) {
        this.update(history.replaceState, t, n);
      }
      update(t, n, s = qi()) {
        let l = { turbo: { restorationIdentifier: s } };
        t.call(history, l, "", n.href),
          (this.location = n),
          (this.restorationIdentifier = s);
      }
      getRestorationDataForIdentifier(t) {
        return this.restorationData[t] || {};
      }
      updateRestorationData(t) {
        let { restorationIdentifier: n } = this,
          s = this.restorationData[n];
        this.restorationData[n] = Object.assign(Object.assign({}, s), t);
      }
      assumeControlOfScrollRestoration() {
        var t;
        this.previousScrollRestoration ||
          ((this.previousScrollRestoration =
            (t = history.scrollRestoration) !== null && t !== void 0
              ? t
              : "auto"),
          (history.scrollRestoration = "manual"));
      }
      relinquishControlOfScrollRestoration() {
        this.previousScrollRestoration &&
          ((history.scrollRestoration = this.previousScrollRestoration),
          delete this.previousScrollRestoration);
      }
      shouldHandlePopState() {
        return this.pageIsLoaded();
      }
      pageIsLoaded() {
        return this.pageLoaded || document.readyState == "complete";
      }
    },
    Na = class {
      constructor(t) {
        this.delegate = t;
      }
      proposeVisit(t, n = {}) {
        this.delegate.allowsVisitingLocationWithAction(t, n.action) &&
          (ji(t, this.view.snapshot.rootLocation)
            ? this.delegate.visitProposedToLocation(t, n)
            : (window.location.href = t.toString()));
      }
      startVisit(t, n, s = {}) {
        this.stop(),
          (this.currentVisit = new Oa(
            this,
            Xe(t),
            n,
            Object.assign({ referrer: this.location }, s),
          )),
          this.currentVisit.start();
      }
      submitForm(t, n) {
        this.stop(),
          (this.formSubmission = new ui(this, t, n, !0)),
          this.formSubmission.start();
      }
      stop() {
        this.formSubmission &&
          (this.formSubmission.stop(), delete this.formSubmission),
          this.currentVisit &&
            (this.currentVisit.cancel(), delete this.currentVisit);
      }
      get adapter() {
        return this.delegate.adapter;
      }
      get view() {
        return this.delegate.view;
      }
      get history() {
        return this.delegate.history;
      }
      formSubmissionStarted(t) {
        typeof this.adapter.formSubmissionStarted == "function" &&
          this.adapter.formSubmissionStarted(t);
      }
      formSubmissionSucceededWithResponse(t, n) {
        return Ot(this, null, function* () {
          if (t == this.formSubmission) {
            let s = yield n.responseHTML;
            if (s) {
              let l = t.isSafe;
              l || this.view.clearSnapshotCache();
              let { statusCode: h, redirected: w } = n,
                I = {
                  action: this.getActionForFormSubmission(t),
                  shouldCacheSnapshot: l,
                  response: { statusCode: h, responseHTML: s, redirected: w },
                };
              this.proposeVisit(n.location, I);
            }
          }
        });
      }
      formSubmissionFailedWithResponse(t, n) {
        return Ot(this, null, function* () {
          let s = yield n.responseHTML;
          if (s) {
            let l = sr.fromHTMLString(s);
            n.serverError
              ? yield this.view.renderError(l, this.currentVisit)
              : yield this.view.renderPage(l, !1, !0, this.currentVisit),
              this.view.scrollToTop(),
              this.view.clearSnapshotCache();
          }
        });
      }
      formSubmissionErrored(t, n) {
        console.error(n);
      }
      formSubmissionFinished(t) {
        typeof this.adapter.formSubmissionFinished == "function" &&
          this.adapter.formSubmissionFinished(t);
      }
      visitStarted(t) {
        this.delegate.visitStarted(t);
      }
      visitCompleted(t) {
        this.delegate.visitCompleted(t);
      }
      locationWithActionIsSamePage(t, n) {
        let s = ci(t),
          l = ci(this.view.lastRenderedLocation),
          h = n === "restore" && typeof s == "undefined";
        return (
          n !== "replace" &&
          ka(t) === ka(this.view.lastRenderedLocation) &&
          (h || (s != null && s !== l))
        );
      }
      visitScrolledToSamePageLocation(t, n) {
        this.delegate.visitScrolledToSamePageLocation(t, n);
      }
      get location() {
        return this.history.location;
      }
      get restorationIdentifier() {
        return this.history.restorationIdentifier;
      }
      getActionForFormSubmission({ submitter: t, formElement: n }) {
        return lo(t, n) || "advance";
      }
    },
    Br;
  (function (r) {
    (r[(r.initial = 0)] = "initial"),
      (r[(r.loading = 1)] = "loading"),
      (r[(r.interactive = 2)] = "interactive"),
      (r[(r.complete = 3)] = "complete");
  })(Br || (Br = {}));
  var ja = class {
      constructor(t) {
        (this.stage = Br.initial),
          (this.started = !1),
          (this.interpretReadyState = () => {
            let { readyState: n } = this;
            n == "interactive"
              ? this.pageIsInteractive()
              : n == "complete" && this.pageIsComplete();
          }),
          (this.pageWillUnload = () => {
            this.delegate.pageWillUnload();
          }),
          (this.delegate = t);
      }
      start() {
        this.started ||
          (this.stage == Br.initial && (this.stage = Br.loading),
          document.addEventListener(
            "readystatechange",
            this.interpretReadyState,
            !1,
          ),
          addEventListener("pagehide", this.pageWillUnload, !1),
          (this.started = !0));
      }
      stop() {
        this.started &&
          (document.removeEventListener(
            "readystatechange",
            this.interpretReadyState,
            !1,
          ),
          removeEventListener("pagehide", this.pageWillUnload, !1),
          (this.started = !1));
      }
      pageIsInteractive() {
        this.stage == Br.loading &&
          ((this.stage = Br.interactive),
          this.delegate.pageBecameInteractive());
      }
      pageIsComplete() {
        this.pageIsInteractive(),
          this.stage == Br.interactive &&
            ((this.stage = Br.complete), this.delegate.pageLoaded());
      }
      get readyState() {
        return document.readyState;
      }
    },
    qa = class {
      constructor(t) {
        (this.started = !1),
          (this.onScroll = () => {
            this.updatePosition({
              x: window.pageXOffset,
              y: window.pageYOffset,
            });
          }),
          (this.delegate = t);
      }
      start() {
        this.started ||
          (addEventListener("scroll", this.onScroll, !1),
          this.onScroll(),
          (this.started = !0));
      }
      stop() {
        this.started &&
          (removeEventListener("scroll", this.onScroll, !1),
          (this.started = !1));
      }
      updatePosition(t) {
        this.delegate.scrollPositionChanged(t);
      }
    },
    za = class {
      render({ fragment: t }) {
        oo.preservingPermanentElements(this, pm(t), () =>
          document.documentElement.appendChild(t),
        );
      }
      enteringBardo(t, n) {
        n.replaceWith(t.cloneNode(!0));
      }
      leavingBardo() {}
    };
  function pm(r) {
    let t = du(document.documentElement),
      n = {};
    for (let s of t) {
      let { id: l } = s;
      for (let h of r.querySelectorAll("turbo-stream")) {
        let w = hu(h.templateElement.content, l);
        w && (n[l] = [s, w]);
      }
    }
    return n;
  }
  var Ha = class {
    constructor(t) {
      (this.sources = new Set()),
        (this.started = !1),
        (this.inspectFetchResponse = (n) => {
          let s = bm(n);
          s && vm(s) && (n.preventDefault(), this.receiveMessageResponse(s));
        }),
        (this.receiveMessageEvent = (n) => {
          this.started &&
            typeof n.data == "string" &&
            this.receiveMessageHTML(n.data);
        }),
        (this.delegate = t);
    }
    start() {
      this.started ||
        ((this.started = !0),
        addEventListener(
          "turbo:before-fetch-response",
          this.inspectFetchResponse,
          !1,
        ));
    }
    stop() {
      this.started &&
        ((this.started = !1),
        removeEventListener(
          "turbo:before-fetch-response",
          this.inspectFetchResponse,
          !1,
        ));
    }
    connectStreamSource(t) {
      this.streamSourceIsConnected(t) ||
        (this.sources.add(t),
        t.addEventListener("message", this.receiveMessageEvent, !1));
    }
    disconnectStreamSource(t) {
      this.streamSourceIsConnected(t) &&
        (this.sources.delete(t),
        t.removeEventListener("message", this.receiveMessageEvent, !1));
    }
    streamSourceIsConnected(t) {
      return this.sources.has(t);
    }
    receiveMessageResponse(t) {
      return Ot(this, null, function* () {
        let n = yield t.responseHTML;
        n && this.receiveMessageHTML(n);
      });
    }
    receiveMessageHTML(t) {
      this.delegate.receivedMessageFromStream(Nr.wrap(t));
    }
  };
  function bm(r) {
    var t;
    let n = (t = r.detail) === null || t === void 0 ? void 0 : t.fetchResponse;
    if (n instanceof ln) return n;
  }
  function vm(r) {
    var t;
    return ((t = r.contentType) !== null && t !== void 0 ? t : "").startsWith(
      Nr.contentType,
    );
  }
  var ao = class extends dn {
      static renderElement(t, n) {
        let { documentElement: s, body: l } = document;
        s.replaceChild(n, l);
      }
      render() {
        return Ot(this, null, function* () {
          this.replaceHeadAndBody(), this.activateScriptElements();
        });
      }
      replaceHeadAndBody() {
        let { documentElement: t, head: n } = document;
        t.replaceChild(this.newHead, n),
          this.renderElement(this.currentElement, this.newElement);
      }
      activateScriptElements() {
        for (let t of this.scriptElements) {
          let n = t.parentNode;
          if (n) {
            let s = cn(t);
            n.replaceChild(s, t);
          }
        }
      }
      get newHead() {
        return this.newSnapshot.headSnapshot.element;
      }
      get scriptElements() {
        return document.documentElement.querySelectorAll("script");
      }
    },
    mn = class extends dn {
      static renderElement(t, n) {
        document.body && n instanceof HTMLBodyElement
          ? document.body.replaceWith(n)
          : document.documentElement.appendChild(n);
      }
      get shouldRender() {
        return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical;
      }
      get reloadReason() {
        if (!this.newSnapshot.isVisitable)
          return { reason: "turbo_visit_control_is_reload" };
        if (!this.trackedElementsAreIdentical)
          return { reason: "tracked_element_mismatch" };
      }
      prepareToRender() {
        return Ot(this, null, function* () {
          yield this.mergeHead();
        });
      }
      render() {
        return Ot(this, null, function* () {
          this.willRender && (yield this.replaceBody());
        });
      }
      finishRendering() {
        super.finishRendering(),
          this.isPreview || this.focusFirstAutofocusableElement();
      }
      get currentHeadSnapshot() {
        return this.currentSnapshot.headSnapshot;
      }
      get newHeadSnapshot() {
        return this.newSnapshot.headSnapshot;
      }
      get newElement() {
        return this.newSnapshot.element;
      }
      mergeHead() {
        return Ot(this, null, function* () {
          let t = this.mergeProvisionalElements(),
            n = this.copyNewHeadStylesheetElements();
          this.copyNewHeadScriptElements(), yield t, yield n;
        });
      }
      replaceBody() {
        return Ot(this, null, function* () {
          yield this.preservingPermanentElements(() =>
            Ot(this, null, function* () {
              this.activateNewBody(), yield this.assignNewBody();
            }),
          );
        });
      }
      get trackedElementsAreIdentical() {
        return (
          this.currentHeadSnapshot.trackedElementSignature ==
          this.newHeadSnapshot.trackedElementSignature
        );
      }
      copyNewHeadStylesheetElements() {
        return Ot(this, null, function* () {
          let t = [];
          for (let n of this.newHeadStylesheetElements)
            t.push(Vf(n)), document.head.appendChild(n);
          yield Promise.all(t);
        });
      }
      copyNewHeadScriptElements() {
        for (let t of this.newHeadScriptElements)
          document.head.appendChild(cn(t));
      }
      mergeProvisionalElements() {
        return Ot(this, null, function* () {
          let t = [...this.newHeadProvisionalElements];
          for (let n of this.currentHeadProvisionalElements)
            this.isCurrentElementInElementList(n, t) ||
              document.head.removeChild(n);
          for (let n of t) document.head.appendChild(n);
        });
      }
      isCurrentElementInElementList(t, n) {
        for (let [s, l] of n.entries()) {
          if (t.tagName == "TITLE") {
            if (l.tagName != "TITLE") continue;
            if (t.innerHTML == l.innerHTML) return n.splice(s, 1), !0;
          }
          if (l.isEqualNode(t)) return n.splice(s, 1), !0;
        }
        return !1;
      }
      removeCurrentHeadProvisionalElements() {
        for (let t of this.currentHeadProvisionalElements)
          document.head.removeChild(t);
      }
      copyNewHeadProvisionalElements() {
        for (let t of this.newHeadProvisionalElements)
          document.head.appendChild(t);
      }
      activateNewBody() {
        document.adoptNode(this.newElement),
          this.activateNewBodyScriptElements();
      }
      activateNewBodyScriptElements() {
        for (let t of this.newBodyScriptElements) {
          let n = cn(t);
          t.replaceWith(n);
        }
      }
      assignNewBody() {
        return Ot(this, null, function* () {
          yield this.renderElement(this.currentElement, this.newElement);
        });
      }
      get newHeadStylesheetElements() {
        return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(
          this.currentHeadSnapshot,
        );
      }
      get newHeadScriptElements() {
        return this.newHeadSnapshot.getScriptElementsNotInSnapshot(
          this.currentHeadSnapshot,
        );
      }
      get currentHeadProvisionalElements() {
        return this.currentHeadSnapshot.provisionalElements;
      }
      get newHeadProvisionalElements() {
        return this.newHeadSnapshot.provisionalElements;
      }
      get newBodyScriptElements() {
        return this.newElement.querySelectorAll("script");
      }
    },
    Wa = class {
      constructor(t) {
        (this.keys = []), (this.snapshots = {}), (this.size = t);
      }
      has(t) {
        return Js(t) in this.snapshots;
      }
      get(t) {
        if (this.has(t)) {
          let n = this.read(t);
          return this.touch(t), n;
        }
      }
      put(t, n) {
        return this.write(t, n), this.touch(t), n;
      }
      clear() {
        this.snapshots = {};
      }
      read(t) {
        return this.snapshots[Js(t)];
      }
      write(t, n) {
        this.snapshots[Js(t)] = n;
      }
      touch(t) {
        let n = Js(t),
          s = this.keys.indexOf(n);
        s > -1 && this.keys.splice(s, 1), this.keys.unshift(n), this.trim();
      }
      trim() {
        for (let t of this.keys.splice(this.size)) delete this.snapshots[t];
      }
    },
    Ua = class extends ro {
      constructor() {
        super(...arguments),
          (this.snapshotCache = new Wa(10)),
          (this.lastRenderedLocation = new URL(location.href)),
          (this.forceReloaded = !1);
      }
      renderPage(t, n = !1, s = !0, l) {
        let h = new mn(this.snapshot, t, mn.renderElement, n, s);
        return (
          h.shouldRender
            ? l == null || l.changeHistory()
            : (this.forceReloaded = !0),
          this.render(h)
        );
      }
      renderError(t, n) {
        n == null || n.changeHistory();
        let s = new ao(this.snapshot, t, ao.renderElement, !1);
        return this.render(s);
      }
      clearSnapshotCache() {
        this.snapshotCache.clear();
      }
      cacheSnapshot() {
        return Ot(this, arguments, function* (t = this.snapshot) {
          if (t.isCacheable) {
            this.delegate.viewWillCacheSnapshot();
            let { lastRenderedLocation: n } = this;
            yield zf();
            let s = t.clone();
            return this.snapshotCache.put(n, s), s;
          }
        });
      }
      getCachedSnapshotForLocation(t) {
        return this.snapshotCache.get(t);
      }
      get snapshot() {
        return sr.fromElement(this.element);
      }
    },
    Va = class {
      constructor(t) {
        (this.selector = "a[data-turbo-preload]"), (this.delegate = t);
      }
      get snapshotCache() {
        return this.delegate.navigator.view.snapshotCache;
      }
      start() {
        if (document.readyState === "loading")
          return document.addEventListener("DOMContentLoaded", () => {
            this.preloadOnLoadLinksForView(document.body);
          });
        this.preloadOnLoadLinksForView(document.body);
      }
      preloadOnLoadLinksForView(t) {
        for (let n of t.querySelectorAll(this.selector)) this.preloadURL(n);
      }
      preloadURL(t) {
        return Ot(this, null, function* () {
          let n = new URL(t.href);
          if (!this.snapshotCache.has(n))
            try {
              let l = yield (yield fetch(n.toString(), {
                  headers: { "VND.PREFETCH": "true", Accept: "text/html" },
                })).text(),
                h = sr.fromHTMLString(l);
              this.snapshotCache.put(n, h);
            } catch (s) {}
        });
      }
    },
    $a = class {
      constructor() {
        (this.navigator = new Na(this)),
          (this.history = new Ba(this)),
          (this.preloader = new Va(this)),
          (this.view = new Ua(this, document.documentElement)),
          (this.adapter = new Ma(this)),
          (this.pageObserver = new ja(this)),
          (this.cacheObserver = new Fa()),
          (this.linkClickObserver = new no(this, window)),
          (this.formSubmitObserver = new hn(this, document)),
          (this.scrollObserver = new qa(this)),
          (this.streamObserver = new Ha(this)),
          (this.formLinkClickObserver = new so(this, document.documentElement)),
          (this.frameRedirector = new Ia(this, document.documentElement)),
          (this.streamMessageRenderer = new za()),
          (this.drive = !0),
          (this.enabled = !0),
          (this.progressBarDelay = 500),
          (this.started = !1),
          (this.formMode = "on");
      }
      start() {
        this.started ||
          (this.pageObserver.start(),
          this.cacheObserver.start(),
          this.formLinkClickObserver.start(),
          this.linkClickObserver.start(),
          this.formSubmitObserver.start(),
          this.scrollObserver.start(),
          this.streamObserver.start(),
          this.frameRedirector.start(),
          this.history.start(),
          this.preloader.start(),
          (this.started = !0),
          (this.enabled = !0));
      }
      disable() {
        this.enabled = !1;
      }
      stop() {
        this.started &&
          (this.pageObserver.stop(),
          this.cacheObserver.stop(),
          this.formLinkClickObserver.stop(),
          this.linkClickObserver.stop(),
          this.formSubmitObserver.stop(),
          this.scrollObserver.stop(),
          this.streamObserver.stop(),
          this.frameRedirector.stop(),
          this.history.stop(),
          (this.started = !1));
      }
      registerAdapter(t) {
        this.adapter = t;
      }
      visit(t, n = {}) {
        let s = n.frame ? document.getElementById(n.frame) : null;
        s instanceof Ar
          ? ((s.src = t.toString()), s.loaded)
          : this.navigator.proposeVisit(Xe(t), n);
      }
      connectStreamSource(t) {
        this.streamObserver.connectStreamSource(t);
      }
      disconnectStreamSource(t) {
        this.streamObserver.disconnectStreamSource(t);
      }
      renderStreamMessage(t) {
        this.streamMessageRenderer.render(Nr.wrap(t));
      }
      clearCache() {
        this.view.clearSnapshotCache();
      }
      setProgressBarDelay(t) {
        this.progressBarDelay = t;
      }
      setFormMode(t) {
        this.formMode = t;
      }
      get location() {
        return this.history.location;
      }
      get restorationIdentifier() {
        return this.history.restorationIdentifier;
      }
      historyPoppedToLocationWithRestorationIdentifier(t, n) {
        this.enabled
          ? this.navigator.startVisit(t, n, {
              action: "restore",
              historyChanged: !0,
            })
          : this.adapter.pageInvalidated({ reason: "turbo_disabled" });
      }
      scrollPositionChanged(t) {
        this.history.updateRestorationData({ scrollPosition: t });
      }
      willSubmitFormLinkToLocation(t, n) {
        return (
          this.elementIsNavigatable(t) && ji(n, this.snapshot.rootLocation)
        );
      }
      submittedFormLinkToLocation() {}
      willFollowLinkToLocation(t, n, s) {
        return (
          this.elementIsNavigatable(t) &&
          ji(n, this.snapshot.rootLocation) &&
          this.applicationAllowsFollowingLinkToLocation(t, n, s)
        );
      }
      followedLinkToLocation(t, n) {
        let s = this.getActionForLink(t),
          l = t.hasAttribute("data-turbo-stream");
        this.visit(n.href, { action: s, acceptsStreamResponse: l });
      }
      allowsVisitingLocationWithAction(t, n) {
        return (
          this.locationWithActionIsSamePage(t, n) ||
          this.applicationAllowsVisitingLocation(t)
        );
      }
      visitProposedToLocation(t, n) {
        iu(t), this.adapter.visitProposedToLocation(t, n);
      }
      visitStarted(t) {
        t.acceptsStreamResponse || La(document.documentElement),
          iu(t.location),
          t.silent ||
            this.notifyApplicationAfterVisitingLocation(t.location, t.action);
      }
      visitCompleted(t) {
        Ra(document.documentElement),
          this.notifyApplicationAfterPageLoad(t.getTimingMetrics());
      }
      locationWithActionIsSamePage(t, n) {
        return this.navigator.locationWithActionIsSamePage(t, n);
      }
      visitScrolledToSamePageLocation(t, n) {
        this.notifyApplicationAfterVisitingSamePageLocation(t, n);
      }
      willSubmitForm(t, n) {
        let s = Ja(t, n);
        return (
          this.submissionIsNavigatable(t, n) &&
          ji(Xe(s), this.snapshot.rootLocation)
        );
      }
      formSubmitted(t, n) {
        this.navigator.submitForm(t, n);
      }
      pageBecameInteractive() {
        (this.view.lastRenderedLocation = this.location),
          this.notifyApplicationAfterPageLoad();
      }
      pageLoaded() {
        this.history.assumeControlOfScrollRestoration();
      }
      pageWillUnload() {
        this.history.relinquishControlOfScrollRestoration();
      }
      receivedMessageFromStream(t) {
        this.renderStreamMessage(t);
      }
      viewWillCacheSnapshot() {
        var t;
        (!((t = this.navigator.currentVisit) === null || t === void 0) &&
          t.silent) ||
          this.notifyApplicationBeforeCachingSnapshot();
      }
      allowsImmediateRender({ element: t }, n) {
        let s = this.notifyApplicationBeforeRender(t, n),
          {
            defaultPrevented: l,
            detail: { render: h },
          } = s;
        return (
          this.view.renderer && h && (this.view.renderer.renderElement = h), !l
        );
      }
      viewRenderedSnapshot(t, n) {
        (this.view.lastRenderedLocation = this.history.location),
          this.notifyApplicationAfterRender();
      }
      preloadOnLoadLinksForView(t) {
        this.preloader.preloadOnLoadLinksForView(t);
      }
      viewInvalidated(t) {
        this.adapter.pageInvalidated(t);
      }
      frameLoaded(t) {
        this.notifyApplicationAfterFrameLoad(t);
      }
      frameRendered(t, n) {
        this.notifyApplicationAfterFrameRender(t, n);
      }
      applicationAllowsFollowingLinkToLocation(t, n, s) {
        return !this.notifyApplicationAfterClickingLinkToLocation(t, n, s)
          .defaultPrevented;
      }
      applicationAllowsVisitingLocation(t) {
        return !this.notifyApplicationBeforeVisitingLocation(t)
          .defaultPrevented;
      }
      notifyApplicationAfterClickingLinkToLocation(t, n, s) {
        return He("turbo:click", {
          target: t,
          detail: { url: n.href, originalEvent: s },
          cancelable: !0,
        });
      }
      notifyApplicationBeforeVisitingLocation(t) {
        return He("turbo:before-visit", {
          detail: { url: t.href },
          cancelable: !0,
        });
      }
      notifyApplicationAfterVisitingLocation(t, n) {
        return He("turbo:visit", { detail: { url: t.href, action: n } });
      }
      notifyApplicationBeforeCachingSnapshot() {
        return He("turbo:before-cache");
      }
      notifyApplicationBeforeRender(t, n) {
        return He("turbo:before-render", {
          detail: Object.assign({ newBody: t }, n),
          cancelable: !0,
        });
      }
      notifyApplicationAfterRender() {
        return He("turbo:render");
      }
      notifyApplicationAfterPageLoad(t = {}) {
        return He("turbo:load", {
          detail: { url: this.location.href, timing: t },
        });
      }
      notifyApplicationAfterVisitingSamePageLocation(t, n) {
        dispatchEvent(
          new HashChangeEvent("hashchange", {
            oldURL: t.toString(),
            newURL: n.toString(),
          }),
        );
      }
      notifyApplicationAfterFrameLoad(t) {
        return He("turbo:frame-load", { target: t });
      }
      notifyApplicationAfterFrameRender(t, n) {
        return He("turbo:frame-render", {
          detail: { fetchResponse: t },
          target: n,
          cancelable: !0,
        });
      }
      submissionIsNavigatable(t, n) {
        if (this.formMode == "off") return !1;
        {
          let s = n ? this.elementIsNavigatable(n) : !0;
          return this.formMode == "optin"
            ? s && t.closest('[data-turbo="true"]') != null
            : s && this.elementIsNavigatable(t);
        }
      }
      elementIsNavigatable(t) {
        let n = eo(t, "[data-turbo]"),
          s = eo(t, "turbo-frame");
        return this.drive || s
          ? n
            ? n.getAttribute("data-turbo") != "false"
            : !0
          : n
          ? n.getAttribute("data-turbo") == "true"
          : !1;
      }
      getActionForLink(t) {
        return lo(t) || "advance";
      }
      get snapshot() {
        return this.view.snapshot;
      }
    };
  function iu(r) {
    Object.defineProperties(r, ym);
  }
  var ym = {
      absoluteURL: {
        get() {
          return this.toString();
        },
      },
    },
    Xa = class {
      constructor(t) {
        this.session = t;
      }
      clear() {
        this.session.clearCache();
      }
      resetCacheControl() {
        this.setCacheControl("");
      }
      exemptPageFromCache() {
        this.setCacheControl("no-cache");
      }
      exemptPageFromPreview() {
        this.setCacheControl("no-preview");
      }
      setCacheControl(t) {
        Xf("turbo-cache-control", t);
      }
    },
    fu = {
      after() {
        this.targetElements.forEach((r) => {
          var t;
          return (t = r.parentElement) === null || t === void 0
            ? void 0
            : t.insertBefore(this.templateContent, r.nextSibling);
        });
      },
      append() {
        this.removeDuplicateTargetChildren(),
          this.targetElements.forEach((r) => r.append(this.templateContent));
      },
      before() {
        this.targetElements.forEach((r) => {
          var t;
          return (t = r.parentElement) === null || t === void 0
            ? void 0
            : t.insertBefore(this.templateContent, r);
        });
      },
      prepend() {
        this.removeDuplicateTargetChildren(),
          this.targetElements.forEach((r) => r.prepend(this.templateContent));
      },
      remove() {
        this.targetElements.forEach((r) => r.remove());
      },
      replace() {
        this.targetElements.forEach((r) => r.replaceWith(this.templateContent));
      },
      update() {
        this.targetElements.forEach((r) => {
          (r.innerHTML = ""), r.append(this.templateContent);
        });
      },
    },
    xe = new $a(),
    wm = new Xa(xe),
    { navigator: Em } = xe;
  function mu() {
    xe.start();
  }
  function Am(r) {
    xe.registerAdapter(r);
  }
  function xm(r, t) {
    xe.visit(r, t);
  }
  function co(r) {
    xe.connectStreamSource(r);
  }
  function uo(r) {
    xe.disconnectStreamSource(r);
  }
  function Tm(r) {
    xe.renderStreamMessage(r);
  }
  function Sm() {
    console.warn(
      "Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`",
    ),
      xe.clearCache();
  }
  function Cm(r) {
    xe.setProgressBarDelay(r);
  }
  function km(r) {
    ui.confirmMethod = r;
  }
  function Lm(r) {
    xe.setFormMode(r);
  }
  var Rm = Object.freeze({
      __proto__: null,
      navigator: Em,
      session: xe,
      cache: wm,
      PageRenderer: mn,
      PageSnapshot: sr,
      FrameRenderer: fn,
      start: mu,
      registerAdapter: Am,
      visit: xm,
      connectStreamSource: co,
      disconnectStreamSource: uo,
      renderStreamMessage: Tm,
      clearCache: Sm,
      setProgressBarDelay: Cm,
      setConfirmMethod: km,
      setFormMode: Lm,
      StreamActions: fu,
    }),
    Ka = class extends Error {},
    Ga = class {
      constructor(t) {
        (this.fetchResponseLoaded = (n) => {}),
          (this.currentFetchRequest = null),
          (this.resolveVisitPromise = () => {}),
          (this.connected = !1),
          (this.hasBeenLoaded = !1),
          (this.ignoredAttributes = new Set()),
          (this.action = null),
          (this.visitCachedSnapshot = ({ element: n }) => {
            let s = n.querySelector("#" + this.element.id);
            s &&
              this.previousFrameElement &&
              s.replaceChildren(...this.previousFrameElement.children),
              delete this.previousFrameElement;
          }),
          (this.element = t),
          (this.view = new Da(this, this.element)),
          (this.appearanceObserver = new _a(this, this.element)),
          (this.formLinkClickObserver = new so(this, this.element)),
          (this.linkInterceptor = new io(this, this.element)),
          (this.restorationIdentifier = qi()),
          (this.formSubmitObserver = new hn(this, this.element));
      }
      connect() {
        this.connected ||
          ((this.connected = !0),
          this.loadingStyle == Gr.lazy
            ? this.appearanceObserver.start()
            : this.loadSourceURL(),
          this.formLinkClickObserver.start(),
          this.linkInterceptor.start(),
          this.formSubmitObserver.start());
      }
      disconnect() {
        this.connected &&
          ((this.connected = !1),
          this.appearanceObserver.stop(),
          this.formLinkClickObserver.stop(),
          this.linkInterceptor.stop(),
          this.formSubmitObserver.stop());
      }
      disabledChanged() {
        this.loadingStyle == Gr.eager && this.loadSourceURL();
      }
      sourceURLChanged() {
        this.isIgnoringChangesTo("src") ||
          (this.element.isConnected && (this.complete = !1),
          (this.loadingStyle == Gr.eager || this.hasBeenLoaded) &&
            this.loadSourceURL());
      }
      sourceURLReloaded() {
        let { src: t } = this.element;
        return (
          this.ignoringChangesToAttribute("complete", () => {
            this.element.removeAttribute("complete");
          }),
          (this.element.src = null),
          (this.element.src = t),
          this.element.loaded
        );
      }
      completeChanged() {
        this.isIgnoringChangesTo("complete") || this.loadSourceURL();
      }
      loadingStyleChanged() {
        this.loadingStyle == Gr.lazy
          ? this.appearanceObserver.start()
          : (this.appearanceObserver.stop(), this.loadSourceURL());
      }
      loadSourceURL() {
        return Ot(this, null, function* () {
          this.enabled &&
            this.isActive &&
            !this.complete &&
            this.sourceURL &&
            ((this.element.loaded = this.visit(Xe(this.sourceURL))),
            this.appearanceObserver.stop(),
            yield this.element.loaded,
            (this.hasBeenLoaded = !0));
        });
      }
      loadResponse(t) {
        return Ot(this, null, function* () {
          (t.redirected || (t.succeeded && t.isHTML)) &&
            (this.sourceURL = t.response.url);
          try {
            let n = yield t.responseHTML;
            if (n) {
              let s = au(n);
              sr.fromDocument(s).isVisitable
                ? yield this.loadFrameResponse(t, s)
                : yield this.handleUnvisitableFrameResponse(t);
            }
          } finally {
            this.fetchResponseLoaded = () => {};
          }
        });
      }
      elementAppearedInViewport(t) {
        this.proposeVisitIfNavigatedWithAction(t, t), this.loadSourceURL();
      }
      willSubmitFormLinkToLocation(t) {
        return this.shouldInterceptNavigation(t);
      }
      submittedFormLinkToLocation(t, n, s) {
        let l = this.findFrameElement(t);
        l && s.setAttribute("data-turbo-frame", l.id);
      }
      shouldInterceptLinkClick(t, n, s) {
        return this.shouldInterceptNavigation(t);
      }
      linkClickIntercepted(t, n) {
        this.navigateFrame(t, n);
      }
      willSubmitForm(t, n) {
        return (
          t.closest("turbo-frame") == this.element &&
          this.shouldInterceptNavigation(t, n)
        );
      }
      formSubmitted(t, n) {
        this.formSubmission && this.formSubmission.stop(),
          (this.formSubmission = new ui(this, t, n));
        let { fetchRequest: s } = this.formSubmission;
        this.prepareRequest(s), this.formSubmission.start();
      }
      prepareRequest(t) {
        var n;
        (t.headers["Turbo-Frame"] = this.id),
          !((n = this.currentNavigationElement) === null || n === void 0) &&
            n.hasAttribute("data-turbo-stream") &&
            t.acceptResponseType(Nr.contentType);
      }
      requestStarted(t) {
        La(this.element);
      }
      requestPreventedHandlingResponse(t, n) {
        this.resolveVisitPromise();
      }
      requestSucceededWithResponse(t, n) {
        return Ot(this, null, function* () {
          yield this.loadResponse(n), this.resolveVisitPromise();
        });
      }
      requestFailedWithResponse(t, n) {
        return Ot(this, null, function* () {
          yield this.loadResponse(n), this.resolveVisitPromise();
        });
      }
      requestErrored(t, n) {
        console.error(n), this.resolveVisitPromise();
      }
      requestFinished(t) {
        Ra(this.element);
      }
      formSubmissionStarted({ formElement: t }) {
        La(t, this.findFrameElement(t));
      }
      formSubmissionSucceededWithResponse(t, n) {
        let s = this.findFrameElement(t.formElement, t.submitter);
        s.delegate.proposeVisitIfNavigatedWithAction(
          s,
          t.formElement,
          t.submitter,
        ),
          s.delegate.loadResponse(n),
          t.isSafe || xe.clearCache();
      }
      formSubmissionFailedWithResponse(t, n) {
        this.element.delegate.loadResponse(n), xe.clearCache();
      }
      formSubmissionErrored(t, n) {
        console.error(n);
      }
      formSubmissionFinished({ formElement: t }) {
        Ra(t, this.findFrameElement(t));
      }
      allowsImmediateRender({ element: t }, n) {
        let s = He("turbo:before-frame-render", {
            target: this.element,
            detail: Object.assign({ newFrame: t }, n),
            cancelable: !0,
          }),
          {
            defaultPrevented: l,
            detail: { render: h },
          } = s;
        return (
          this.view.renderer && h && (this.view.renderer.renderElement = h), !l
        );
      }
      viewRenderedSnapshot(t, n) {}
      preloadOnLoadLinksForView(t) {
        xe.preloadOnLoadLinksForView(t);
      }
      viewInvalidated() {}
      willRenderFrame(t, n) {
        this.previousFrameElement = t.cloneNode(!0);
      }
      loadFrameResponse(t, n) {
        return Ot(this, null, function* () {
          let s = yield this.extractForeignFrameElement(n.body);
          if (s) {
            let l = new zi(s),
              h = new fn(this, this.view.snapshot, l, fn.renderElement, !1, !1);
            this.view.renderPromise && (yield this.view.renderPromise),
              this.changeHistory(),
              yield this.view.render(h),
              (this.complete = !0),
              xe.frameRendered(t, this.element),
              xe.frameLoaded(this.element),
              this.fetchResponseLoaded(t);
          } else this.willHandleFrameMissingFromResponse(t) && this.handleFrameMissingFromResponse(t);
        });
      }
      visit(t) {
        return Ot(this, null, function* () {
          var n;
          let s = new un(this, Je.get, t, new URLSearchParams(), this.element);
          return (
            (n = this.currentFetchRequest) === null ||
              n === void 0 ||
              n.cancel(),
            (this.currentFetchRequest = s),
            new Promise((l) => {
              (this.resolveVisitPromise = () => {
                (this.resolveVisitPromise = () => {}),
                  (this.currentFetchRequest = null),
                  l();
              }),
                s.perform();
            })
          );
        });
      }
      navigateFrame(t, n, s) {
        let l = this.findFrameElement(t, s);
        l.delegate.proposeVisitIfNavigatedWithAction(l, t, s),
          this.withCurrentNavigationElement(t, () => {
            l.src = n;
          });
      }
      proposeVisitIfNavigatedWithAction(t, n, s) {
        if (((this.action = lo(s, n, t)), this.action)) {
          let l = sr.fromElement(t).clone(),
            { visitCachedSnapshot: h } = t.delegate;
          t.delegate.fetchResponseLoaded = (w) => {
            if (t.src) {
              let { statusCode: L, redirected: I } = w,
                B = t.ownerDocument.documentElement.outerHTML,
                Tt = {
                  response: { statusCode: L, redirected: I, responseHTML: B },
                  visitCachedSnapshot: h,
                  willRender: !1,
                  updateHistory: !1,
                  restorationIdentifier: this.restorationIdentifier,
                  snapshot: l,
                };
              this.action && (Tt.action = this.action), xe.visit(t.src, Tt);
            }
          };
        }
      }
      changeHistory() {
        if (this.action) {
          let t = cu(this.action);
          xe.history.update(
            t,
            Xe(this.element.src || ""),
            this.restorationIdentifier,
          );
        }
      }
      handleUnvisitableFrameResponse(t) {
        return Ot(this, null, function* () {
          console.warn(
            `The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`,
          ),
            yield this.visitResponse(t.response);
        });
      }
      willHandleFrameMissingFromResponse(t) {
        this.element.setAttribute("complete", "");
        let n = t.response,
          s = (L, ...I) =>
            Ot(this, [L, ...I], function* (h, w = {}) {
              h instanceof Response ? this.visitResponse(h) : xe.visit(h, w);
            });
        return !He("turbo:frame-missing", {
          target: this.element,
          detail: { response: n, visit: s },
          cancelable: !0,
        }).defaultPrevented;
      }
      handleFrameMissingFromResponse(t) {
        this.view.missing(), this.throwFrameMissingError(t);
      }
      throwFrameMissingError(t) {
        let n = `The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;
        throw new Ka(n);
      }
      visitResponse(t) {
        return Ot(this, null, function* () {
          let n = new ln(t),
            s = yield n.responseHTML,
            { location: l, redirected: h, statusCode: w } = n;
          return xe.visit(l, {
            response: { redirected: h, statusCode: w, responseHTML: s },
          });
        });
      }
      findFrameElement(t, n) {
        var s;
        let l =
          Zs("data-turbo-frame", n, t) || this.element.getAttribute("target");
        return (s = nu(l)) !== null && s !== void 0 ? s : this.element;
      }
      extractForeignFrameElement(t) {
        return Ot(this, null, function* () {
          let n,
            s = CSS.escape(this.id);
          try {
            if (
              ((n = su(t.querySelector(`turbo-frame#${s}`), this.sourceURL)), n)
            )
              return n;
            if (
              ((n = su(
                t.querySelector(`turbo-frame[src][recurse~=${s}]`),
                this.sourceURL,
              )),
              n)
            )
              return yield n.loaded, yield this.extractForeignFrameElement(n);
          } catch (l) {
            return console.error(l), new Ar();
          }
          return null;
        });
      }
      formActionIsVisitable(t, n) {
        let s = Ja(t, n);
        return ji(Xe(s), this.rootLocation);
      }
      shouldInterceptNavigation(t, n) {
        let s =
          Zs("data-turbo-frame", n, t) || this.element.getAttribute("target");
        if (
          (t instanceof HTMLFormElement && !this.formActionIsVisitable(t, n)) ||
          !this.enabled ||
          s == "_top"
        )
          return !1;
        if (s) {
          let l = nu(s);
          if (l) return !l.disabled;
        }
        return !(
          !xe.elementIsNavigatable(t) ||
          (n && !xe.elementIsNavigatable(n))
        );
      }
      get id() {
        return this.element.id;
      }
      get enabled() {
        return !this.element.disabled;
      }
      get sourceURL() {
        if (this.element.src) return this.element.src;
      }
      set sourceURL(t) {
        this.ignoringChangesToAttribute("src", () => {
          this.element.src = t != null ? t : null;
        });
      }
      get loadingStyle() {
        return this.element.loading;
      }
      get isLoading() {
        return (
          this.formSubmission !== void 0 ||
          this.resolveVisitPromise() !== void 0
        );
      }
      get complete() {
        return this.element.hasAttribute("complete");
      }
      set complete(t) {
        this.ignoringChangesToAttribute("complete", () => {
          t
            ? this.element.setAttribute("complete", "")
            : this.element.removeAttribute("complete");
        });
      }
      get isActive() {
        return this.element.isActive && this.connected;
      }
      get rootLocation() {
        var t;
        let n = this.element.ownerDocument.querySelector(
            'meta[name="turbo-root"]',
          ),
          s =
            (t = n == null ? void 0 : n.content) !== null && t !== void 0
              ? t
              : "/";
        return Xe(s);
      }
      isIgnoringChangesTo(t) {
        return this.ignoredAttributes.has(t);
      }
      ignoringChangesToAttribute(t, n) {
        this.ignoredAttributes.add(t), n(), this.ignoredAttributes.delete(t);
      }
      withCurrentNavigationElement(t, n) {
        (this.currentNavigationElement = t),
          n(),
          delete this.currentNavigationElement;
      }
    };
  function nu(r) {
    if (r != null) {
      let t = document.getElementById(r);
      if (t instanceof Ar) return t;
    }
  }
  function su(r, t) {
    if (r) {
      let n = r.getAttribute("src");
      if (n != null && t != null && Mf(n, t))
        throw new Error(
          `Matching <turbo-frame id="${r.id}"> element has a source URL which references itself`,
        );
      if (
        (r.ownerDocument !== document && (r = document.importNode(r, !0)),
        r instanceof Ar)
      )
        return r.connectedCallback(), r.disconnectedCallback(), r;
    }
  }
  var gn = class extends HTMLElement {
      static renderElement(t) {
        return Ot(this, null, function* () {
          yield t.performAction();
        });
      }
      connectedCallback() {
        return Ot(this, null, function* () {
          try {
            yield this.render();
          } catch (t) {
            console.error(t);
          } finally {
            this.disconnect();
          }
        });
      }
      render() {
        return Ot(this, null, function* () {
          var t;
          return (t = this.renderPromise) !== null && t !== void 0
            ? t
            : (this.renderPromise = (() =>
                Ot(this, null, function* () {
                  let n = this.beforeRenderEvent;
                  this.dispatchEvent(n) &&
                    (yield Qs(), yield n.detail.render(this));
                }))());
        });
      }
      disconnect() {
        try {
          this.remove();
        } catch (t) {}
      }
      removeDuplicateTargetChildren() {
        this.duplicateChildren.forEach((t) => t.remove());
      }
      get duplicateChildren() {
        var t;
        let n = this.targetElements
            .flatMap((l) => [...l.children])
            .filter((l) => !!l.id),
          s = [
            ...(((t = this.templateContent) === null || t === void 0
              ? void 0
              : t.children) || []),
          ]
            .filter((l) => !!l.id)
            .map((l) => l.id);
        return n.filter((l) => s.includes(l.id));
      }
      get performAction() {
        if (this.action) {
          let t = fu[this.action];
          if (t) return t;
          this.raise("unknown action");
        }
        this.raise("action attribute is missing");
      }
      get targetElements() {
        if (this.target) return this.targetElementsById;
        if (this.targets) return this.targetElementsByQuery;
        this.raise("target or targets attribute is missing");
      }
      get templateContent() {
        return this.templateElement.content.cloneNode(!0);
      }
      get templateElement() {
        if (this.firstElementChild === null) {
          let t = this.ownerDocument.createElement("template");
          return this.appendChild(t), t;
        } else if (this.firstElementChild instanceof HTMLTemplateElement)
          return this.firstElementChild;
        this.raise("first child element must be a <template> element");
      }
      get action() {
        return this.getAttribute("action");
      }
      get target() {
        return this.getAttribute("target");
      }
      get targets() {
        return this.getAttribute("targets");
      }
      raise(t) {
        throw new Error(`${this.description}: ${t}`);
      }
      get description() {
        var t, n;
        return (n = (
          (t = this.outerHTML.match(/<[^>]+>/)) !== null && t !== void 0
            ? t
            : []
        )[0]) !== null && n !== void 0
          ? n
          : "<turbo-stream>";
      }
      get beforeRenderEvent() {
        return new CustomEvent("turbo:before-stream-render", {
          bubbles: !0,
          cancelable: !0,
          detail: { newStream: this, render: gn.renderElement },
        });
      }
      get targetElementsById() {
        var t;
        let n =
          (t = this.ownerDocument) === null || t === void 0
            ? void 0
            : t.getElementById(this.target);
        return n !== null ? [n] : [];
      }
      get targetElementsByQuery() {
        var t;
        let n =
          (t = this.ownerDocument) === null || t === void 0
            ? void 0
            : t.querySelectorAll(this.targets);
        return n.length !== 0 ? Array.prototype.slice.call(n) : [];
      }
    },
    Ya = class extends HTMLElement {
      constructor() {
        super(...arguments), (this.streamSource = null);
      }
      connectedCallback() {
        (this.streamSource = this.src.match(/^ws{1,2}:/)
          ? new WebSocket(this.src)
          : new EventSource(this.src)),
          co(this.streamSource);
      }
      disconnectedCallback() {
        this.streamSource && uo(this.streamSource);
      }
      get src() {
        return this.getAttribute("src") || "";
      }
    };
  Ar.delegateConstructor = Ga;
  customElements.get("turbo-frame") === void 0 &&
    customElements.define("turbo-frame", Ar);
  customElements.get("turbo-stream") === void 0 &&
    customElements.define("turbo-stream", gn);
  customElements.get("turbo-stream-source") === void 0 &&
    customElements.define("turbo-stream-source", Ya);
  (() => {
    let r = document.currentScript;
    if (!!r && !r.hasAttribute("data-turbo-suppress-warning"))
      for (r = r.parentElement; r; ) {
        if (r == document.body)
          return console.warn(
            lu`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,
            r.outerHTML,
          );
        r = r.parentElement;
      }
  })();
  window.Turbo = Rm;
  mu();
  var Eu;
  function Mm() {
    return Ot(this, null, function* () {
      return Eu || wu(Fm().then(wu));
    });
  }
  function wu(r) {
    return (Eu = r);
  }
  function Fm() {
    return Ot(this, null, function* () {
      let { createConsumer: r } = yield Promise.resolve().then(
        () => (yu(), vu),
      );
      return r();
    });
  }
  function Au(r, t) {
    return Ot(this, null, function* () {
      let { subscriptions: n } = yield Mm();
      return n.create(r, t);
    });
  }
  function En(r) {
    return !r ||
      typeof r != "object" ||
      r instanceof Date ||
      r instanceof RegExp
      ? r
      : Array.isArray(r)
      ? r.map(En)
      : Object.keys(r).reduce(function (t, n) {
          var s =
            n[0].toLowerCase() +
            n.slice(1).replace(/([A-Z]+)/g, function (l, h) {
              return "_" + h.toLowerCase();
            });
          return (t[s] = En(r[n])), t;
        }, {});
  }
  var al = class extends HTMLElement {
    connectedCallback() {
      return Ot(this, null, function* () {
        co(this),
          (this.subscription = yield Au(this.channel, {
            received: this.dispatchMessageEvent.bind(this),
            connected: this.subscriptionConnected.bind(this),
            disconnected: this.subscriptionDisconnected.bind(this),
          }));
      });
    }
    disconnectedCallback() {
      uo(this), this.subscription && this.subscription.unsubscribe();
    }
    dispatchMessageEvent(t) {
      let n = new MessageEvent("message", { data: t });
      return this.dispatchEvent(n);
    }
    subscriptionConnected() {
      this.setAttribute("connected", "");
    }
    subscriptionDisconnected() {
      this.removeAttribute("connected");
    }
    get channel() {
      let t = this.getAttribute("channel"),
        n = this.getAttribute("signed-stream-name");
      return Sa(
        { channel: t, signed_stream_name: n },
        En(Sa({}, this.dataset)),
      );
    }
  };
  customElements.get("turbo-cable-stream-source") === void 0 &&
    customElements.define("turbo-cable-stream-source", al);
  function xu(r) {
    if (r.target instanceof HTMLFormElement) {
      let {
        target: t,
        detail: { fetchOptions: n },
      } = r;
      t.addEventListener(
        "turbo:submit-start",
        ({
          detail: {
            formSubmission: { submitter: s },
          },
        }) => {
          let l = jm(n.body) ? n.body : new URLSearchParams(),
            h = Bm(s, l, t);
          /get/i.test(h) ||
            (/post/i.test(h) ? l.delete("_method") : l.set("_method", h),
            (n.method = "post"));
        },
        { once: !0 },
      );
    }
  }
  function Bm(r, t, n) {
    let s = Nm(r),
      l = t.get("_method"),
      h = n.getAttribute("method") || "get";
    return typeof s == "string" ? s : typeof l == "string" ? l : h;
  }
  function Nm(r) {
    return (r instanceof HTMLButtonElement || r instanceof HTMLInputElement) &&
      r.hasAttribute("formmethod")
      ? r.formMethod
      : null;
  }
  function jm(r) {
    return r instanceof FormData || r instanceof URLSearchParams;
  }
  addEventListener("turbo:before-fetch-request", xu);
  var ll = class {
    constructor(t, n, s) {
      (this.eventTarget = t),
        (this.eventName = n),
        (this.eventOptions = s),
        (this.unorderedBindings = new Set());
    }
    connect() {
      this.eventTarget.addEventListener(
        this.eventName,
        this,
        this.eventOptions,
      );
    }
    disconnect() {
      this.eventTarget.removeEventListener(
        this.eventName,
        this,
        this.eventOptions,
      );
    }
    bindingConnected(t) {
      this.unorderedBindings.add(t);
    }
    bindingDisconnected(t) {
      this.unorderedBindings.delete(t);
    }
    handleEvent(t) {
      let n = qm(t);
      for (let s of this.bindings) {
        if (n.immediatePropagationStopped) break;
        s.handleEvent(n);
      }
    }
    hasBindings() {
      return this.unorderedBindings.size > 0;
    }
    get bindings() {
      return Array.from(this.unorderedBindings).sort((t, n) => {
        let s = t.index,
          l = n.index;
        return s < l ? -1 : s > l ? 1 : 0;
      });
    }
  };
  function qm(r) {
    if ("immediatePropagationStopped" in r) return r;
    {
      let { stopImmediatePropagation: t } = r;
      return Object.assign(r, {
        immediatePropagationStopped: !1,
        stopImmediatePropagation() {
          (this.immediatePropagationStopped = !0), t.call(this);
        },
      });
    }
  }
  var cl = class {
      constructor(t) {
        (this.application = t),
          (this.eventListenerMaps = new Map()),
          (this.started = !1);
      }
      start() {
        this.started ||
          ((this.started = !0),
          this.eventListeners.forEach((t) => t.connect()));
      }
      stop() {
        this.started &&
          ((this.started = !1),
          this.eventListeners.forEach((t) => t.disconnect()));
      }
      get eventListeners() {
        return Array.from(this.eventListenerMaps.values()).reduce(
          (t, n) => t.concat(Array.from(n.values())),
          [],
        );
      }
      bindingConnected(t) {
        this.fetchEventListenerForBinding(t).bindingConnected(t);
      }
      bindingDisconnected(t, n = !1) {
        this.fetchEventListenerForBinding(t).bindingDisconnected(t),
          n && this.clearEventListenersForBinding(t);
      }
      handleError(t, n, s = {}) {
        this.application.handleError(t, `Error ${n}`, s);
      }
      clearEventListenersForBinding(t) {
        let n = this.fetchEventListenerForBinding(t);
        n.hasBindings() ||
          (n.disconnect(), this.removeMappedEventListenerFor(t));
      }
      removeMappedEventListenerFor(t) {
        let { eventTarget: n, eventName: s, eventOptions: l } = t,
          h = this.fetchEventListenerMapForEventTarget(n),
          w = this.cacheKey(s, l);
        h.delete(w), h.size == 0 && this.eventListenerMaps.delete(n);
      }
      fetchEventListenerForBinding(t) {
        let { eventTarget: n, eventName: s, eventOptions: l } = t;
        return this.fetchEventListener(n, s, l);
      }
      fetchEventListener(t, n, s) {
        let l = this.fetchEventListenerMapForEventTarget(t),
          h = this.cacheKey(n, s),
          w = l.get(h);
        return w || ((w = this.createEventListener(t, n, s)), l.set(h, w)), w;
      }
      createEventListener(t, n, s) {
        let l = new ll(t, n, s);
        return this.started && l.connect(), l;
      }
      fetchEventListenerMapForEventTarget(t) {
        let n = this.eventListenerMaps.get(t);
        return n || ((n = new Map()), this.eventListenerMaps.set(t, n)), n;
      }
      cacheKey(t, n) {
        let s = [t];
        return (
          Object.keys(n)
            .sort()
            .forEach((l) => {
              s.push(`${n[l] ? "" : "!"}${l}`);
            }),
          s.join(":")
        );
      }
    },
    zm = {
      stop({ event: r, value: t }) {
        return t && r.stopPropagation(), !0;
      },
      prevent({ event: r, value: t }) {
        return t && r.preventDefault(), !0;
      },
      self({ event: r, value: t, element: n }) {
        return t ? n === r.target : !0;
      },
    },
    Hm =
      /^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;
  function Wm(r) {
    let n = r.trim().match(Hm) || [],
      s = n[2],
      l = n[3];
    return (
      l &&
        !["keydown", "keyup", "keypress"].includes(s) &&
        ((s += `.${l}`), (l = "")),
      {
        eventTarget: Um(n[4]),
        eventName: s,
        eventOptions: n[7] ? Vm(n[7]) : {},
        identifier: n[5],
        methodName: n[6],
        keyFilter: n[1] || l,
      }
    );
  }
  function Um(r) {
    if (r == "window") return window;
    if (r == "document") return document;
  }
  function Vm(r) {
    return r
      .split(":")
      .reduce(
        (t, n) => Object.assign(t, { [n.replace(/^!/, "")]: !/^!/.test(n) }),
        {},
      );
  }
  function $m(r) {
    if (r == window) return "window";
    if (r == document) return "document";
  }
  function _l(r) {
    return r.replace(/(?:[_-])([a-z0-9])/g, (t, n) => n.toUpperCase());
  }
  function ul(r) {
    return _l(r.replace(/--/g, "-").replace(/__/g, "_"));
  }
  function Tn(r) {
    return r.charAt(0).toUpperCase() + r.slice(1);
  }
  function Ou(r) {
    return r.replace(/([A-Z])/g, (t, n) => `-${n.toLowerCase()}`);
  }
  function Xm(r) {
    return r.match(/[^\s]+/g) || [];
  }
  function Tu(r) {
    return r != null;
  }
  function hl(r, t) {
    return Object.prototype.hasOwnProperty.call(r, t);
  }
  var Su = ["meta", "ctrl", "alt", "shift"],
    dl = class {
      constructor(t, n, s, l) {
        (this.element = t),
          (this.index = n),
          (this.eventTarget = s.eventTarget || t),
          (this.eventName = s.eventName || Km(t) || bo("missing event name")),
          (this.eventOptions = s.eventOptions || {}),
          (this.identifier = s.identifier || bo("missing identifier")),
          (this.methodName = s.methodName || bo("missing method name")),
          (this.keyFilter = s.keyFilter || ""),
          (this.schema = l);
      }
      static forToken(t, n) {
        return new this(t.element, t.index, Wm(t.content), n);
      }
      toString() {
        let t = this.keyFilter ? `.${this.keyFilter}` : "",
          n = this.eventTargetName ? `@${this.eventTargetName}` : "";
        return `${this.eventName}${t}${n}->${this.identifier}#${this.methodName}`;
      }
      shouldIgnoreKeyboardEvent(t) {
        if (!this.keyFilter) return !1;
        let n = this.keyFilter.split("+");
        if (this.keyFilterDissatisfied(t, n)) return !0;
        let s = n.filter((l) => !Su.includes(l))[0];
        return s
          ? (hl(this.keyMappings, s) ||
              bo(`contains unknown key filter: ${this.keyFilter}`),
            this.keyMappings[s].toLowerCase() !== t.key.toLowerCase())
          : !1;
      }
      shouldIgnoreMouseEvent(t) {
        if (!this.keyFilter) return !1;
        let n = [this.keyFilter];
        return !!this.keyFilterDissatisfied(t, n);
      }
      get params() {
        let t = {},
          n = new RegExp(`^data-${this.identifier}-(.+)-param$`, "i");
        for (let { name: s, value: l } of Array.from(this.element.attributes)) {
          let h = s.match(n),
            w = h && h[1];
          w && (t[_l(w)] = Gm(l));
        }
        return t;
      }
      get eventTargetName() {
        return $m(this.eventTarget);
      }
      get keyMappings() {
        return this.schema.keyMappings;
      }
      keyFilterDissatisfied(t, n) {
        let [s, l, h, w] = Su.map((L) => n.includes(L));
        return (
          t.metaKey !== s ||
          t.ctrlKey !== l ||
          t.altKey !== h ||
          t.shiftKey !== w
        );
      }
    },
    Cu = {
      a: () => "click",
      button: () => "click",
      form: () => "submit",
      details: () => "toggle",
      input: (r) => (r.getAttribute("type") == "submit" ? "click" : "input"),
      select: () => "change",
      textarea: () => "input",
    };
  function Km(r) {
    let t = r.tagName.toLowerCase();
    if (t in Cu) return Cu[t](r);
  }
  function bo(r) {
    throw new Error(r);
  }
  function Gm(r) {
    try {
      return JSON.parse(r);
    } catch (t) {
      return r;
    }
  }
  var fl = class {
      constructor(t, n) {
        (this.context = t), (this.action = n);
      }
      get index() {
        return this.action.index;
      }
      get eventTarget() {
        return this.action.eventTarget;
      }
      get eventOptions() {
        return this.action.eventOptions;
      }
      get identifier() {
        return this.context.identifier;
      }
      handleEvent(t) {
        let n = this.prepareActionEvent(t);
        this.willBeInvokedByEvent(t) &&
          this.applyEventModifiers(n) &&
          this.invokeWithEvent(n);
      }
      get eventName() {
        return this.action.eventName;
      }
      get method() {
        let t = this.controller[this.methodName];
        if (typeof t == "function") return t;
        throw new Error(
          `Action "${this.action}" references undefined method "${this.methodName}"`,
        );
      }
      applyEventModifiers(t) {
        let { element: n } = this.action,
          { actionDescriptorFilters: s } = this.context.application,
          { controller: l } = this.context,
          h = !0;
        for (let [w, L] of Object.entries(this.eventOptions))
          if (w in s) {
            let I = s[w];
            h =
              h &&
              I({ name: w, value: L, event: t, element: n, controller: l });
          } else continue;
        return h;
      }
      prepareActionEvent(t) {
        return Object.assign(t, { params: this.action.params });
      }
      invokeWithEvent(t) {
        let { target: n, currentTarget: s } = t;
        try {
          this.method.call(this.controller, t),
            this.context.logDebugActivity(this.methodName, {
              event: t,
              target: n,
              currentTarget: s,
              action: this.methodName,
            });
        } catch (l) {
          let { identifier: h, controller: w, element: L, index: I } = this,
            B = {
              identifier: h,
              controller: w,
              element: L,
              index: I,
              event: t,
            };
          this.context.handleError(l, `invoking action "${this.action}"`, B);
        }
      }
      willBeInvokedByEvent(t) {
        let n = t.target;
        return (t instanceof KeyboardEvent &&
          this.action.shouldIgnoreKeyboardEvent(t)) ||
          (t instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(t))
          ? !1
          : this.element === n
          ? !0
          : n instanceof Element && this.element.contains(n)
          ? this.scope.containsElement(n)
          : this.scope.containsElement(this.action.element);
      }
      get controller() {
        return this.context.controller;
      }
      get methodName() {
        return this.action.methodName;
      }
      get element() {
        return this.scope.element;
      }
      get scope() {
        return this.context.scope;
      }
    },
    vo = class {
      constructor(t, n) {
        (this.mutationObserverInit = {
          attributes: !0,
          childList: !0,
          subtree: !0,
        }),
          (this.element = t),
          (this.started = !1),
          (this.delegate = n),
          (this.elements = new Set()),
          (this.mutationObserver = new MutationObserver((s) =>
            this.processMutations(s),
          ));
      }
      start() {
        this.started ||
          ((this.started = !0),
          this.mutationObserver.observe(
            this.element,
            this.mutationObserverInit,
          ),
          this.refresh());
      }
      pause(t) {
        this.started &&
          (this.mutationObserver.disconnect(), (this.started = !1)),
          t(),
          this.started ||
            (this.mutationObserver.observe(
              this.element,
              this.mutationObserverInit,
            ),
            (this.started = !0));
      }
      stop() {
        this.started &&
          (this.mutationObserver.takeRecords(),
          this.mutationObserver.disconnect(),
          (this.started = !1));
      }
      refresh() {
        if (this.started) {
          let t = new Set(this.matchElementsInTree());
          for (let n of Array.from(this.elements))
            t.has(n) || this.removeElement(n);
          for (let n of Array.from(t)) this.addElement(n);
        }
      }
      processMutations(t) {
        if (this.started) for (let n of t) this.processMutation(n);
      }
      processMutation(t) {
        t.type == "attributes"
          ? this.processAttributeChange(t.target, t.attributeName)
          : t.type == "childList" &&
            (this.processRemovedNodes(t.removedNodes),
            this.processAddedNodes(t.addedNodes));
      }
      processAttributeChange(t, n) {
        this.elements.has(t)
          ? this.delegate.elementAttributeChanged && this.matchElement(t)
            ? this.delegate.elementAttributeChanged(t, n)
            : this.removeElement(t)
          : this.matchElement(t) && this.addElement(t);
      }
      processRemovedNodes(t) {
        for (let n of Array.from(t)) {
          let s = this.elementFromNode(n);
          s && this.processTree(s, this.removeElement);
        }
      }
      processAddedNodes(t) {
        for (let n of Array.from(t)) {
          let s = this.elementFromNode(n);
          s && this.elementIsActive(s) && this.processTree(s, this.addElement);
        }
      }
      matchElement(t) {
        return this.delegate.matchElement(t);
      }
      matchElementsInTree(t = this.element) {
        return this.delegate.matchElementsInTree(t);
      }
      processTree(t, n) {
        for (let s of this.matchElementsInTree(t)) n.call(this, s);
      }
      elementFromNode(t) {
        if (t.nodeType == Node.ELEMENT_NODE) return t;
      }
      elementIsActive(t) {
        return t.isConnected != this.element.isConnected
          ? !1
          : this.element.contains(t);
      }
      addElement(t) {
        this.elements.has(t) ||
          (this.elementIsActive(t) &&
            (this.elements.add(t),
            this.delegate.elementMatched && this.delegate.elementMatched(t)));
      }
      removeElement(t) {
        this.elements.has(t) &&
          (this.elements.delete(t),
          this.delegate.elementUnmatched && this.delegate.elementUnmatched(t));
      }
    },
    yo = class {
      constructor(t, n, s) {
        (this.attributeName = n),
          (this.delegate = s),
          (this.elementObserver = new vo(t, this));
      }
      get element() {
        return this.elementObserver.element;
      }
      get selector() {
        return `[${this.attributeName}]`;
      }
      start() {
        this.elementObserver.start();
      }
      pause(t) {
        this.elementObserver.pause(t);
      }
      stop() {
        this.elementObserver.stop();
      }
      refresh() {
        this.elementObserver.refresh();
      }
      get started() {
        return this.elementObserver.started;
      }
      matchElement(t) {
        return t.hasAttribute(this.attributeName);
      }
      matchElementsInTree(t) {
        let n = this.matchElement(t) ? [t] : [],
          s = Array.from(t.querySelectorAll(this.selector));
        return n.concat(s);
      }
      elementMatched(t) {
        this.delegate.elementMatchedAttribute &&
          this.delegate.elementMatchedAttribute(t, this.attributeName);
      }
      elementUnmatched(t) {
        this.delegate.elementUnmatchedAttribute &&
          this.delegate.elementUnmatchedAttribute(t, this.attributeName);
      }
      elementAttributeChanged(t, n) {
        this.delegate.elementAttributeValueChanged &&
          this.attributeName == n &&
          this.delegate.elementAttributeValueChanged(t, n);
      }
    };
  function Ym(r, t, n) {
    Mu(r, t).add(n);
  }
  function Jm(r, t, n) {
    Mu(r, t).delete(n), Qm(r, t);
  }
  function Mu(r, t) {
    let n = r.get(t);
    return n || ((n = new Set()), r.set(t, n)), n;
  }
  function Qm(r, t) {
    let n = r.get(t);
    n != null && n.size == 0 && r.delete(t);
  }
  var jr = class {
    constructor() {
      this.valuesByKey = new Map();
    }
    get keys() {
      return Array.from(this.valuesByKey.keys());
    }
    get values() {
      return Array.from(this.valuesByKey.values()).reduce(
        (n, s) => n.concat(Array.from(s)),
        [],
      );
    }
    get size() {
      return Array.from(this.valuesByKey.values()).reduce(
        (n, s) => n + s.size,
        0,
      );
    }
    add(t, n) {
      Ym(this.valuesByKey, t, n);
    }
    delete(t, n) {
      Jm(this.valuesByKey, t, n);
    }
    has(t, n) {
      let s = this.valuesByKey.get(t);
      return s != null && s.has(n);
    }
    hasKey(t) {
      return this.valuesByKey.has(t);
    }
    hasValue(t) {
      return Array.from(this.valuesByKey.values()).some((s) => s.has(t));
    }
    getValuesForKey(t) {
      let n = this.valuesByKey.get(t);
      return n ? Array.from(n) : [];
    }
    getKeysForValue(t) {
      return Array.from(this.valuesByKey)
        .filter(([n, s]) => s.has(t))
        .map(([n, s]) => n);
    }
  };
  var ml = class {
      constructor(t, n, s, l) {
        (this._selector = n),
          (this.details = l),
          (this.elementObserver = new vo(t, this)),
          (this.delegate = s),
          (this.matchesByElement = new jr());
      }
      get started() {
        return this.elementObserver.started;
      }
      get selector() {
        return this._selector;
      }
      set selector(t) {
        (this._selector = t), this.refresh();
      }
      start() {
        this.elementObserver.start();
      }
      pause(t) {
        this.elementObserver.pause(t);
      }
      stop() {
        this.elementObserver.stop();
      }
      refresh() {
        this.elementObserver.refresh();
      }
      get element() {
        return this.elementObserver.element;
      }
      matchElement(t) {
        let { selector: n } = this;
        if (n) {
          let s = t.matches(n);
          return this.delegate.selectorMatchElement
            ? s && this.delegate.selectorMatchElement(t, this.details)
            : s;
        } else return !1;
      }
      matchElementsInTree(t) {
        let { selector: n } = this;
        if (n) {
          let s = this.matchElement(t) ? [t] : [],
            l = Array.from(t.querySelectorAll(n)).filter((h) =>
              this.matchElement(h),
            );
          return s.concat(l);
        } else return [];
      }
      elementMatched(t) {
        let { selector: n } = this;
        n && this.selectorMatched(t, n);
      }
      elementUnmatched(t) {
        let n = this.matchesByElement.getKeysForValue(t);
        for (let s of n) this.selectorUnmatched(t, s);
      }
      elementAttributeChanged(t, n) {
        let { selector: s } = this;
        if (s) {
          let l = this.matchElement(t),
            h = this.matchesByElement.has(s, t);
          l && !h
            ? this.selectorMatched(t, s)
            : !l && h && this.selectorUnmatched(t, s);
        }
      }
      selectorMatched(t, n) {
        this.delegate.selectorMatched(t, n, this.details),
          this.matchesByElement.add(n, t);
      }
      selectorUnmatched(t, n) {
        this.delegate.selectorUnmatched(t, n, this.details),
          this.matchesByElement.delete(n, t);
      }
    },
    gl = class {
      constructor(t, n) {
        (this.element = t),
          (this.delegate = n),
          (this.started = !1),
          (this.stringMap = new Map()),
          (this.mutationObserver = new MutationObserver((s) =>
            this.processMutations(s),
          ));
      }
      start() {
        this.started ||
          ((this.started = !0),
          this.mutationObserver.observe(this.element, {
            attributes: !0,
            attributeOldValue: !0,
          }),
          this.refresh());
      }
      stop() {
        this.started &&
          (this.mutationObserver.takeRecords(),
          this.mutationObserver.disconnect(),
          (this.started = !1));
      }
      refresh() {
        if (this.started)
          for (let t of this.knownAttributeNames)
            this.refreshAttribute(t, null);
      }
      processMutations(t) {
        if (this.started) for (let n of t) this.processMutation(n);
      }
      processMutation(t) {
        let n = t.attributeName;
        n && this.refreshAttribute(n, t.oldValue);
      }
      refreshAttribute(t, n) {
        let s = this.delegate.getStringMapKeyForAttribute(t);
        if (s != null) {
          this.stringMap.has(t) || this.stringMapKeyAdded(s, t);
          let l = this.element.getAttribute(t);
          if (
            (this.stringMap.get(t) != l && this.stringMapValueChanged(l, s, n),
            l == null)
          ) {
            let h = this.stringMap.get(t);
            this.stringMap.delete(t), h && this.stringMapKeyRemoved(s, t, h);
          } else this.stringMap.set(t, l);
        }
      }
      stringMapKeyAdded(t, n) {
        this.delegate.stringMapKeyAdded &&
          this.delegate.stringMapKeyAdded(t, n);
      }
      stringMapValueChanged(t, n, s) {
        this.delegate.stringMapValueChanged &&
          this.delegate.stringMapValueChanged(t, n, s);
      }
      stringMapKeyRemoved(t, n, s) {
        this.delegate.stringMapKeyRemoved &&
          this.delegate.stringMapKeyRemoved(t, n, s);
      }
      get knownAttributeNames() {
        return Array.from(
          new Set(
            this.currentAttributeNames.concat(this.recordedAttributeNames),
          ),
        );
      }
      get currentAttributeNames() {
        return Array.from(this.element.attributes).map((t) => t.name);
      }
      get recordedAttributeNames() {
        return Array.from(this.stringMap.keys());
      }
    },
    wo = class {
      constructor(t, n, s) {
        (this.attributeObserver = new yo(t, n, this)),
          (this.delegate = s),
          (this.tokensByElement = new jr());
      }
      get started() {
        return this.attributeObserver.started;
      }
      start() {
        this.attributeObserver.start();
      }
      pause(t) {
        this.attributeObserver.pause(t);
      }
      stop() {
        this.attributeObserver.stop();
      }
      refresh() {
        this.attributeObserver.refresh();
      }
      get element() {
        return this.attributeObserver.element;
      }
      get attributeName() {
        return this.attributeObserver.attributeName;
      }
      elementMatchedAttribute(t) {
        this.tokensMatched(this.readTokensForElement(t));
      }
      elementAttributeValueChanged(t) {
        let [n, s] = this.refreshTokensForElement(t);
        this.tokensUnmatched(n), this.tokensMatched(s);
      }
      elementUnmatchedAttribute(t) {
        this.tokensUnmatched(this.tokensByElement.getValuesForKey(t));
      }
      tokensMatched(t) {
        t.forEach((n) => this.tokenMatched(n));
      }
      tokensUnmatched(t) {
        t.forEach((n) => this.tokenUnmatched(n));
      }
      tokenMatched(t) {
        this.delegate.tokenMatched(t), this.tokensByElement.add(t.element, t);
      }
      tokenUnmatched(t) {
        this.delegate.tokenUnmatched(t),
          this.tokensByElement.delete(t.element, t);
      }
      refreshTokensForElement(t) {
        let n = this.tokensByElement.getValuesForKey(t),
          s = this.readTokensForElement(t),
          l = tg(n, s).findIndex(([h, w]) => !eg(h, w));
        return l == -1 ? [[], []] : [n.slice(l), s.slice(l)];
      }
      readTokensForElement(t) {
        let n = this.attributeName,
          s = t.getAttribute(n) || "";
        return Zm(s, t, n);
      }
    };
  function Zm(r, t, n) {
    return r
      .trim()
      .split(/\s+/)
      .filter((s) => s.length)
      .map((s, l) => ({ element: t, attributeName: n, content: s, index: l }));
  }
  function tg(r, t) {
    let n = Math.max(r.length, t.length);
    return Array.from({ length: n }, (s, l) => [r[l], t[l]]);
  }
  function eg(r, t) {
    return r && t && r.index == t.index && r.content == t.content;
  }
  var Eo = class {
      constructor(t, n, s) {
        (this.tokenListObserver = new wo(t, n, this)),
          (this.delegate = s),
          (this.parseResultsByToken = new WeakMap()),
          (this.valuesByTokenByElement = new WeakMap());
      }
      get started() {
        return this.tokenListObserver.started;
      }
      start() {
        this.tokenListObserver.start();
      }
      stop() {
        this.tokenListObserver.stop();
      }
      refresh() {
        this.tokenListObserver.refresh();
      }
      get element() {
        return this.tokenListObserver.element;
      }
      get attributeName() {
        return this.tokenListObserver.attributeName;
      }
      tokenMatched(t) {
        let { element: n } = t,
          { value: s } = this.fetchParseResultForToken(t);
        s &&
          (this.fetchValuesByTokenForElement(n).set(t, s),
          this.delegate.elementMatchedValue(n, s));
      }
      tokenUnmatched(t) {
        let { element: n } = t,
          { value: s } = this.fetchParseResultForToken(t);
        s &&
          (this.fetchValuesByTokenForElement(n).delete(t),
          this.delegate.elementUnmatchedValue(n, s));
      }
      fetchParseResultForToken(t) {
        let n = this.parseResultsByToken.get(t);
        return (
          n || ((n = this.parseToken(t)), this.parseResultsByToken.set(t, n)), n
        );
      }
      fetchValuesByTokenForElement(t) {
        let n = this.valuesByTokenByElement.get(t);
        return n || ((n = new Map()), this.valuesByTokenByElement.set(t, n)), n;
      }
      parseToken(t) {
        try {
          return { value: this.delegate.parseValueForToken(t) };
        } catch (n) {
          return { error: n };
        }
      }
    },
    pl = class {
      constructor(t, n) {
        (this.context = t),
          (this.delegate = n),
          (this.bindingsByAction = new Map());
      }
      start() {
        this.valueListObserver ||
          ((this.valueListObserver = new Eo(
            this.element,
            this.actionAttribute,
            this,
          )),
          this.valueListObserver.start());
      }
      stop() {
        this.valueListObserver &&
          (this.valueListObserver.stop(),
          delete this.valueListObserver,
          this.disconnectAllActions());
      }
      get element() {
        return this.context.element;
      }
      get identifier() {
        return this.context.identifier;
      }
      get actionAttribute() {
        return this.schema.actionAttribute;
      }
      get schema() {
        return this.context.schema;
      }
      get bindings() {
        return Array.from(this.bindingsByAction.values());
      }
      connectAction(t) {
        let n = new fl(this.context, t);
        this.bindingsByAction.set(t, n), this.delegate.bindingConnected(n);
      }
      disconnectAction(t) {
        let n = this.bindingsByAction.get(t);
        n &&
          (this.bindingsByAction.delete(t),
          this.delegate.bindingDisconnected(n));
      }
      disconnectAllActions() {
        this.bindings.forEach((t) => this.delegate.bindingDisconnected(t, !0)),
          this.bindingsByAction.clear();
      }
      parseValueForToken(t) {
        let n = dl.forToken(t, this.schema);
        if (n.identifier == this.identifier) return n;
      }
      elementMatchedValue(t, n) {
        this.connectAction(n);
      }
      elementUnmatchedValue(t, n) {
        this.disconnectAction(n);
      }
    },
    bl = class {
      constructor(t, n) {
        (this.context = t),
          (this.receiver = n),
          (this.stringMapObserver = new gl(this.element, this)),
          (this.valueDescriptorMap = this.controller.valueDescriptorMap);
      }
      start() {
        this.stringMapObserver.start(),
          this.invokeChangedCallbacksForDefaultValues();
      }
      stop() {
        this.stringMapObserver.stop();
      }
      get element() {
        return this.context.element;
      }
      get controller() {
        return this.context.controller;
      }
      getStringMapKeyForAttribute(t) {
        if (t in this.valueDescriptorMap)
          return this.valueDescriptorMap[t].name;
      }
      stringMapKeyAdded(t, n) {
        let s = this.valueDescriptorMap[n];
        this.hasValue(t) ||
          this.invokeChangedCallback(
            t,
            s.writer(this.receiver[t]),
            s.writer(s.defaultValue),
          );
      }
      stringMapValueChanged(t, n, s) {
        let l = this.valueDescriptorNameMap[n];
        t !== null &&
          (s === null && (s = l.writer(l.defaultValue)),
          this.invokeChangedCallback(n, t, s));
      }
      stringMapKeyRemoved(t, n, s) {
        let l = this.valueDescriptorNameMap[t];
        this.hasValue(t)
          ? this.invokeChangedCallback(t, l.writer(this.receiver[t]), s)
          : this.invokeChangedCallback(t, l.writer(l.defaultValue), s);
      }
      invokeChangedCallbacksForDefaultValues() {
        for (let { key: t, name: n, defaultValue: s, writer: l } of this
          .valueDescriptors)
          s != null &&
            !this.controller.data.has(t) &&
            this.invokeChangedCallback(n, l(s), void 0);
      }
      invokeChangedCallback(t, n, s) {
        let l = `${t}Changed`,
          h = this.receiver[l];
        if (typeof h == "function") {
          let w = this.valueDescriptorNameMap[t];
          try {
            let L = w.reader(n),
              I = s;
            s && (I = w.reader(s)), h.call(this.receiver, L, I);
          } catch (L) {
            throw (
              (L instanceof TypeError &&
                (L.message = `Stimulus Value "${this.context.identifier}.${w.name}" - ${L.message}`),
              L)
            );
          }
        }
      }
      get valueDescriptors() {
        let { valueDescriptorMap: t } = this;
        return Object.keys(t).map((n) => t[n]);
      }
      get valueDescriptorNameMap() {
        let t = {};
        return (
          Object.keys(this.valueDescriptorMap).forEach((n) => {
            let s = this.valueDescriptorMap[n];
            t[s.name] = s;
          }),
          t
        );
      }
      hasValue(t) {
        let n = this.valueDescriptorNameMap[t],
          s = `has${Tn(n.name)}`;
        return this.receiver[s];
      }
    },
    vl = class {
      constructor(t, n) {
        (this.context = t),
          (this.delegate = n),
          (this.targetsByName = new jr());
      }
      start() {
        this.tokenListObserver ||
          ((this.tokenListObserver = new wo(
            this.element,
            this.attributeName,
            this,
          )),
          this.tokenListObserver.start());
      }
      stop() {
        this.tokenListObserver &&
          (this.disconnectAllTargets(),
          this.tokenListObserver.stop(),
          delete this.tokenListObserver);
      }
      tokenMatched({ element: t, content: n }) {
        this.scope.containsElement(t) && this.connectTarget(t, n);
      }
      tokenUnmatched({ element: t, content: n }) {
        this.disconnectTarget(t, n);
      }
      connectTarget(t, n) {
        var s;
        this.targetsByName.has(n, t) ||
          (this.targetsByName.add(n, t),
          (s = this.tokenListObserver) === null ||
            s === void 0 ||
            s.pause(() => this.delegate.targetConnected(t, n)));
      }
      disconnectTarget(t, n) {
        var s;
        this.targetsByName.has(n, t) &&
          (this.targetsByName.delete(n, t),
          (s = this.tokenListObserver) === null ||
            s === void 0 ||
            s.pause(() => this.delegate.targetDisconnected(t, n)));
      }
      disconnectAllTargets() {
        for (let t of this.targetsByName.keys)
          for (let n of this.targetsByName.getValuesForKey(t))
            this.disconnectTarget(n, t);
      }
      get attributeName() {
        return `data-${this.context.identifier}-target`;
      }
      get element() {
        return this.context.element;
      }
      get scope() {
        return this.context.scope;
      }
    };
  function Sn(r, t) {
    let n = Fu(r);
    return Array.from(
      n.reduce((s, l) => (ig(l, t).forEach((h) => s.add(h)), s), new Set()),
    );
  }
  function rg(r, t) {
    return Fu(r).reduce((s, l) => (s.push(...ng(l, t)), s), []);
  }
  function Fu(r) {
    let t = [];
    for (; r; ) t.push(r), (r = Object.getPrototypeOf(r));
    return t.reverse();
  }
  function ig(r, t) {
    let n = r[t];
    return Array.isArray(n) ? n : [];
  }
  function ng(r, t) {
    let n = r[t];
    return n ? Object.keys(n).map((s) => [s, n[s]]) : [];
  }
  var yl = class {
      constructor(t, n) {
        (this.started = !1),
          (this.context = t),
          (this.delegate = n),
          (this.outletsByName = new jr()),
          (this.outletElementsByName = new jr()),
          (this.selectorObserverMap = new Map()),
          (this.attributeObserverMap = new Map());
      }
      start() {
        this.started ||
          (this.outletDefinitions.forEach((t) => {
            this.setupSelectorObserverForOutlet(t),
              this.setupAttributeObserverForOutlet(t);
          }),
          (this.started = !0),
          this.dependentContexts.forEach((t) => t.refresh()));
      }
      refresh() {
        this.selectorObserverMap.forEach((t) => t.refresh()),
          this.attributeObserverMap.forEach((t) => t.refresh());
      }
      stop() {
        this.started &&
          ((this.started = !1),
          this.disconnectAllOutlets(),
          this.stopSelectorObservers(),
          this.stopAttributeObservers());
      }
      stopSelectorObservers() {
        this.selectorObserverMap.size > 0 &&
          (this.selectorObserverMap.forEach((t) => t.stop()),
          this.selectorObserverMap.clear());
      }
      stopAttributeObservers() {
        this.attributeObserverMap.size > 0 &&
          (this.attributeObserverMap.forEach((t) => t.stop()),
          this.attributeObserverMap.clear());
      }
      selectorMatched(t, n, { outletName: s }) {
        let l = this.getOutlet(t, s);
        l && this.connectOutlet(l, t, s);
      }
      selectorUnmatched(t, n, { outletName: s }) {
        let l = this.getOutletFromMap(t, s);
        l && this.disconnectOutlet(l, t, s);
      }
      selectorMatchElement(t, { outletName: n }) {
        let s = this.selector(n),
          l = this.hasOutlet(t, n),
          h = t.matches(`[${this.schema.controllerAttribute}~=${n}]`);
        return s ? l && h && t.matches(s) : !1;
      }
      elementMatchedAttribute(t, n) {
        let s = this.getOutletNameFromOutletAttributeName(n);
        s && this.updateSelectorObserverForOutlet(s);
      }
      elementAttributeValueChanged(t, n) {
        let s = this.getOutletNameFromOutletAttributeName(n);
        s && this.updateSelectorObserverForOutlet(s);
      }
      elementUnmatchedAttribute(t, n) {
        let s = this.getOutletNameFromOutletAttributeName(n);
        s && this.updateSelectorObserverForOutlet(s);
      }
      connectOutlet(t, n, s) {
        var l;
        this.outletElementsByName.has(s, n) ||
          (this.outletsByName.add(s, t),
          this.outletElementsByName.add(s, n),
          (l = this.selectorObserverMap.get(s)) === null ||
            l === void 0 ||
            l.pause(() => this.delegate.outletConnected(t, n, s)));
      }
      disconnectOutlet(t, n, s) {
        var l;
        this.outletElementsByName.has(s, n) &&
          (this.outletsByName.delete(s, t),
          this.outletElementsByName.delete(s, n),
          (l = this.selectorObserverMap.get(s)) === null ||
            l === void 0 ||
            l.pause(() => this.delegate.outletDisconnected(t, n, s)));
      }
      disconnectAllOutlets() {
        for (let t of this.outletElementsByName.keys)
          for (let n of this.outletElementsByName.getValuesForKey(t))
            for (let s of this.outletsByName.getValuesForKey(t))
              this.disconnectOutlet(s, n, t);
      }
      updateSelectorObserverForOutlet(t) {
        let n = this.selectorObserverMap.get(t);
        n && (n.selector = this.selector(t));
      }
      setupSelectorObserverForOutlet(t) {
        let n = this.selector(t),
          s = new ml(document.body, n, this, { outletName: t });
        this.selectorObserverMap.set(t, s), s.start();
      }
      setupAttributeObserverForOutlet(t) {
        let n = this.attributeNameForOutletName(t),
          s = new yo(this.scope.element, n, this);
        this.attributeObserverMap.set(t, s), s.start();
      }
      selector(t) {
        return this.scope.outlets.getSelectorForOutletName(t);
      }
      attributeNameForOutletName(t) {
        return this.scope.schema.outletAttributeForScope(this.identifier, t);
      }
      getOutletNameFromOutletAttributeName(t) {
        return this.outletDefinitions.find(
          (n) => this.attributeNameForOutletName(n) === t,
        );
      }
      get outletDependencies() {
        let t = new jr();
        return (
          this.router.modules.forEach((n) => {
            let s = n.definition.controllerConstructor;
            Sn(s, "outlets").forEach((h) => t.add(h, n.identifier));
          }),
          t
        );
      }
      get outletDefinitions() {
        return this.outletDependencies.getKeysForValue(this.identifier);
      }
      get dependentControllerIdentifiers() {
        return this.outletDependencies.getValuesForKey(this.identifier);
      }
      get dependentContexts() {
        let t = this.dependentControllerIdentifiers;
        return this.router.contexts.filter((n) => t.includes(n.identifier));
      }
      hasOutlet(t, n) {
        return !!this.getOutlet(t, n) || !!this.getOutletFromMap(t, n);
      }
      getOutlet(t, n) {
        return this.application.getControllerForElementAndIdentifier(t, n);
      }
      getOutletFromMap(t, n) {
        return this.outletsByName
          .getValuesForKey(n)
          .find((s) => s.element === t);
      }
      get scope() {
        return this.context.scope;
      }
      get schema() {
        return this.context.schema;
      }
      get identifier() {
        return this.context.identifier;
      }
      get application() {
        return this.context.application;
      }
      get router() {
        return this.application.router;
      }
    },
    wl = class {
      constructor(t, n) {
        (this.logDebugActivity = (s, l = {}) => {
          let { identifier: h, controller: w, element: L } = this;
          (l = Object.assign({ identifier: h, controller: w, element: L }, l)),
            this.application.logDebugActivity(this.identifier, s, l);
        }),
          (this.module = t),
          (this.scope = n),
          (this.controller = new t.controllerConstructor(this)),
          (this.bindingObserver = new pl(this, this.dispatcher)),
          (this.valueObserver = new bl(this, this.controller)),
          (this.targetObserver = new vl(this, this)),
          (this.outletObserver = new yl(this, this));
        try {
          this.controller.initialize(), this.logDebugActivity("initialize");
        } catch (s) {
          this.handleError(s, "initializing controller");
        }
      }
      connect() {
        this.bindingObserver.start(),
          this.valueObserver.start(),
          this.targetObserver.start(),
          this.outletObserver.start();
        try {
          this.controller.connect(), this.logDebugActivity("connect");
        } catch (t) {
          this.handleError(t, "connecting controller");
        }
      }
      refresh() {
        this.outletObserver.refresh();
      }
      disconnect() {
        try {
          this.controller.disconnect(), this.logDebugActivity("disconnect");
        } catch (t) {
          this.handleError(t, "disconnecting controller");
        }
        this.outletObserver.stop(),
          this.targetObserver.stop(),
          this.valueObserver.stop(),
          this.bindingObserver.stop();
      }
      get application() {
        return this.module.application;
      }
      get identifier() {
        return this.module.identifier;
      }
      get schema() {
        return this.application.schema;
      }
      get dispatcher() {
        return this.application.dispatcher;
      }
      get element() {
        return this.scope.element;
      }
      get parentElement() {
        return this.element.parentElement;
      }
      handleError(t, n, s = {}) {
        let { identifier: l, controller: h, element: w } = this;
        (s = Object.assign({ identifier: l, controller: h, element: w }, s)),
          this.application.handleError(t, `Error ${n}`, s);
      }
      targetConnected(t, n) {
        this.invokeControllerMethod(`${n}TargetConnected`, t);
      }
      targetDisconnected(t, n) {
        this.invokeControllerMethod(`${n}TargetDisconnected`, t);
      }
      outletConnected(t, n, s) {
        this.invokeControllerMethod(`${ul(s)}OutletConnected`, t, n);
      }
      outletDisconnected(t, n, s) {
        this.invokeControllerMethod(`${ul(s)}OutletDisconnected`, t, n);
      }
      invokeControllerMethod(t, ...n) {
        let s = this.controller;
        typeof s[t] == "function" && s[t](...n);
      }
    };
  function sg(r) {
    return og(r, ag(r));
  }
  function og(r, t) {
    let n = hg(r),
      s = lg(r.prototype, t);
    return Object.defineProperties(n.prototype, s), n;
  }
  function ag(r) {
    return Sn(r, "blessings").reduce((n, s) => {
      let l = s(r);
      for (let h in l) {
        let w = n[h] || {};
        n[h] = Object.assign(w, l[h]);
      }
      return n;
    }, {});
  }
  function lg(r, t) {
    return ug(t).reduce((n, s) => {
      let l = cg(r, t, s);
      return l && Object.assign(n, { [s]: l }), n;
    }, {});
  }
  function cg(r, t, n) {
    let s = Object.getOwnPropertyDescriptor(r, n);
    if (!(s && "value" in s)) {
      let h = Object.getOwnPropertyDescriptor(t, n).value;
      return s && ((h.get = s.get || h.get), (h.set = s.set || h.set)), h;
    }
  }
  var ug = (() =>
      typeof Object.getOwnPropertySymbols == "function"
        ? (r) => [
            ...Object.getOwnPropertyNames(r),
            ...Object.getOwnPropertySymbols(r),
          ]
        : Object.getOwnPropertyNames)(),
    hg = (() => {
      function r(n) {
        function s() {
          return Reflect.construct(n, arguments, new.target);
        }
        return (
          (s.prototype = Object.create(n.prototype, {
            constructor: { value: s },
          })),
          Reflect.setPrototypeOf(s, n),
          s
        );
      }
      function t() {
        let s = r(function () {
          this.a.call(this);
        });
        return (s.prototype.a = function () {}), new s();
      }
      try {
        return t(), r;
      } catch (n) {
        return (s) => class extends s {};
      }
    })();
  function dg(r) {
    return {
      identifier: r.identifier,
      controllerConstructor: sg(r.controllerConstructor),
    };
  }
  var El = class {
      constructor(t, n) {
        (this.application = t),
          (this.definition = dg(n)),
          (this.contextsByScope = new WeakMap()),
          (this.connectedContexts = new Set());
      }
      get identifier() {
        return this.definition.identifier;
      }
      get controllerConstructor() {
        return this.definition.controllerConstructor;
      }
      get contexts() {
        return Array.from(this.connectedContexts);
      }
      connectContextForScope(t) {
        let n = this.fetchContextForScope(t);
        this.connectedContexts.add(n), n.connect();
      }
      disconnectContextForScope(t) {
        let n = this.contextsByScope.get(t);
        n && (this.connectedContexts.delete(n), n.disconnect());
      }
      fetchContextForScope(t) {
        let n = this.contextsByScope.get(t);
        return n || ((n = new wl(this, t)), this.contextsByScope.set(t, n)), n;
      }
    },
    Al = class {
      constructor(t) {
        this.scope = t;
      }
      has(t) {
        return this.data.has(this.getDataKey(t));
      }
      get(t) {
        return this.getAll(t)[0];
      }
      getAll(t) {
        let n = this.data.get(this.getDataKey(t)) || "";
        return Xm(n);
      }
      getAttributeName(t) {
        return this.data.getAttributeNameForKey(this.getDataKey(t));
      }
      getDataKey(t) {
        return `${t}-class`;
      }
      get data() {
        return this.scope.data;
      }
    },
    xl = class {
      constructor(t) {
        this.scope = t;
      }
      get element() {
        return this.scope.element;
      }
      get identifier() {
        return this.scope.identifier;
      }
      get(t) {
        let n = this.getAttributeNameForKey(t);
        return this.element.getAttribute(n);
      }
      set(t, n) {
        let s = this.getAttributeNameForKey(t);
        return this.element.setAttribute(s, n), this.get(t);
      }
      has(t) {
        let n = this.getAttributeNameForKey(t);
        return this.element.hasAttribute(n);
      }
      delete(t) {
        if (this.has(t)) {
          let n = this.getAttributeNameForKey(t);
          return this.element.removeAttribute(n), !0;
        } else return !1;
      }
      getAttributeNameForKey(t) {
        return `data-${this.identifier}-${Ou(t)}`;
      }
    },
    Tl = class {
      constructor(t) {
        (this.warnedKeysByObject = new WeakMap()), (this.logger = t);
      }
      warn(t, n, s) {
        let l = this.warnedKeysByObject.get(t);
        l || ((l = new Set()), this.warnedKeysByObject.set(t, l)),
          l.has(n) || (l.add(n), this.logger.warn(s, t));
      }
    };
  function Sl(r, t) {
    return `[${r}~="${t}"]`;
  }
  var Cl = class {
      constructor(t) {
        this.scope = t;
      }
      get element() {
        return this.scope.element;
      }
      get identifier() {
        return this.scope.identifier;
      }
      get schema() {
        return this.scope.schema;
      }
      has(t) {
        return this.find(t) != null;
      }
      find(...t) {
        return t.reduce(
          (n, s) => n || this.findTarget(s) || this.findLegacyTarget(s),
          void 0,
        );
      }
      findAll(...t) {
        return t.reduce(
          (n, s) => [
            ...n,
            ...this.findAllTargets(s),
            ...this.findAllLegacyTargets(s),
          ],
          [],
        );
      }
      findTarget(t) {
        let n = this.getSelectorForTargetName(t);
        return this.scope.findElement(n);
      }
      findAllTargets(t) {
        let n = this.getSelectorForTargetName(t);
        return this.scope.findAllElements(n);
      }
      getSelectorForTargetName(t) {
        let n = this.schema.targetAttributeForScope(this.identifier);
        return Sl(n, t);
      }
      findLegacyTarget(t) {
        let n = this.getLegacySelectorForTargetName(t);
        return this.deprecate(this.scope.findElement(n), t);
      }
      findAllLegacyTargets(t) {
        let n = this.getLegacySelectorForTargetName(t);
        return this.scope.findAllElements(n).map((s) => this.deprecate(s, t));
      }
      getLegacySelectorForTargetName(t) {
        let n = `${this.identifier}.${t}`;
        return Sl(this.schema.targetAttribute, n);
      }
      deprecate(t, n) {
        if (t) {
          let { identifier: s } = this,
            l = this.schema.targetAttribute,
            h = this.schema.targetAttributeForScope(s);
          this.guide.warn(
            t,
            `target:${n}`,
            `Please replace ${l}="${s}.${n}" with ${h}="${n}". The ${l} attribute is deprecated and will be removed in a future version of Stimulus.`,
          );
        }
        return t;
      }
      get guide() {
        return this.scope.guide;
      }
    },
    kl = class {
      constructor(t, n) {
        (this.scope = t), (this.controllerElement = n);
      }
      get element() {
        return this.scope.element;
      }
      get identifier() {
        return this.scope.identifier;
      }
      get schema() {
        return this.scope.schema;
      }
      has(t) {
        return this.find(t) != null;
      }
      find(...t) {
        return t.reduce((n, s) => n || this.findOutlet(s), void 0);
      }
      findAll(...t) {
        return t.reduce((n, s) => [...n, ...this.findAllOutlets(s)], []);
      }
      getSelectorForOutletName(t) {
        let n = this.schema.outletAttributeForScope(this.identifier, t);
        return this.controllerElement.getAttribute(n);
      }
      findOutlet(t) {
        let n = this.getSelectorForOutletName(t);
        if (n) return this.findElement(n, t);
      }
      findAllOutlets(t) {
        let n = this.getSelectorForOutletName(t);
        return n ? this.findAllElements(n, t) : [];
      }
      findElement(t, n) {
        return this.scope
          .queryElements(t)
          .filter((l) => this.matchesElement(l, t, n))[0];
      }
      findAllElements(t, n) {
        return this.scope
          .queryElements(t)
          .filter((l) => this.matchesElement(l, t, n));
      }
      matchesElement(t, n, s) {
        let l = t.getAttribute(this.scope.schema.controllerAttribute) || "";
        return t.matches(n) && l.split(" ").includes(s);
      }
    },
    An = class {
      constructor(t, n, s, l) {
        (this.targets = new Cl(this)),
          (this.classes = new Al(this)),
          (this.data = new xl(this)),
          (this.containsElement = (h) =>
            h.closest(this.controllerSelector) === this.element),
          (this.schema = t),
          (this.element = n),
          (this.identifier = s),
          (this.guide = new Tl(l)),
          (this.outlets = new kl(this.documentScope, n));
      }
      findElement(t) {
        return this.element.matches(t)
          ? this.element
          : this.queryElements(t).find(this.containsElement);
      }
      findAllElements(t) {
        return [
          ...(this.element.matches(t) ? [this.element] : []),
          ...this.queryElements(t).filter(this.containsElement),
        ];
      }
      queryElements(t) {
        return Array.from(this.element.querySelectorAll(t));
      }
      get controllerSelector() {
        return Sl(this.schema.controllerAttribute, this.identifier);
      }
      get isDocumentScope() {
        return this.element === document.documentElement;
      }
      get documentScope() {
        return this.isDocumentScope
          ? this
          : new An(
              this.schema,
              document.documentElement,
              this.identifier,
              this.guide.logger,
            );
      }
    },
    Ll = class {
      constructor(t, n, s) {
        (this.element = t),
          (this.schema = n),
          (this.delegate = s),
          (this.valueListObserver = new Eo(
            this.element,
            this.controllerAttribute,
            this,
          )),
          (this.scopesByIdentifierByElement = new WeakMap()),
          (this.scopeReferenceCounts = new WeakMap());
      }
      start() {
        this.valueListObserver.start();
      }
      stop() {
        this.valueListObserver.stop();
      }
      get controllerAttribute() {
        return this.schema.controllerAttribute;
      }
      parseValueForToken(t) {
        let { element: n, content: s } = t;
        return this.parseValueForElementAndIdentifier(n, s);
      }
      parseValueForElementAndIdentifier(t, n) {
        let s = this.fetchScopesByIdentifierForElement(t),
          l = s.get(n);
        return (
          l ||
            ((l = this.delegate.createScopeForElementAndIdentifier(t, n)),
            s.set(n, l)),
          l
        );
      }
      elementMatchedValue(t, n) {
        let s = (this.scopeReferenceCounts.get(n) || 0) + 1;
        this.scopeReferenceCounts.set(n, s),
          s == 1 && this.delegate.scopeConnected(n);
      }
      elementUnmatchedValue(t, n) {
        let s = this.scopeReferenceCounts.get(n);
        s &&
          (this.scopeReferenceCounts.set(n, s - 1),
          s == 1 && this.delegate.scopeDisconnected(n));
      }
      fetchScopesByIdentifierForElement(t) {
        let n = this.scopesByIdentifierByElement.get(t);
        return (
          n || ((n = new Map()), this.scopesByIdentifierByElement.set(t, n)), n
        );
      }
    },
    Rl = class {
      constructor(t) {
        (this.application = t),
          (this.scopeObserver = new Ll(this.element, this.schema, this)),
          (this.scopesByIdentifier = new jr()),
          (this.modulesByIdentifier = new Map());
      }
      get element() {
        return this.application.element;
      }
      get schema() {
        return this.application.schema;
      }
      get logger() {
        return this.application.logger;
      }
      get controllerAttribute() {
        return this.schema.controllerAttribute;
      }
      get modules() {
        return Array.from(this.modulesByIdentifier.values());
      }
      get contexts() {
        return this.modules.reduce((t, n) => t.concat(n.contexts), []);
      }
      start() {
        this.scopeObserver.start();
      }
      stop() {
        this.scopeObserver.stop();
      }
      loadDefinition(t) {
        this.unloadIdentifier(t.identifier);
        let n = new El(this.application, t);
        this.connectModule(n);
        let s = t.controllerConstructor.afterLoad;
        s && s.call(t.controllerConstructor, t.identifier, this.application);
      }
      unloadIdentifier(t) {
        let n = this.modulesByIdentifier.get(t);
        n && this.disconnectModule(n);
      }
      getContextForElementAndIdentifier(t, n) {
        let s = this.modulesByIdentifier.get(n);
        if (s) return s.contexts.find((l) => l.element == t);
      }
      proposeToConnectScopeForElementAndIdentifier(t, n) {
        let s = this.scopeObserver.parseValueForElementAndIdentifier(t, n);
        s
          ? this.scopeObserver.elementMatchedValue(s.element, s)
          : console.error(
              `Couldn't find or create scope for identifier: "${n}" and element:`,
              t,
            );
      }
      handleError(t, n, s) {
        this.application.handleError(t, n, s);
      }
      createScopeForElementAndIdentifier(t, n) {
        return new An(this.schema, t, n, this.logger);
      }
      scopeConnected(t) {
        this.scopesByIdentifier.add(t.identifier, t);
        let n = this.modulesByIdentifier.get(t.identifier);
        n && n.connectContextForScope(t);
      }
      scopeDisconnected(t) {
        this.scopesByIdentifier.delete(t.identifier, t);
        let n = this.modulesByIdentifier.get(t.identifier);
        n && n.disconnectContextForScope(t);
      }
      connectModule(t) {
        this.modulesByIdentifier.set(t.identifier, t),
          this.scopesByIdentifier
            .getValuesForKey(t.identifier)
            .forEach((s) => t.connectContextForScope(s));
      }
      disconnectModule(t) {
        this.modulesByIdentifier.delete(t.identifier),
          this.scopesByIdentifier
            .getValuesForKey(t.identifier)
            .forEach((s) => t.disconnectContextForScope(s));
      }
    },
    fg = {
      controllerAttribute: "data-controller",
      actionAttribute: "data-action",
      targetAttribute: "data-target",
      targetAttributeForScope: (r) => `data-${r}-target`,
      outletAttributeForScope: (r, t) => `data-${r}-${t}-outlet`,
      keyMappings: Object.assign(
        Object.assign(
          {
            enter: "Enter",
            tab: "Tab",
            esc: "Escape",
            space: " ",
            up: "ArrowUp",
            down: "ArrowDown",
            left: "ArrowLeft",
            right: "ArrowRight",
            home: "Home",
            end: "End",
            page_up: "PageUp",
            page_down: "PageDown",
          },
          ku("abcdefghijklmnopqrstuvwxyz".split("").map((r) => [r, r])),
        ),
        ku("0123456789".split("").map((r) => [r, r])),
      ),
    };
  function ku(r) {
    return r.reduce(
      (t, [n, s]) => Object.assign(Object.assign({}, t), { [n]: s }),
      {},
    );
  }
  var Ao = class {
    constructor(t = document.documentElement, n = fg) {
      (this.logger = console),
        (this.debug = !1),
        (this.logDebugActivity = (s, l, h = {}) => {
          this.debug && this.logFormattedMessage(s, l, h);
        }),
        (this.element = t),
        (this.schema = n),
        (this.dispatcher = new cl(this)),
        (this.router = new Rl(this)),
        (this.actionDescriptorFilters = Object.assign({}, zm));
    }
    static start(t, n) {
      let s = new this(t, n);
      return s.start(), s;
    }
    start() {
      return Ot(this, null, function* () {
        yield mg(),
          this.logDebugActivity("application", "starting"),
          this.dispatcher.start(),
          this.router.start(),
          this.logDebugActivity("application", "start");
      });
    }
    stop() {
      this.logDebugActivity("application", "stopping"),
        this.dispatcher.stop(),
        this.router.stop(),
        this.logDebugActivity("application", "stop");
    }
    register(t, n) {
      this.load({ identifier: t, controllerConstructor: n });
    }
    registerActionOption(t, n) {
      this.actionDescriptorFilters[t] = n;
    }
    load(t, ...n) {
      (Array.isArray(t) ? t : [t, ...n]).forEach((l) => {
        l.controllerConstructor.shouldLoad && this.router.loadDefinition(l);
      });
    }
    unload(t, ...n) {
      (Array.isArray(t) ? t : [t, ...n]).forEach((l) =>
        this.router.unloadIdentifier(l),
      );
    }
    get controllers() {
      return this.router.contexts.map((t) => t.controller);
    }
    getControllerForElementAndIdentifier(t, n) {
      let s = this.router.getContextForElementAndIdentifier(t, n);
      return s ? s.controller : null;
    }
    handleError(t, n, s) {
      var l;
      this.logger.error(
        `%s

%o

%o`,
        n,
        t,
        s,
      ),
        (l = window.onerror) === null ||
          l === void 0 ||
          l.call(window, n, "", 0, 0, t);
    }
    logFormattedMessage(t, n, s = {}) {
      (s = Object.assign({ application: this }, s)),
        this.logger.groupCollapsed(`${t} #${n}`),
        this.logger.log("details:", Object.assign({}, s)),
        this.logger.groupEnd();
    }
  };
  function mg() {
    return new Promise((r) => {
      document.readyState == "loading"
        ? document.addEventListener("DOMContentLoaded", () => r())
        : r();
    });
  }
  function gg(r) {
    return Sn(r, "classes").reduce((n, s) => Object.assign(n, pg(s)), {});
  }
  function pg(r) {
    return {
      [`${r}Class`]: {
        get() {
          let { classes: t } = this;
          if (t.has(r)) return t.get(r);
          {
            let n = t.getAttributeName(r);
            throw new Error(`Missing attribute "${n}"`);
          }
        },
      },
      [`${r}Classes`]: {
        get() {
          return this.classes.getAll(r);
        },
      },
      [`has${Tn(r)}Class`]: {
        get() {
          return this.classes.has(r);
        },
      },
    };
  }
  function bg(r) {
    return Sn(r, "outlets").reduce((n, s) => Object.assign(n, vg(s)), {});
  }
  function Lu(r, t, n) {
    return r.application.getControllerForElementAndIdentifier(t, n);
  }
  function Ru(r, t, n) {
    let s = Lu(r, t, n);
    if (
      s ||
      (r.application.router.proposeToConnectScopeForElementAndIdentifier(t, n),
      (s = Lu(r, t, n)),
      s)
    )
      return s;
  }
  function vg(r) {
    let t = ul(r);
    return {
      [`${t}Outlet`]: {
        get() {
          let n = this.outlets.find(r),
            s = this.outlets.getSelectorForOutletName(r);
          if (n) {
            let l = Ru(this, n, r);
            if (l) return l;
            throw new Error(
              `The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,
            );
          }
          throw new Error(
            `Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`,
          );
        },
      },
      [`${t}Outlets`]: {
        get() {
          let n = this.outlets.findAll(r);
          return n.length > 0
            ? n
                .map((s) => {
                  let l = Ru(this, s, r);
                  if (l) return l;
                  console.warn(
                    `The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,
                    s,
                  );
                })
                .filter((s) => s)
            : [];
        },
      },
      [`${t}OutletElement`]: {
        get() {
          let n = this.outlets.find(r),
            s = this.outlets.getSelectorForOutletName(r);
          if (n) return n;
          throw new Error(
            `Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`,
          );
        },
      },
      [`${t}OutletElements`]: {
        get() {
          return this.outlets.findAll(r);
        },
      },
      [`has${Tn(t)}Outlet`]: {
        get() {
          return this.outlets.has(r);
        },
      },
    };
  }
  function yg(r) {
    return Sn(r, "targets").reduce((n, s) => Object.assign(n, wg(s)), {});
  }
  function wg(r) {
    return {
      [`${r}Target`]: {
        get() {
          let t = this.targets.find(r);
          if (t) return t;
          throw new Error(
            `Missing target element "${r}" for "${this.identifier}" controller`,
          );
        },
      },
      [`${r}Targets`]: {
        get() {
          return this.targets.findAll(r);
        },
      },
      [`has${Tn(r)}Target`]: {
        get() {
          return this.targets.has(r);
        },
      },
    };
  }
  function Eg(r) {
    let t = rg(r, "values"),
      n = {
        valueDescriptorMap: {
          get() {
            return t.reduce((s, l) => {
              let h = Iu(l, this.identifier),
                w = this.data.getAttributeNameForKey(h.key);
              return Object.assign(s, { [w]: h });
            }, {});
          },
        },
      };
    return t.reduce((s, l) => Object.assign(s, Ag(l)), n);
  }
  function Ag(r, t) {
    let n = Iu(r, t),
      { key: s, name: l, reader: h, writer: w } = n;
    return {
      [l]: {
        get() {
          let L = this.data.get(s);
          return L !== null ? h(L) : n.defaultValue;
        },
        set(L) {
          L === void 0 ? this.data.delete(s) : this.data.set(s, w(L));
        },
      },
      [`has${Tn(l)}`]: {
        get() {
          return this.data.has(s) || n.hasCustomDefaultValue;
        },
      },
    };
  }
  function Iu([r, t], n) {
    return Cg({ controller: n, token: r, typeDefinition: t });
  }
  function xo(r) {
    switch (r) {
      case Array:
        return "array";
      case Boolean:
        return "boolean";
      case Number:
        return "number";
      case Object:
        return "object";
      case String:
        return "string";
    }
  }
  function xn(r) {
    switch (typeof r) {
      case "boolean":
        return "boolean";
      case "number":
        return "number";
      case "string":
        return "string";
    }
    if (Array.isArray(r)) return "array";
    if (Object.prototype.toString.call(r) === "[object Object]")
      return "object";
  }
  function xg(r) {
    let { controller: t, token: n, typeObject: s } = r,
      l = Tu(s.type),
      h = Tu(s.default),
      w = l && h,
      L = l && !h,
      I = !l && h,
      B = xo(s.type),
      Z = xn(r.typeObject.default);
    if (L) return B;
    if (I) return Z;
    if (B !== Z) {
      let Tt = t ? `${t}.${n}` : n;
      throw new Error(
        `The specified default value for the Stimulus Value "${Tt}" must match the defined type "${B}". The provided default value of "${s.default}" is of type "${Z}".`,
      );
    }
    if (w) return B;
  }
  function Tg(r) {
    let { controller: t, token: n, typeDefinition: s } = r,
      h = xg({ controller: t, token: n, typeObject: s }),
      w = xn(s),
      L = xo(s),
      I = h || w || L;
    if (I) return I;
    let B = t ? `${t}.${s}` : n;
    throw new Error(`Unknown value type "${B}" for "${n}" value`);
  }
  function Sg(r) {
    let t = xo(r);
    if (t) return _u[t];
    let n = hl(r, "default"),
      s = hl(r, "type"),
      l = r;
    if (n) return l.default;
    if (s) {
      let { type: h } = l,
        w = xo(h);
      if (w) return _u[w];
    }
    return r;
  }
  function Cg(r) {
    let { token: t, typeDefinition: n } = r,
      s = `${Ou(t)}-value`,
      l = Tg(r);
    return {
      type: l,
      key: s,
      name: _l(s),
      get defaultValue() {
        return Sg(n);
      },
      get hasCustomDefaultValue() {
        return xn(n) !== void 0;
      },
      reader: kg[l],
      writer: Du[l] || Du.default,
    };
  }
  var _u = {
      get array() {
        return [];
      },
      boolean: !1,
      number: 0,
      get object() {
        return {};
      },
      string: "",
    },
    kg = {
      array(r) {
        let t = JSON.parse(r);
        if (!Array.isArray(t))
          throw new TypeError(
            `expected value of type "array" but instead got value "${r}" of type "${xn(
              t,
            )}"`,
          );
        return t;
      },
      boolean(r) {
        return !(r == "0" || String(r).toLowerCase() == "false");
      },
      number(r) {
        return Number(r.replace(/_/g, ""));
      },
      object(r) {
        let t = JSON.parse(r);
        if (t === null || typeof t != "object" || Array.isArray(t))
          throw new TypeError(
            `expected value of type "object" but instead got value "${r}" of type "${xn(
              t,
            )}"`,
          );
        return t;
      },
      string(r) {
        return r;
      },
    },
    Du = { default: Lg, array: Pu, object: Pu };
  function Pu(r) {
    return JSON.stringify(r);
  }
  function Lg(r) {
    return `${r}`;
  }
  var N = class {
    constructor(t) {
      this.context = t;
    }
    static get shouldLoad() {
      return !0;
    }
    static afterLoad(t, n) {}
    get application() {
      return this.context.application;
    }
    get scope() {
      return this.context.scope;
    }
    get element() {
      return this.scope.element;
    }
    get identifier() {
      return this.scope.identifier;
    }
    get targets() {
      return this.scope.targets;
    }
    get outlets() {
      return this.scope.outlets;
    }
    get classes() {
      return this.scope.classes;
    }
    get data() {
      return this.scope.data;
    }
    initialize() {}
    connect() {}
    disconnect() {}
    dispatch(
      t,
      {
        target: n = this.element,
        detail: s = {},
        prefix: l = this.identifier,
        bubbles: h = !0,
        cancelable: w = !0,
      } = {},
    ) {
      let L = l ? `${l}:${t}` : t,
        I = new CustomEvent(L, { detail: s, bubbles: h, cancelable: w });
      return n.dispatchEvent(I), I;
    }
  };
  N.blessings = [gg, yg, Eg, bg];
  N.targets = [];
  N.outlets = [];
  N.values = {};
  var yt = Ao.start();
  yt.debug = !1;
  window.Stimulus = yt;
  var Bu = Qt(Oe());
  var Cn = class extends N {
    connect() {
      this.latTarget.value ? this.showPlaces() : this.showManual();
    }
    showPlaces() {
      this.manualTarget.classList.add("hidden"),
        this.placesTarget.classList.remove("hidden"),
        Bu.default.fire(this.placesTarget, "show");
    }
    showManual() {
      this.manualTarget.classList.remove("hidden"),
        this.placesTarget.classList.add("hidden"),
        (this.addressTarget.value = ""),
        (this.latTarget.value = ""),
        (this.lngTarget.value = "");
    }
  };
  W(Cn, "targets", ["manual", "places", "address", "lat", "lng"]);
  var Nu = Qt(Ca()),
    Ui = class {
      constructor(r) {
        (this.input = r),
          (this.submit = r.form.querySelector(".btn-submit")),
          (this.progress = this.submit.querySelector(".btn-submit-progress")),
          (this.loader = this.submit.querySelector(".btn-submit-loader"));
      }
      upload() {
        return new Promise((r, t) => {
          let n = this.input.files[0],
            s = this.input.dataset.directUploadUrl;
          if (!n) {
            r("Nothing to upload");
            return;
          }
          this.submit.classList.add("btn-submit-uploading"),
            this.directUpload(this.submit, this.input, n, s, r, t, this);
        })
          .catch(() => {})
          .then(() => {
            this.input.form.elements.forEach((r) => {
              r.disabled = !1;
            });
          });
      }
      directUpload(r, t, n, s, l, h, w) {
        new Nu.DirectUpload(n, s, w).create((L, I) => {
          if (L) r.classList.remove("btn-submit-uploading"), h(L);
          else {
            let B = document.createElement("input");
            B.setAttribute("type", "hidden"),
              B.setAttribute("value", I.signed_id),
              (B.name = t.name),
              t.form.appendChild(B),
              l("Upload done");
          }
        });
      }
      directUploadWillStoreFileWithXHR(r) {
        r.upload.addEventListener("progress", (t) =>
          this.directUploadDidProgress(t),
        );
      }
      directUploadDidProgress(r) {
        this.progress.style.width = `${(r.loaded / r.total) * 100}%`;
      }
    };
  var To = class extends N {
    connect() {
      (this.customActivations = {}), this.bindCustomActivations();
    }
    get(r) {
      this.handleAjaxRequest(r, "GET");
    }
    post(r) {
      this.handleAjaxRequest(r, "POST");
    }
    patch(r) {
      this.handleAjaxRequest(r, "PATCH");
    }
    delete(r) {
      this.handleAjaxRequest(r, "DELETE");
    }
    download(r) {
      let t = document.createElement("a"),
        { url: n, filename: s } = r.currentTarget.dataset;
      (t.href = n),
        (t.download = s),
        document.body.append(t),
        t.click(),
        t.remove(),
        window.URL.revokeObjectURL(n);
    }
    handleAjaxRequest(r, t) {
      return Ot(this, null, function* () {
        r.type === "submit" && r.preventDefault();
        let n = r.currentTarget,
          { activationId: s } = n.dataset;
        s
          ? this.customActivations[s]()
          : (yield this.handleDirectUpload(n), this.issueAjaxRequest(n, t));
      });
    }
    handleRedirect(r, t, n) {
      let s = t === "self" ? window.location : t,
        l = n === "GET" ? "advance" : "replace";
      t !== "false"
        ? (Turbo.cache.clear(), Turbo.visit(s, { action: l }))
        : this.enableElement(r);
    }
    handleDirectUpload(r) {
      let t = r.querySelector("input[type=file]");
      if (!!t) return new Ui(t).upload();
    }
    issueAjaxRequest(r, t) {
      if (
        ((t = t.toUpperCase()),
        this.fire(r, "ajax:before"),
        r.dataset.valid === "false")
      )
        return;
      let n = this.prepareHeaders(t),
        s = this.preparePayload(r, t),
        l = this.preparePath(r, t, s),
        h = this.prepareResponseType(r),
        w = new XMLHttpRequest();
      w.open(t, l, !0),
        w.overrideMimeType("text/html"),
        (w.responseType = h),
        Object.keys(n).forEach((L) => {
          w.setRequestHeader(L, n[L]);
        }),
        (w.onload = () => {
          let L = w.status,
            I = h === "document" ? w.response : w.responseText,
            B = r.dataset.redirect || w.getResponseHeader("X-Xhr-Redirect");
          L === 200 && B
            ? this.handleRedirect(r, B, t)
            : L === 204
            ? (this.enableElement(r), this.delayedFire(r, "ajax:success"))
            : L >= 200 && L < 300
            ? (this.enableElement(r),
              this.insert(r, I),
              this.delayedFire(r, "ajax:success"))
            : L === 406
            ? (this.enableElement(r),
              this.insert(r, I),
              this.delayedFire(r, "ajax:invalid"))
            : (this.enableElement(r), this.delayedFire(r, "ajax:error")),
            this.delayedFire(r, "ajax:done"),
            this.delayedFire(document.body, "ajax:done");
        }),
        this.disableElement(r),
        w.send(t === "GET" ? null : this.encodePayload(s));
    }
    preparePayload(r, t) {
      let n = {},
        s = [];
      return (
        t !== "GET"
          ? this.addElementToPayload(s, n, r.closest("form"))
          : this.addParamsToPayload(s, n, r),
        this.addElementToPayload(s, n, r),
        this.addVarsToPayload(n, r),
        this.filterPayload(n, r)
      );
    }
    addParamsToPayload(r, t, n) {
      let s = this.extractConfig(n, "params");
      s.params &&
        s.params !== "none" &&
        (s.element.querySelectorAll("input").forEach((l) => {
          this.addElementToPayload(r, t, l);
        }),
        s.element.querySelectorAll("select").forEach((l) => {
          this.addElementToPayload(r, t, l);
        }));
    }
    addElementToPayload(r, t, n) {
      if (!(n == null || this.alreadyAddedToPayload(r, n))) {
        if ((r.push(n), this.shouldAddToPayload(n))) {
          let s = n.name,
            l = n.value;
          if (l != null) {
            let h = t[s];
            h ? (Array.isArray(h) ? h.push(l) : (t[s] = [h, l])) : (t[s] = l);
          }
        }
        if (n.matches("form")) {
          let s = n.elements;
          for (let l = 0; l < s.length; l++)
            this.addElementToPayload(r, t, s[l]);
        }
      }
    }
    addVarsToPayload(r, t) {
      let { vars: n } = this.extractConfig(t, "vars");
      !n ||
        n.split(",").forEach((s) => {
          let l = s.trim().split("=");
          l[0].indexOf("[]") > 0
            ? Array.isArray(r[l[0]])
              ? r[l[0]].push(l[1])
              : (r[l[0]] = [l[1]])
            : (r[l[0]] = l[1]);
        });
    }
    shouldAddToPayload(r) {
      return r.name === "" ||
        r.name == null ||
        r.disabled ||
        r.type === "button" ||
        r.type === "submit" ||
        r.tagName === "image" ||
        r.tagName === "reset" ||
        r.tagName === "file"
        ? !1
        : r.type === "checkbox" || r.type === "radio"
        ? r.checked
        : r.type !== "file";
    }
    alreadyAddedToPayload(r, t) {
      return !!r.find((n) => t.isSameNode(n));
    }
    filterPayload(r, t) {
      let { params: n } = this.extractConfig(t, "params");
      if (n) {
        if (n === "none") return {};
        if (n === "all") return r;
        {
          let s = {};
          return (
            n.split(",").forEach((l) => {
              (l = l.trim()), (s[l] = r[l]);
            }),
            s
          );
        }
      } else return r;
    }
    encodePayload(r) {
      let t = "";
      for (let n in r)
        if (Object.prototype.hasOwnProperty.call(r, n)) {
          let s = r[n];
          Array.isArray(s)
            ? s.forEach((l) => {
                t = this.appendParamToUrl(t, n, l);
              })
            : (t = this.appendParamToUrl(t, n, s));
        }
      return t;
    }
    preparePath(r, t, n) {
      let s =
        this.extractConfig(r, "url").value ||
        r.action ||
        document.location.href;
      if (t === "GET") {
        let l = s.split("#"),
          h = l[1];
        return (
          (s = l[0]),
          Object.keys(n).length !== 0 &&
            (s.indexOf("?") < 0 ? (s += "?") : (s += "&"),
            (s += this.encodePayload(n)),
            h && (s += "#" + h)),
          s
        );
      } else return s;
    }
    prepareHeaders(r) {
      let t = { "X-Requested-With": "XMLHttpRequest", Accept: "text/html" };
      if (r !== "GET") {
        t["Content-Type"] = "application/x-www-form-urlencoded";
        let n = document.querySelector('meta[name="csrf-token"]');
        n && (t["X-CSRF-Token"] = n.attributes.content.value);
      }
      return t;
    }
    prepareResponseType(r) {
      return this.extractConfig(r, "target").value === "page" ? "document" : "";
    }
    insert(r, t) {
      if (t === "" || !document.body.contains(r)) return;
      let n = this.parseResponse(r, t),
        s = this.chooseSwap(r),
        l = this.chooseTarget(r),
        { extract: h } = this.extractConfig(r, "extract");
      h
        ? this.insertExtract(l, h, n)
        : l === "auto"
        ? this.insertAuto(s, n)
        : l === "multiple"
        ? this.insertMultiple(s, n)
        : l === "content"
        ? this.insertContent(n)
        : this.insertSwap(l, s, n);
    }
    insertExtract(r, t, n) {
      t.split(",").forEach((s) => {
        let l = `[name='${s.trim()}']`,
          h = r.querySelector(l),
          w = n.querySelector(l);
        (h.value = w.value), this.fire(h, "input");
      }),
        this.bindCustomActivations(),
        this.delayedFire(r, "ajax:load");
    }
    insertAuto(r, t) {
      let n = document.createElement("html");
      n.innerHTML = t.trim();
      let s = n.querySelector("body"),
        l = document.querySelector(`#${s.firstElementChild.id}`);
      l[r] = t;
    }
    insertContent(r) {
      let t = document.createElement("html");
      t.innerHTML = r.trim();
      let n = t.querySelector("body"),
        s = document.querySelector(`#${n.firstElementChild.id}`);
      s.innerHTML = n.firstElementChild.innerHTML;
    }
    insertMultiple(r, t) {
      let n = document.createElement("html");
      (n.innerHTML = t.trim()),
        n.querySelector("body").children.forEach((l) => {
          let h = document.querySelector(`#${l.id}`);
          document.body.contains(h) &&
            ((h[r] = l[r]),
            this.bindCustomActivations(),
            this.delayedFire(h, "ajax:load"));
        });
    }
    insertSwap(r, t, n) {
      t === "innerHTML" || t === "outerHTML"
        ? (r[t] = n)
        : r.insertAdjacentHTML(t, n),
        this.bindCustomActivations(),
        this.delayedFire(r, "ajax:load");
    }
    disableElement(r) {
      this.toggleElement(r, !1);
    }
    enableElement(r) {
      this.toggleElement(r, !0);
    }
    toggleElement(r, t) {
      if (!(!r || r.dataset.disable === "false")) {
        if (r.tagName === "INPUT" && !t) r.blur();
        else if (r.tagName === "FORM") {
          let n = document.querySelector(`[form='${r.id}']`);
          this.toggleElement(n, t);
        }
        (r.disabled = !t), r.classList.toggle("disabled", !t);
      }
    }
    extractConfig(r, t) {
      let n = t.replace(/-([a-z])/g, (w) => w[1].toUpperCase()),
        s = t.replace(/([a-zA-Z])(?=[A-Z])/g, "$1-").toLowerCase(),
        l = r.dataset[n] ? r : r.closest(`[data-${s}]`);
      if (!l) return { element: r };
      let h = {};
      return (
        (h.element = l), (h.value = l.dataset[n]), (h[n] = l.dataset[n]), h
      );
    }
    parseResponse(r, t) {
      if (t instanceof HTMLDocument) return t.body.innerHTML;
      let { select: n } = this.extractConfig(r, "select");
      if (n) {
        let l = document.createElement("html");
        return (l.innerHTML = t.trim()), l.querySelector(n).outerHTML;
      }
      let { extract: s } = this.extractConfig(r, "extract");
      if (s) {
        let l = document.createElement("html");
        return (l.innerHTML = t.trim()), l;
      }
      return t;
    }
    bindCustomActivations() {
      document
        .querySelectorAll(
          '[data-action][data-activation*="delay"]:not([data-activation-id])',
        )
        .forEach(this.delay.bind(this)),
        document
          .querySelectorAll(
            '[data-action][data-activation*="pool"]:not([data-activation-id])',
          )
          .forEach(this.pool.bind(this));
    }
    debounce(r, t, n) {
      let s;
      return function () {
        let l = this,
          h = arguments,
          w = function () {
            (s = null), n || r.apply(l, h);
          },
          L = n && !s;
        clearTimeout(s), (s = setTimeout(w, t)), L && r.apply(l, h);
      };
    }
    delayedFire(r, t) {
      Promise.resolve().then(() => {
        this.fire(r, t);
      });
    }
    fire(r, t) {
      if (!document.body.contains(r)) return;
      let n = new CustomEvent(t, { bubbles: !0, cancelable: !0, detail: null });
      return r.dispatchEvent(n), !n.defaultPrevented;
    }
    randomId() {
      return (
        Math.random().toString(36).substring(2, 15) +
        Math.random().toString(36).substring(2, 15)
      );
    }
    appendParamToUrl(r, t, n) {
      return (
        r !== "" && (r += "&"),
        (r += encodeURIComponent(t) + "=" + encodeURIComponent(n)),
        r
      );
    }
    delay(r) {
      let t = Number(r.dataset.activation.split(" ")[1]),
        n = r.dataset.action.match(/ajax#([a-z]*)/)[1],
        s = this.randomId();
      r.setAttribute("data-activation-id", s),
        (this.customActivations[s] = this.debounce(() => {
          this.issueAjaxRequest(r, n);
        }, t)),
        this.delayedFire(r, "ajax:load");
    }
    pool(r) {
      let t = Number(r.dataset.activation.split(" ")[1]),
        n = r.dataset.action.split("#")[1],
        s = this.randomId();
      r.setAttribute("data-activation-id", s),
        (this.customActivations[s] = setInterval(() => {
          document.body.contains(r)
            ? this.issueAjaxRequest(r, n)
            : clearInterval(this.customActivations[s]);
        }, t));
    }
    chooseSwap(r) {
      let { target: t } = this.extractConfig(r, "target"),
        { swap: n } = this.extractConfig(r, "swap");
      return t === "page" || t === "content"
        ? "innerHTML"
        : t === "auto" || t === "multiple"
        ? n || "outerHTML"
        : n || "innerHTML";
    }
    chooseTarget(r) {
      let t = this.extractConfig(r, "target");
      return t.target === "auto" ||
        t.target === "multiple" ||
        t.target === "content"
        ? t.value
        : t.target.indexOf("closest") !== -1
        ? t.element.closest(t.target.split(" ")[1])
        : t.target === "parent"
        ? t.element.parentElement
        : t.target === "this"
        ? t.element
        : t.target === "page"
        ? document.body
        : document.querySelector(t.target);
    }
  };
  var So = class extends N {
    connect() {
      this.initWidgets(), this.initAjaxEventHandlers();
    }
    initWidgets() {
      this.element.dataset.controller = "application ajax util";
    }
    initAjaxEventHandlers() {
      document.body.addEventListener("ajax:send", (r) => {
        r.target.dataset.loader === "page" && this.showLoader();
      }),
        document.body.addEventListener("ajax:complete", () => {
          this.removeLoader();
        });
    }
    showLoader() {
      document.body.insertAdjacentHTML(
        "beforeend",
        '<div id="page-loader" data-target="pageLoader"><div class="loader loader--dots"><div class="duo duo--left"><div class="dot dot--left"></div><div class="dot dot--right"></div></div><div class="duo duo--right"><div class="dot dot--left"></div><div class="dot dot--right"></div></div></div></div>',
      );
    }
    removeLoader() {
      let r = document.getElementById("page-loader");
      r && r.remove();
    }
  };
  var kn = class extends N {
    disconnect() {
      this.observer && this.observer.disconnect(document.body);
    }
    init() {
      if (this.isInitialized) return;
      let r = setInterval(() => {
        typeof google == "object" &&
          (clearInterval(r),
          this.initMarkers(),
          this.initAutoComplete(),
          this.initMap(),
          this.initObserver(),
          (this.isInitialized = !0));
      });
    }
    initMarkers() {
      this.markers = [];
    }
    initObserver() {
      (this.observer = new MutationObserver((r, t) => {
        for (let n = 0; n < r.length; ++n)
          for (let s = 0; s < r[n].addedNodes.length; ++s)
            r[n].addedNodes[s].classList.contains("pac-container") &&
              this.pacTarget.appendChild(r[n].addedNodes[s]);
      })),
        this.observer.observe(document.body, { childList: !0 });
    }
    initAutoComplete() {
      (this.autocomplete = new google.maps.places.Autocomplete(
        this.addressTarget,
        { types: ["geocode", "establishment"] },
      )),
        this.autocomplete.setFields([
          "address_component",
          "name",
          "formatted_address",
          "geometry",
        ]),
        this.autocomplete.addListener("place_changed", () => {
          let r = this.autocomplete.getPlace();
          !r ||
            !r.formatted_address ||
            ((this.address = r.formatted_address),
            (this.latitude = r.geometry.location.lat()),
            (this.longitude = r.geometry.location.lng()),
            this.updateMap(),
            this.data.set("searched", !0));
        });
    }
    initMap() {
      (this.map = new google.maps.Map(this.mapTarget, {
        zoom: 3,
        center: { lat: -14.2, lng: -51.9 },
        mapTypeControl: !1,
        panControl: !1,
        zoomControl: !1,
        streetViewControl: !1,
      })),
        this.map.addListener("bounds_changed", () => {
          this.autocomplete.setBounds(this.map.getBounds());
        }),
        this.hasCoordinates() && this.updateMap();
    }
    geocode() {
      new google.maps.Geocoder().geocode(
        { address: this.addressTarget.value },
        (r, t) => {
          t === google.maps.GeocoderStatus.OK && !!r[0].geometry
            ? ((this.latitude = r[0].geometry.location.lat()),
              (this.longitude = r[0].geometry.location.lng()),
              this.updateMap())
            : this.geolocate();
        },
      );
    }
    geolocate() {
      navigator.geolocation &&
        navigator.geolocation.getCurrentPosition((r) => {
          (this.latitude = r.coords.latitude),
            (this.longitude = r.coords.longitude),
            this.updateMap();
        });
    }
    updateMap() {
      this.markers.forEach(function (r) {
        r.setMap(null);
      }),
        (this.markers = []),
        this.markers.push(
          new google.maps.Marker({ map: this.map, position: this.location }),
        ),
        this.map.setCenter(this.location),
        this.map.setZoom(15);
    }
    hasCoordinates() {
      return !!this.latitude && this.longitude;
    }
    get location() {
      return { lat: this.latitude, lng: this.longitude };
    }
    set name(r) {
      this.hasNameTarget && (this.nameTarget.value = r);
    }
    get latitude() {
      return parseFloat(this.latTarget.value);
    }
    set latitude(r) {
      this.latTarget.value = r;
    }
    get longitude() {
      return parseFloat(this.lngTarget.value);
    }
    set longitude(r) {
      this.lngTarget.value = r;
    }
    get address() {
      return this.addressTarget;
    }
    set address(r) {
      this.addressTarget.value = r;
    }
    set isInitialized(r) {
      this.data.set("isInitialized", r);
    }
  };
  W(kn, "targets", ["map", "address", "lat", "lng", "name", "pac"]);
  var Co = class extends N {
    openExternalApp(r) {
      let t = this.data.get("address");
      this.getMobileOperatingSystem() === "iOS"
        ? window.open("comgooglemaps://?daddr=" + t)
        : window.open("https://www.google.com/maps/search/?api=1&query=" + t);
    }
    getMobileOperatingSystem() {
      let r = navigator.userAgent || navigator.vendor || window.opera;
      return /windows phone/i.test(r)
        ? "Windows Phone"
        : /android/i.test(r)
        ? "Android"
        : /iPad|iPhone|iPod/.test(r) && !window.MSStream
        ? "iOS"
        : "unknown";
    }
  };
  var Ln = class extends N {
    close() {
      this.overlay(!1), this.noScroll(!1), this.controlCheckbox(!1);
    }
    toggle() {
      let r = this.status();
      this.overlay(r), this.noScroll(r);
    }
    overlay(r) {}
    noScroll(r) {
      document.body.classList.toggle("noscroll", r);
    }
    controlCheckbox(r) {
      this.controlCheckboxTarget.checked = r;
    }
    status() {
      return this.hasControlCheckboxTarget
        ? !this.controlCheckboxTarget.checked
        : null;
    }
  };
  W(Ln, "targets", ["controlCheckbox", "overlay"]);
  var Zt = { container: null, element: null, groupMode: !1 },
    Ut = {
      allFonts(r) {
        (r = r || 0),
          setTimeout(function () {
            document
              .querySelectorAll("[data-allow-font-resize]")
              .forEach(function (t) {
                t.querySelector(":not(br)")
                  ? Ut.font(t.lastElementChild)
                  : Ut.font(t);
              });
          }, r);
      },
      font(r) {
        (Zt.container = r.parentNode),
          (Zt.element = r),
          Ut.allowFontResize()
            ? Ut.child()
            : Ut.allowFontGroupResize() && Ut.children();
      },
      child() {
        (Zt.groupMode = !1),
          Ut.prepareForResize(),
          Ut.increaseFontSizeToMax(),
          Ut.reduceFontSizeToFit(),
          Ut.applyResizingToGroup();
      },
      children() {
        (Zt.groupMode = !0),
          (Zt.element = Zt.container.lastElementChild),
          Ut.prepareForResize(),
          Ut.increaseFontSizeToMax(),
          Ut.reduceFontSizeToFit();
      },
      applyResizingToGroup() {
        let r = Zt.element.dataset.resizerGroup;
        if (!r) return;
        let t = Array.prototype.slice.call(
            document.querySelectorAll(`[data-resizer-group="${r}"]`),
          ),
          n = Ut.getCurrentFontSize(),
          s = t
            .map(
              (l) => (
                (Zt.element = l),
                Ut.getCurrentFontSize() < n && Ut.increaseFontSizeToMax(),
                Ut.getCurrentFontSize()
              ),
            )
            .filter((l) => !isNaN(l));
        (n = Math.min(...s)),
          t.forEach((l) => {
            (Zt.element = l), Ut.setCurrentFontSize(n);
          });
      },
      reduceFontSizeToFit() {
        for (; Ut.isCurrentFontTooBig() && Ut.getCurrentFontSize() > 1; )
          Ut.setCurrentFontSize(Ut.getCurrentFontSize() - 1);
      },
      increaseFontSizeToMax() {
        for (
          ;
          !Ut.isCurrentFontTooBig() &&
          Ut.getCurrentFontSize() < Ut.getOriginalFontSize();

        )
          Ut.setCurrentFontSize(Ut.getCurrentFontSize() + 1);
      },
      isCurrentFontTooBig() {
        return (
          ((Zt.element.offsetTop < 0 || !Zt.groupMode
            ? Zt.element.offsetHeight
            : Zt.element.offsetTop + Zt.element.offsetHeight) >=
            Zt.container.offsetHeight &&
            Zt.container.offsetHeight >= Ut.getMaxHeight() - 1) ||
          Ut.wordIsTooLong()
        );
      },
      wordIsTooLong() {
        return Zt.element.offsetWidth > Zt.container.offsetWidth + 1;
      },
      prepareForResize() {
        isNaN(Ut.getOriginalFontSize()) &&
          Ut.setOriginalFontSize(Ut.getFontSize()),
          isNaN(Ut.getOriginalLineHeight()) &&
            Ut.setOriginalLineHeight(Ut.getLineHeight()),
          isNaN(Ut.getCurrentFontSize()) &&
            Ut.setCurrentFontSize(Ut.getFontSize()),
          isNaN(Ut.getMaxHeight()) && Ut.setMaxHeight(Ut.getAllowedHeight());
      },
      setOriginalFontSize(r) {
        Zt.element.dataset.originalFontSize = r;
      },
      getOriginalFontSize() {
        return parseInt(Zt.element.dataset.originalFontSize, 10);
      },
      setOriginalLineHeight(r) {
        Zt.element.dataset.originalLineHeight = r;
      },
      getOriginalLineHeight() {
        return parseInt(Zt.element.dataset.originalLineHeight, 10);
      },
      setCurrentFontSize(r) {
        let t = (this.getOriginalLineHeight() * r) / this.getOriginalFontSize(),
          n = {
            "font-size": `${r}px !important`,
            "line-height": `${t}px !important`,
          };
        Zt.groupMode
          ? Zt.container.querySelectorAll("div").forEach(function (s) {
              Ut.mergeStyle(s, n);
            })
          : Ut.mergeStyle(Zt.element, n),
          (Zt.element.dataset.currentFontSize = r);
      },
      getCurrentFontSize() {
        return parseInt(Zt.element.dataset.currentFontSize, 10);
      },
      getMaxHeight() {
        return parseInt(Zt.container.dataset.maxHeight, 10);
      },
      setMaxHeight(r) {
        Zt.container.dataset.maxHeight = r;
      },
      allowFontResize() {
        return Zt.element.dataset.allowFontResize !== void 0;
      },
      allowFontGroupResize() {
        return Zt.container.dataset.allowFontResize !== void 0;
      },
      getFontSize() {
        let r = window.getComputedStyle(Zt.element).fontSize;
        return parseInt(r.replace(/[^\d.]/, ""), 10);
      },
      getLineHeight() {
        let r = window.getComputedStyle(Zt.element).lineHeight;
        return parseInt(r.replace(/[^\d.]/, ""), 10);
      },
      getAllowedHeight() {
        let r = window.getComputedStyle(Zt.container),
          t = parseInt(r.maxHeight.replace(/[^\d.]/, ""), 10);
        return isNaN(t) ? parseInt(r.height.replace(/[^\d.]/, ""), 10) : t;
      },
      mergeStyle(r, t) {
        Object.keys(t).forEach((n) => {
          (r.style[n] = ""), (r.style.cssText += `${n}: ${t[n]}`);
        });
      },
    },
    Rn = Ut;
  var ko = class extends N {
    connect() {
      document.fonts ? this.resizeWhenFontsAreReady() : this.resize();
    }
    resizeWhenFontsAreReady() {
      document.fonts.ready.then(() => {
        this.resize();
      });
    }
    resize() {
      Rn.allFonts(10);
    }
  };
  var Lo = Qt(Oe());
  var Rg = {
      months: {
        "00": "",
        "01": "Janeiro",
        "02": "Fevereiro",
        "03": "Mar\xE7o",
        "04": "Abril",
        "05": "Maio",
        "06": "Junho",
        "07": "Julho",
        "08": "Agosto",
        "09": "Setembro",
        10: "Outubro",
        11: "Novembro",
        12: "Dezembro",
      },
      weekdays: [
        "Domingo",
        "Segunda-feira",
        "Ter\xE7a-feira",
        "Quarta-feira",
        "Quinta-feira",
        "Sexta-feira",
        "S\xE1bado",
      ],
      hours: {
        "00": "Zero",
        "01": "Uma",
        "02": "Duas",
        "03": "Tr\xEAs",
        "04": "Quatro",
        "05": "Cinco",
        "06": "Seis",
        "07": "Sete",
        "08": "Oito",
        "09": "Nove",
        10: "Dez",
        11: "Onze",
        12: "Doze",
        13: "Treze",
        14: "Quatorze",
        15: "Quinze",
        16: "Dezesseis ",
        17: "Dezessete",
        18: "Dezoito",
        19: "Dezenove",
        20: "Vinte",
        21: "Vinte e Uma",
        22: "Vinte e Duas",
        23: "Vinte e Tr\xEAs",
        24: "Vinte e Quatro",
      },
    },
    Rr = Rg;
  var Qe = {
    date(r) {
      if (!/\d{2}\/\d{2}\/\d{4}/.test(r)) return null;
      let [t, n, s] = r.split("/").map((w) => parseInt(w)),
        l = new Date(s, n - 1, t);
      if (l.getFullYear() !== s || l.getMonth() !== n - 1 || l.getDate() !== t)
        return null;
      let h = l.getTimezoneOffset() * 6e4;
      return new Date(l.getTime() - h);
    },
    credit_card_month_year(r) {
      if (!/\d{2}\/\d{2}/.test(r)) return null;
      let [t, n] = r.split("/").map((l) => parseInt(l)),
        s = new Date(n + 2e3, t, 0);
      return s instanceof Date &&
        !isNaN(s) &&
        s.getMonth() + 1 === t &&
        s.getTime() >= Date.now()
        ? s
        : null;
    },
  };
  var ge = {
      apply(r, t) {
        return ge[r](t);
      },
      age(r) {
        return r.replace(/\d|e|\s/g, "").length === 0
          ? r.trim() + " " + ge.short_age(r)
          : r;
      },
      age_diminutive(r) {
        return r.replace(/\d|e|\s/g, "").length === 0
          ? r.trim() + " " + ge.short_age_diminutive(r)
          : r;
      },
      age_number(r) {
        let t = r.match(/\d+/g);
        return t ? t.join(" e ") : "";
      },
      age_text(r) {
        let t = r.replace(/ /g, ""),
          n = r.match(/\d+/g);
        return n
          ? ge.numbers(r).length === t.length || (!!n && n.length > 1)
            ? ge.short_age(r)
            : ge.text(r)
          : "";
      },
      age_with_party_prefix(r) {
        return (r = ge.age(r)), r ? "Festinha de " + r : "";
      },
      age_with_invite_prefix(r) {
        let t = ge.numbers(r) > 1 ? "os" : "o";
        return (r = ge.age(r)), r ? "Vem comemorar " + t + " " + r : "";
      },
      alphanumeric(r) {
        return r.replace(/[^a-z0-9]/gi, "");
      },
      alphanumeric_and_spaces(r) {
        return r.replace(/[^a-z0-9 ]/gi, "");
      },
      classification(r) {
        return (
          {
            birthday: "Anivers\xE1rio",
            birthday_adult: "Anivers\xE1rio",
            baptism: "Batizado",
            baby_shower: "Ch\xE1 de beb\xEA",
            diaper_shower: "Ch\xE1 de fraldas",
            first_communion: "Primeira Comunh\xE3o",
            sweet_15: "Festa",
            other: "Festa",
          }[r] || ""
        );
      },
      currency(r) {
        let t = "pt-BR",
          n = "BRL";
        return r
          ? Number(r).toLocaleString(t, { style: "currency", currency: n })
          : Number(0).toLocaleString(t, { style: "currency", currency: n });
      },
      cpf_cnpj(r) {
        let t = ge.numbers(r);
        switch (t.length) {
          case 11:
            return ge.cpf(r);
          case 14:
            return ge.cnpj(r);
          default:
            return t;
        }
      },
      cpf(r) {
        return (
          (r = ge.numbers(r)),
          r.length >= 9 && (r = r.substr(0, 9) + "-" + r.substr(9)),
          r.length >= 6 && (r = r.substr(0, 6) + "." + r.substr(6)),
          r.length >= 3 && (r = r.substr(0, 3) + "." + r.substr(3)),
          r
        );
      },
      cnpj(r) {
        return (
          (r = ge.numbers(r)),
          r.length >= 12 && (r = r.substr(0, 12) + "-" + r.substr(12)),
          r.length >= 8 && (r = r.substr(0, 8) + "/" + r.substr(8)),
          r.length >= 5 && (r = r.substr(0, 5) + "." + r.substr(5)),
          r.length >= 2 && (r = r.substr(0, 2) + "." + r.substr(2)),
          r
        );
      },
      credit_card(r) {
        return (
          (r = ge.numbers(r)),
          r.length >= 12 && (r = r.substr(0, 12) + " " + r.substr(12)),
          r.length >= 8 && (r = r.substr(0, 8) + " " + r.substr(8)),
          r.length >= 4 && (r = r.substr(0, 4) + " " + r.substr(4)),
          r
        );
      },
      credit_card_name(r) {
        return te
          .transliterate(r)
          .toUpperCase()
          .replace(/[^A-Z\s]/gi, "");
      },
      credit_card_month_year(r) {
        return (
          (r = r.replace(/\D/g, "")),
          r.length >= 3 && (r = r.substr(0, 2) + "/" + r.substr(2, r.length)),
          r
        );
      },
      date(r) {
        return (
          (r = r.replace(/\D/g, "")),
          r.length >= 4 && (r = r.substr(0, 4) + "/" + r.substr(4)),
          r.length >= 2 && (r = r.substr(0, 2) + "/" + r.substr(2)),
          r
        );
      },
      date_dot(r) {
        return (r = ge.date(r)), (r = r.replace(/\//g, "\u2022")), r;
      },
      date_period(r) {
        return (r = ge.date(r)), (r = r.replace(/\//g, ".")), r;
      },
      day(r) {
        return (r = r.replace(/\D/g, "")), r.length < 2 ? "" : r.substr(0, 2);
      },
      decimal(r) {
        return (
          (r = r.replace(/\D/g, "").replace(/^0+/, "")),
          (r = r.padStart(3, "0")),
          r.length > 11 &&
            (r = r.substr(0, r.length - 11) + "." + r.substr(r.length - 11)),
          r.length > 8 &&
            (r = r.substr(0, r.length - 8) + "." + r.substr(r.length - 8)),
          r.length > 5 &&
            (r = r.substr(0, r.length - 5) + "." + r.substr(r.length - 5)),
          r.length > 2 &&
            (r = r.substr(0, r.length - 2) + "," + r.substr(r.length - 2)),
          r
        );
      },
      email_phone(r) {
        return /^\d+$/.test(r) ? ge.phone(r) : r;
      },
      gender_connective(r) {
        switch (r) {
          case "female":
            return "da";
          case "male":
            return "do";
          default:
            return "do(a)";
        }
      },
      letters(r) {
        return r.replace(/[0-9]/g, "");
      },
      hour(r) {
        return r.substr(3, 2) !== "00"
          ? r
          : parseInt(r.substr(0, 2)) + " horas";
      },
      hour_h(r) {
        return r.replace(":", "h");
      },
      short_hour_h(r) {
        return r.substr(2) === "00"
          ? r.substr(0, 2) + "h"
          : r.replace(":", "h");
      },
      hour_connective(r) {
        return "\xE0s " + ge.hour(r);
      },
      simple_hour_connective(r) {
        return "\xE0s " + r;
      },
      short_birthday_prefix(r) {
        return "Niver";
      },
      hour_with_prefix(r) {
        return (
          (r.substr(0, 2) === "01" ? "A partir da" : "A partir das") + " " + r
        );
      },
      hour_text(r) {
        let [t, n] = r.split(":"),
          s =
            parseInt(t) === 1 ? "\xE0 uma hora" : `\xE0s ${Rr.hours[t]} horas`,
          l = parseInt(n) === 30 ? "e trinta minutos" : "";
        return [s, l].join(" ");
      },
      month(r) {
        return (
          (r = r.replace(/\D/g, "")),
          r.length < 4 ? "" : Rr.months[r.substr(2, 2)] || ""
        );
      },
      month_number(r) {
        return (r = r.replace(/\D/g, "")), r.length < 4 ? "" : r.substr(2, 2);
      },
      first_letter(r) {
        return (r = r.replace(/ /g, "")), r.substr(0, 1);
      },
      name_with_prefix(r) {
        return r ? "& " + r : "";
      },
      name_age_connector_pluralizable(r) {
        var t;
        return ((t = r.match(/\s?[&\-,|]\s/)) == null ? void 0 : t.length) > 0
          ? r.replace(/\sfaz\s/, " fazem ")
          : r;
      },
      gift_suggestion_with_title(r) {
        return r ? "Sugest\xE3o de presente: " + r : "";
      },
      negative_number(r) {
        return r.replace(/[^-0-9]*/g, "");
      },
      number(r) {
        return r.replace(/\D/g, "");
      },
      numbers(r) {
        return ge.number(r);
      },
      ordinal_number(r) {
        return ge.numbers(r) + "&#186;";
      },
      phone(r) {
        if (((r = r.replace(/\D/g, "")), r.length < 11)) return t(r);
        return n(r);
        function t(s) {
          return (
            s.length >= 6 && (s = s.substr(0, 6) + "-" + s.substr(6)),
            s.length >= 2 && (s = s.substr(0, 2) + ") " + s.substr(2)),
            s.length > 0 && (s = "(" + s),
            s
          );
        }
        function n(s) {
          return (
            "(" + s.substr(0, 2) + ") " + s.substr(2, 5) + "-" + s.substr(7)
          );
        }
      },
      international_phone(r) {
        return `+${r.replace(/\D/g, "")}`;
      },
      modern_brazilian_format(r) {
        return (
          r.match(/^\(\d{2}\)\s[789]\d{3}\-\d{4}$/) &&
            (r = r.substr(0, 5) + "9" + r.substr(5)),
          r
        );
      },
      auto_phone(r) {
        let t = /^\s*(\+|55)/.test(r),
          n = r.startsWith("0");
        return (
          (r = r.replace(/\D/g, "")),
          t && (r = r.substr(2)),
          n &&
            ((r = parseInt(r).toString()),
            r.length >= 13 && (r = r.substr(-11)),
            r.length === 12 && (r = r.substr(-10))),
          r.length >= 12 && (r = r.substr(0, 11)),
          r.length <= 11 ? ge.phone(r) : ge.international_phone(r)
        );
      },
      modern_auto_phone(r) {
        return (
          (r = ge.auto_phone(r)),
          te.isEmpty(r)
            ? r
            : (r.startsWith("+") &&
                r.length === 13 &&
                ["7", "8", "9"].includes(r[5])) ||
              (r.length === 14 && ["7", "8", "9"].includes(r[5]))
            ? r.slice(0, 5) + "9" + r.slice(5)
            : r
        );
      },
      short_age(r) {
        let t = ge.numbers(r);
        return t ? (Number(t) > 1 ? "anos" : "ano") : "";
      },
      short_age_diminutive(r) {
        let t = ge.numbers(r);
        return t ? (Number(t) > 1 ? "aninhos" : "aninho") : "";
      },
      short_month(r) {
        return (
          (r = r.replace(/\D/g, "")),
          r.length < 4 ? "" : (Rr.months[r.substr(2, 2)] || "").substr(0, 3)
        );
      },
      short_weekday(r) {
        let t = Qe.date(r);
        return t ? Rr.weekdays[t.getUTCDay()].replace("-feira", "") : "";
      },
      very_short_weekday(r) {
        let t = Qe.date(r);
        return t ? Rr.weekdays[t.getUTCDay()].substr(0, 3) : "";
      },
      slug(r) {
        return te.parameterize(r);
      },
      text(r) {
        return r.replace(/\d/g, "").replace(/\s\s+/g, " ").trim();
      },
      url(r) {
        return te.urlize(r);
      },
      weekday(r) {
        let t = Qe.date(r);
        return t ? Rr.weekdays[t.getUTCDay()] : "";
      },
      year(r) {
        return (r = r.replace(/\D/g, "")), r.length < 8 ? "" : r.substr(4, 4);
      },
      titlecase(r) {
        let t = [];
        return (
          r.split(" ").forEach((n) => {
            t.push(n.charAt(0) + n.slice(1).toLowerCase());
          }),
          t.join(" ")
        );
      },
      short_year(r) {
        return (r = r.replace(/\D/g, "")), r.length < 8 ? "" : r.substr(6, 2);
      },
      sku(r) {
        return (
          (r = ge.alphanumeric(r).toUpperCase()),
          r.length >= 17 && (r = r.substr(0, 17) + "-" + r.substr(17)),
          r.length >= 8 && (r = r.substr(0, 8) + "-" + r.substr(8)),
          r.length >= 3 && (r = r.substr(0, 3) + "-" + r.substr(3)),
          r
        );
      },
      zipcode(r) {
        return (
          (r = r.replace(/\D/g, "")),
          r.length >= 5 && (r = r.substr(0, 5) + "-" + r.substr(5)),
          r
        );
      },
      rsvp_with_prefix(r) {
        return "<b>RSVP at\xE9 " + r.substr(0, 5) + ":</b>";
      },
      ceremony_prefix(r) {
        return "<b>Cerim\xF4nia:</b> " + r;
      },
      reception_prefix(r) {
        return "<b>Recep\xE7\xE3o:</b> " + r;
      },
      celebrate_prefix(r) {
        return "Comemora " + r;
      },
      event_title_welcoming(r) {
        return "Te espero para o " + r;
      },
    },
    j = ge;
  var _g = {
      : "A",
      : "A",
      : "A",
      : "A",
      : "A",
      : "A",
      : "AE",
      : "C",
      : "E",
      : "E",
      : "E",
      : "E",
      : "I",
      : "I",
      : "I",
      : "I",
      : "D",
      : "N",
      : "O",
      : "O",
      : "O",
      : "O",
      : "O",
      "\xD7": "x",
      : "O",
      : "U",
      : "U",
      : "U",
      : "U",
      : "Y",
      : "Th",
      : "ss",
      : "a",
      : "a",
      : "a",
      : "a",
      : "a",
      : "a",
      : "ae",
      : "c",
      : "e",
      : "e",
      : "e",
      : "e",
      : "i",
      : "i",
      : "i",
      : "i",
      : "d",
      : "n",
      : "o",
      : "o",
      : "o",
      : "o",
      : "o",
      : "o",
      : "u",
      : "u",
      : "u",
      : "u",
      : "y",
      : "th",
      : "y",
      : "A",
      : "a",
      : "A",
      : "a",
      : "A",
      : "a",
      : "C",
      : "c",
      : "C",
      : "c",
      : "C",
      : "c",
      : "C",
      : "c",
      : "D",
      : "d",
      : "D",
      : "d",
      : "E",
      : "e",
      : "E",
      : "e",
      : "E",
      : "e",
      : "E",
      : "e",
      : "E",
      : "e",
      : "G",
      : "g",
      : "G",
      : "g",
      : "G",
      : "g",
      : "G",
      : "g",
      : "H",
      : "h",
      : "H",
      : "h",
      : "I",
      : "i",
      : "I",
      : "i",
      : "I",
      : "i",
      : "I",
      : "i",
      : "I",
      : "i",
      : "IJ",
      : "ij",
      : "J",
      : "j",
      : "K",
      : "k",
      : "k",
      : "L",
      : "l",
      : "L",
      : "l",
      : "L",
      : "l",
      : "L",
      : "l",
      : "L",
      : "l",
      : "N",
      : "n",
      : "N",
      : "n",
      : "N",
      : "n",
      : "'n",
      : "NG",
      : "ng",
      : "O",
      : "o",
      : "O",
      : "o",
      : "O",
      : "o",
      : "OE",
      : "oe",
      : "R",
      : "r",
      : "R",
      : "r",
      : "R",
      : "r",
      : "S",
      : "s",
      : "S",
      : "s",
      : "S",
      : "s",
      : "S",
      : "s",
      : "T",
      : "t",
      : "T",
      : "t",
      : "T",
      : "t",
      : "U",
      : "u",
      : "U",
      : "u",
      : "U",
      : "u",
      : "U",
      : "u",
      : "U",
      : "u",
      : "U",
      : "u",
      : "W",
      : "w",
      : "Y",
      : "y",
      : "Y",
      : "Z",
      : "z",
      : "Z",
      : "z",
      : "Z",
      : "z",
    },
    fi = {
      transliterate(r) {
        return r
          .split("")
          .map(function (t) {
            return _g[t] || t;
          })
          .join("");
      },
      parameterize(r) {
        return fi
          .transliterate(r)
          .toLowerCase()
          .replace(/\s/g, "-")
          .replace(/[^a-z0-9\-]/g, "");
      },
      urlize(r) {
        return fi
          .transliterate(r)
          .replace(/\s/g, "-")
          .replace(/[^a-zA-Z0-9\-_:/.?=#\[\]@!$&]/g, "");
      },
      isEmpty(r) {
        return !r || !r.trim();
      },
      isPresent(r) {
        return !fi.isEmpty(r);
      },
      translate(r, t, n) {
        return fi.isEmpty(t) && fi.isEmpty(n)
          ? r
          : fi.isPresent(t)
          ? j.apply(t, r)
          : Number(r) === 1
          ? `${r} ${n}`
          : `${r} ${n}s`;
      },
      unformat(r, t) {
        return t === "decimal" ? r.replace(/\./g, "").replace(",", ".") : r;
      },
    },
    te = fi;
  var mi = class extends N {
    connect() {
      this.searchCache = {};
    }
    search(r) {
      let t = r.target.value;
      r.target.value.length >= 9 &&
        (this.get(t.replace(/\D/g, "")), Lo.default.fire(r.target, "zipcode"));
    }
    forceSearch(r) {
      if ((r.which || r.keyCode) === 13) {
        r.preventDefault();
        let n = r.target.value.replace(/\D/g, "");
        return this.get(n), !1;
      } else return !0;
    }
    programmaticSearch() {
      let r = this.zipcodeTarget.value.replace(/\D/g, ""),
        t = this.searchCache[r];
      this.updateTargets(t, !1, !1);
    }
    get(r) {
      let t = this.searchCache[r];
      t ? this.updateTargets(t, !1) : this.fetch(r);
    }
    fetch(r) {
      this.updateTargets(),
        Lo.default.ajax({
          type: "GET",
          url: "/api/zipcodes/" + r + ".json",
          success: (t) => {
            t
              ? ((this.searchCache[r] = t),
                this.updateTargets(t, !1),
                this.hasNumberTarget && this.numberTarget.focus())
              : ((this.searchCache[r] = {}),
                this.updateTargets({}, !1),
                this.hasStreetTarget && this.streetTarget.focus());
          },
          error: () => {
            this.updateTargets({}, !1);
          },
        });
    }
    updateTargets(r = {}, t = !0, n = !0) {
      (this.zipcodeTarget.disabled = t),
        this.setStreet(r.street, t, n),
        this.setNeighborhood(r.neighborhood, t, n),
        this.setCity(r.city, t, n),
        this.setState(r.state, t, n);
    }
    setStreet(r, t = !0, n = !1) {
      this.hasStreetTarget &&
        ((this.streetTarget.disabled = t),
        this.setField(this.streetTarget, r, n));
    }
    setNeighborhood(r, t = !0, n = !1) {
      this.hasNeighborhoodTarget &&
        ((this.neighborhoodTarget.disabled = t),
        this.setField(this.neighborhoodTarget, r, n));
    }
    setCity(r, t = !0, n = !1) {
      this.hasCityTarget &&
        ((this.cityTarget.disabled = t), this.setField(this.cityTarget, r, n));
    }
    setState(r, t = !0, n = !1) {
      this.hasStateTarget &&
        ((this.stateTarget.disabled = t),
        this.setField(this.stateTarget, r, n));
    }
    setField(r, t, n) {
      if (te.isPresent(r.value) && !n) return;
      (r.value = t || ""),
        r.classList.toggle("filled"),
        this.disableFormatter(r);
      let s = r.tagName === "SELECT" ? "change" : "input";
      Lo.default.fire(r, s), this.enableFormatter(r);
    }
    disableFormatter(r) {
      !r.dataset.formatter ||
        ((r.dataset.disabledFormatter = r.dataset.formatter),
        delete r.dataset.formatter);
    }
    enableFormatter(r) {
      !r.dataset.disabledFormatter ||
        ((r.dataset.formatter = r.dataset.disabledFormatter),
        delete r.dataset.disabledFormatter);
    }
  };
  W(mi, "targets", [
    "zipcode",
    "street",
    "neighborhood",
    "city",
    "state",
    "address",
  ]);
  var _n = class extends mi {};
  W(_n, "targets", [
    "zipcode",
    "street",
    "neighborhood",
    "city",
    "state",
    "address",
  ]);
  var Dl = {
    noscroll(r, t = document.body) {
      t.classList.toggle("noscroll", r);
    },
    show(r, t) {
      t
        ? (r.style[t.attribute] = t.value)
        : r.classList.contains("hidden")
        ? r.classList.remove("hidden")
        : (r.style.display = r.dataset.domDisplay || "block");
    },
    hide(r, t) {
      t
        ? (r.style[t.attribute] = t.value)
        : r.style.display !== "none" &&
          ((r.dataset.domDisplay = r.style.display),
          (r.style.display = "none"));
    },
    activate(r, t) {
      t === void 0
        ? r.classList.toggle("active")
        : t
        ? r.classList.add("active")
        : r.classList.remove("active");
    },
    set(r, t, n = {}) {
      let s = n.attribute || "value",
        l = n.event || "changed",
        h = r.dataset.valueFormat,
        w = r.dataset.valueSuffix,
        L = r.tagName;
      switch (L) {
        case "DIV":
          break;
        case "P":
        case "LABEL":
        case "SPAN":
          r.textContent = te.translate(t, h, w);
          break;
        case "INPUT":
          r.value = t;
          break;
        default:
          console.log(`I don't know how to set values in ${L}.`);
      }
      r.setAttribute(`data-${s}`, t.toString().replace(/,/, ".")),
        Dl.fire(r, l);
    },
    get(r, t = {}) {
      let n = t.attribute || "value",
        s = r.tagName,
        l = r.dataset.formatter,
        h = r.value;
      switch (s) {
        case "DIV":
        case "P":
        case "LABEL":
        case "SPAN":
          return r.getAttribute(`data-${n}`);
        case "INPUT":
        case "TEXTAREA":
          return te.unformat(h, l);
        default:
          console.log(`I don't know how to get values from ${s}.`);
      }
    },
    fire(r, t, n, s = {}) {
      let { bubbles: l, cancelable: h } = s,
        w = new CustomEvent(t, {
          bubbles: l || !1,
          cancelable: h || !0,
          detail: n,
        });
      return r.dispatchEvent(w), !w.defaultPrevented;
    },
  };
  window.Dom = Dl;
  var be = Dl;
  var Ro = Qt(Oe());
  var gi = class extends N {
    increase() {
      this.value < this.maximum &&
        (this.value++, Ro.default.fire(this.inputTarget, "input"));
    }
    decrease() {
      this.value > this.minimumValue &&
        (this.value--, Ro.default.fire(this.inputTarget, "input"));
    }
    get maximum() {
      let r = Number(this.inputTarget.maxLength);
      return isNaN(r) || r <= 0 ? Number.MAX_SAFE_INTEGER : Math.pow(10, r) - 1;
    }
    get minimum() {
      return this.hasMinimumValue ? this.minimumValue : 0;
    }
    get value() {
      let r = be.get(this.inputTarget);
      return r ? Number(r) : 0;
    }
    set value(r) {
      Number(be.set(this.inputTarget, r)),
        this.remoteValue &&
          (this.element.classList.add(this.loaderClass),
          setTimeout(
            () => Ro.default.fire(this.element.closest("form"), "submit"),
            0,
          ));
    }
  };
  W(gi, "targets", ["input"]),
    W(gi, "classes", ["loader"]),
    W(gi, "values", { remote: Boolean, minimum: Number });
  var _o = class extends N {
    transmit(r) {
      let t = r.currentTarget.dataset.target;
      this.fire(document.querySelector(t), r.type);
    }
    remove(r) {
      let t = r.currentTarget.dataset.remove || "this";
      this.chooseTarget(r.currentTarget, t).remove();
    }
    toggleAttribute(r) {
      let t = r.currentTarget.dataset.target,
        n = r.currentTarget.dataset.attribute || "disabled";
      this.chooseTarget(r.currentTarget, t).toggleAttribute(n);
    }
    setAttribute(r) {
      let t = r.currentTarget.dataset.target,
        n = r.currentTarget.dataset.attribute || "value",
        s = this.chooseTarget(r.currentTarget, t),
        l = r.currentTarget.dataset.value || r.currentTarget.value;
      l === "true" ? (l = !0) : l === "false" && (l = !1),
        (s[n] = l),
        n === "value" && this.fire(s, "input");
    }
    toggleClass(r) {
      let t = r.currentTarget,
        n = t.dataset.class || "hidden",
        { target: s, required: l } = t.dataset;
      s.split(",").forEach((h) => {
        let w = this.chooseTarget(r.currentTarget, h);
        l ? w.classList.toggle(n, t.value === "") : w.classList.toggle(n);
      });
    }
    removeClass(r) {
      let t = r.currentTarget,
        n = t.dataset.class || "hidden";
      t.dataset.target.split(",").forEach((l) => {
        this.chooseTarget(r.currentTarget, l).classList.remove(
          n,
          t.value === "",
        );
      });
    }
    fire(r, t) {
      let n = new CustomEvent(t, { bubbles: !0, cancelable: !0, detail: null });
      return r.dispatchEvent(n), !n.defaultPrevented;
    }
    chooseTarget(r, t) {
      return (
        (t = t.trim()),
        t
          ? t === "parent"
            ? r.parentElement
            : t === "this"
            ? r
            : t.indexOf("closest") !== -1
            ? r.closest(t.split(" ")[1])
            : document.querySelector(t)
          : r
      );
    }
  };
  yt.register("address", Cn);
  yt.register("ajax", To);
  yt.register("application", So);
  yt.register("maps--places", kn);
  yt.register("maps--routes", Co);
  yt.register("menu", Ln);
  yt.register("resizer", ko);
  yt.register("secondary-zipcodes", _n);
  yt.register("steppers", gi);
  yt.register("util", _o);
  yt.register("zipcodes", mi);
  var Vi = class extends N {
    initialize() {
      this.observer = new MutationObserver(this.sum.bind(this));
    }
    connect() {
      this.summandTargets.forEach((r) => {
        this.observer.observe(r, { attributes: !0 });
      }),
        this.sumOnConnectValue && this.sum();
    }
    disconnect() {
      this.observer.disconnect();
    }
    sum() {
      let r = {};
      this.summandTargets.forEach((t) => {
        (t.dataset.additionIdentifier || "default").split(" ").forEach((s) => {
          (r[s] = r[s] || 0), (r[s] += Number(t.dataset.value));
        });
      }),
        Object.keys(r).forEach((t) => {
          if (t === "default") {
            let n = this.element.querySelector(
              '[data-addition-target="total"]:not([data-addition-identifier])',
            );
            be.set(n, r[t]);
          } else {
            let n = this.element.querySelector(
              `[data-addition-target="total"][data-addition-identifier='${t}']`,
            );
            be.set(n, r[t]);
          }
        });
    }
  };
  W(Vi, "targets", ["summand", "total"]),
    W(Vi, "values", { sumOnConnect: Boolean });
  var Do = class extends N {
    connect() {
      (this.customActivations = {}), this.bindCustomActivations();
    }
    get(r) {
      this.handleAjaxRequest(r, "GET");
    }
    post(r) {
      this.handleAjaxRequest(r, "POST");
    }
    patch(r) {
      this.handleAjaxRequest(r, "PATCH");
    }
    delete(r) {
      this.handleAjaxRequest(r, "DELETE");
    }
    handleAjaxRequest(r, t) {
      return Ot(this, null, function* () {
        r.type === "submit" && r.preventDefault();
        let n = r.currentTarget,
          { activationId: s } = n.dataset;
        s
          ? this.customActivations[s]()
          : (yield this.handleDirectUpload(n), this.issueAjaxRequest(n, t));
      });
    }
    handleRedirect(r, t, n) {
      let s = t === "self" ? window.location : t,
        l = n === "GET" ? "advance" : "replace";
      Turbo.visit(s, { action: l });
    }
    handleDirectUpload(r) {
      let t = r.querySelector("input[type=file]");
      if (!!t) return new Ui(t).upload();
    }
    issueAjaxRequest(r, t) {
      if (
        ((t = t.toUpperCase()),
        this.fire(r, "ajax:before"),
        r.dataset.valid === "false")
      )
        return;
      let n = this.prepareHeaders(t),
        s = this.preparePayload(r, t),
        l = this.preparePath(r, t, s),
        h = this.prepareResponseType(r),
        w = new XMLHttpRequest();
      w.open(t, l, !0),
        w.overrideMimeType("text/html"),
        (w.responseType = h),
        Object.keys(n).forEach((L) => {
          w.setRequestHeader(L, n[L]);
        }),
        (w.onload = () => {
          let L = w.status,
            I = h === "document" ? w.response : w.responseText,
            B = r.dataset.redirect || w.getResponseHeader("X-Xhr-Redirect");
          L === 200 && B
            ? this.handleRedirect(r, B, t)
            : L === 204
            ? (this.enableElement(r), this.delayedFire(r, "ajax:success"))
            : L >= 200 && L < 300
            ? (this.enableElement(r),
              this.insert(r, I),
              this.delayedFire(r, "ajax:success"))
            : L === 406
            ? (this.enableElement(r),
              this.insert(r, I),
              this.delayedFire(r, "ajax:invalid"))
            : (this.enableElement(r), this.delayedFire(r, "ajax:error")),
            this.delayedFire(r, "ajax:done"),
            this.delayedFire(document.body, "ajax:done");
        }),
        this.disableElement(r),
        w.send(t === "GET" ? null : this.encodePayload(s));
    }
    preparePayload(r, t) {
      let n = {},
        s = [];
      return (
        t !== "GET"
          ? this.addElementToPayload(s, n, r.closest("form"))
          : this.addParamsToPayload(s, n, r),
        this.addElementToPayload(s, n, r),
        this.addVarsToPayload(n, r),
        this.filterPayload(n, r)
      );
    }
    addParamsToPayload(r, t, n) {
      let s = this.extractConfig(n, "params");
      s.params &&
        s.params !== "none" &&
        s.element.querySelectorAll("input").forEach((l) => {
          this.addElementToPayload(r, t, l);
        });
    }
    addElementToPayload(r, t, n) {
      if (!(n == null || this.alreadyAddedToPayload(r, n))) {
        if ((r.push(n), this.shouldAddToPayload(n))) {
          let s = n.name,
            l = n.value;
          if (l != null) {
            let h = t[s];
            h ? (Array.isArray(h) ? h.push(l) : (t[s] = [h, l])) : (t[s] = l);
          }
        }
        if (n.matches("form")) {
          let s = n.elements;
          for (let l = 0; l < s.length; l++)
            this.addElementToPayload(r, t, s[l]);
        }
      }
    }
    addVarsToPayload(r, t) {
      let { vars: n } = this.extractConfig(t, "vars");
      !n ||
        n.split(",").forEach((s) => {
          let l = s.trim().split("=");
          l[0].indexOf("[]") > 0
            ? Array.isArray(r[l[0]])
              ? r[l[0]].push(l[1])
              : (r[l[0]] = [l[1]])
            : (r[l[0]] = l[1]);
        });
    }
    shouldAddToPayload(r) {
      return r.name === "" ||
        r.name == null ||
        r.disabled ||
        r.type === "button" ||
        r.type === "submit" ||
        r.tagName === "image" ||
        r.tagName === "reset" ||
        r.tagName === "file"
        ? !1
        : r.type === "checkbox" || r.type === "radio"
        ? r.checked
        : r.type !== "file";
    }
    alreadyAddedToPayload(r, t) {
      return !!r.find((n) => t.isSameNode(n));
    }
    filterPayload(r, t) {
      let { params: n } = this.extractConfig(t, "params");
      if (n) {
        if (n === "none") return {};
        if (n === "all") return r;
        {
          let s = {};
          return (
            n.split(",").forEach((l) => {
              (l = l.trim()), (s[l] = r[l]);
            }),
            s
          );
        }
      } else return r;
    }
    encodePayload(r) {
      let t = "";
      for (let n in r)
        if (Object.prototype.hasOwnProperty.call(r, n)) {
          let s = r[n];
          Array.isArray(s)
            ? s.forEach((l) => {
                t = this.appendParamToUrl(t, n, l);
              })
            : (t = this.appendParamToUrl(t, n, s));
        }
      return t;
    }
    preparePath(r, t, n) {
      let s =
        this.extractConfig(r, "url").value ||
        r.action ||
        document.location.href;
      if (t === "GET") {
        let l = s.split("#"),
          h = l[1];
        return (
          (s = l[0]),
          Object.keys(n).length !== 0 &&
            (s.indexOf("?") < 0 ? (s += "?") : (s += "&"),
            (s += this.encodePayload(n)),
            h && (s += "#" + h)),
          s
        );
      } else return s;
    }
    prepareHeaders(r) {
      let t = { "X-Requested-With": "XMLHttpRequest", Accept: "text/html" };
      if (r !== "GET") {
        t["Content-Type"] = "application/x-www-form-urlencoded";
        let n = document.querySelector('meta[name="csrf-token"]');
        n && (t["X-CSRF-Token"] = n.attributes.content.value);
      }
      return t;
    }
    prepareResponseType(r) {
      return this.extractConfig(r, "target").value === "page" ? "document" : "";
    }
    insert(r, t) {
      if (t === "" || !document.body.contains(r)) return;
      let n = this.parseResponse(r, t),
        s = this.chooseSwap(r),
        l = this.chooseTarget(r, t),
        { extract: h } = this.extractConfig(r, "extract");
      h
        ? h.split(",").forEach((w) => {
            let L = `[name='${w.trim()}']`,
              I = l.querySelector(L),
              B = n.querySelector(L);
            (I.value = B.value), this.fire(I, "input");
          })
        : s === "innerHTML" || s === "outerHTML"
        ? (l[s] = n)
        : l.insertAdjacentHTML(s, n),
        this.bindCustomActivations(),
        this.delayedFire(l, "ajax:load");
    }
    disableElement(r) {
      this.toggleElement(r, !1);
    }
    enableElement(r) {
      this.toggleElement(r, !0);
    }
    toggleElement(r, t) {
      r.dataset.disable !== "false" &&
        (!t && r.tagName === "INPUT" && r.blur(),
        (r.disabled = !t),
        r.classList.toggle("disabled", !t));
    }
    extractConfig(r, t) {
      let n = t.replace(/-([a-z])/g, (w) => w[1].toUpperCase()),
        s = t.replace(/([a-zA-Z])(?=[A-Z])/g, "$1-").toLowerCase(),
        l = r.dataset[n] ? r : r.closest(`[data-${s}]`);
      if (!l) return { element: r };
      let h = {};
      return (
        (h.element = l), (h.value = l.dataset[n]), (h[n] = l.dataset[n]), h
      );
    }
    parseResponse(r, t) {
      if (t instanceof HTMLDocument) return t.body.innerHTML;
      let { select: n } = this.extractConfig(r, "select");
      if (n) {
        let l = document.createElement("html");
        return (l.innerHTML = t.trim()), l.querySelector(n).outerHTML;
      }
      let { extract: s } = this.extractConfig(r, "extract");
      if (s) {
        let l = document.createElement("html");
        return (l.innerHTML = t.trim()), l;
      }
      return t;
    }
    bindCustomActivations() {
      document
        .querySelectorAll(
          '[data-action][data-activation*="delay"]:not([data-activation-id])',
        )
        .forEach(this.delay.bind(this)),
        document
          .querySelectorAll(
            '[data-action][data-activation*="pool"]:not([data-activation-id])',
          )
          .forEach(this.pool.bind(this));
    }
    debounce(r, t, n) {
      let s;
      return function () {
        let l = this,
          h = arguments,
          w = function () {
            (s = null), n || r.apply(l, h);
          },
          L = n && !s;
        clearTimeout(s), (s = setTimeout(w, t)), L && r.apply(l, h);
      };
    }
    delayedFire(r, t) {
      Promise.resolve().then(() => {
        this.fire(r, t);
      });
    }
    fire(r, t) {
      if (!document.body.contains(r)) return;
      let n = new CustomEvent(t, { bubbles: !0, cancelable: !0, detail: null });
      return r.dispatchEvent(n), !n.defaultPrevented;
    }
    randomId() {
      return (
        Math.random().toString(36).substring(2, 15) +
        Math.random().toString(36).substring(2, 15)
      );
    }
    appendParamToUrl(r, t, n) {
      return (
        r !== "" && (r += "&"),
        (r += encodeURIComponent(t) + "=" + encodeURIComponent(n)),
        r
      );
    }
    delay(r) {
      let t = Number(r.dataset.activation.split(" ")[1]),
        n = r.dataset.action.match(/ajax#([a-z]*)/)[1],
        s = this.randomId();
      r.setAttribute("data-activation-id", s),
        (this.customActivations[s] = this.debounce(() => {
          this.issueAjaxRequest(r, n);
        }, t)),
        this.delayedFire(r, "ajax:load");
    }
    pool(r) {
      let t = Number(r.dataset.activation.split(" ")[1]),
        n = r.dataset.action.split("#")[1],
        s = this.randomId();
      r.setAttribute("data-activation-id", s),
        (this.customActivations[s] = setInterval(() => {
          document.body.contains(r)
            ? this.issueAjaxRequest(r, n)
            : clearInterval(this.customActivations[s]);
        }, t));
    }
    chooseSwap(r) {
      let { target: t } = this.extractConfig(r, "target"),
        { swap: n } = this.extractConfig(r, "swap");
      return t === "page"
        ? "innerHTML"
        : t === "auto"
        ? n || "outerHTML"
        : n || "innerHTML";
    }
    chooseTarget(r, t) {
      let n = this.extractConfig(r, "target");
      if (n.target === "auto") {
        let s = document.createElement("html");
        s.innerHTML = t.trim();
        let l = s.querySelector("body");
        return document.querySelector(`#${l.firstElementChild.id}`);
      } else
        return n.target.indexOf("closest") !== -1
          ? n.element.closest(n.target.split(" ")[1])
          : n.target === "this"
          ? n.element
          : n.target === "page"
          ? document.body
          : document.querySelector(n.target);
    }
  };
  var Po = class extends N {
    connect() {
      setTimeout(this.close.bind(this), 5e3);
    }
    close() {
      document.body.contains(this.element) && this.element.remove();
    }
  };
  var Dn = class extends N {
    start() {
      this.destTarget.classList.add("animation");
    }
  };
  W(Dn, "targets", ["dest"]);
  var ju = Qt(Oe()),
    Oo = class extends N {
      connect() {
        setTimeout(() => this.render(), this.delay);
      }
      render() {
        ju.default.ajax({
          type: "GET",
          url: `${this.url}${this.queryString()}`,
          success: (r) => {
            this.element.outerHTML = r;
          },
        });
      }
      queryString() {
        let { width: r, height: t } = this.boundaries,
          n = "";
        return (
          !!r && r > 0 && this.forwardWidth && (n += `&width=${r}`),
          !!t && t > 0 && this.forwardHeight && (n += `&height=${t}`),
          n
        );
      }
      get boundaries() {
        return this.forwardWidth || this.forwardHeight
          ? this.element.getBoundingClientRect()
          : {};
      }
      get forwardBoundaries() {
        return this.data.get("forwardBoundaries") === "true";
      }
      get forwardWidth() {
        return (
          this.data.get("forwardWidth") === "true" || this.forwardBoundaries
        );
      }
      get forwardHeight() {
        return (
          this.data.get("forwardHeight") === "true" || this.forwardBoundaries
        );
      }
      get url() {
        return this.data.get("url");
      }
      get delay() {
        return Number(this.data.get("delay") || 10);
      }
    };
  var Ml = Qt(Pn()),
    zu = Qt(Fo());
  var On = class extends N {
    connect() {
      this.data.set("photoGroom", this.photoTarget.src),
        this.data.set("photoBride", this.photoBrideTarget.src);
    }
    changeGroom(r) {
      let t = r.target.files[0],
        n = "groom";
      t && /image\/(jpg|jpeg|png|webp|gif)/.test(t.type)
        ? (this.toggleElements("loading"),
          (0, Ml.default)(
            t,
            (s) => {
              (this.photoTarget.src = s.src), this.initEditor(n);
            },
            { noRevoke: !0 },
          ))
        : (this.toggleError(), (r.target.value = ""));
    }
    changeBride(r) {
      let t = r.target.files[0],
        n = "bride";
      t && /image\/(jpg|jpeg|png|webp|gif)/.test(t.type)
        ? (this.toggleElements("loading"),
          (0, Ml.default)(
            t,
            (s) => {
              (this.photoTarget.src = s.src), this.initEditor(n);
            },
            { noRevoke: !0 },
          ))
        : (this.toggleError(), (r.target.value = ""));
    }
    newBride() {
      this.toggleElements("bride");
    }
    newGroom() {
      this.toggleElements("groom");
    }
    restart() {
      this.cropper.destroy(),
        (this.cropper = null),
        (this.fileBrideTarget.value = ""),
        (this.fileGroomTarget.value = ""),
        (this.photoTarget.src = this.data.get("photo")),
        this.toggleElements("restart");
    }
    editGroom() {
      this.toggleElements("loading"),
        this.resize("groom", this.data.get("photoGroom"));
    }
    editBride(r) {
      this.toggleElements("loading"),
        this.resize("bride", this.data.get("photoBride"));
    }
    resize(r, t) {
      (this.photoTarget.src = t), this.initEditor(r);
    }
    submit() {}
    initEditor(r) {
      this.toggleElement(this.photoWrapperTarget, !0),
        (this.cropper = new zu.default(this.photoTarget, {
          aspectRatio: 1,
          viewMode: 1,
          autoCropArea: 0.9,
          cropBoxResizable: !1,
          cropBoxMovable: !1,
          dragMode: "move",
          crop: (t) => {
            this.exifRotate || (this.exifRotate = t.detail.rotate),
              (this.xDesktopTarget.value = t.detail.x),
              (this.yDesktopTarget.value = t.detail.y),
              (this.heightDesktopTarget.value = t.detail.height),
              (this.widthDesktopTarget.value = t.detail.width),
              (this.xMobileTarget.value = t.detail.x),
              (this.yMobileTarget.value = t.detail.y),
              (this.heightMobileTarget.value = t.detail.height),
              (this.widthMobileTarget.value = t.detail.width),
              (this.usageTarget.value = r),
              (this.rotateDesktopTarget.value =
                t.detail.rotate - this.exifRotate),
              (this.rotateMobileTarget.value =
                t.detail.rotate - this.exifRotate);
          },
          ready: () => {
            this.toggleElements("editing");
          },
        }));
    }
    toggleElements(r) {
      switch (r) {
        case "loading":
          this.element.classList.add("photo-editor--editing"),
            this.toggleElement(this.photoTarget, !1, "invisible"),
            this.toggleElement(this.chooseButtonTarget, !1),
            this.hasResizeButtonTarget &&
              this.toggleElement(this.resizeButtonTarget, !1),
            this.hasRemoveButtonTarget &&
              this.toggleElement(this.removeButtonTarget, !1);
          break;
        case "bride":
          this.toggleElement(this.subHeaderTarget, !1),
            this.toggleElement(this.brideGroupTarget, !0),
            this.toggleElement(this.photoTarget, !1),
            this.toggleElement(this.saveButtonTarget, !1),
            this.toggleElement(this.restartButtonTarget, !1),
            this.toggleElement(this.chooseButtonTarget, !1),
            this.toggleElement(this.removeButtonTarget, !1);
          break;
        case "groom":
          this.toggleElement(this.groomGroupTarget, !0),
            this.toggleElement(this.subHeaderTarget, !1),
            this.toggleElement(this.photoTarget, !0),
            this.toggleElement(this.saveButtonTarget, !1),
            this.toggleElement(this.restartButtonTarget, !1),
            this.toggleElement(this.chooseButtonTarget, !1),
            this.toggleElement(this.removeButtonTarget, !1);
          break;
        case "editing":
          this.toggleElement(this.groomGroupTarget, !1),
            this.toggleElement(this.brideGroupTarget, !1),
            this.toggleElement(this.subHeaderTarget, !1),
            this.toggleElement(this.photoTarget, !0, "invisible"),
            this.toggleElement(this.saveButtonTarget, !0);
          break;
        default:
          this.element.classList.remove("photo-editor--editing"),
            this.toggleElement(this.restartButtonTarget, !1),
            this.toggleElement(this.saveButtonTarget, !1),
            this.toggleElement(this.chooseButtonTarget, !0),
            this.hasResizeButtonTarget &&
              this.toggleElement(this.resizeButtonTarget, this.hasPhoto()),
            this.hasRemoveButtonTarget &&
              this.toggleElement(this.removeButtonTarget, this.hasPhoto());
      }
    }
    toggleElement(r, t, n = "hidden") {
      r.classList.toggle(n, !t);
    }
    toggleError() {
      this.errorTarget.classList.toggle("hidden");
    }
    hasPhoto() {
      return this.data.get("hasPhoto") === "true";
    }
  };
  W(On, "targets", [
    "xDesktop",
    "yDesktop",
    "rotateDesktop",
    "widthDesktop",
    "heightDesktop",
    "xMobile",
    "yMobile",
    "rotateMobile",
    "widthMobile",
    "heightMobile",
    "fileBride",
    "fileGroom",
    "photo",
    "resizeButton",
    "chooseButton",
    "restartButton",
    "saveButton",
    "removeButton",
    "imageLoader",
    "error",
    "photoWrapper",
    "subHeader",
    "usage",
    "brideGroup",
    "groomGroup",
    "photoWrapperBride",
    "photoBride",
  ]);
  var Mn = class extends N {
    initialize() {
      this.observer = new MutationObserver((r) => {
        this.copy(r[0].target);
      });
    }
    connect() {
      this.sourceTargets.forEach((r) => {
        this.observer.observe(r, { attributes: !0 });
      });
    }
    disconnect() {
      this.observer.disconnect();
    }
    changed(r) {
      this.copy(r.currentTarget);
    }
    copy(r) {
      let t = r.dataset.binderIdentifier;
      t ? this.targetedCopy(r, t) : this.standardCopy(r);
    }
    targetedCopy(r, t) {
      let n = be.get(r);
      this.element
        .querySelectorAll(
          `[data-binder-target="destination"][data-binder-identifier='${t}'], [id='${t}']`,
        )
        .forEach((s) => {
          be.set(s, n, {
            event: "copied",
            attribute: r.dataset.binderDestinationAttribute,
          });
        });
    }
    standardCopy(r = this.sourceTarget) {
      let t = be.get(r);
      this.element
        .querySelectorAll(
          '[data-binder-target="destination"]:not([data-binder-identifier])',
        )
        .forEach((n) => {
          be.set(n, t, {
            event: "copied",
            attribute: r.dataset.binderDestinationAttribute,
          });
        });
    }
  };
  W(Mn, "targets", ["source", "destination"]);
  var Fn = class extends N {
    connect() {
      !this.hasBarTarget ||
        ((this.observer = new IntersectionObserver(this.toggle.bind(this), {
          threshold: 0.5,
        })),
        this.sectionTargets.forEach((r) => {
          this.observer.observe(r);
        }));
    }
    disconnect() {
      this.sectionTargets.forEach((r) => {
        this.observer.unobserve(r);
      });
    }
    toggle(r, t) {
      r.forEach((n) => {
        let s = this.itemTargets[this.sectionIndex(n)],
          l = this.dotTargets[this.sectionIndex(n)];
        s !== void 0 &&
          s.classList.toggle("navigation__item--active", n.isIntersecting),
          l !== void 0 &&
            l.classList.toggle("navigation__dot--active", n.isIntersecting);
      });
    }
    sectionIndex(r) {
      return r.target.dataset.navigationIndex;
    }
  };
  W(Fn, "targets", ["bar", "section", "item", "dot"]);
  var Vu = Qt(Uu());
  var In = class extends N {
    connect() {
      new Vu.default(this.itemsTarget, this.loadOptions());
    }
    loadOptions() {
      let r = {};
      return this.loadDataOptions(r), this.loadElementOptions(r), r;
    }
    loadDataOptions(r) {
      this.loadDataOption(r, "slidesToShow", 1, Number),
        this.loadDataOption(r, "draggable", !0, Boolean),
        this.loadDataOption(r, "itemWidth", void 0, Number),
        this.loadDataOption(r, "exactWidth", !1, Boolean),
        this.loadDataOption(r, "slidesToScroll", 1, Number);
    }
    loadDataOption(r, t, n, s) {
      let l = this.data.get(t);
      r[t] = s(l) || n;
    }
    loadElementOptions(r) {
      (r.arrows = {}),
        this.hasDotsTarget && (r.dots = this.dotsTarget),
        this.hasPrevItemTarget && (r.arrows.prev = this.prevItemTarget),
        this.hasNextItemTarget && (r.arrows.next = this.nextItemTarget);
    }
  };
  W(In, "targets", ["items", "prevItem", "nextItem", "dots"]);
  var Xu = Qt($u()),
    Io = class extends N {
      connect() {
        (this.clipboard = new Xu.default(this.element)),
          this.clipboard.on("success", this.notify);
      }
      disconnect() {
        this.clipboard.destroy();
      }
      notify(r) {
        let t = r.trigger,
          n = t.innerHTML;
        (t.innerHTML = "Copiado!"),
          setTimeout(function () {
            t.innerHTML = n;
          }, 3e3);
      }
    };
  var Nn = class extends N {
    connect() {
      this.pickerTargets.forEach((r) => {
        this.tint(r, r.querySelector("input").value);
      });
    }
    pick(r) {
      let t = r.target.closest('div[data-color-picker-target="picker"]');
      this.tint(t, r.target.value);
    }
    tint(r, t) {
      r.style.setProperty("--bg", t);
    }
  };
  W(Nn, "targets", ["picker"]);
  var Bo = class extends N {
    connect() {
      this.element.setAttribute(
        "data-action",
        `confirmation#request ${this.element.dataset.action}`,
      );
    }
    request(r) {
      this.confirmed || this.open(r);
    }
    cancel(r) {
      this.close(r);
    }
    accept(r) {
      this.close(r), (this.confirmed = !0), this.element.click();
    }
    open(r) {
      this.element.insertAdjacentElement("beforeend", this.dialog()),
        r.preventDefault(),
        r.stopImmediatePropagation();
    }
    close(r) {
      this.element.querySelector(".confirmation").remove(),
        r.preventDefault(),
        r.stopImmediatePropagation();
    }
    dialog() {
      let r = document.createElement("div");
      r.className = "confirmation";
      let t = document.createElement("div");
      (t.className = "confirmation__overlay"),
        t.setAttribute("data-action", "click->confirmation#cancel"),
        r.appendChild(t);
      let n = document.createElement("div");
      (n.className = "confirmation__content"), r.appendChild(n);
      let s = document.createElement("p");
      (s.className = "confirmation__message"),
        (s.textContent = this.message),
        n.appendChild(s);
      let l = document.createElement("div");
      (l.className = "confirmation__actions"), n.appendChild(l);
      let h = document.createElement("button");
      (h.className = "confirmation__cancel"),
        (h.type = "button"),
        (h.title = "Cancelar"),
        (h.textContent = this.cancelText),
        h.setAttribute("data-action", "confirmation#cancel"),
        l.appendChild(h);
      let w = document.createElement("button");
      return (
        (w.className = "confirmation__accept"),
        (w.type = "button"),
        (w.title = "Ok"),
        (w.textContent = this.confirmText),
        w.setAttribute("data-action", "confirmation#accept"),
        l.appendChild(w),
        r
      );
    }
    set confirmed(r) {
      this.data.set("confirmed", r);
    }
    get confirmed() {
      return this.data.get("confirmed") === "true";
    }
    get message() {
      return this.data.get("message");
    }
    get cancelText() {
      return this.data.get("cancelText") || "Voltar";
    }
    get confirmText() {
      return this.data.get("confirmText") || "Sim, excluir";
    }
  };
  var $i = class extends N {
    connect() {
      setTimeout(() => this.calculate(), 0);
    }
    calculate() {
      this.virtualEventValue ? this.fixed() : this.scaling();
    }
    fixed() {
      this.quantity = this.quantityPerVirtualEventValue;
    }
    scaling() {
      if (this.guests < this.minimumGuestsValue) this.quantity = 0;
      else {
        let r = this.guests * this.quantityPerGuestValue,
          n =
            Math.max(r, this.startingQuantityValue) /
            this.quantityPerPackageValue;
        this.quantity = this.roundValue === "up" ? Math.ceil(n) : Math.floor(n);
      }
    }
    set quantity(r) {
      be.set(this.quantityTarget, r);
    }
    get guests() {
      return Number(this.element.dataset.value);
    }
  };
  W($i, "targets", ["quantity"]),
    W($i, "values", {
      minimumGuests: Number,
      quantityPerPackage: Number,
      quantityPerGuest: Number,
      quantityPerVirtualEvent: Number,
      round: String,
      startingQuantity: Number,
      virtualEvent: Boolean,
    });
  var Ku = Qt(Oe());
  var jn = class extends N {
    initialize() {
      this.updateCountdown();
    }
    connect() {
      (this.internal = setInterval(() => this.updateCountdown(), 6e4)),
        (this.closeModal = this.data.get("close-modal"));
    }
    disconnect() {
      clearInterval(this.interval);
    }
    updateCountdown() {
      let r = this.scheduledDate.getTime() - new Date().getTime();
      this.isExpired() &&
        (this.hasMessageTarget && this.messageTarget.classList.remove("hidden"),
        this.closeModal &&
          Ku.default.fire(this.element.closest(".modal"), "close"),
        (r = new Date().getTime() - this.scheduledDate.getTime()));
      let t = 60 * 1e3,
        n = 60 * t,
        s = 24 * n;
      (this.days = Math.floor(r / s)),
        (this.hours = Math.floor((r % s) / n)),
        (this.minutes = Math.ceil((r % n) / t));
    }
    isExpired() {
      return this.scheduledDate < new Date().getTime();
    }
    get scheduledDate() {
      let [r, t, n] = this.data.get("scheduled-on").split("-"),
        [s, l] = this.data.get("starts-at").split(":");
      return new Date(r, t - 1, n, s, l);
    }
    set days(r) {
      this.daysTarget.textContent = r;
    }
    set hours(r) {
      r < 10 && (r = [0, r].join("")), (this.hoursTarget.textContent = r);
    }
    set minutes(r) {
      r < 10 && (r = [0, r].join("")), (this.minutesTarget.textContent = r);
    }
  };
  W(jn, "targets", ["days", "hours", "minutes", "message"]);
  var No = class extends N {
    initialize() {
      (this.setupCallback = this.setup.bind(this)),
        (this.beginCallback = this.begin.bind(this)),
        (this.progressCallback = this.progress.bind(this)),
        (this.errorCallback = this.error.bind(this)),
        (this.endCallback = this.end.bind(this));
    }
    connect() {
      document.addEventListener("direct-upload:initialize", this.setupCallback),
        document.addEventListener("direct-upload:start", this.beginCallback),
        document.addEventListener(
          "direct-upload:progress",
          this.progressCallback,
        ),
        document.addEventListener("direct-upload-error", this.errorCallback),
        document.addEventListener("direct-upload:end", this.endCallback);
    }
    disconnect() {
      document.removeEventListener(
        "direct-upload:initialize",
        this.setupCallback,
      ),
        document.removeEventListener("direct-upload:start", this.beginCallback),
        document.removeEventListener(
          "direct-upload:progress",
          this.progressCallback,
        ),
        document.removeEventListener("direct-upload-error", this.errorCallback),
        document.removeEventListener("direct-upload:end", this.endCallback);
    }
    setup(r) {
      let t = r.detail.id,
        n = document.createElement("div");
      n.classList.add("direct-upload");
      let s = document.createElement("span");
      s.classList.add("direct-upload__message"),
        (s.id = "direct-upload-message-" + t),
        (s.textContent = this.message(r)),
        n.appendChild(s);
      let l = document.createElement("div");
      l.classList.add("direct-upload__bar"),
        (l.id = "direct-upload-" + t),
        n.appendChild(l);
      let h = document.createElement("div");
      h.classList.add("direct-upload__progress"),
        (h.id = "direct-upload-progress-" + t),
        l.appendChild(h),
        document.body.insertAdjacentElement("beforeEnd", n);
    }
    begin(r) {
      let { id: t } = r.detail;
      document
        .getElementById("direct-upload-" + t)
        .classList.remove("direct-upload--pending");
    }
    progress(r) {
      let { id: t, progress: n } = r.detail,
        s = document.getElementById("direct-upload-" + t);
      s.style.width = n + "%";
    }
    error(r) {
      let { id: t, error: n } = r.detail,
        s = document.getElementById("direct-upload-progress" + t);
      s.classList.add("direct-upload--error");
      let l = document.getElementById("direct-upload-message" + t);
      s.classList.add("direct-upload--error"), (l.textContent = n);
    }
    end(r) {
      let { id: t } = r.detail;
      document
        .getElementById("direct-upload-" + t)
        .classList.add("direct-upload--complete"),
        (document.querySelector(".direct-upload__message").textContent =
          "Salvando...");
    }
    message(r) {
      let t = r.target.accept;
      return t.includes("pdf")
        ? "Enviando PDF..."
        : t.includes("image")
        ? "Enviando imagem..."
        : "Enviando arquivo...";
    }
  };
  var Gu = Qt(Oe());
  var qn = class extends N {
    connect() {
      (this.today = new Date()),
        this.showCurrentHeader(),
        this.showCurrentWeek(),
        this.showCurrentBody();
    }
    showCurrentHeader() {
      let r = this.startDate;
      (this.month = r.getUTCMonth()), (this.year = r.getUTCFullYear());
    }
    showCurrentWeek() {
      this.daysOfWeekTarget.innerHTML = this.buildDaysOfWeek();
    }
    showCurrentBody() {
      this.daysOfMonthTarget.innerHTML = this.buildDaysOfMonth();
      let r = new Date(this.year, this.month, 1).getUTCDay();
      (this.daysOfMonthTarget.firstElementChild.style.marginLeft = `${
        14.28 * r
      }%`),
        this.toggleControls();
    }
    toggle() {
      this.element.classList.toggle("dynaform__calendar--closed");
    }
    previous() {
      this.month > 0 ? this.month-- : ((this.month = 11), this.year--),
        this.showCurrentBody();
    }
    next() {
      this.month < 11 ? this.month++ : ((this.month = 0), this.year++),
        this.showCurrentBody();
    }
    chooseDate(r) {
      let t = r.target.dataset.calendarDay.padStart(2, "0"),
        n = String(this.month + 1).padStart(2, "0"),
        s = this.year;
      (this.inputTarget.value = this.startDate = [t, n, s].join("/")),
        this.showCurrentBody(),
        this.toggle(),
        Gu.default.fire(this.inputTarget, "input");
    }
    toggleControls() {
      if (
        !this.disallowPast ||
        this.month !== this.today.getUTCMonth() ||
        this.year !== this.today.getUTCFullYear()
      ) {
        this.previousTarget.disabled = !1;
        return;
      }
      this.previousTarget.disabled = !0;
      let r = this.today.getUTCDate() - 1,
        t = this.startDate.getUTCDate() - 1,
        n = this.daysOfMonthTarget.children;
      for (let s = 0; s < n.length; s++)
        s < r
          ? n[s].classList.add("dynaform__calendar-day--inactive")
          : s === t && n[s].classList.add("dynaform__calendar-day--active");
    }
    buildDaysOfWeek() {
      let r = "";
      return (
        Rr.weekdays.forEach((t) => {
          r += `<span>${t.substr(0, 3)}</span>`;
        }),
        r
      );
    }
    buildDaysOfMonth() {
      let r = "";
      for (
        let t = 1;
        t <= new Date(this.year, this.month + 1, 0).getDate();
        t++
      )
        r += `<div class="dynaform__calendar-day" data-action="click->dynaform--calendar#chooseDate" data-calendar-day="${t}">${t}</div>`;
      return r;
    }
    get month() {
      return parseInt(this.data.get("month"));
    }
    set month(r) {
      this.data.set("month", r);
      let t = Rr.months[String(r + 1).padStart(2, "0")];
      this.monthTarget.textContent = t;
    }
    get year() {
      return parseInt(this.data.get("year"));
    }
    set year(r) {
      this.data.set("year", r), (this.yearTarget.textContent = r);
    }
    get startDate() {
      return Qe.date(this.data.get("startDate"));
    }
    set startDate(r) {
      this.data.set("startDate", r);
    }
    get disallowPast() {
      return this.data.get("disallowPast") === "true";
    }
  };
  W(qn, "targets", [
    "input",
    "month",
    "year",
    "daysOfWeek",
    "daysOfMonth",
    "previous",
    "next",
  ]);
  var or = class extends N {
    get behindTracks() {
      let r = [];
      return (
        this.tracks.forEach((t, n) => {
          n < this.index && r.push(t);
        }),
        r
      );
    }
    get forwardTracks() {
      let r = [];
      return (
        this.tracks.forEach((t, n) => {
          n > this.index && r.push(t);
        }),
        r
      );
    }
    get currentTrack() {
      return this.tracks[this.index];
    }
    get tracks() {
      return Array.from(
        this.journeyTarget.querySelectorAll(
          '[data-target*="track"][data-track]',
        ),
      );
    }
    get index() {
      return Number(this.element.dataset.index);
    }
    set index(r) {
      this.element.setAttribute("data-index", r);
    }
  };
  W(or, "targets", ["journey"]);
  var zn = class extends or {
    next() {
      setTimeout(() => {
        this.autofocus(), this.display();
      }, 10);
    }
    display() {
      this.currentTrack
        .querySelectorAll("[data-display-field]")
        .forEach((r) => {
          let t = this.findSource(r.dataset);
          this.pasteValue(r, this.copyValue(t));
        });
    }
    autofocus() {
      setTimeout(() => {
        let r = this.currentTrack.querySelector("[data-auto-focus]");
        r && r.focus();
      }, 10);
    }
    findSource(r) {
      let t = `[name="${r.displayField}"]`;
      return (
        r.displayField.endsWith("_id]") && (t += ":checked"),
        r.displayMultiple === "true" && (t += ":checked"),
        document.querySelector(t)
      );
    }
    copyValue(r) {
      return r.tagName === "SPAN"
        ? r.textContent
        : r.tagName === "INPUT" && r.type === "radio"
        ? r.dataset.text || r.dataset.value
        : r.value;
    }
    pasteValue(r, t, n = !0) {
      let s = r.dataset.displayPrefix || "";
      r.textContent = `${s}${t}`;
      let l = r.dataset.displaySeparator;
      if (l && te.isPresent(t) && n) {
        let h = this.copyValue(r.previousElementSibling);
        this.pasteValue(r.previousElementSibling, `${h}${l}`, !1);
      }
    }
  };
  W(zn, "targets", ["journey"]);
  var jo = Qt(Oe());
  var Hn = class extends or {
    connect() {
      this.initJourney(), this.initHistory(), this.initEventHandlers();
    }
    disconnect() {
      window.removeEventListener("popstate", this.popHistoryCallback),
        document.removeEventListener("keypress", this.enterKeyCallback);
    }
    initJourney() {
      if (((this.index = 0), this.tracks.length === 0)) {
        this.adjustCourse("main");
        let r = this.tracks[this.index];
        r.setAttribute("data-active", !0),
          r.classList.remove(this.trackAheadClass),
          this.setTrackUniqueID(r);
      }
    }
    initHistory() {
      (this.popHistoryCallback = this.popHistory.bind(this)),
        window.addEventListener("popstate", this.popHistoryCallback),
        this.pushHistory();
    }
    initEventHandlers() {
      (this.enterKeyCallback = this.enterKey.bind(this)),
        document.addEventListener("keypress", this.enterKeyCallback),
        (this.ajaxCompleteCallback = this.ajaxComplete.bind(this)),
        this.journeyTarget.addEventListener(
          "ajax:complete",
          this.ajaxCompleteCallback,
        );
    }
    next(r) {
      let {
        course: t,
        route: n,
        track: s,
        rewind: l,
      } = r.currentTarget.dataset;
      this.adjustCourse(t, s),
        this.adjustRoute(n),
        l ? this.rewind(r) : (this.travel(this.index + 1), this.pushHistory());
    }
    previous() {
      history.back();
    }
    goToAndRewind(r) {
      this.goTo(r),
        this.currentTrack
          .querySelectorAll('[data-action*="dynaform--navigation#next"]')
          .forEach((t) => {
            t.setAttribute("data-rewind", !0);
          });
    }
    goTo(r) {
      let {
          track: t = "unknown",
          trackId: n = -1,
          trackIndex: s = -1,
        } = r.currentTarget.dataset,
        l = this.tracks.findIndex(
          (h, w) =>
            h.dataset.track === t ||
            h.dataset.trackId === n ||
            w === parseInt(s, 10),
        );
      this.travel(l), this.pushHistory();
    }
    toggle() {
      let r = this.currentTrack.dataset.valid !== "false";
      this.currentTrack
        .querySelectorAll(
          ".dynaform__button--next, .dynaform__button--skip, .dynaform__button--save",
        )
        .forEach((t) => {
          t.disabled = !r;
        });
    }
    rewind(r) {
      r.currentTarget.removeAttribute("data-rewind"), history.back();
    }
    save(r) {
      (this.ajaxTrigger = r.currentTarget),
        setTimeout(() => {
          this.ajaxTrigger.disabled = !0;
        }, 0);
    }
    submit(r) {
      this.journeyTarget && jo.default.fire(this.journeyTarget, "submit"),
        r && this.save(r);
    }
    travel(r) {
      try {
        let t = this.tracks[this.index],
          n = this.tracks[r];
        t.removeAttribute("data-active"),
          n.setAttribute("data-active", !0),
          this.animateTrackChange(this.index, r, n, t),
          this.setTrackUniqueID(n),
          (this.index = r);
      } catch (t) {}
    }
    adjustCourse(r, t) {
      !r ||
        ((this.course = r),
        this.removeForwardTracks(),
        this.loadTracksInCourse(r, t),
        this.updateJourney());
    }
    adjustRoute(r) {
      !r ||
        (r === this.route && this.forwardTracks.length > 0) ||
        ((this.route = r),
        this.removeForwardTracks(),
        this.loadTracksInRoute());
    }
    removeForwardTracks() {
      this.forwardTracks.forEach((r) => {
        r.remove();
      });
    }
    loadTracksInCourse(r, t) {
      let n = this.findCourse(r);
      if (n.dataset.atomic === "true")
        n.querySelectorAll("[data-target][data-track]").forEach((l) => {
          this.loadTrack(this.course, l.dataset.track);
        });
      else {
        let s = n.querySelector("[data-target][data-track]");
        this.loadTrack(this.course, t || s.dataset.track);
      }
    }
    loadTracksInRoute() {
      this.route.split(" ").forEach((t) => this.loadTrack(this.course, t));
    }
    loadTrack(r, t) {
      let n = this.findTrack(r, t).cloneNode(!0);
      n.classList.add(this.trackAheadClass), this.journeyTarget.appendChild(n);
    }
    animateTrackChange(r, t, n, s) {
      setTimeout(() => {
        t > r
          ? (s.classList.add(this.trackBehindClass),
            n.classList.remove(this.trackAheadClass))
          : (s.classList.add(this.trackAheadClass),
            n.classList.remove(this.trackBehindClass));
      }, 10);
    }
    setTrackUniqueID(r) {
      r.setAttribute("data-track-id", new Date().getTime());
    }
    updateJourney() {
      let r = this.element.querySelector(
        `[data-target][data-course="${this.course}"]`,
      );
      this.journeyTarget.dataset.endTrack = r.dataset.endTrack;
      let t = r.querySelector("form");
      this.journeyTarget.setAttribute("novalidate", t.noValidate),
        this.journeyTarget.setAttribute("action", t.action),
        this.journeyTarget.setAttribute("accept-charset", t.acceptCharset),
        this.journeyTarget.setAttribute("method", t.method),
        this.journeyTarget.setAttribute("data-remote", t.dataset.remote),
        r.querySelectorAll('form > input[type="hidden"]').forEach((n) => {
          this.journeyTarget.insertAdjacentElement("afterBegin", n.cloneNode());
        });
    }
    findCourse(r) {
      return this.element.querySelector(`[data-target][data-course="${r}"]`);
    }
    findTrack(r, t) {
      return this.findCourse(r).querySelector(
        `[data-target][data-track${t ? `='${t}'` : ""}]`,
      );
    }
    enterKey(r) {
      if (
        r.which === 13 &&
        (document.activeElement.tagName !== "TEXTAREA" ||
          document.activeElement.className.indexOf("hero") !== -1)
      ) {
        let t = this.currentTrack.querySelector(
          '.dynaform__track-actions [data-action~="click->dynaform--navigation#next"], .dynaform__track-actions [data-action~="click->dynaform--navigation#save"]',
        );
        return (
          t && (document.activeElement.blur(), t.click()),
          r.preventDefault(),
          !1
        );
      }
    }
    ajaxComplete(r) {
      let t = r.detail[0].status;
      t >= 200 &&
        t < 300 &&
        this.ajaxTrigger &&
        jo.default.fire(this.ajaxTrigger, "saved"),
        this.ajaxTrigger && (this.ajaxTrigger.disabled = !1);
    }
    pushHistory() {
      let r = { index: this.index },
        t = `Passo ${this.index + 1}`;
      this.index === 0 ? history.replaceState(r, t) : history.pushState(r, t);
    }
    popHistory(r) {
      r.state.index === 0 && this.index === 0
        ? this.hasAbortTarget && jo.default.fire(this.abortTarget, "click")
        : r.state.index !== void 0 && this.travel(r.state.index);
    }
    get trackAheadClass() {
      return this.data.get("trackAheadClass") || "hidden";
    }
    get trackBehindClass() {
      return this.data.get("trackBehindClass") || "hidden";
    }
    get course() {
      return this.data.get("course");
    }
    set course(r) {
      this.data.set("course", r);
    }
    get route() {
      return this.data.get("route");
    }
    set route(r) {
      this.data.set("route", r);
    }
  };
  W(Hn, "targets", ["journey", "course", "track", "abort"]);
  var Wn = class extends or {
    connect() {
      this.updateProgress();
    }
    next() {
      this.updateProgress();
    }
    previous() {
      this.updateProgress();
    }
    goTo() {
      this.updateProgress();
    }
    updateProgress() {
      setTimeout(() => {
        this.calculateProgress(),
          this.updatePreviousButton(),
          this.updateCounter(),
          this.updateProgressBar();
      }, 10);
    }
    calculateProgress() {
      this.progress = 0;
      let r = this.tracks;
      for (let t = 0; t < r.length; t++) {
        let n = r[t].dataset;
        if (
          (n.progress !== "false" && n.tracked !== "false" && this.progress++,
          n.active)
        )
          break;
      }
    }
    updatePreviousButton() {
      !this.hasPreviousTarget ||
        this.previousTarget.classList.toggle(
          "invisible",
          this.progress === 1 &&
            this.previousTarget.dataset.hideBackAtStart === "true",
        );
    }
    updateCounter() {
      !this.hasCounterTarget ||
        (!this.endTrack || this.progress === 0
          ? this.counterTarget.classList.add("invisible")
          : ((this.counterTarget.textContent = `${this.progress}/${this.endTrack}`),
            this.counterTarget.classList.remove("invisible")));
    }
    updateProgressBar() {
      if (!this.hasBarTarget) return;
      let r = (Number(this.progress) / Number(this.endTrack)) * 100;
      this.barTarget.style.width = `${r}%`;
    }
    set progress(r) {
      this.data.set("index", r);
    }
    get progress() {
      return Number(this.data.get("index"));
    }
    get endTrack() {
      return this.journeyTarget.dataset.endTrack;
    }
  };
  W(Wn, "targets", ["journey", "counter", "bar", "previous"]);
  var Un = class extends N {
    display(r) {
      this.displayTarget.textContent = r.currentTarget.value;
    }
    empty(r) {
      r.currentTarget.value = "";
    }
    hourChanged(r) {
      let t = r.target.value;
      if (Number(t) > 23) {
        r.target.value = null;
        return;
      }
      this.updateTime(), t.length === 2 && this.minutesControlTarget.focus();
    }
    minutesChanged(r) {
      let t = r.target.value;
      if (Number(t) > 59) {
        r.target.value = null;
        return;
      }
      this.updateTime(), t.length === 2 && this.minutesControlTarget.blur();
    }
    updateTime() {
      this.inputTarget.value = `${this.hour}:${this.minutes}`;
    }
    get hour() {
      return this.hourControlTarget.value.padStart(2, "0");
    }
    get minutes() {
      return this.minutesControlTarget.value.padStart(2, "0");
    }
  };
  W(Un, "targets", ["display", "input", "hourControl", "minutesControl"]);
  var _r = {
      assert(r, t) {
        return !r || r === "text" || _r[r](t);
      },
      alphanumeric(r) {
        return /^[a-z0-9]+$/i.test(r);
      },
      alphanumeric_and_spaces(r) {
        return /^[a-z0-9 ]+$/i.test(r);
      },
      bank_account(r) {
        return /^[0-9]{1,18}-[a-z0-9]{1,2}$/i.test(r);
      },
      birthdate(r) {
        let t = Qe.date(r);
        return !!Qe.date(r) && t > new Date(1930, 0, 1) && t < new Date();
      },
      adult_date(r) {
        let t = Qe.date(r);
        return (
          !!Qe.date(r) &&
          t > new Date(1900, 0, 1) &&
          t < new Date() &&
          new Date().getFullYear() - t.getFullYear() > 18
        );
      },
      cpf_cnpj(r) {
        switch (j.numbers(r).length) {
          case 11:
            return _r.cpf(r);
          case 14:
            return _r.cnpj(r);
          default:
            return !1;
        }
      },
      cpf(r) {
        let t = j.numbers(r),
          n = t.substr(0, 9).split("");
        if (n.every((l) => l === n[0])) return !1;
        return n.push(s(n, 10)), n.push(s(n, 11)), n.join("") === t;
        function s(l, h) {
          let w = l.reduce((L, I) => L + Number(I) * h--, 0) % 11;
          return w < 2 ? 0 : 11 - w;
        }
      },
      cnpj(r) {
        let t = j.numbers(r),
          n = t.substr(0, 12).split("");
        return (
          n.push(s(n, [5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2])),
          n.push(s(n, [6, 5, 4, 3, 2, 9, 8, 7, 6, 5, 4, 3, 2])),
          n.join("") === t
        );
        function s(l, h) {
          let w = l.reduce((L, I) => L + Number(I) * h.shift(), 0) % 11;
          return w < 2 ? 0 : 11 - w;
        }
      },
      credit_card(r) {
        return /^\d{4} \d{4} \d{4} \d{4}$/i.test(r);
      },
      credit_card_name(r) {
        return /^[A-Z\s]+$/i.test(r);
      },
      credit_card_month_year(r) {
        let t = Qe.credit_card_month_year(r);
        return !!Qe.credit_card_month_year(r) && t > new Date();
      },
      decimal(r) {
        return /^(\d{1,3}\.)*\d{1,3},\d{2}$/i.test(r);
      },
      date(r) {
        return !!Qe.date(r);
      },
      email(r) {
        let t = (r || "").trim();
        return /^([\w+\-]\.?)*[a-z0-9\_]+@[a-z\d\-]+(\.[a-z]+)*\.[a-z]+$/i.test(
          t,
        );
      },
      email_phone(r) {
        return r.includes("@") ? _r.email(r) : _r.phone(r);
      },
      full_name(r) {
        return /\D{2,}\s\D{2,}/i.test(r);
      },
      negative_number(r) {
        return !isNaN(r);
      },
      letters(r) {
        return r.length === j.letters(r).length;
      },
      number(r) {
        return r.length === j.numbers(r).length;
      },
      numbers(r) {
        return _r.number(r);
      },
      phone(r) {
        let t = j.numbers(r);
        return t.length === 10 || t.length === 11;
      },
      international_phone(r) {
        return /^(\+|00)[1-9][0-9 \-\(\)\.]{7,}$/.test(r);
      },
      auto_phone(r) {
        return j.numbers(r).length <= 11
          ? _r.phone(r)
          : _r.international_phone(r);
      },
      modern_auto_phone(r) {
        return _r.auto_phone(r);
      },
      modern_brazilian_format(r) {
        return this.auto_phone(r);
      },
      sku(r) {
        return /^[A-Z]{3}-[A-Z]{5}-[0-9]{9}-[A-Z]{2}$/.test(r);
      },
      slug(r) {
        return r === te.parameterize(r);
      },
      url(r) {
        return /[a-z0-9\-:/.]/.test(r);
      },
      zipcode(r) {
        return /^\d{5}-\d{3}$/i.test(r);
      },
    },
    qo = _r;
  var Yu = Qt(Oe());
  var Vn = class extends or {
    connect() {}
    input(r) {
      let t = r.currentTarget;
      (this.valid = !0),
        this.removeFlash(),
        this.removeFieldError(t),
        this.toggleFilled(t),
        this.applyFormat(t),
        this.enforceMaxLength(t),
        this.updateCounter(t),
        (t.dataset.previousValue = t.value);
    }
    change(r) {
      let t = r.currentTarget;
      this.removeFlash(),
        this.removeFieldError(t),
        this.toggleFilled(t),
        this.applyFormat(t),
        this.enforceMaxLength(t),
        (t.dataset.previousValue = t.value);
    }
    blur(r) {
      let t = r.currentTarget;
      this.applyBlurFormat(t), this.validateField(t);
    }
    next(r) {
      let t = Array.from(
        this.validateable.querySelectorAll("input, textarea, select"),
      );
      (this.valid = t.reduce((n, s) => this.validateField(s) && n, !0)),
        this.valid ||
          (document.querySelector(".field_with_errors").focus(),
          r.stopImmediatePropagation(),
          r.preventDefault());
    }
    save(r) {
      this.next(r);
    }
    removeFlash() {
      this.flashTargets.forEach((r) => {
        r.remove();
      });
    }
    removeFieldError(r) {
      r.classList.remove("field_with_errors"),
        r.nextElementSibling &&
          r.nextElementSibling.tagName === "LABEL" &&
          r.nextElementSibling.classList.remove("field_with_errors");
    }
    toggleFilled(r) {
      r.classList.toggle("dynaform__field--filled", !!r.value);
    }
    applyFormat(r) {
      let t = r.dataset.formatter;
      if (!t || this.isUserDeleting(r)) return;
      let n = j.apply(t, r.value),
        s = n.length;
      (r.value = n.substr(0, r.maxLength || s)),
        r.type === "text" && (r.focus(), r.setSelectionRange(s, s));
    }
    applyBlurFormat(r) {
      let t = r.dataset.blurFormatter;
      t && (r.value = j.apply(t, r.value));
    }
    enforceMaxLength(r) {
      let t = r.dataset.maxlength,
        n = r.value;
      !!t && n.length >= t && (r.value = n.substr(0, t));
    }
    updateCounter(r) {
      let t = document.getElementById(`${r.id}_counter`),
        n = r.value.length,
        s = r.maxLength;
      t && (t.textContent = `${n}/${s}`);
    }
    validateField(r) {
      if (r.disabled) return !0;
      let t = r.value,
        n = r.dataset.required,
        s =
          r.dataset.validator || r.dataset.blurFormatter || r.dataset.formatter,
        l = !0;
      return (
        te.isEmpty(t) ? (l = !n || n === "false") : s && (l = qo.assert(s, t)),
        l ? this.removeFieldError(r) : this.showFieldErrors(r),
        l
      );
    }
    internationalPayment(r) {
      let t = r.currentTarget,
        n = document.querySelector("#payment_cpf_cnpj"),
        s = document.querySelector("#payment_phone");
      t.checked
        ? (this.removeFieldError(n),
          (n.value = ""),
          n.removeAttribute("data-required"),
          n.setAttribute("disabled", !0),
          s.setAttribute("data-formatter", "number"))
        : (n.removeAttribute("disabled"),
          n.setAttribute("data-required", !0),
          s.setAttribute("data-formatter", "phone"),
          (s.value = null));
    }
    isUserDeleting(r) {
      return (r.dataset.previousValue || "").length > r.value.length;
    }
    showFieldErrors(r) {
      r.classList.add("field_with_errors"),
        r.nextElementSibling &&
          r.nextElementSibling.tagName === "LABEL" &&
          r.nextElementSibling.classList.add("field_with_errors");
    }
    get validateable() {
      return this.hasJourneyTarget ? this.currentTrack : this.element;
    }
    get valid() {
      return this.validateable.dataset.valid === "true";
    }
    set valid(r) {
      this.validateable.setAttribute("data-valid", r),
        Yu.default.fire(this.validateable, "validated");
    }
  };
  W(Vn, "targets", ["journey", "flash"]);
  var $n = class extends N {
    connect() {
      let r = this.element.getAttribute("data-controller");
      this.element.setAttribute(
        "data-controller",
        `${r} dynaform--navigation dynaform--validation dynaform--progress dynaform--display`,
      );
    }
  };
  W($n, "targets", []);
  var Xi = class extends N {
    connect() {
      this.hasButtonTarget && this.enableButton();
    }
    enableButton() {
      let r = this.everyValue
        ? this.fieldTargets.every(this.isFilled)
        : this.fieldTargets.some(this.isFilled);
      this.buttonTarget.disabled = !r;
    }
    isFilled(r) {
      return te.isPresent(be.get(r));
    }
  };
  W(Xi, "targets", ["button", "field", "every"]),
    W(Xi, "values", { every: Boolean });
  var Xn = class extends N {
    connect() {
      this.message = this.messageTarget.dataset.message;
    }
    toggle() {
      this.contentTarget.classList.toggle("hidden");
      let r = this.messageTarget.textContent;
      (this.messageTarget.textContent = this.message), (this.message = r);
    }
  };
  W(Xn, "targets", ["message", "content"]);
  var xr = {
      waitForGlobal(r, t) {
        window[r]
          ? t()
          : setTimeout(function () {
              xr.waitForGlobal(r, t);
            }, 100);
      },
      debounce(r, t, n) {
        let s;
        return function () {
          let l = this,
            h = arguments,
            w = function () {
              (s = null), n || r.apply(l, h);
            },
            L = n && !s;
          clearTimeout(s), (s = setTimeout(w, t)), L && r.apply(l, h);
        };
      },
      delegate(r, t, n, s) {
        return r.addEventListener(n, function (l) {
          let h;
          for (h = l.target; !(!(h instanceof Element) || h.matches(t)); )
            h = h.parentNode;
          if (h instanceof Element && s.call(h, l) === !1)
            return l.preventDefault(), l.stopPropagation();
        });
      },
      throttle(r, t) {
        let n;
        return function () {
          let s = arguments,
            l = this;
          n || (r.apply(l, s), (n = !0), setTimeout(() => (n = !1), t));
        };
      },
      scrollY() {
        return window.pageYOffset || window.scrollY;
      },
      overflowedX(r) {
        let t = r.lastElementChild;
        return r.clientWidth < t.offsetLeft + t.clientWidth;
      },
      getPosition(r) {
        let t = 0,
          n = 0;
        for (; r; )
          (t += r.offsetLeft + r.clientLeft),
            (n += r.offsetTop + r.clientTop),
            (r = r.offsetParent);
        return { x: t, y: n };
      },
      scrollToElement(r, t = 0) {
        let n = xr.getPosition(r);
        window.scroll({ top: n.y + t, left: 0, behavior: "smooth" });
      },
      scrollElement(r, t, n = !0) {
        n || ((t.top += r.scrollTop), (t.left += r.scrollLeft)),
          r.scroll({ top: t.top, left: t.left, behavior: "smooth" });
      },
      moveToEndOfContentEditable(r) {
        let t = document.createRange();
        t.selectNodeContents(r), t.collapse(!1);
        let n = window.getSelection();
        n.removeAllRanges(), n.addRange(t);
      },
      facebookAppId() {
        return document
          .querySelector("meta[name='festalab-facebook-app-id']")
          .getAttribute("content");
      },
      platform() {
        return document
          .querySelector("meta[name='festalab-platform']")
          .getAttribute("content");
      },
      locale() {
        return document
          .querySelector("meta[name='festalab-locale']")
          .getAttribute("content");
      },
      currency() {
        return document
          .querySelector("meta[name='festalab-currency']")
          .getAttribute("content");
      },
      device() {
        return this.platform().split("")[1];
      },
      isMobile() {
        return /mobile/.test(xr.platform());
      },
      isDesktop() {
        return /desktop/.test(xr.platform());
      },
      deviceIsSupported() {
        return /supported/.test(xr.platform());
      },
      deviceIsUnSupported() {
        return /unsupported/.test(xr.platform());
      },
      deviceCanShare() {
        return xr.deviceIsSupported() && xr.isMobile() && navigator.share;
      },
      deviceCanShareFiles() {
        let r = [new File([], "test.png", {})];
        return xr.deviceCanShare() && navigator.canShare({ files: r });
      },
      media(r, t) {
        return xr.isMobile() ? r : t;
      },
    },
    de = xr;
  var Kn = class extends N {
    connect() {
      (this.debouncedFilter = de.debounce(() => {
        this.updateList(this.filterItems());
      }, 300)),
        (this.items = this.itemTargets);
    }
    filter() {
      this.debouncedFilter();
    }
    updateList(r) {
      this.items.forEach((t, n) => {
        t.classList.toggle("hidden", !r[n]);
      });
    }
    filterItems() {
      return this.items.map((r) =>
        te.parameterize(r.dataset.filters).includes(this.treatedFilter),
      );
    }
    get treatedFilter() {
      return te.parameterize(this.filterTarget.value);
    }
  };
  W(Kn, "targets", ["filter", "list", "item"]);
  var zo = class extends N {
    connect() {
      this[this.style]();
    }
    temporary() {
      setTimeout(() => {
        this.element.remove();
      }, 4e3);
    }
    form() {}
    get style() {
      return this.data.get("style");
    }
  };
  var Il = Qt(Oe());
  var Gn = class extends N {
    connect() {
      this.initEventHandlers(), this.initSteps(), this.initHistory();
    }
    disconnect() {
      window.removeEventListener("popstate", this.popHistoryCallback),
        document.removeEventListener("keypress", this.keypressCallback);
    }
    initEventHandlers() {
      (this.keypressCallback = this.keypress.bind(this)),
        document.addEventListener("keypress", this.keypressCallback);
    }
    initSteps() {
      this.hasCounterTarget &&
        (this.counterMax = this.counterTarget.textContent.split("/")[1]),
        (this.index = 0);
    }
    initHistory() {
      !this.isMultiStep ||
        ((this.popHistoryCallback = this.popHistory.bind(this)),
        window.addEventListener("popstate", this.popHistoryCallback),
        this.pushHistory());
    }
    input(r) {
      let t = r.currentTarget;
      this.removeFlash(),
        this.removeFieldError(t),
        this.toggleFilled(t),
        this.applyFormat(t),
        this.enforceMaxLength(t),
        this.updateCounter(t),
        (t.dataset.previousValue = t.value);
    }
    change(r) {
      let t = r.currentTarget;
      this.removeFlash(),
        this.removeFieldError(t),
        this.toggleFilled(t),
        this.applyFormat(t),
        this.enforceMaxLength(t),
        this.display(t),
        (t.dataset.previousValue = t.value);
    }
    display(r) {
      this.destinationTargets.forEach((t) => {
        this.setValue(t, r.value);
      });
    }
    setValue(r, t) {
      r.tagName === "IMG" ? (r.src = t) : (r.value = t);
    }
    blur(r) {
      let t = r.currentTarget;
      this.applyBlurFormat(t), this.validateField(t);
    }
    keypress(r) {
      if ((r.which || r.keyCode) !== 13 || !this.isMultiStep) return !0;
      let n = r.target,
        s = Array.from(
          this.currentStep.querySelectorAll(
            "input:not([disabled]), select:not([disabled])",
          ),
        ),
        l = s.indexOf(n);
      l < s.length - 1
        ? s[l + 1].focus()
        : Il.default.fire(this.currentStep.querySelector("button"), "click");
    }
    previous() {
      history.back();
    }
    next() {
      this.validate() && (this.navigate(this.index + 1), this.pushHistory());
    }
    goTo(r) {
      let t = Number(r.currentTarget.dataset.step) - 1;
      this.navigate(t);
    }
    submit() {
      this.validate() &&
        (this.loading(),
        setTimeout(() => Il.default.fire(this.element, "submit"), 10));
    }
    done() {
      this.hasLoadingStepTarget &&
        this.loadingStepTarget.classList.add("hidden");
    }
    loading() {
      this.hasLoadingStepTarget &&
        this.loadingStepTarget.classList.remove("hidden");
    }
    pushHistory() {
      let r = { index: this.index },
        t = this.currentStep.dataset.title;
      this.index === 0 ? history.replaceState(r, t) : history.pushState(r, t);
    }
    popHistory(r) {
      let t = r.state.index;
      t !== void 0 && this.navigate(t);
    }
    addInput(r) {
      let t = document.createElement("div");
      t.className = "form__input form__input--removable";
      let n = document.createElement("input");
      (n.type = "text"),
        (n.name = r.target.dataset.inputName),
        (n.className = r.target.dataset.inputClass),
        (n.maxLength = 255),
        (n.size = 255),
        n.setAttribute("data-target", "form.input"),
        n.setAttribute("data-action", "input->form#input"),
        n.setAttribute("placeholder", r.target.dataset.inputPlaceholder);
      let s = document.createElement("button");
      (s.className = "icon icon--remove"),
        s.setAttribute("data-action", "click->form#removeInput"),
        s.setAttribute("type-action", "button"),
        t.appendChild(n),
        t.appendChild(s),
        r.target.insertAdjacentElement("beforebegin", t),
        r.preventDefault();
    }
    removeInput(r) {
      r.target.parentNode.remove();
    }
    removeFlash() {
      this.flashTargets.forEach((r) => {
        r.remove();
      });
    }
    removeFieldError(r) {
      r.parentNode.querySelectorAll(".field_with_errors").forEach((n) => {
        n.classList.remove("field_with_errors");
      });
      let t = r.parentNode.nextElementSibling;
      !!t && t.classList.contains("error") && t.remove();
    }
    toggleFilled(r) {
      r.classList.toggle("filled", !!r.value);
    }
    applyFormat(r) {
      let t = r.dataset.formatter;
      if (!t || this.isUserDeleting(r)) return;
      let n = j.apply(t, r.value),
        s = n.length;
      (r.value = n.substr(0, r.maxLength || s)),
        r.type === "text" && (r.focus(), r.setSelectionRange(s, s));
    }
    applyBlurFormat(r) {
      let t = r.dataset.blurFormatter;
      t && (r.value = j.apply(t, r.value));
    }
    enforceMaxLength(r) {
      let t = r.dataset.maxlength,
        n = r.value;
      !!t && n.length >= t && (r.value = n.substr(0, t));
    }
    updateCounter(r) {
      let t = r.dataset.counter,
        n = r.value.length,
        s = r.dataset.maxlength;
      t &&
        (document.getElementById(`${r.id}_counter`).textContent = `${n}/${s}`);
    }
    validateField(r) {
      let t = r.value,
        n = r.dataset.required,
        s =
          r.dataset.validator || r.dataset.blurFormatter || r.dataset.formatter,
        l = !0;
      return (
        te.isEmpty(t) ? (l = !n) : s && (l = qo.assert(s, t)),
        l ? this.removeFieldError(r) : this.showFieldErrors(r),
        l
      );
    }
    navigate(r) {
      let t = this.currentStep;
      this.index = r;
      let n = this.currentStep;
      t.classList.add("hidden"),
        n.classList.remove("hidden"),
        (this.titleTarget.textContent = n.dataset.title),
        this.hasCounterTarget &&
          (this.counterTarget.textContent = `${n.dataset.index}/${this.counterMax}`),
        this.hasProgressTarget &&
          (this.progressTarget.dataset.progress = n.dataset.index),
        this.hasPreviousButtonTarget &&
          this.previousButtonTarget.classList.toggle(
            "invisible",
            this.index === 0,
          );
    }
    validate() {
      let r = this.currentStep,
        t = Array.from(r.querySelectorAll("input"));
      return (
        t.forEach((n) => this.validateField(n)),
        !t.some((n) => n.classList.contains("field_with_errors"))
      );
    }
    isUserDeleting(r) {
      return (r.dataset.previousValue || "").length > r.value.length;
    }
    showFieldErrors(r) {
      r.classList.add("field_with_errors"),
        r.nextElementSibling &&
          r.nextElementSibling.classList.add("field_with_errors");
    }
    get currentStep() {
      return this.stepTargets[this.index];
    }
    get isMultiStep() {
      return this.hasStepTarget;
    }
  };
  W(Gn, "targets", [
    "flash",
    "input",
    "step",
    "loadingStep",
    "errorStep",
    "title",
    "counter",
    "progress",
    "previousButton",
    "destination",
  ]);
  var Ju = Qt(Pn()),
    Bl = Qt(Fo());
  var Yn = class extends N {
    connect() {
      this.data.set("photo", this.photoTarget.src),
        this.toggleElement(this.subHeaderMobileTarget, !1),
        this.toggleElement(this.subHeaderDesktopTarget, !1);
    }
    change(r) {
      let t = r.target.files[0];
      !!t && /image\/(jpg|jpeg|png|webp|gif)/.test(t.type)
        ? (this.toggleElements("loading"),
          (0, Ju.default)(
            t,
            (n) => {
              (this.photoTarget.src = n.src), this.initMobileEditor();
            },
            { noRevoke: !0 },
          ))
        : (this.toggleError(), (r.target.value = ""));
    }
    restart() {
      this.cropper.destroy(),
        (this.cropper = null),
        (this.fileTarget.value = ""),
        (this.photoTarget.src = this.data.get("photo")),
        this.toggleElements("restart");
    }
    edit() {
      this.toggleElements("loading"), this.initMobileEditor();
    }
    initMobileEditor() {
      this.cropper = new Bl.default(this.photoTarget, {
        aspectRatio: 1 / 1.15,
        viewMode: 1,
        autoCropArea: 1,
        cropBoxResizable: !1,
        cropBoxMovable: !1,
        dragMode: "move",
        crop: (r) => {
          this.exifRotate || (this.exifRotate = r.detail.rotate),
            (this.mobileXTarget.value = r.detail.x),
            (this.mobileYTarget.value = r.detail.y),
            (this.mobileHeightTarget.value = r.detail.height),
            (this.mobileWidthTarget.value = r.detail.width),
            (this.mobileRotateTarget.value = r.detail.rotate - this.exifRotate);
        },
        ready: () => {
          this.toggleElements("editing");
        },
      });
    }
    initDesktopEditor() {
      this.cropper.destroy(),
        (this.cropper = new Bl.default(this.photoTarget, {
          aspectRatio: 16 / 9,
          viewMode: 1,
          autoCropArea: 1,
          cropBoxResizable: !1,
          cropBoxMovable: !1,
          dragMode: "move",
          crop: (r) => {
            this.exifRotate || (this.exifRotate = r.detail.rotate),
              (this.desktopXTarget.value = r.detail.x),
              (this.desktopYTarget.value = r.detail.y),
              (this.desktopHeightTarget.value = r.detail.height),
              (this.desktopWidthTarget.value = r.detail.width),
              (this.desktopRotateTarget.value =
                r.detail.rotate - this.exifRotate);
          },
          ready: () => {
            this.toggleElements("next");
          },
        }));
    }
    toggleElements(r) {
      switch (r) {
        case "loading":
          this.element.classList.add("photo-editor--editing"),
            this.toggleElement(this.photoTarget, !1, "invisible"),
            this.toggleElement(this.chooseButtonTarget, !1),
            this.hasResizeButtonTarget &&
              this.toggleElement(this.resizeButtonTarget, !1),
            this.hasRemoveButtonTarget &&
              this.toggleElement(this.removeButtonTarget, !1);
          break;
        case "editing":
          this.toggleElement(this.photoTarget, !0, "invisible"),
            this.toggleElement(this.nextButtonTarget, !0),
            this.toggleElement(this.subHeaderMobileTarget, !0),
            this.toggleElement(this.restartButtonTarget, !0);
          break;
        case "next":
          this.toggleElement(this.photoTarget, !0, "invisible"),
            this.toggleElement(this.nextButtonTarget, !1),
            this.toggleElement(this.subHeaderMobileTarget, !1),
            this.toggleElement(this.subHeaderDesktopTarget, !0),
            this.toggleElement(this.saveButtonTarget, !0);
          break;
        default:
          this.element.classList.remove("photo-editor--editing"),
            this.toggleElement(this.restartButtonTarget, !1),
            this.toggleElement(this.nextButtonTarget, !1),
            this.toggleElement(this.chooseButtonTarget, !0),
            this.toggleElement(this.subHeaderMobileTarget, !1),
            this.toggleElement(this.subHeaderDesktopTarget, !1),
            this.toggleElement(this.saveButtonTarget, !1),
            this.hasResizeButtonTarget &&
              this.toggleElement(this.resizeButtonTarget, this.hasPhoto()),
            this.hasRemoveButtonTarget &&
              this.toggleElement(this.removeButtonTarget, this.hasPhoto());
      }
    }
    nextDevice() {
      this.toggleElements("loading"), this.initDesktopEditor();
    }
    toggleElement(r, t, n = "hidden") {
      r.classList.toggle(n, !t);
    }
    toggleError() {
      this.errorTarget.classList.toggle("hidden");
    }
    hasPhoto() {
      return this.data.get("hasPhoto") === "true";
    }
  };
  W(Yn, "targets", [
    "mobileX",
    "mobileY",
    "mobileRotate",
    "mobileWidth",
    "mobileHeight",
    "desktopX",
    "desktopY",
    "desktopRotate",
    "desktopWidth",
    "desktopHeight",
    "file",
    "photo",
    "resizeButton",
    "chooseButton",
    "restartButton",
    "saveButton",
    "removeButton",
    "nextButton",
    "imageLoader",
    "error",
    "subHeaderMobile",
    "subHeaderDesktop",
    "backButton",
  ]);
  var Jn = class extends N {
    connect() {
      this.calculateActiveItems(),
        this.hasHeaderExplanationTarget &&
          ((this.observer = new IntersectionObserver(this.sticky.bind(this))),
          this.observer.observe(this.headerExplanationTarget));
    }
    calculateActiveItems() {
      let r = 0,
        t = 0;
      this.checkboxTargets.forEach((s) => {
        s.checked && (r++, (t += Number(s.dataset.price)));
      });
      let n = j.currency(t);
      (this.activeItemsTotalTarget.textContent = n.substring(0, n.length - 3)),
        (this.activeItemsQuantityTarget.textContent = r);
    }
    sticky(r, t) {
      r.forEach((n) => {
        this.headerInfoTarget.classList.toggle("sticky", !n.isIntersecting);
      });
    }
  };
  W(Jn, "targets", [
    "headerExplanation",
    "headerInfo",
    "checkbox",
    "activeItemsQuantity",
    "activeItemsTotal",
  ]);
  var Qu = Qt(Pn());
  var Qn = class extends N {
    change(r) {
      let t = r.target.files[0];
      !!t && /image\/(jpg|jpeg|png|webp|gif)/.test(t.type)
        ? (0, Qu.default)(
            t,
            (n) => {
              (this.previewImageTarget.src = n.src),
                this.data.set("loaded", !0);
            },
            { noRevoke: !0 },
          )
        : (r.target.value = "");
    }
  };
  W(Qn, "targets", ["previewImage", "file"]);
  var Zn = class extends N {
    connect() {
      (this.hasImageTarget || this.hasButtonTarget) &&
        ((this.checkImage = setInterval(this.loadImage.bind(this), 1e3)),
        this.hasButtonTarget && (this.buttonTarget.disabled = !0));
    }
    disconnect() {
      this.checkImage && clearInterval(this.checkImage);
    }
    loadImage() {
      this.data.get("url") &&
        fetch(this.data.get("url"))
          .then((r) => r.json())
          .then((r) => {
            r.url.startsWith("http") &&
              (this.hasImageTarget && (this.imageTarget.src = r.url),
              this.hasButtonTarget && (this.buttonTarget.disabled = !1),
              clearInterval(this.checkImage));
          })
          .catch(() => {});
    }
  };
  W(Zn, "targets", ["image", "button"]);
  var Ho = class extends N {
    connect() {
      (this.observer = new IntersectionObserver(this.toggle.bind(this), {
        threshold: this.threshold(),
      })),
        this.observer.observe(this.target());
    }
    disconnect() {
      this.observer.unobserve(this.target());
    }
    toggle(r, t) {
      let n = r[0],
        s = this.element.dataset.intersectorNotIntersecting
          ? !n.isIntersecting
          : n.isIntersecting;
      this.element.classList.toggle(this.class(), s);
    }
    target() {
      return document.querySelector(this.element.dataset.intersectorTarget);
    }
    threshold() {
      return this.element.dataset.intersectorThreshold || 1;
    }
    class() {
      return this.element.dataset.intersectorCssClass;
    }
  };
  var ts = class extends N {
    connect() {
      (this.dirty = !1), this.initAnimation(), this.initEventHandlers();
    }
    initAnimation() {
      setTimeout(() => {
        this.element.classList.remove("modal--initial");
      }, 10),
        setTimeout(() => {
          this.disableWindowScrolling();
        }, 310);
    }
    initEventHandlers() {
      document.addEventListener("keyup", this.handleEscapeKey.bind(this)),
        this.element.addEventListener("input", () => {
          this.dirty = !0;
        }),
        this.element.addEventListener("submit", () => {
          this.dirty = !1;
        });
    }
    close() {
      if (this.dirty) return this.openDismissDialog();
      this.element.classList.add("modal--closed"),
        this.enableWindowScrolling(),
        setTimeout(() => {
          this.element.remove();
        }, 315);
    }
    previousSection(r) {
      let t = r.target.closest("[data-target='modal.section']"),
        n = this.sectionTargets[this.sectionTargets.indexOf(t) - 1],
        s = t.dataset.dialogTitle;
      s && this.setTitle(s),
        t.classList.add("hidden"),
        n.classList.remove("hidden");
    }
    nextSection(r) {
      let t = r.currentTarget.dataset.sectionSkip || 0,
        n = r.target.closest("[data-target='modal.section']"),
        s = this.sectionTargets[this.sectionTargets.indexOf(n) + 1 + Number(t)],
        l = n.dataset.dialogTitle;
      l && this.setTitle(l),
        n.classList.add("hidden"),
        s.classList.remove("hidden");
    }
    handleEscapeKey(r) {
      r.key === "Escape" && this.close();
    }
    disableWindowScrolling() {
      this.element.classList.contains("modal--closed") ||
        ((this.y = window.scrollY),
        (this.x = window.scrollX),
        document.body.classList.add("noscroll"));
    }
    enableWindowScrolling() {
      document.body.classList.remove("noscroll"),
        window.scrollTo(this.x, this.y);
    }
    confirmDismiss() {
      document.querySelector(".confirmation").remove(),
        (this.dirty = !1),
        this.close();
    }
    cancelDismiss() {
      document.querySelector(".confirmation").remove();
    }
    openDismissDialog() {
      this.element.insertAdjacentElement("beforeend", this.dismissDialog());
    }
    dismissDialog() {
      let r = document.createElement("div");
      r.className = "confirmation modal modal--minimal";
      let t = document.createElement("div");
      (t.className = "modal__overlay"),
        t.setAttribute("data-action", "click->modal#cancelDismiss"),
        r.appendChild(t);
      let n = document.createElement("div");
      (n.className = "confirmation__content"), r.appendChild(n);
      let s = document.createElement("p");
      (s.className = "confirmation__message"),
        (s.textContent = "Descartar altera\xE7\xF5es?"),
        n.appendChild(s);
      let l = document.createElement("div");
      (l.className = "confirmation__actions"), n.appendChild(l);
      let h = document.createElement("button");
      (h.className = "confirmation__cancel"),
        (h.type = "button"),
        (h.title = "Cancelar"),
        (h.textContent = "Cancelar"),
        h.setAttribute("data-action", "modal#cancelDismiss"),
        l.appendChild(h);
      let w = document.createElement("button");
      return (
        (w.className = "confirmation__accept"),
        (w.type = "button"),
        (w.title = "Ok"),
        (w.textContent = "Descartar"),
        w.setAttribute("data-action", "modal#confirmDismiss"),
        l.appendChild(w),
        r
      );
    }
    set dirty(r) {
      this.data.set("dirty", r);
    }
    get dirty() {
      return this.data.get("dirty") === "true";
    }
  };
  W(ts, "targets", ["section"]);
  var es = class extends N {
    initialize() {
      this.observer = new MutationObserver(this.cartItemsChanged.bind(this));
    }
    connect() {
      this.observer.observe(this.listTarget, { childList: !0, subtree: !0 });
    }
    disconnect() {
      this.observer.disconnect();
    }
    cartItemsChanged() {
      (this.quantity = this.calculateItemsQuantity()),
        (this.subtotal = this.calculateItemsTotal()),
        (this.total = this.calculateItemsTotal());
    }
    calculateItemsTotal() {
      return this.itemTotalTargets.reduce(
        (r, t) => r + Number(t.dataset.total),
        0,
      );
    }
    calculateItemsQuantity() {
      return this.itemQuantityTargets.reduce((r, t) => r + Number(t.value), 0);
    }
    set quantity(r) {
      r === 1
        ? (this.quantityTarget.textContent = `${r} produto`)
        : (this.quantityTarget.textContent = `${r} produtos`);
    }
    set subtotal(r) {
      this.subtotalTarget.textContent = j.currency(r);
    }
    set total(r) {
      this.hasTotalTarget && (this.totalTarget.textContent = j.currency(r));
    }
  };
  W(es, "targets", [
    "list",
    "itemQuantity",
    "itemTotal",
    "quantity",
    "subtotal",
    "total",
  ]);
  var rs = class extends N {
    connect() {
      this.calculateTotal();
    }
    calculateTotal() {
      this.total = this.price * this.quantity;
    }
    set total(r) {
      (this.totalTarget.dataset.total = r),
        (this.totalTarget.textContent = j.currency(r));
    }
    get price() {
      return Number(this.quantityTarget.dataset.cartItemPrice);
    }
    get quantity() {
      return this.quantityTarget.value;
    }
  };
  W(rs, "targets", ["total", "quantity"]);
  var is = class extends N {
    setCurrentGuests() {
      this.currentGuestsTargets.forEach((r, t) => {
        t === 0
          ? (r.textContent = `de ${this.companions[0].name} ${this.companions[0].lastName}`)
          : (r.textContent = `dos ${this.companions.length} que voc\xEA j\xE1 adicionou`);
      }),
        this.hasPersonsListTarget && this.preparePersonsList();
    }
    preparePersonsList() {
      (this.activePersonList.innerHTML = ""),
        this.addPersonToList(this.guest),
        this.companions.forEach((r, t) => {
          this.addPersonToList(r, t, !0);
        });
    }
    removeGuest(r, t = !0) {
      let n = r.target;
      t && n.parentNode.remove();
      let s = Number(n.dataset.trackId),
        l = document.querySelector(`[data-track-id='${s}']`);
      (l.dataset.track = "removed"),
        l.querySelectorAll('input[type="text"]').forEach((h) => h.remove());
    }
    addPersonToList(r, t, n = !1) {
      let s = this.fetchTrackID(t),
        l = document.createElement("div");
      (l.className = "bg-white brd-rds mb-10 mh-18 flx"),
        this.appendRemoveButton(l, s, t, n),
        this.appendPerson(l, r),
        this.appendEditButton(l, s, t, n),
        this.activePersonList.appendChild(l);
    }
    appendRemoveButton(r, t, n, s) {
      if (!s) {
        let h = document.createElement("div");
        (h.className = "counter-weight w-40"), r.appendChild(h);
        return;
      }
      let l = document.createElement("button");
      (l.className = "w-40 bg bg-pos bg-cross-red"),
        (l.type = "button"),
        (l.id = `remove_${n}`),
        l.setAttribute("data-action", "models--rsvp#removeGuest"),
        l.setAttribute("data-track-id", t),
        r.appendChild(l);
    }
    appendPerson(r, t) {
      let n = document.createElement("span");
      (n.className = "txt-s15 txt-gray txt-cnt txt--llp p18 flx--fld"),
        (n.textContent = `${t.name} ${t.lastName}`),
        r.appendChild(n);
    }
    appendEditButton(r, t, n, s) {
      if (!s) {
        let h = document.createElement("div");
        (h.className = "counter-weight w-40"), r.appendChild(h);
        return;
      }
      let l = document.createElement("button");
      (l.className = "w-40 bg bg-pos bg-pencil-simple-purple"),
        (l.type = "button"),
        (l.id = `edit_${n}`),
        l.setAttribute("data-action", "dynaform--navigation#goToAndRewind"),
        l.setAttribute("data-track-id", t),
        r.appendChild(l);
    }
    fetchTrackID(r) {
      return r === void 0
        ? document.querySelector('[data-track="guest_info"]').dataset.trackId
        : document.querySelectorAll('[data-track="companion_name"]')[r].dataset
            .trackId;
    }
    get guest() {
      let r = this.element.querySelector('[name="event_rsvp[name]"]').value,
        t = this.element.querySelector('[name="event_rsvp[last_name]"]').value;
      return { name: r, lastName: t };
    }
    get companions() {
      let r = Array.from(
          this.element.querySelectorAll('[name="event_rsvp[guest_names][]"]'),
        ).map((n) => n.value),
        t = Array.from(
          this.element.querySelectorAll(
            '[name="event_rsvp[guest_last_names][]"]',
          ),
        ).map((n) => n.value);
      return r.map((n, s) => ({ name: n, lastName: t[s] }));
    }
    get activePersonList() {
      return this.personsListTargets[this.personsListTargets.length - 1];
    }
    get activeCompanionName() {
      return this.companionNameTargets[this.companionNameTargets.length - 1];
    }
    get activeCompanionLastName() {
      return this.companionLastNameTargets[
        this.companionLastNameTargets.length - 1
      ];
    }
  };
  W(is, "targets", [
    "companionName",
    "companionLastName",
    "currentGuests",
    "personsList",
  ]);
  var Zu = Qt(Oe());
  var ns = class extends N {
    connect() {
      this.debouncedFetch = de.debounce(() => {
        let r = new URLSearchParams({
          id: this.mozTarget.value,
          title: this.titleTarget.value,
          identifier: this.identifierTarget.value,
          category: this.categoryTarget.value,
        }).toString();
        Zu.default.ajax({
          type: "GET",
          url: `${this.data.get("url")}/?${r}`,
          dataType: "json",
        });
      }, 500);
    }
    display() {
      this.mozTarget.value && this.debouncedFetch();
    }
  };
  W(ns, "targets", ["moz", "title", "identifier", "category"]);
  var ss = class extends N {
    initialize() {
      this.observer = new MutationObserver(this.multiply.bind(this));
    }
    connect() {
      this.observer.observe(this.multiplierTarget, { attributes: !0 }),
        this.observer.observe(this.multiplicandTarget, { attributes: !0 });
    }
    disconnect() {
      this.observer.disconnect();
    }
    multiply() {
      let r = Number(be.get(this.multiplierTarget)),
        t = Number(be.get(this.multiplicandTarget));
      this.product = (t * r).toFixed(2);
    }
    set product(r) {
      be.set(this.productTarget, r, { event: "multiplied" });
    }
  };
  W(ss, "targets", ["multiplier", "multiplicand", "product"]);
  var os = class extends N {
    connect() {
      (this.observer = new IntersectionObserver(this.sticky.bind(this))),
        this.observer.observe(document.querySelector("#cover"));
    }
    disconnect() {
      this.observer.unobserve(document.querySelector("#cover"));
    }
    initialize() {
      this.createOverlay();
    }
    open() {
      this.toggle(this.overlayTarget, !0), this.toggle(this.itemsTarget, !0);
    }
    close() {
      this.toggle(this.overlayTarget, !1),
        this.toggle(this.itemsTarget, !1),
        this.toggle(this.subitemsTarget, !1);
    }
    next(r) {
      this.toggle(this.itemsTarget, !1),
        this.toggle(this.subitemsTarget, !0),
        r.preventDefault();
    }
    prev() {
      this.toggle(this.itemsTarget, !0), this.toggle(this.subitemsTarget, !1);
    }
    sticky(r, t) {
      // r.forEach((n) => {
      //   this.barTarget.classList.toggle("section--sticky", !n.isIntersecting);
      // });
    }
    createOverlay() {
      let r = document.createElement("div");
      r.classList.add("overlay", "hidden"),
        r.setAttribute(
          "style",
          "display:block; background-color: rgba(255,255,255,0.8); z-index:1;",
        ),
        r.setAttribute("data-action", "click->navigation#close"),
        r.setAttribute("data-target", "navigation.overlay"),
        document.getElementById("navigation").prepend(r);
    }
    toggle(r, t) {
      r.classList.toggle("hidden", !t);
    }
  };
  W(os, "targets", ["items", "subitems", "bar", "overlay"]);
  var th = Qt(Oe());
  var as = class extends N {
    connect() {
      this.blockSensitiveParameters();
    }
    generate(r) {
      !this.validate() ||
        (be.fire(r.target, "generating"),
        pagarme.client
          .connect({ encryption_key: this.data.get("cryptoKey") })
          .then((t) => t.security.encrypt(this.card))
          .then((t) => {
            (this.hash = t),
              this.blockSensitiveParameters(),
              th.default.fire(document.querySelector("form"), "submit");
          }));
    }
    validate() {
      let { card: r } = pagarme.validate({ card: this.card });
      this.brand = r.brand;
      let t = !0;
      return (
        (t = t & this.validateField("card_holder_name", r, this.nameTarget)),
        (t = t & this.validateField("card_number", r, this.numberTarget, 19)),
        (t =
          t & this.validateField("card_expiration_date", r, this.monthTarget)),
        (t =
          t & this.validateField("card_expiration_date", r, this.yearTarget)),
        (t = t & this.validateField("card_cvv", r, this.cvvTarget, 3)),
        t
      );
    }
    validateField(r, t, n, s) {
      return (t[r] && te.isPresent(this.card[r])) ||
        (t[r] && !!s && this.card[r].length === s)
        ? !0
        : (n.classList.add("field_with_errors"),
          n.nextElementSibling.classList.add("field_with_errors"),
          !1);
    }
    blockSensitiveParameters() {
      this.nameTarget.removeAttribute("name"),
        this.numberTarget.removeAttribute("name"),
        this.monthTarget.removeAttribute("name"),
        this.yearTarget.removeAttribute("name"),
        this.cvvTarget.removeAttribute("name");
    }
    get card() {
      let r = this.nameTarget.value,
        t = this.numberTarget.value,
        n = this.monthTarget.value,
        s = Number(this.yearTarget.value) % 2e3,
        l = this.cvvTarget.value;
      return {
        card_holder_name: r,
        card_number: t,
        card_expiration_date: `${n}/${s}`,
        card_cvv: l,
      };
    }
    set hash(r) {
      this.hashTarget.value = r;
    }
    set brand(r) {
      this.numberTarget.classList.add(r);
    }
  };
  W(as, "targets", ["name", "number", "month", "year", "cvv", "hash"]);
  var Ki = class extends N {
    connect() {
      this.blockSensitiveParameters();
    }
    generate(r) {
      !this.validate() ||
        (be.fire(r.target, "generating"),
        fetch(`/api/tuna/${this.paymentValue}/new_session`)
          .then((t) => t.json())
          .then((t) => {
            let n = t.sessionId;
            Tuna(n)
              .tokenizator()
              .generate(this.card)
              .then((l) => this.submit(n, l.token))
              .catch((l) => this.handleError(r, l));
          })
          .catch((t) => this.handleError(r, t)));
    }
    submit(r, t) {
      (this.tokenTarget.value = r),
        (this.hashTarget.value = t),
        this.blockSensitiveParameters(),
        be.fire(document.querySelector("form"), "submit", null, {
          bubbles: !0,
        });
    }
    handleError(r, t) {
      (t = new Error(`Tuna card error at payment ${this.paymentValue}: ${t}`)),
        console.log(t),
        be.fire(r.target, "rejected"),
        this.errorTarget.classList.remove("hidden");
    }
    validate() {
      let r = !0;
      return (
        (r = r & this.validateField(this.nameTarget)),
        (r = r & this.validateField(this.numberTarget, 19)),
        (r = r & this.validateField(this.monthTarget, 2)),
        (r = r & this.validateField(this.yearTarget, 2)),
        (r = r & this.validateField(this.cvvTarget)),
        r
      );
    }
    validateField(r, t) {
      let n = !0;
      return (
        (n = n && te.isPresent(r.value)),
        (n = n && (!t || r.value.length === t)),
        n ||
          (r.classList.add("field_with_errors"),
          r.nextElementSibling.classList.add("field_with_errors")),
        n
      );
    }
    blockSensitiveParameters() {
      this.nameTarget.removeAttribute("name"),
        this.numberTarget.removeAttribute("name"),
        this.monthTarget.removeAttribute("name"),
        this.yearTarget.removeAttribute("name"),
        this.cvvTarget.removeAttribute("name");
    }
    get card() {
      return {
        cardHolderName: this.nameTarget.value,
        cardNumber: this.numberTarget.value.replace(/ /g, ""),
        expirationMonth: Number(this.monthTarget.value),
        expirationYear: Number(this.yearTarget.value) + 2e3,
        cvv: this.cvvTarget.value,
        singleUse: !0,
      };
    }
  };
  W(Ki, "targets", [
    "name",
    "number",
    "month",
    "year",
    "cvv",
    "hash",
    "token",
    "error",
  ]),
    W(Ki, "values", { payment: Number });
  var Dg = {
      unencodedQueryString(r) {
        return Object.keys(r)
          .map((t) => t + "=" + r[t])
          .join("&");
      },
    },
    eh = Dg;
  var rh = Qt(Oe());
  var ls = class extends N {
    connect() {
      this.initButton();
    }
    initButton() {
      let r = setInterval(() => {
        typeof paypal == "object" &&
          typeof paypal.Buttons == "function" &&
          (clearInterval(r),
          paypal
            .Buttons({
              style: {
                color: "white",
                size: "responsive",
                shape: "rect",
                label: "paypal",
                layout: "horizontal",
                fundingicons: "false",
                tagline: "false",
                height: 55,
              },
              createOrder: this.createOrder.bind(this),
              onApprove: this.onApprove.bind(this),
            })
            .render("#paypal-button-container"));
      }, 100);
    }
    createOrder(r, t) {
      return t.order.create({
        purchase_units: [
          {
            description: this.itemValue,
            amount: { value: this.priceValue, currency_code: "BRL" },
          },
        ],
        application_context: {
          brand_name: "FestaLab",
          locale: "pt-BR",
          shipping_preference: "NO_SHIPPING",
        },
      });
    }
    onApprove(r, t) {
      document.getElementById("loader").classList.toggle("hidden"),
        document.getElementById("paypal-button").classList.toggle("hidden");
      let n = this.checkoutValue;
      return t.order.capture().then(function (s) {
        let l = {
          paypal_order_id: r.orderID,
          paypal_payer_id: r.payerID,
          paypal_status: s.status,
          email: s.payer.email_address,
        };
        rh.default.ajax({
          url: `/checkout/${n}/convite/paypal`,
          type: "POST",
          data: eh.unencodedQueryString(l),
        });
      });
    }
  };
  W(ls, "values", { item: String, price: Number, checkout: String });
  var ih = Qt(Pn()),
    nh = Qt(Fo());
  var cs = class extends N {
    connect() {
      this.data.set("photo", this.photoTarget.src);
    }
    change(r) {
      let t = r.target.files[0];
      !!t && /image\/(jpg|jpeg|png|webp|gif)/.test(t.type)
        ? (this.toggleElements("loading"),
          (0, ih.default)(
            t,
            (n) => {
              (this.photoTarget.src = n.src), this.initEditor();
            },
            { noRevoke: !0 },
          ))
        : (this.toggleError(), (r.target.value = ""));
    }
    restart() {
      this.cropper.destroy(),
        (this.cropper = null),
        (this.fileTarget.value = ""),
        (this.photoTarget.src = this.data.get("photo")),
        this.toggleElements("restart");
    }
    edit() {
      this.toggleElements("loading"), this.initEditor();
    }
    initEditor() {
      this.cropper = new nh.default(this.photoTarget, {
        aspectRatio: 720 / 1024,
        viewMode: 1,
        autoCropArea: 1,
        cropBoxResizable: !1,
        cropBoxMovable: !1,
        dragMode: "move",
        crop: (r) => {
          this.exifRotate || (this.exifRotate = r.detail.rotate),
            (this.xTarget.value = r.detail.x),
            (this.yTarget.value = r.detail.y),
            (this.heightTarget.value = r.detail.height),
            (this.widthTarget.value = r.detail.width),
            (this.rotateTarget.value = r.detail.rotate - this.exifRotate);
        },
        ready: () => {
          this.toggleElements("editing");
        },
      });
    }
    toggleElements(r) {
      switch (r) {
        case "loading":
          this.element.classList.add("photo-editor--editing"),
            this.toggleElement(this.photoTarget, !1, "invisible"),
            this.toggleElement(this.chooseButtonTarget, !1),
            this.hasResizeButtonTarget &&
              this.toggleElement(this.resizeButtonTarget, !1),
            this.hasRemoveButtonTarget &&
              this.toggleElement(this.removeButtonTarget, !1);
          break;
        case "editing":
          this.toggleElement(this.photoTarget, !0, "invisible"),
            this.toggleElement(this.saveButtonTarget, !0),
            this.toggleElement(this.restartButtonTarget, !0);
          break;
        default:
          this.element.classList.remove("photo-editor--editing"),
            this.toggleElement(this.restartButtonTarget, !1),
            this.toggleElement(this.saveButtonTarget, !1),
            this.toggleElement(this.chooseButtonTarget, !0),
            this.hasResizeButtonTarget &&
              this.toggleElement(this.resizeButtonTarget, this.hasPhoto()),
            this.hasRemoveButtonTarget &&
              this.toggleElement(this.removeButtonTarget, this.hasPhoto());
      }
    }
    toggleElement(r, t, n = "hidden") {
      r.classList.toggle(n, !t);
    }
    toggleError() {
      this.errorTarget.classList.toggle("hidden");
    }
    hasPhoto() {
      return this.data.get("hasPhoto") === "true";
    }
  };
  W(cs, "targets", [
    "x",
    "y",
    "rotate",
    "width",
    "height",
    "file",
    "photo",
    "resizeButton",
    "chooseButton",
    "restartButton",
    "saveButton",
    "removeButton",
    "imageLoader",
    "error",
  ]);
  var us = class extends N {
    toggleLabel() {
      let r = this.inputTarget.value.indexOf("fakepath") + 9;
      (this.labelTarget.innerText = this.inputTarget.value.slice(r, -4)),
        this.labelTarget.classList.add("txt-s20"),
        (this.uploadNewTarget.innerText = "Escolher outro arquivo"),
        this.uploadNewTarget.classList.add("mt-12");
    }
  };
  W(us, "targets", ["label", "input", "uploadNew"]);
  var sh = Qt(Oe());
  var pi = class extends N {
    fetch(r) {
      if (this.cached) return;
      let t = r.currentTarget;
      this.start(t),
        sh.default.ajax({
          url: this.urlValue,
          type: "GET",
          success: (n, s, l) => {
            this.contentTarget.innerHTML = l.response;
          },
          complete: () => {
            this.complete(t, !1);
          },
        });
    }
    start(r) {
      (r.disabled = !0),
        this.contentTarget.classList.add(this.loaderClass),
        (this.contentTarget.innerHTML = "");
    }
    complete(r) {
      (r.disabled = !1), this.contentTarget.classList.remove(this.loaderClass);
    }
    get cached() {
      return this.cacheValue && this.contentTarget.childElementCount > 0;
    }
    get url() {
      return this.data.get("url");
    }
  };
  W(pi, "targets", ["content"]),
    W(pi, "classes", ["loader"]),
    W(pi, "values", { url: String, cache: Boolean });
  var Gi = class extends N {
    initialize() {
      (this.successCallback = this.success.bind(this)),
        (this.errorCallback = this.error.bind(this));
    }
    connect() {
      this.element.addEventListener("ajax:success", this.successCallback),
        this.element.addEventListener("ajax:error", this.errorCallback);
    }
    disconnect() {
      this.element.removeEventListener("ajax:success", this.successCallback),
        this.element.removeEventListener("ajax:error", this.errorCallback);
    }
    success() {
      this.element.setAttribute("data-ajax", "success"),
        this.hasRedirectToValue &&
          (Turbo.cache.clear(),
          Turbo.visit(this.redirectToValue, { action: "replace" }));
    }
    error(r) {
      let t = r.detail[0].body.firstElementChild.id;
      t
        ? (document.querySelector(`#${t}`).outerHTML =
            r.detail[0].querySelector(`#${t}`).outerHTML)
        : (document.querySelector("main").outerHTML =
            r.detail[0].querySelector("main").outerHTML);
    }
  };
  W(Gi, "values", { redirectTo: String }),
    W(Gi, "classes", { success: String });
  var oh = Qt(Oe());
  var Yi = class extends N {
    connect() {
      (this.inputTarget.dataset.action = `${this.inputTarget.dataset.action} input->remote-input#input`),
        this.submitOnConnectValue && this.fetch();
    }
    fetch() {
      this.disableTrigger(),
        (this.status = "sent"),
        oh.default.ajax({
          url: this.url,
          type: "POST",
          data: this.queryString(),
          success: (r, t, n) => {
            this.success = n.response;
          },
          error: (r, t, n) => {
            this.error = n.response;
          },
          complete: () => {
            this.enableTrigger();
          },
        });
    }
    input() {
      (this.error = null), (this.success = null), (this.status = "none");
      let { value: r, maxLength: t } = this.inputTarget;
      this.isAutoTrigger &&
        r.length === t &&
        (this.inputTarget.blur(), this.fetch());
    }
    disableTrigger() {
      this.toggleTrigger(!1);
    }
    enableTrigger() {
      this.toggleTrigger(!0);
    }
    toggleTrigger(r) {
      this.isAutoTrigger &&
        (this.inputTarget.blur(),
        (this.inputTarget.disabled = !r),
        this.inputTarget.classList.toggle("disabled", !r)),
        this.hasTriggerTarget &&
          this.triggerTargets.forEach((t) => {
            (t.disabled = !r), t.classList.toggle("disabled", !r);
          });
    }
    queryString() {
      let r = [];
      return (
        this.inputTargets.map((t) => r.push(`${t.name}=${t.value}`)),
        r.join("&")
      );
    }
    get url() {
      return this.data.get("url");
    }
    get isAutoTrigger() {
      return this.triggerValue === "automatic";
    }
    get clearErrorOnInput() {
      return this.hasClearErrorValue ? this.clearErrorValue : !0;
    }
    get clearSuccessOnInput() {
      return this.hasClearSuccessValue ? this.clearSuccessValue : !1;
    }
    set success(r) {
      r
        ? ((this.contentTarget[this.replaceMode] = r),
          (this.status = "success"))
        : this.clearSuccessOnInput && (this.contentTarget.innerHTML = "");
    }
    set error(r) {
      r
        ? ((this.errorTarget.innerHTML = r),
          (this.status = "error"),
          this.clearInputOnErrorValue && (this.inputTarget.value = ""))
        : this.clearErrorOnInput && (this.errorTarget.innerHTML = "");
    }
    set status(r) {
      this.element.setAttribute("data-ajax", r);
    }
    get replaceMode() {
      return this.replaceModeValue || "innerHTML";
    }
  };
  W(Yi, "targets", ["input", "trigger", "content", "error"]),
    W(Yi, "values", {
      trigger: String,
      clearError: Boolean,
      clearSuccess: Boolean,
      submitOnConnect: Boolean,
      replaceMode: String,
      clearInputOnError: Boolean,
    });
  var ah = Qt(Oe()),
    Wo = class extends N {
      open() {
        this.fetch((r, t, n) => {
          document.querySelector(".modal") ||
            document.body.insertAdjacentHTML("beforeend", n.response);
        });
      }
      replace() {
        this.fetch((r, t, n) => {
          document.querySelector(".modal") &&
            (document.querySelector(".modal").outerHTML = n.response);
        });
      }
      fetch(r) {
        ah.default.ajax({
          url: this.data.get("url"),
          type: "GET",
          success: r,
          error: (t, n, s) => {},
        });
      }
    };
  var Pg = {
      whatsapp(r) {
        return (
          "https://api.whatsapp.com/send?text=" + window.encodeURIComponent(r)
        );
      },
      facebook(r) {
        let t = de.facebookAppId();
        return de.isMobile()
          ? `fb-messenger://share/?link=${r}&app_id=${t}`
          : `http://www.facebook.com/dialog/send?link=${r}&app_id=${t}&redirect_uri=${r}`;
      },
    },
    hs = Pg;
  var lh = Qt(Oe());
  var ds = class extends N {
    start(r) {
      de.deviceCanShare()
        ? this.prepareForNativeSharing(r)
        : this.prepareForAppSharing();
    }
    prepareForNativeSharing(r) {
      try {
        navigator
          .share({ text: this.message })
          .then((t, n) => {})
          .catch((t) => {
            if (t.name !== "AbortError") throw t;
          }),
          r.stopImmediatePropagation(),
          lh.default.fire(this.element.closest(".modal"), "close");
      } catch (t) {
        this.prepareForAppSharing();
      }
    }
    prepareForAppSharing() {
      (this.clipboardTarget.dataset.clipboardText = this.message),
        (this.whatsappTarget.href = hs.whatsapp(this.message));
    }
    get message() {
      let r = this.messageTarget.value;
      return te.isPresent(r) ? r : this.messageTarget.placeholder;
    }
  };
  W(ds, "targets", ["message", "clipboard", "whatsapp"]);
  var fs = class extends N {
    connect() {
      this.fragmentTargets.forEach((r) => {
        this.addSetoutData(r);
      });
    }
    save() {
      let r = this.formTarget.cloneNode(!0);
      this.fragmentTargets.forEach((t) => {
        let n = t.cloneNode(!0);
        this.removeSetoutData(n);
        let s = document.createElement("input");
        (s.name = "template[fragments][][content]"),
          (s.value = n.outerHTML),
          r.appendChild(s);
      }),
        (this.saveButtonTarget.disabled = !0),
        (this.closeButtonTarget.disabled = !0),
        fetch(r.action, { method: "POST", body: new FormData(r) })
          .then(() => {
            alert("Template salvo com sucesso!");
          })
          .finally(() => {
            (this.saveButtonTarget.disabled = !1),
              (this.closeButtonTarget.disabled = !1);
          });
    }
    addFragment() {
      let r = document.createElement("div");
      this.addSetoutData(r), this.imageTarget.appendChild(r);
    }
    removeFragment() {
      !this.activeFragment ||
        (this.activeFragment.remove(), (this.activeFragment = null));
    }
    cloneFragment() {
      if (!this.activeFragment) return;
      let r = this.activeFragment.cloneNode(!0);
      (r.dataset.y = parseInt(r.dataset.y) + 100),
        this.imageTarget.appendChild(r);
    }
    editFragment(r) {
      this.activeFragment = r.currentTarget;
    }
    addUrl() {
      let r = document.createElement("div"),
        t = this.imageTarget.getBoundingClientRect(),
        n = this.zoomControlTarget.value;
      (r.dataset.size = "21"),
        (r.dataset.text = "festalab.com.br"),
        (r.dataset.width = "211"),
        (r.dataset.height = "60"),
        (r.style.lineHeight = "24px"),
        (r.dataset.x = (t.width / n - 211).toString()),
        (r.dataset.y = (t.height / n - 60).toString()),
        (r.dataset.font = "Gotham-Rounded-Book"),
        this.addSetoutData(r),
        this.imageTarget.appendChild(r);
    }
    addLogo(r) {
      let t = document.createElement("div"),
        n = this.zoomControlTarget.value,
        s = r.currentTarget.id,
        l = this.imageTarget.getBoundingClientRect(),
        h = l.width / n,
        w = l.height / n,
        L = { width: 300 * (h / 1200), height: 130 * (w / 1800) };
      (t.dataset.width = L.width.toString()),
        (t.dataset.height = L.height.toString()),
        (t.dataset.text = `<img src="https://s3.sa-east-1.amazonaws.com/cdn.festalab.com.br/festalab/logos/${s}.png">`),
        (t.dataset.x = (h - L.width).toString()),
        (t.dataset.y = (w - L.height).toString()),
        this.addSetoutData(t),
        this.imageTarget.appendChild(t);
    }
    toggleGrid(r) {
      this.fragmentTargets.forEach((t) => {
        t.setAttribute("data-background", r.currentTarget.checked);
      });
    }
    zoom(r) {
      Object.assign(this.imageTarget.style, {
        transform: `scale(${r.currentTarget.value})`,
      }),
        this.fragmentTargets.forEach((t) => {
          t.setAttribute("data-scale", r.currentTarget.value);
        });
    }
    updateTools(r) {
      let t = r.dataset;
      (this.xTarget.value = t.x),
        (this.yTarget.value = t.y),
        (this.widthTarget.value = t.width),
        (this.heightTarget.value = t.height),
        (this.skewXTarget.value = t.skewX),
        (this.skewYTarget.value = t.skewY),
        (this.rotateTarget.value = t.rotate),
        (this.fontTarget.value = t.font),
        (this.sizeTarget.value = t.size),
        (this.lineHeightTarget.value = t.lineHeight),
        (this.colorTarget.value = t.color),
        (this.alignTarget.value = t.align),
        (this.valignTarget.value = t.valign),
        (this.letterCaseTarget.value = t.letterCase),
        (this.letterSpacingTarget.value = t.letterSpacing),
        (this.splicerTarget.value = t.splicer),
        (this.textTarget.value = t.text),
        (this.textShadowXTarget.value = t.textShadowX || ""),
        (this.textShadowYTarget.value = t.textShadowY || ""),
        (this.textShadowRTarget.value = t.textShadowR || ""),
        (this.textShadowColorTarget.value = t.textShadowColor || ""),
        (this.textStrokeColorTarget.value = t.textStrokeColor || ""),
        (this.textStrokeWidthTarget.value = t.textStrokeWidth || "");
    }
    toolChanged(r) {
      let t = r.currentTarget;
      if (
        (this.activeFragment.setAttribute(`data-${t.name}`, t.value),
        t.name === "splicer")
      ) {
        this.activeFragment.setAttribute(
          "data-text",
          t.options[t.selectedIndex].getAttribute("data-text"),
        );
        let n = t.options[t.selectedIndex].getAttribute(
          "data-text-resizer-group",
        );
        n
          ? this.activeFragment.setAttribute("data-text-resizer-group", n)
          : this.activeFragment.removeAttribute("data-text-resizer-group");
      }
      t.name === "font" && this.loadFont(t.value);
    }
    addSetoutData(r) {
      (r.className = "setout__fragment"),
        r.setAttribute("data-controller", "setout--fragment"),
        r.setAttribute("data-setout--editor-target", "fragment"),
        r.setAttribute("data-action", "click->setout--editor#editFragment"),
        r.setAttribute("data-scale", this.zoomControlTarget.value),
        r.setAttribute("data-background", this.showGrid);
    }
    removeSetoutData(r) {
      (r.style.background = ""),
        r.classList.remove("setout__fragment"),
        r.classList.remove("setout__fragment--active"),
        r.removeAttribute("data-background"),
        r.removeAttribute("data-scale"),
        r.removeAttribute("data-max-height"),
        r.removeAttribute("data-action"),
        r.removeAttribute("data-controller"),
        r.children[0].removeAttribute("data-original-font-size"),
        r.children[0].removeAttribute("data-current-font-size");
    }
    loadFont(r) {
      let t = `https://cdn.festalab.com.br/fonts/${r}.woff2`,
        n = `https://cdn.festalab.com.br/fonts/${r}.woff`,
        s = `https://cdn.festalab.com.br/fonts/${r}.ttf`,
        l = document.createElement("style");
      (l.innerHTML = `@font-face { font-family: '${r}'; font-weight: 400; font-style: normal; src: url('${t}') format('woff2'), url('${n}') format('woff'), url('${s}') format('truetype'); }`),
        document.body.appendChild(l);
    }
    set activeFragment(r) {
      this.activeFragment &&
        this.activeFragment.classList.remove("setout__fragment--active"),
        r &&
          ((this.fragment = r),
          this.fragment.classList.add("setout__fragment--active"),
          this.updateTools(r));
    }
    get activeFragment() {
      return this.fragment;
    }
    get showGrid() {
      return this.gridControlTarget.checked;
    }
  };
  W(fs, "targets", [
    "form",
    "tools",
    "image",
    "fragment",
    "gridControl",
    "zoomControl",
    "saveButton",
    "closeButton",
    "splicer",
    "x",
    "y",
    "width",
    "height",
    "skewX",
    "skewY",
    "rotate",
    "font",
    "size",
    "lineHeight",
    "color",
    "align",
    "valign",
    "letterCase",
    "letterSpacing",
    "text",
    "textShadowX",
    "textShadowY",
    "textShadowR",
    "textShadowColor",
    "textStrokeColor",
    "textStrokeWidth",
  ]);
  var bi = class {
    constructor(t, n) {
      (this.element = t),
        (this.callback = n),
        (this.handlers = {
          down: this.down.bind(this),
          move: this.move.bind(this),
          up: this.up.bind(this),
        }),
        t.addEventListener("mousedown", this.handlers.down),
        t.addEventListener("touchstart", this.handlers.down);
    }
    down(t) {
      this.isResizeEvent(t) ||
        ((this.boundaries = this.element.offsetParent.getBoundingClientRect()),
        (this.x = t.clientX || t.touches[0].clientX),
        (this.y = t.clientY || t.touches[0].clientY),
        (this.needRAF = !0),
        document.addEventListener("mousemove", this.handlers.move),
        document.addEventListener("touchmove", this.handlers.move),
        document.addEventListener("mouseup", this.handlers.up),
        document.addEventListener("touchend", this.handlers.up));
    }
    move(t) {
      t.preventDefault(),
        this.needRAF &&
          ((this.needRAF = !1),
          requestAnimationFrame(() => {
            let n = this.element.getBoundingClientRect(),
              s = t.clientX || t.touches[0].clientX,
              l = t.clientY || t.touches[0].clientY,
              h = this.enforceHorizontalBoundary(n, s - this.x),
              w = this.enforceVerticalBoundary(n, l - this.y),
              L = this.calculateRelativePosition(
                s,
                this.boundaries.x,
                this.boundaries.width,
              ),
              I = this.calculateRelativePosition(
                l,
                this.boundaries.y,
                this.boundaries.height,
              );
            this.callback({
              dx: h,
              dy: w,
              pageX: L,
              pageY: I,
              rectangle: n,
              boundaries: this.boundaries,
              target: this.element,
            }),
              (this.x = s),
              (this.y = l),
              (this.needRAF = !0);
          }));
    }
    up() {
      (this.needRAF = !1),
        document.removeEventListener("mousemove", this.handlers.move),
        document.removeEventListener("touchmove", this.handlers.move),
        document.removeEventListener("mouseup", this.handlers.up),
        document.removeEventListener("touchend", this.handlers.up);
    }
    enforceHorizontalBoundary(t, n) {
      if (n < 0) {
        let s = t.x - this.boundaries.x;
        return Math.abs(n) > s ? -s : n;
      } else {
        let s = this.boundaries.x + this.boundaries.width - (t.x + t.width);
        return n > s ? s : n;
      }
    }
    enforceVerticalBoundary(t, n) {
      if (n < 0) {
        let s = t.y - this.boundaries.y;
        return Math.abs(n) > s ? -s : n;
      } else {
        let s = this.boundaries.y + this.boundaries.height - (t.y + t.height);
        return n > s ? s : n;
      }
    }
    calculateRelativePosition(t, n, s) {
      return t < n ? 0 : t > n + s ? s : t - n;
    }
    isResizeEvent(t) {
      if (t.target.classList.contains("setout__fragment")) {
        let n = t.target.getBoundingClientRect(),
          s = t.clientX - n.right,
          l = t.clientY - n.bottom;
        return s > -15 && l > -15;
      }
    }
  };
  var ms = class extends N {
    initialize() {
      this.initText(),
        this.initWrapper(),
        this.initInteraction(),
        this.initObserver(),
        this.updateLegacyFragment(),
        this.updateBackground();
    }
    connect() {
      this.observer.observe(this.element, {
        attributes: !0,
        attributeOldValue: !0,
      });
    }
    disconnect() {
      this.observer.disconnect(this.element);
    }
    initWrapper() {
      this.element.setAttribute(
        "style",
        "position:absolute;top:0;left:0;display:flex;",
      ),
        (this.x = this.x || 0),
        (this.y = this.y || 0),
        (this.skewX = this.skewX || 0),
        (this.skewY = this.skewY || 0),
        (this.rotate = this.rotate || 0),
        (this.width = this.width || 400),
        (this.height = this.height || 150),
        (this.align = this.align || "center"),
        (this.valign = this.valign || "center"),
        this.updateWrapperStyle();
    }
    initText() {
      if (!this.hasTextTarget) {
        let r = document.createElement("span");
        r.setAttribute("data-setout--fragment-target", "text"),
          r.setAttribute("data-allow-font-resize", "true"),
          r.setAttribute("style", ""),
          this.element.appendChild(r);
      }
      (this.font = this.font || "Gotham-Rounded-Medium"),
        (this.size = this.size || 50),
        (this.lineHeight = this.lineHeight || this.size),
        (this.color = this.color || "000000"),
        (this.letterCase = this.letterCase || "none"),
        (this.letterSpacing = this.letterSpacing || 0),
        (this.text =
          this.textTarget.innerHTML || this.text || "Insira seu texto"),
        (this.textShadowColor = this.textShadowColor || "FFFFFFFF"),
        (this.textStrokeColor = this.textStrokeColor || "FFFFFFFF"),
        this.updateTextStyle(),
        this.updateTextContent();
    }
    initInteraction() {
      this.draggable = new bi(this.element, this.drag.bind(this));
    }
    initObserver() {
      (this.observer = new MutationObserver(this.changed.bind(this))),
        this.element.addEventListener("mouseup", this.resize.bind(this));
    }
    drag(r) {
      (this.x += r.dx / this.scale),
        (this.y += r.dy / this.scale),
        this.updateWrapperStyle();
    }
    resize(r) {
      if (this.skewX || this.skewY || this.rotate) return;
      let t = this.element.getBoundingClientRect();
      (this.width = t.width / this.scale),
        (this.height = t.height / this.scale),
        this.updateWrapperStyle();
    }
    changed(r) {
      r.some((n) => {
        let s = n.attributeName;
        if (s.indexOf("data-") === -1) return !1;
        let l = this.element.getAttribute(s);
        return l === n.oldValue
          ? !1
          : (l || this.element.removeAttribute(s), !0);
      }) &&
        (this.updateSplicer(),
        this.updateWrapperStyle(),
        this.updateTextStyle(),
        this.updateBackground(),
        this.updateTextContent(),
        this.updateResizerGroup());
    }
    updateWrapperStyle() {
      let r = { left: "flex-start", center: "center", right: "flex-end" },
        t = { top: "flex-start", center: "center", bottom: "flex-end" };
      Object.assign(this.element.style, {
        width: `${this.width}px`,
        height: `${this.height}px`,
        transform: `translate(${this.x}px, ${this.y}px) rotate(${this.rotate}deg) skew(${this.skewX}deg, ${this.skewY}deg)`,
        justifyContent: r[this.align],
        alignItems: t[this.valign],
        textAlign: this.align,
      });
    }
    updateTextStyle() {
      Object.assign(this.textTarget.style, {
        width: this.constrainContent() ? "100%" : null,
        maxHeight: this.constrainContent() ? "100%" : null,
        fontFamily: this.font,
        fontSize: `${this.size}px`,
        lineHeight: `${this.lineHeight}px`,
        textTransform: this.letterCase || "none",
        letterSpacing: `${this.letterSpacing}px`,
        color: `#${this.color}`,
        textShadow: this.textShadow,
        webkitTextStrokeColor: `#${this.textStrokeColor}`,
        webkitTextStrokeWidth: `${this.textStrokeWidth}px`,
      });
    }
    updateLegacyFragment() {
      this.element.dataset.target &&
        (this.element.removeAttribute("data-target"),
        this.element.setAttribute("data-setout--editor-target", "fragment")),
        this.textTarget.removeAttribute("data-original-line-height"),
        this.textTarget.removeAttribute("data-original-font-size");
    }
    updateBackground() {
      if (
        this.element.dataset.background === "true" &&
        this.color.length >= 6
      ) {
        let [r, t, n] = this.color
          .replace("#", "")
          .match(/.{2}/g)
          .map((s) => parseInt(s, 16));
        this.element.style.background = `rgba(${r}, ${t}, ${n}, 0.2)`;
      } else this.element.style.background = "";
    }
    updateTextContent() {
      this.textTarget.innerHTML = this.text;
    }
    updateResizerGroup() {
      let r = this.element.getAttribute("data-text-resizer-group");
      r
        ? this.textTarget.setAttribute("data-resizer-group", r)
        : this.textTarget.removeAttribute("data-resizer-group");
    }
    updateSplicer() {
      let r = this.element.dataset.splicer;
      r
        ? this.textTarget.setAttribute("id", r.replace(/_/g, "-"))
        : this.textTarget.removeAttribute("id");
    }
    constrainContent() {
      return this.splicer === "photo";
    }
    set background(r) {
      this.element.setAttribute("data-background", r), this.updateBackground();
    }
    get background() {
      return this.element.dataset.background;
    }
    set x(r) {
      this.element.setAttribute("data-x", r.toFixed(0));
    }
    get x() {
      return Number(this.element.dataset.x);
    }
    set y(r) {
      this.element.setAttribute("data-y", r.toFixed(0));
    }
    get y() {
      return Number(this.element.dataset.y);
    }
    set skewX(r) {
      this.element.setAttribute("data-skew-x", r);
    }
    get skewX() {
      return Number(this.element.dataset.skewX);
    }
    set skewY(r) {
      this.element.setAttribute("data-skew-y", r);
    }
    get skewY() {
      return Number(this.element.dataset.skewY);
    }
    set rotate(r) {
      this.element.setAttribute("data-rotate", r);
    }
    get rotate() {
      return Number(this.element.dataset.rotate);
    }
    set width(r) {
      this.element.setAttribute("data-width", r.toFixed(0));
    }
    get width() {
      return Number(this.element.dataset.width);
    }
    set height(r) {
      this.element.setAttribute("data-height", r.toFixed(0));
    }
    get height() {
      return Number(this.element.dataset.height);
    }
    set align(r) {
      this.element.setAttribute("data-align", r);
    }
    get align() {
      return this.element.dataset.align;
    }
    set valign(r) {
      this.element.setAttribute("data-valign", r);
    }
    get valign() {
      return this.element.dataset.valign;
    }
    set letterCase(r) {
      this.element.setAttribute("data-letter-case", r);
    }
    get letterCase() {
      return this.element.dataset.letterCase;
    }
    set letterSpacing(r) {
      this.element.setAttribute("data-letter-spacing", r);
    }
    get letterSpacing() {
      return this.element.dataset.letterSpacing;
    }
    get textShadowX() {
      return this.element.dataset.textShadowX;
    }
    get textShadowY() {
      return this.element.dataset.textShadowY;
    }
    get textShadowR() {
      return this.element.dataset.textShadowR;
    }
    get textShadowColor() {
      let r = this.element.dataset.textShadowColor;
      if (r) return r.replace("#", "");
    }
    set textShadowColor(r) {
      this.element.setAttribute("data-text-shadow-color", r);
    }
    get textStrokeColor() {
      let r = this.element.dataset.textStrokeColor;
      if (r) return r.replace("#", "");
    }
    set textStrokeColor(r) {
      this.element.setAttribute("data-text-stroke-color", r);
    }
    get textStrokeWidth() {
      return this.element.dataset.textStrokeWidth || "0";
    }
    set textStrokeWidth(r) {
      this.element.setAttribute("data-text-stroke-width", r);
    }
    get textShadow() {
      return this.textShadowX &&
        this.textShadowY &&
        this.textShadowR &&
        this.textShadowColor
        ? `${this.textShadowX}px ${this.textShadowY}px ${this.textShadowR}px #${this.textShadowColor}`
        : "none";
    }
    set font(r) {
      this.element.setAttribute("data-font", r);
    }
    get font() {
      return this.element.dataset.font;
    }
    set size(r) {
      this.element.setAttribute("data-size", r);
    }
    get size() {
      return Number(this.element.dataset.size);
    }
    set splicer(r) {
      this.element.setAttribute("data-splicer", r),
        this.textTarget.setAttribute("id", r.replace(/_/g, "-"));
    }
    get splicer() {
      return this.element.dataset.splicer;
    }
    set lineHeight(r) {
      this.element.setAttribute(
        "data-line-height",
        r.toFixed(2).replace(".", ","),
      );
    }
    get lineHeight() {
      let r = parseFloat(this.element.dataset.lineHeight);
      return r && r <= 2 ? this.size * r : r;
    }
    set color(r) {
      this.element.setAttribute("data-color", r), this.updateBackground();
    }
    get color() {
      return this.element.dataset.color;
    }
    set text(r) {
      this.element.setAttribute("data-text", r);
    }
    get text() {
      return this.element.dataset.text;
    }
    get scale() {
      return Number(this.element.dataset.scale || 1);
    }
  };
  W(ms, "targets", ["text"]);
  var ch = Qt(Oe());
  var gs = class extends N {
    connect() {
      this.draggable = new bi(this.controlTarget, this.drag.bind(this));
    }
    drag(r) {
      let t = r.boundaries.width,
        n = r.pageX / t;
      (this.labelTarget.textContent = parseInt(n * 100) + "%"),
        (r.target.style.paddingLeft = n * 100 + "%"),
        (this.inputTarget.value = n.toFixed(2)),
        ch.default.fire(this.inputTarget, "change");
    }
  };
  W(gs, "targets", ["label", "control", "input"]);
  var ps = class extends N {};
  W(ps, "targets", []);
  var Uo = class extends N {
    clone() {
      let r = this.element.cloneNode(!0);
      (r.querySelector("h2").textContent += " c\xF3pia"),
        this.element.insertAdjacentElement("afterEnd", r);
    }
    remove() {
      this.element.remove();
    }
  };
  var Vo = class extends N {
    reflectVertical() {
      document
        .querySelectorAll('[data-controller="setout-pdf--fragment"]')
        .forEach((r) => {
          let t = r.querySelector('[name="template[fragments][][y]"]'),
            n = r.querySelector('[name="template[fragments][][rotate]"]');
          te.isEmpty(t.value) ||
            te.isEmpty(n.value) ||
            ((t.value = this.height - Number(t.value)),
            (n.value = 180 - Number(n.value)));
        });
    }
    get height() {
      return Number(this.data.get("height")) - 72;
    }
  };
  var uh = Qt(Oe());
  var bs = class extends N {
    initialize() {
      this.prepareImageForSharing();
    }
    connect() {
      this.debouncedSubmit = de.debounce((r) => {
        r.form.querySelector("input[type='submit']").click();
      }, 1e3);
    }
    dirty(r) {
      (r.target.form.dataset.status = "dirty"), (this.allowSharing = !1);
    }
    save(r) {
      this.debouncedSubmit(r.target);
    }
    changesSaved(r) {
      r.target.form.dataset.status === "valid" && (this.allowSharing = !0);
    }
    chooseSharingMode(r) {
      de.deviceCanShare()
        ? this.prepareForNativeSharing(r)
        : this.prepareForAppSharing(r);
    }
    whatsapp(r) {
      let t = this.message;
      (t = `${t}

${this.formattedUrl}`),
        (r.target.href = hs.whatsapp(t));
    }
    facebook(r) {
      let t = this.formattedUrl;
      r.target.href = hs.facebook(t);
    }
    prepareImageForSharing() {
      !this.imageUrl ||
        !de.deviceCanShareFiles() ||
        ((this.allowSharing = !1),
        fetch(this.imageUrl)
          .then((r) => {
            if (r.ok) return r.blob();
            throw Error(r.statusText);
          })
          .then((r) => {
            this.imageFile = new File([r], "dot.png", { type: "image/png" });
          })
          .finally(() => {
            this.allowSharing = !0;
          }));
    }
    prepareForNativeSharing(r) {
      try {
        let t = {
          title: this.title,
          text: this.message,
          url: this.formattedUrl,
          files: this.imageFile ? [this.imageFile] : [],
        };
        navigator
          .share(t)
          .then((n, s) => {})
          .catch((n) => {
            if (n.name !== "AbortError") throw n;
          }),
          r.stopImmediatePropagation(),
          uh.default.fire(this.element.closest(".modal"), "close");
      } catch (t) {
        this.prepareForAppSharing();
      }
    }
    prepareForAppSharing() {
      this.clipboardTarget.dataset.clipboardText = this.formattedUrl;
    }
    set allowSharing(r) {
      this.proceedButtonTarget.disabled = !r;
    }
    get formattedUrl() {
      return `${this.urlTarget.dataset.prefix}${this.urlTarget.value}`;
    }
    get message() {
      return this.messageTarget.value.replace(/http.*/, "");
    }
    get title() {
      return this.data.get("title");
    }
    get imageUrl() {
      return (this.data.get("sharableImageUrl") || "").replace(
        "https://",
        "https://s3.amazonaws.com/",
      );
    }
  };
  W(bs, "targets", ["proceedButton", "url", "message", "clipboard"]);
  var vs = class extends N {
    initialize() {
      (this.progressCallback = this.progress.bind(this)),
        (this.ticking = !1),
        this.indexable && this.paginate();
    }
    connect() {
      this.contentTarget.addEventListener("scroll", this.progressCallback),
        this.togglePrevious(),
        this.toggleNext();
    }
    disconnect() {
      this.contentTarget.removeEventListener("scroll", this.progressCallback);
    }
    previous() {
      (this.contentTarget.scrollLeft -= this.contentTarget.offsetWidth / 0.8),
        this.togglePrevious(),
        this.toggleNext(),
        this.indexable && ((this.index = this.index - 1), this.toggleDot());
    }
    next() {
      (this.contentTarget.scrollLeft += this.contentTarget.offsetWidth / 0.8),
        this.togglePrevious(),
        this.toggleNext(),
        this.indexable && ((this.index = this.index + 1), this.toggleDot());
    }
    progress() {
      !this.ticking &&
        this.hasProgressTarget &&
        (window.requestAnimationFrame(() => {
          let r =
            (this.progressTarget.offsetWidth -
              this.scrollerTarget.offsetWidth) *
            this.scrollPercentage;
          (this.scrollerTarget.style.transform = `translateX(${r}px)`),
            (this.ticking = !1);
        }),
        (this.ticking = !0));
    }
    togglePrevious() {
      !this.hasPreviousTarget ||
        this.toggleNavigation(
          this.previousTarget,
          !this.scrollable && this.scrollPercentage > 0,
        );
    }
    toggleNext() {
      !this.hasNextTarget ||
        this.toggleNavigation(
          this.nextTarget,
          !this.scrollable && this.scrollPercentage < 1,
        );
    }
    toggleDot() {
      this.dotTargets.forEach((r, t) => {
        r.classList.toggle("slider__dot--active", t === this.index);
      });
    }
    toggleNavigation(r, t) {
      r.style.display = t ? "block" : "none";
    }
    paginate() {
      !this.hasDotsTarget ||
        this.itemTargets.length < 2 ||
        (this.itemTargets.forEach((r, t) => {
          let n = document.createElement("span");
          (n.className = "slider__dot"),
            n.setAttribute("data-target", "slider.dot"),
            n.setAttribute("data-slider-dot-index", t),
            r.setAttribute("data-slider-item-index", t),
            this.dotsTarget.appendChild(n);
        }),
        this.toggleDot());
    }
    get indexable() {
      return Boolean(this.data.get("indexable"));
    }
    get index() {
      return Number(this.data.get("index"));
    }
    set index(r) {
      return this.data.set("index", r);
    }
    get scrollable() {
      return (
        this.data.get("scrollable") === "true" &&
        this.contentTarget.offsetWidth < this.contentTarget.scrollWidth
      );
    }
    get scrollPercentage() {
      return (
        this.contentTarget.scrollLeft /
        (this.contentTarget.scrollWidth - this.contentTarget.offsetWidth)
      );
    }
  };
  W(vs, "targets", [
    "progress",
    "scroller",
    "content",
    "item",
    "previous",
    "next",
    "dots",
    "dot",
  ]);
  var ys = class extends N {
    initialize() {
      this.paginate(), (this.index = 0);
    }
    paginate() {
      this.contentTarget.classList.add("flx", "ovr");
      let r = this.slidesPerPage;
      this.slideTargets.forEach((t) => {
        t.classList.add("flx--fxd"), (t.style.flexBasis = `${100 / r}%`);
      }),
        this.addPageMarkers();
    }
    slide() {}
    previous() {
      this.index > 0 && this.index--;
    }
    next() {
      this.index < this.pages - 1 && this.index++;
    }
    showCurrentSlides() {
      let r = this.index * this.slidesPerPage,
        t = r + this.slidesPerPage;
      this.slideTargets.forEach((n, s) => {
        n.classList.toggle("hidden", s < r || s >= t);
      }),
        this.markCurrentPage(this.index);
    }
    addPageMarkers() {
      if (!(this.pages < 2 || !this.hasCounterTarget))
        for (let r = 0; r < this.pages; r++) {
          let t = document.createElement("span");
          (t.className = "slideshow__marker"),
            t.setAttribute("data-target", "slideshow.marker"),
            t.setAttribute("data-slideshow-marker-index", r),
            this.counterTarget.append(t);
        }
    }
    markCurrentPage() {
      this.markerTargets.forEach((r, t) => {
        r.classList.toggle("slideshow__marker--active", t === this.index);
      });
    }
    set index(r) {
      this.data.set("index", r), this.showCurrentSlides(r);
    }
    get index() {
      return Number(this.data.get("index"));
    }
    get pages() {
      return Math.ceil(this.slideTargets.length / this.slidesPerPage);
    }
    get slidesPerPage() {
      let r = this.data.get("slidesPerPage");
      if (!r) return 1;
      let t = r.split("|").map((n) => parseInt(n, 10));
      return de.isMobile() ? t[0] : t[1];
    }
  };
  W(ys, "targets", ["content", "slide", "counter", "marker"]);
  var ws = class extends N {
    tab(r) {
      let t = r.target.dataset.tab;
      this.titleTargets.forEach((n) => {
        n.classList.toggle("tabs__title--active", n.dataset.tab === t);
      }),
        this.contentTargets.forEach((n) => {
          n.classList.toggle("tabs__tab--active", n.dataset.tab === t);
        });
    }
  };
  W(ws, "targets", ["content", "title"]);
  var Xo = class extends N {
    connect() {
      this.bootstrap().then((r) => {
        r.start();
      });
    }
    bootstrap() {
      return Ot(this, null, function* () {
        let { default: r } = yield Promise.resolve().then(() => (mh(), fh));
        return r;
      });
    }
  };
  var Fg = {
      format(r) {
        return r.toLocaleString("pt-BR", { minimumFractionDigits: 2 });
      },
    },
    Ko = Fg;
  var Go = Qt(Oe());
  var Es = class extends N {
    preview(r) {
      let t = r.target.selectedOptions[0].dataset;
      (this.price = t.price),
        (this.width = t.width),
        (this.height = t.height),
        (this.length = t.length);
    }
    set price(r) {
      (this.priceTarget.value = r),
        (this.priceDisplayTarget.textContent = j.currency(r));
    }
    set width(r) {
      (this.widthTarget.value = Ko.format(r / 10)),
        Go.default.fire(this.widthTarget, "input");
    }
    set height(r) {
      (this.heightTarget.value = Ko.format(r / 10)),
        Go.default.fire(this.heightTarget, "input");
    }
    set length(r) {
      (this.lengthTarget.value = Ko.format(r / 10)),
        Go.default.fire(this.lengthTarget, "input");
    }
  };
  W(Es, "targets", [
    "price",
    "width",
    "height",
    "length",
    "priceDisplay",
    "descriptionDisplay",
    "imageDisplay",
  ]);
  var vi = class extends N {
    off() {
      this.toggableTargets.forEach((r) => {
        this.isDisableToggle
          ? (r.disabled = !0)
          : r.classList.remove(this.activeClass);
      });
    }
    on() {
      this.toggableTargets.forEach((r) => {
        this.isDisableToggle
          ? (r.disabled = !1)
          : r.classList.add(this.activeClass);
      });
    }
    toggle() {
      this.lockScrollingValue ? this.toggleAndLock() : this.toggleOnly();
    }
    toggleOnly() {
      this.toggableTargets.forEach((r) => {
        this.isDisableToggle
          ? (r.disabled = !r.disabled)
          : r.classList.toggle(this.activeClass);
      });
    }
    toggleAndLock() {
      this.isOn ? this.toggleOff() : this.toggleOn();
    }
    toggleOn() {
      this.on(),
        this.lockScrollingValue &&
          setTimeout(() => {
            this.disableWindowScrolling();
          }, this.lockScrollingDelayValue);
    }
    toggleOff() {
      this.off(), this.lockScrollingValue && this.enableWindowScrolling();
    }
    disableWindowScrolling() {
      this.isOff ||
        ((this.y = window.scrollY),
        (this.x = window.scrollX),
        document.body.classList.add("noscroll"));
    }
    enableWindowScrolling() {
      document.body.classList.remove("noscroll"),
        window.scrollTo(this.x, this.y);
    }
    get isOn() {
      return this.isDisableToggle
        ? !this.toggableTarget.disabled
        : this.toggableTarget.classList.contains(this.activeClass);
    }
    get isOff() {
      return !this.isOn;
    }
    get isDisableToggle() {
      return this.typeValue === "disable";
    }
  };
  W(vi, "targets", ["toggable"]),
    W(vi, "classes", ["active"]),
    W(vi, "values", {
      lockScrolling: Boolean,
      lockScrollingDelay: Number,
      type: String,
    });
  var As = class extends N {
    toggleSteps() {
      this.stepsTarget.classList.toggle("hidden"),
        this.moreTextTarget.classList.toggle("hidden"),
        this.moreArrowTarget.classList.toggle("hidden");
    }
  };
  W(As, "targets", ["moreText", "moreArrow", "steps"]);
  yt.register("addition", Vi);
  yt.register("ajax", Do);
  yt.register("alerts", Po);
  yt.register("animation", Dn);
  yt.register("async-render", Oo);
  yt.register("avatar-photo-editor", On);
  yt.register("binder", Mn);
  yt.register("blend--navigation", Fn);
  yt.register("carousel", In);
  yt.register("clipboard", Io);
  yt.register("color-picker", Nn);
  yt.register("confirmation", Bo);
  yt.register("consumption", $i);
  yt.register("countdown", jn);
  yt.register("direct-upload", No);
  yt.register("dynaform--calendar", qn);
  yt.register("dynaform--display", zn);
  yt.register("dynaform--navigation", Hn);
  yt.register("dynaform--parent", or);
  yt.register("dynaform--progress", Wn);
  yt.register("dynaform--time", Un);
  yt.register("dynaform--validation", Vn);
  yt.register("dynaform", $n);
  yt.register("enabler", Xi);
  yt.register("expandable", Xn);
  yt.register("filters", Kn);
  yt.register("flash", zo);
  yt.register("form", Gn);
  yt.register("full-photo-editor", Yn);
  yt.register("gift-registry", Jn);
  yt.register("image-preview-loader", Qn);
  yt.register("imager", Zn);
  yt.register("intersector", Ho);
  yt.register("modal", ts);
  yt.register("models--cart", es);
  yt.register("models--cart-item", rs);
  yt.register("models--rsvp", is);
  yt.register("moz", ns);
  yt.register("multiplication", ss);
  yt.register("navigation", os);
  yt.register("pagarme", as);
  yt.register("tuna", Ki);
  yt.register("paypal", ls);
  yt.register("photo-editor", cs);
  yt.register("receipts", us);
  yt.register("remote-anchor", pi);
  yt.register("remote-form", Gi);
  yt.register("remote-input", Yi);
  yt.register("remote-modal", Wo);
  yt.register("send-message", ds);
  yt.register("setout--editor", fs);
  yt.register("setout--fragment", ms);
  yt.register("setout--slider", gs);
  yt.register("setout--splicer", ps);
  yt.register("setout-pdf--fragment", Uo);
  yt.register("setout-pdf--template", Vo);
  yt.register("share", bs);
  yt.register("slider", vs);
  yt.register("slideshow", ys);
  yt.register("tabs", ws);
  yt.register("text-editor", Xo);
  yt.register("third-party--digipix", Es);
  yt.register("toggler", vi);
  yt.register("virtual-room", As);
  var yh = Qt(ph());
  vh();
  var wh = {
    start() {
      this.forEach(), yh.default.polyfill();
    },
    forEach() {
      window.NodeList &&
        !NodeList.prototype.forEach &&
        (NodeList.prototype.forEach = function (r, t) {
          t = t || window;
          for (var n = 0; n < this.length; n++) r.call(t, this[n], n, this);
        }),
        window.HTMLCollection &&
          !HTMLCollection.prototype.forEach &&
          (HTMLCollection.prototype.forEach = function (r, t) {
            t = t || window;
            for (var n = 0; n < this.length; n++) r.call(t, this[n], n, this);
          });
    },
  };
  var xs = Qt(Eh()),
    Ig = {
      start() {
        document.addEventListener("turbo:load", () => {
          (0, xs.default)().observe();
        }),
          document.addEventListener("turbo:frame-render", () => {
            (0, xs.default)().observe();
          }),
          document.addEventListener("turbo:render", () => {
            (0, xs.default)().observe();
          }),
          document.addEventListener("ajax:done", () => {
            (0, xs.default)().observe();
          });
      },
    },
    Ah = Ig;
  var le = {
      conditional(r, t) {
        de.delegate(document, r, "input", function (n) {
          let s = document.getElementById(t);
          !s ||
            le
              .chooseTargetElement(s)
              .classList.toggle("hidden", !n.target.value.trim());
        }),
          le.clickBind(t, r);
      },
      conditional_target(r, t, n) {
        de.delegate(document, r, "input", function (s) {
          let l = document.getElementById(n),
            h = document.getElementById(t),
            w = document.querySelector(r);
          if (!!l) {
            if (h)
              !w.value && h.firstElementChild.className === "hidden"
                ? le.chooseTargetElement(h).classList.toggle("hidden", !1)
                : le.chooseTargetElement(h).classList.toggle("hidden", !0);
            else return;
            le.chooseTargetElement(l).classList.toggle(
              "hidden",
              !s.target.value.trim(),
            );
          }
        }),
          le.clickBind(n, r);
      },
      custom(r, t, n, s) {
        r.forEach(function (w) {
          let L = w.event || "input";
          de.delegate(document, w.selector, L, function () {
            let I = document.getElementById(t);
            if (!I) return;
            let B = l(r, n);
            s && (B = s(B)), le.setText(I, B);
          });
        }),
          le.clickBind(t, r[0].selector);
        function l(w, L) {
          let I = [];
          return (
            w.forEach(function (B) {
              let Z = document.querySelector(B.selector),
                Tt = le.getValue(Z),
                ft = B.callback ? B.callback(Tt) : Tt;
              ft.length > 0 && I.push(ft.toString());
            }),
            h(I, L)
          );
        }
        function h(w, L) {
          if (w.length === 0) return "";
          if (typeof L == "string") return w.join(L);
          if (L.length < w.length - 1) return "";
          let I = L.slice();
          I.reverse();
          let B = [];
          return (
            w.forEach(function (Z) {
              let Tt = I.pop();
              (Z = Z.trim()), Z.length > 0 && (B.push(Z), B.push(Tt));
            }),
            B.join("")
          );
        }
      },
      formatted(r, t, n) {
        de.delegate(document, r, "input", function (s) {
          let l = document.getElementById(t);
          !l || le.setText(l, n(le.getValue(s.target)));
        }),
          le.clickBind(t, r);
      },
      gendered(r, t) {
        de.delegate(document, r, "input", function (n) {
          let s = document.getElementById(t);
          if (!s) return;
          let l = s.querySelectorAll('[data-gender="male"]'),
            h = s.querySelectorAll('[data-gender="female"]');
          le.getValue(n.target) === "male"
            ? (l.forEach(function (L) {
                L.classList.remove("hidden");
              }),
              h.forEach(function (L) {
                L.classList.add("hidden");
              }))
            : (l.forEach(function (L) {
                L.classList.add("hidden");
              }),
              h.forEach(function (L) {
                L.classList.remove("hidden");
              }));
        }),
          le.clickBind(t, r);
      },
      getRadioValue(r) {
        return (
          (document.querySelector('[name="' + r.name + '"]:checked') || {})
            .value || ""
        );
      },
      getValue(r) {
        return (r.value || (r.dataset || {}).placeholder || r.placeholder || "")
          .toString()
          .trim();
      },
      join(r, t, n) {
        r.forEach(function (l) {
          de.delegate(document, l, "input", function () {
            let h = document.getElementById(t);
            !h || ((n = le.chooseSeparator(h, n)), le.setText(h, s(r, n)));
          });
        });
        function s(l, h) {
          let w = [];
          return (
            l.forEach(function (L) {
              let I = document.querySelector(L),
                B = le.getValue(I);
              B.length > 0 && w.push(B.toString().trim());
            }),
            w.join(h)
          );
        }
        le.clickBind(t, r[0]);
      },
      optionPicker(r, t) {
        de.delegate(document, r, "input", function (n) {
          let s = document.getElementById(t);
          if (!s) return;
          let l = le.getValue(n.target);
          s.querySelectorAll("[data-option]").forEach(function (h) {
            h.dataset.option === l
              ? h.classList.remove("hidden")
              : h.classList.add("hidden");
          }),
            Rn.allFonts();
        }),
          le.clickBind(t, r);
      },
      placeholder(r, t, n) {
        de.delegate(document, r, "input", () => {
          s(r, t, n);
        }),
          de.delegate(document, t, "input", () => {
            s(r, t, n);
          });
        function s(l, h, w) {
          let L = document.getElementById(w);
          !L ||
            (document.querySelector(l).value === "" &&
              (document.querySelector(t).value !== ""
                ? le.setText(L, "")
                : le.setText(L, "", !0)));
        }
      },
      pluralizable(r) {
        de.delegate(document, r, "input", function (t) {
          let n = le.getValue(t.target).match(/\d+/g),
            s = n && n.length > 1 ? "plural" : "singular";
          document
            .querySelectorAll("[data-pluralizable]")
            .forEach(function (l) {
              s === l.dataset.pluralizable
                ? l.classList.remove("hidden")
                : l.classList.add("hidden");
            });
        });
      },
      raw(r, t) {
        de.delegate(document, r, "input", function (n) {
          let s = document.getElementById(t);
          !s || le.setText(s, le.getValue(n.target));
        }),
          le.clickBind(t, r);
      },
      setText(r, t, n = !1) {
        let s = le.chooseTargetElement(r),
          l = le.formatValue(s, t, n);
        if (s.tagName === "IMG") {
          let h =
            t.length > 0
              ? te.urlize(l)
              : "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
          s.src = h;
        } else
          s.tagName === "INPUT"
            ? ((s.value = l), be.fire(s, "input", null, { bubbles: !0 }))
            : ((s.innerHTML = l.replace(/-/g, "&#8209;")), Rn.font(s));
      },
      clickBind(r, t) {
        de.delegate(document, "#" + r, "click", function (n) {
          if (n.target.tagName === "INPUT") return;
          let s = de.getPosition(document.querySelector(t));
          window.scroll({ top: s.y - 15, left: 0, behavior: "smooth" });
        });
      },
      chooseTargetElement(r) {
        let t = r.querySelectorAll("span, img");
        return t.length > 0 ? t[0] : r;
      },
      chooseSeparator(r, t) {
        return le.chooseTargetElement(r).dataset.binderSeparator || t;
      },
      formatValue(r, t, n) {
        if (n) return t;
        if (t.length === 0) return r.dataset.binderPlaceholder || "";
        let s = r.dataset.binderPrefix || "",
          l = r.dataset.binderSuffix || "",
          h = s + t + l,
          w = r.dataset.binderPadding || "";
        return w.length === 0 ? h : h.padStart(w.length, w.charAt(0));
      },
    },
    Y = le;
  var Bg = {
      start() {
        Y.raw("#invitation_person_name", "child-name"),
          Y.raw("#invitation_person_name", "person-name"),
          Y.raw("#invitation_location", "event-location"),
          Y.raw("#invitation_neighborhood", "address-neighborhood"),
          Y.raw("#invitation_city", "address-city"),
          Y.raw("#invitation_secondary_person_name", "secondary-person-name"),
          Y.raw("#invitation_secondary_location", "secondary-event-location"),
          Y.raw(
            "#invitation_secondary_neighborhood",
            "secondary-address-neighborhood",
          ),
          Y.raw("#invitation_secondary_city", "secondary-address-city"),
          Y.raw("#invitation_starts_at", "event-starts_at"),
          Y.raw("#invitation_public_url", "event-public-url"),
          Y.raw("#invitation_rsvp_closes_on", "event-rsvp-date"),
          Y.raw("#invitation_gift_suggestion", "event-gift-suggestion"),
          Y.join(
            ["#invitation_starts_at_hour", "#invitation_starts_at_minutes"],
            "invitation_starts_at",
            ":",
          ),
          Y.join(
            ["#invitation_person_name", "#invitation_secondary_person_name"],
            "couple-names",
            " & ",
          ),
          Y.join(
            ["#invitation_person_name", "#invitation_secondary_person_name"],
            "couple-names-with-e",
            " e ",
          ),
          Y.join(
            [
              "#invitation_street",
              "#invitation_number",
              "#invitation_complement",
            ],
            "address-building",
            ", ",
          ),
          Y.join(
            [
              "#invitation_street",
              "#invitation_number",
              "#invitation_complement",
              "#invitation_neighborhood",
            ],
            "address-building-neighborhood",
            ", ",
          ),
          Y.join(
            ["#invitation_city", "#invitation_state"],
            "address-city-state",
            " - ",
          ),
          Y.join(
            ["#invitation_neighborhood", "#invitation_city"],
            "address-neighborhood-city",
            " - ",
          ),
          Y.join(
            [
              "#invitation_neighborhood",
              "#invitation_city",
              "#invitation_state",
            ],
            "address-neighborhood-city-state",
            " - ",
          ),
          Y.join(
            [
              "#invitation_secondary_street",
              "#invitation_secondary_number",
              "#invitation_secondary_complement",
            ],
            "secondary-address-building",
            ", ",
          ),
          Y.join(
            [
              "#invitation_secondary_street",
              "#invitation_secondary_number",
              "#invitation_secondary_complement",
              "#invitation_secondary_neighborhood",
            ],
            "secondary-address-building-neighborhood",
            ", ",
          ),
          Y.join(
            ["#invitation_secondary_city", "#invitation_secondary_state"],
            "secondary-address-city-state",
            " - ",
          ),
          Y.join(
            [
              "#invitation_secondary_neighborhood",
              "#invitation_secondary_city",
            ],
            "secondary-address-neighborhood-city",
            " - ",
          ),
          Y.join(
            [
              "#invitation_secondary_neighborhood",
              "#invitation_secondary_city",
              "#invitation_secondary_state",
            ],
            "secondary-address-neighborhood-city-state",
            " - ",
          ),
          Y.join(
            ["#invitation_scheduled_on", "#invitation_city"],
            "event-date-city",
            " | ",
          ),
          Y.formatted(
            "#invitation_classification",
            "event-title-without-article",
            j.classification,
          ),
          Y.formatted(
            "#invitation_person_gender",
            "event-title-customized",
            j.gender_connective,
          ),
          Y.formatted(
            "#invitation_person_gender",
            "event-gender-connective",
            j.gender_connective,
          ),
          Y.formatted("#invitation_scheduled_on", "event-day", j.day),
          Y.formatted("#invitation_scheduled_on", "event-month", j.month),
          Y.formatted("#invitation_scheduled_on", "event-year", j.year),
          Y.formatted(
            "#invitation_scheduled_on",
            "event-short-year",
            j.short_year,
          ),
          Y.formatted(
            "#invitation_scheduled_on",
            "event-month-number",
            j.month_number,
          ),
          Y.formatted(
            "#invitation_scheduled_on",
            "event-short-month",
            j.short_month,
          ),
          Y.formatted("#invitation_scheduled_on", "event-weekday", j.weekday),
          Y.formatted(
            "#invitation_scheduled_on",
            "event-short-weekday",
            j.short_weekday,
          ),
          Y.formatted("#invitation_scheduled_on", "event-date", j.date),
          Y.formatted("#invitation_scheduled_on", "event-date-dot", j.date_dot),
          Y.formatted(
            "#invitation_scheduled_on",
            "event-date-period",
            j.date_period,
          ),
          Y.formatted("#invitation_person_age", "child-age", j.age),
          Y.formatted(
            "#invitation_person_age",
            "child-age-diminutive",
            j.age_diminutive,
          ),
          Y.formatted(
            "#invitation_person_age",
            "child-age-number",
            j.age_number,
          ),
          Y.formatted(
            "#invitation_person_age",
            "child-age-number-secondary",
            j.age_number,
          ),
          Y.formatted(
            "#invitation_person_age",
            "child-age-ordinal-number",
            j.ordinal_number,
          ),
          Y.formatted("#invitation_person_age", "child-age-text", j.age_text),
          Y.formatted("#invitation_person_age", "child-short-age", j.short_age),
          Y.formatted(
            "#invitation_person_age",
            "person-age-celebrate",
            j.celebrate_prefix,
          ),
          Y.formatted(
            "#invitation_starts_at",
            "event-hour-connective",
            j.hour_connective,
          ),
          Y.formatted(
            "#invitation_starts_at",
            "event-hour-with-connective",
            j.simple_hour_connective,
          ),
          Y.formatted("#invitation_starts_at", "event-hour-long", j.hour),
          Y.formatted("#invitation_starts_at", "event-hour-text", j.hour_text),
          Y.formatted(
            "#invitation_starts_at",
            "event-hour_with_prefix",
            j.hour_with_prefix,
          ),
          Y.formatted("#invitation_starts_at", "event-hour-h", j.hour_h),
          Y.formatted(
            "#invitation_starts_at",
            "event-short-hour-h",
            j.short_hour_h,
          ),
          Y.formatted(
            "#invitation_person_name",
            "child-name-initial",
            j.first_letter,
          ),
          Y.formatted(
            "#invitation_person_name",
            "person-name-initial",
            j.first_letter,
          ),
          Y.formatted(
            "#invitation_secondary_person_name",
            "secondary-person-name-initial",
            j.first_letter,
          ),
          Y.formatted(
            "#invitation_gift_suggestion",
            "gift-suggestion-with-title",
            j.gift_suggestion_with_title,
          ),
          Y.formatted(
            "#invitation_secondary_person_name",
            "secondary-person-name-with-prefix",
            j.name_with_prefix,
          ),
          Y.gendered("#invitation_person_gender", "event-gendered-title"),
          Y.pluralizable("#invitation_person_age"),
          Y.optionPicker("#invitation_classification", "event-classification"),
          Y.conditional(
            "#invitation_gift_suggestion",
            "event-gift-suggestion-message",
          ),
          Y.conditional_target(
            "#invitation_gift_suggestion",
            "event-gift-suggestion-default-message",
            "event-gift-suggestion-message",
          ),
          Y.custom(
            [
              { selector: "#invitation_starts_at_hour" },
              { selector: "#invitation_starts_at_minutes" },
            ],
            "invitation_starts_at",
            ":",
          ),
          Y.custom(
            [
              { selector: "#invitation_person_name" },
              { selector: "#invitation_secondary_person_name" },
            ],
            "invitation_public_url",
            " e ",
            j.slug,
          ),
          Y.custom(
            [
              {
                selector: "#invitation_classification",
                callback: j.classification,
              },
              {
                selector: "#invitation_person_gender",
                callback: j.gender_connective,
              },
            ],
            "event-title",
            " ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_classification",
                callback: j.classification,
              },
              {
                selector: "#invitation_person_gender",
                callback: j.gender_connective,
              },
              { selector: "#invitation_person_name" },
            ],
            "event-title-with-connector",
            " ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_classification",
                callback: j.classification,
              },
              {
                selector: "#invitation_person_gender",
                callback: j.gender_connective,
              },
              { selector: "#invitation_person_name" },
            ],
            "event-title-welcoming",
            " ",
            j.event_title_welcoming,
          ),
          Y.custom(
            [
              { selector: "#invitation_person_name" },
              { selector: "#invitation_person_age", callback: j.numbers },
            ],
            "child-name-with-age",
            " faz ",
            j.name_age_connector_pluralizable,
          ),
          Y.custom(
            [
              {
                selector: "#invitation_person_gender",
                callback: j.gender_connective,
              },
              { selector: "#invitation_person_name" },
            ],
            "person-name-with-gender-connective",
            " ",
          ),
          Y.custom(
            [
              { selector: "#invitation_person_name" },
              { selector: "#invitation_person_age", callback: j.age },
            ],
            "person-name-and-age",
            " faz ",
            j.name_age_connector_pluralizable,
          ),
          Y.custom(
            [
              { selector: "#invitation_person_age", callback: j.age },
              {
                selector: "#invitation_person_gender",
                callback: j.gender_connective,
              },
              { selector: "#invitation_person_name" },
            ],
            "person-name-and-age-with-gender",
            [" ", " "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_person_name",
                callback: j.short_birthday_prefix,
              },
              {
                selector: "#invitation_person_gender",
                callback: j.gender_connective,
              },
              { selector: "#invitation_person_name" },
              { selector: "#invitation_person_age", callback: j.age },
            ],
            "person-name-and-age-with-short-birthday-prefix",
            [" ", " ", ", "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_person_age",
                callback: j.age_with_party_prefix,
              },
              {
                selector: "#invitation_person_gender",
                callback: j.gender_connective,
              },
              { selector: "#invitation_person_name" },
            ],
            "person-age-and-name-with-party-prefix",
            [" ", " "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_person_age",
                callback: j.age_with_invite_prefix,
              },
              { selector: "#invitation_person_name" },
            ],
            "person-age-and-name-with-invite-prefix",
            " de ",
          ),
          Y.custom(
            [
              { selector: "#invitation_person_age", callback: j.age },
              { selector: "#invitation_person_name" },
            ],
            "person-age-and-name",
            " de ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.weekday },
              { selector: "#invitation_starts_at" },
            ],
            "event-weekday-hour",
            " | ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.weekday },
              { selector: "#invitation_starts_at" },
            ],
            "event-weekday-hour-with-connective",
            " \xE0s ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.weekday },
              { selector: "#invitation_starts_at", callback: j.hour_text },
            ],
            "event-weekday-hour-readable",
            ", ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at" },
            ],
            "event-short-weekday-hour-double-colon",
            " :: ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at" },
            ],
            "event-short-weekday-hour",
            " | ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at", callback: j.hour_h },
            ],
            "event-short-weekday-hour-without-connective",
            " ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at" },
            ],
            "event-short-weekday-hour-with-connective",
            " \xE0s ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at", callback: j.hour_h },
            ],
            "event-short-weekday-hour-with-colon-and-connective",
            ", \xE0s ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.very_short_weekday,
              },
              { selector: "#invitation_starts_at" },
            ],
            "event-very-short-weekday-hour",
            " | ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.weekday },
              { selector: "#invitation_starts_at", callback: j.hour },
            ],
            "event-weekday-hour-long",
            " | ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
            ],
            "event-day-month",
            " de ",
          ),
          Y.custom(
            [
              { selector: "#invitation_rsvp_closes_on", callback: j.day },
              { selector: "#invitation_rsvp_closes_on", callback: j.month },
            ],
            "event-rsvp",
            " de ",
          ),
          Y.custom(
            [
              { selector: "#invitation_rsvp_closes_on", callback: j.day },
              { selector: "#invitation_rsvp_closes_on", callback: j.month },
              { selector: "#invitation_rsvp_closes_on", callback: j.year },
            ],
            "event-rsvp-full",
            " de ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
              { selector: "#invitation_scheduled_on", callback: j.year },
            ],
            "event-day-month-year-with-connective",
            " de ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
            ],
            "event-day-month-no-connector",
            " ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.short_month },
            ],
            "event-day-short-month",
            " ",
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.weekday },
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
            ],
            "event-weekday-day-month",
            [", ", " de "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
            ],
            "event-short-weekday-day-month",
            [", ", " de "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
              { selector: "#invitation_starts_at" },
            ],
            "event-short-weekday-day-month-hour",
            [", ", " de ", " \xE0s "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
              { selector: "#invitation_scheduled_on", callback: j.year },
              { selector: "#invitation_starts_at" },
            ],
            "event-short-weekday-day-month-year-hour",
            [", ", " de ", " de ", " \xE0s "],
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.month },
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at" },
            ],
            "event-day-month-short-weekday-hour-with-connective",
            [" de ", " - ", " \xE0s "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.short_month },
              { selector: "#invitation_starts_at" },
            ],
            "event-short-weekday-day-short-month-hour",
            [", ", " de ", " \xE0s "],
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.short_month },
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at" },
            ],
            "event-day-short-month-weekday-hour-pipe",
            [" ", " | ", " | "],
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.short_month },
              {
                selector: "#invitation_scheduled_on",
                callback: j.short_weekday,
              },
              { selector: "#invitation_starts_at" },
            ],
            "event-day-short-month-weekday-hour-break-line",
            [" ", "<br>", "<br>"],
          ),
          Y.custom(
            [
              { selector: "#invitation_scheduled_on", callback: j.day },
              { selector: "#invitation_scheduled_on", callback: j.short_month },
            ],
            "event-day-short-month",
            " ",
          ),
          Y.custom(
            [
              { selector: "#invitation_street" },
              { selector: "#invitation_number" },
              { selector: "#invitation_complement" },
              { selector: "#invitation_neighborhood" },
              { selector: "#invitation_city" },
              { selector: "#invitation_state" },
            ],
            "address-complete",
            [", ", ", ", ", ", ". ", " - "],
          ),
          Y.custom(
            [
              { selector: "#invitation_street" },
              { selector: "#invitation_number" },
              { selector: "#invitation_complement" },
              { selector: "#invitation_neighborhood" },
            ],
            "address-building-dash-neighborhood",
            [", ", " - ", ", "],
          ),
          Y.custom(
            [
              { selector: "#invitation_city" },
              { selector: "#invitation_state" },
              { selector: "#invitation_zipcode" },
            ],
            "address-city-state-with-zipcode",
            [" - ", ", "],
          ),
          Y.custom(
            [
              { selector: "#invitation_street" },
              { selector: "#invitation_number" },
              { selector: "#invitation_complement" },
              { selector: "#invitation_neighborhood" },
              { selector: "#invitation_city" },
            ],
            "address-without-state",
            [", ", ", ", ", ", ". "],
          ),
          Y.custom(
            [
              { selector: "#invitation_street" },
              { selector: "#invitation_number" },
              { selector: "#invitation_city" },
            ],
            "address-street-and-city-break-line",
            [", ", "<br>"],
          ),
          Y.custom(
            [
              { selector: "#invitation_secondary_street" },
              { selector: "#invitation_secondary_number" },
              { selector: "#invitation_secondary_complement" },
              { selector: "#invitation_secondary_neighborhood" },
              { selector: "#invitation_secondary_city" },
              { selector: "#invitation_state" },
            ],
            "secondary-address-complete",
            [", ", ", ", ", ", ". ", " - "],
          ),
          Y.custom(
            [
              { selector: "#invitation_location", callback: j.ceremony_prefix },
              { selector: "#invitation_street" },
              { selector: "#invitation_number" },
              { selector: "#invitation_complement" },
              { selector: "#invitation_neighborhood" },
              { selector: "#invitation_city" },
              { selector: "#invitation_state" },
            ],
            "event-ceremony-address",
            [". ", ", ", ", ", ", ", ". ", " - "],
          ),
          Y.custom(
            [
              { selector: "#invitation_location" },
              { selector: "#invitation_street" },
              { selector: "#invitation_number" },
              { selector: "#invitation_complement" },
              { selector: "#invitation_neighborhood" },
              { selector: "#invitation_city" },
              { selector: "#invitation_state" },
            ],
            "event-ceremony-address-without-title",
            [". ", ", ", ", ", ", ", ". ", " - "],
          ),
          Y.custom(
            [
              {
                selector: "#invitation_secondary_location",
                callback: j.reception_prefix,
              },
              { selector: "#invitation_secondary_street" },
              { selector: "#invitation_secondary_number" },
              { selector: "#invitation_secondary_complement" },
              { selector: "#invitation_secondary_neighborhood" },
              { selector: "#invitation_secondary_city" },
              { selector: "#invitation_state" },
            ],
            "event-reception-address",
            [". ", ", ", ", ", ", ", ". ", " - "],
          ),
          Y.custom(
            [
              { selector: "#invitation_secondary_street" },
              { selector: "#invitation_secondary_number" },
              { selector: "#invitation_secondary_complement" },
              { selector: "#invitation_secondary_neighborhood" },
            ],
            "secondary-address-building-dash-neighborhood",
            [", ", " - ", ", "],
          ),
          Y.custom(
            [
              { selector: "#invitation_secondary_city" },
              { selector: "#invitation_secondary_state" },
              { selector: "#invitation_secondary_zipcode" },
            ],
            "secondary-address-city-state-with-zipcode",
            [" - ", ", "],
          ),
          Y.custom(
            [
              { selector: "#invitation_person_name", callback: j.first_letter },
              {
                selector: "#invitation_secondary_person_name",
                callback: j.first_letter,
              },
            ],
            "couple-name-initials-with-ampersand",
            " & ",
          ),
          Y.custom(
            [
              { selector: "#invitation_person_name", callback: j.first_letter },
              {
                selector: "#invitation_secondary_person_name",
                callback: j.first_letter,
              },
            ],
            "couple-name-initials",
            "",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_rsvp_closes_on",
                callback: j.rsvp_with_prefix,
              },
              { selector: "#invitation_public_url" },
            ],
            "event-rsvp-date-and-url",
            " ",
          ),
          Y.custom(
            [
              {
                selector: "#invitation_scheduled_on",
                callback: j.date_dot_default,
              },
              { selector: "invitation_city" },
            ],
            "event-date-period-city",
            " | ",
          ),
          Y.placeholder(
            "#invitation_rsvp_closes_on",
            "#invitation_public_url",
            "event-rsvp",
          ),
          Y.placeholder(
            "#invitation_rsvp_closes_on",
            "#invitation_public_url",
            "event-rsvp-date",
          ),
          Y.placeholder(
            "#invitation_rsvp_closes_on",
            "#invitation_public_url",
            "event-rsvp-full",
          ),
          Y.placeholder(
            "#invitation_rsvp_closes_on",
            "#invitation_public_url",
            "event-rsvp-date-and-url",
          );
      },
    },
    xh = Bg;
  var Th = {
    start() {
      !this.trackerId() ||
        !this.storageAvailable("localStorage") ||
        (this.trackerId().startsWith("UA")
          ? this.legacyAnalytics()
          : this.newAnalytics());
    },
    legacyAnalytics() {
      (function (r, t, n) {
        let s = r.history,
          l = document,
          h = navigator || {},
          w = localStorage,
          L = encodeURIComponent,
          I = s.pushState,
          B = "exception",
          Z = () => Math.random().toString(36),
          Tt = () => (w.cid || (w.cid = Z()), w.cid),
          ft = (Ct) => {
            var bt = [];
            for (var H in Ct)
              Ct.hasOwnProperty(H) &&
                Ct[H] !== void 0 &&
                bt.push(L(H) + "=" + L(Ct[H]));
            return bt.join("&");
          },
          vt = (Ct, bt, H, tt, Mt, zt, $t) => {
            let Vt = "https://www.google-analytics.com/collect",
              ae = ft({
                v: "1",
                ds: "web",
                aip: n.anonymizeIp ? 1 : void 0,
                tid: t,
                cid: Tt(),
                t: Ct || "pageview",
                sd:
                  n.colorDepth && screen.colorDepth
                    ? `${screen.colorDepth}-bits`
                    : void 0,
                dr: l.referrer || void 0,
                dt: l.title,
                dl: l.location.origin + l.location.pathname + l.location.search,
                ul: n.language ? (h.language || "").toLowerCase() : void 0,
                de: n.characterSet ? l.characterSet : void 0,
                sr: n.screenSize
                  ? `${(r.screen || {}).width}x${(r.screen || {}).height}`
                  : void 0,
                vp:
                  n.screenSize && r.visualViewport
                    ? `${(r.visualViewport || {}).width}x${
                        (r.visualViewport || {}).height
                      }`
                    : void 0,
                ec: bt || void 0,
                ea: H || void 0,
                el: tt || void 0,
                ev: Mt || void 0,
                exd: zt || void 0,
                exf: typeof $t != "undefined" && !$t ? 0 : void 0,
              });
            if (h.sendBeacon) h.sendBeacon(Vt, ae);
            else {
              var St = new XMLHttpRequest();
              St.open("POST", Vt, !0), St.send(ae);
            }
          },
          ht = (Ct, bt, H, tt) => vt("event", Ct, bt, H, tt),
          Pt = (Ct, bt) => vt(B, null, null, null, null, Ct, bt);
        (s.pushState = function (Ct) {
          return (
            typeof s.onpushstate == "function" && s.onpushstate({ state: Ct }),
            setTimeout(vt, n.delay || 10),
            I.apply(s, arguments)
          );
        }),
          vt(),
          (r.ma = { trackEvent: ht, trackException: Pt });
      })(window, this.trackerId(), {
        anonymizeIp: !0,
        colorDepth: !0,
        characterSet: !0,
        screenSize: !0,
        language: !0,
      });
    },
    newAnalytics() {
      function r(t) {
        let n = t;
        var s = "XXXXXX",
          l,
          h;
        s == "XXXXXX" ? (l = () => {}) : (l = () => s);
        let w = () => Math.floor(Math.random() * 1e9) + 1,
          L = () => Math.floor(Date.now() / 1e3),
          I = () => (
            sessionStorage._p || (sessionStorage._p = w()), sessionStorage._p
          ),
          B = () => w() + "." + L(),
          Z = () => (
            localStorage.cid_v4 || (localStorage.cid_v4 = B()),
            localStorage.cid_v4
          ),
          Tt = () => (
            sessionStorage.sid || (sessionStorage.sid = L()), sessionStorage.sid
          ),
          ft = () => {
            if (!sessionStorage._ss)
              return (sessionStorage._ss = "1"), sessionStorage._ss;
            sessionStorage.getItem("_ss") != "1";
          },
          vt = "1",
          ht = () => {
            if (sessionStorage.sct) {
              var zt = +sessionStorage.getItem("sct") + +vt;
              sessionStorage.sct = zt;
            } else sessionStorage.sct = vt;
            return sessionStorage.sct;
          },
          Pt = encodeURIComponent,
          Ct = (zt) => {
            var $t = [],
              Vt;
            for (Vt in zt)
              zt.hasOwnProperty(Vt) &&
                zt[Vt] !== void 0 &&
                $t.push(Pt(Vt) + "=" + Pt(zt[Vt]));
            return $t.join("&");
          },
          bt = !1,
          H = "https://www.google-analytics.com/g/collect",
          tt = Ct({
            v: "2",
            tid: n,
            gtm: l(),
            _p: I(),
            sr: (screen.width + "x" + screen.height).toString(),
            ul: (navigator.language || void 0).toLowerCase(),
            cid: Z(),
            _s: "1",
            dl:
              document.location.origin +
              document.location.pathname +
              document.location.search,
            dt: document.title || void 0,
            dr: document.referrer || void 0,
            sid: Tt(),
            sct: ht(),
            seg: "1",
            en: "page_view",
            _ss: ft(),
            _dbg: bt ? 1 : void 0,
          }),
          Mt = H + "?" + tt;
        navigator.sendBeacon
          ? navigator.sendBeacon(Mt)
          : ((h = new XMLHttpRequest()), h.open("POST", Mt, !0));
      }
      r(this.trackerId());
    },
    storageAvailable(r) {
      try {
        var t = window[r],
          n = "__storage_test__";
        return t.setItem(n, n), t.removeItem(n), !0;
      } catch (s) {
        return !1;
      }
    },
    trackerId() {
      let r = document.querySelector("meta[name='analytics']");
      return r && r.getAttribute("content");
    },
  };
  Sh.default.start();
  Ch.start();
  wh.start();
  Ah.start();
  xh.start();
  Th.start();
})();
/* @preserve
    _____ __ _     __                _
   / ___// /(_)___/ /___  ____      (_)___
  / (_ // // // _  // -_)/ __/_    / /(_-<
  \___//_//_/ \_,_/ \__//_/  (_)__/ //___/
                              |___/

  Version: 1.7.4
  Author: Nick Piscitelli (pickykneee)
  Website: https://nickpiscitelli.com
  Documentation: http://nickpiscitelli.github.io/Glider.js
  License: MIT License
  Release Date: October 25th, 2018

*/
/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */
/*! lozad.js - v1.16.0 - 2020-09-06
 * https://github.com/ApoorvSaxena/lozad.js
 * Copyright (c) 2020 Apoorv Saxena; Licensed MIT */
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
//# sourceMappingURL=/assets/internal-8af15c96.js.map
